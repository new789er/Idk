local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local Whitelist = { "EatBlackAssYeah_XXX9", "Black_PsuASSy" }

local function isWhitelisted(player)
    for _, name in ipairs(Whitelist) do
        if player.Name == name then
            return true
        end
    end
    return false
end

if not isWhitelisted(LocalPlayer) then
    game.Players.LocalPlayer:Kick("YOU NOT WHITELIST!")
      return
end

local selection
local nodes = {}

local oldgame = game
local game = workspace.Parent

cloneref = cloneref or function(ref)
	if not getreg then return ref end
	
	local InstanceList
	
	local a = Instance.new("Part")
	for _, c in pairs(getreg()) do
		if type(c) == "table" and #c then
			if rawget(c, "__mode") == "kvs" then
				for d, e in pairs(c) do
					if e == a then
						InstanceList = c
						break
					end
				end
			end
		end
	end
	local f = {}
	function f.invalidate(g)
		if not InstanceList then
			return
		end
		for b, c in pairs(InstanceList) do
			if c == g then
				InstanceList[b] = nil
				return g
			end
		end
	end
	return f.invalidate
end

local EmbeddedModules = {

["Lib"] = function()
--[[
	Lib Module
	
	Container for functions and classes
]]

-- Common Locals
local Main,Lib,Apps,Settings -- Main Containers
local Explorer, Properties, ScriptViewer, Notebook -- Major Apps
local API,RMD,env,service,plr,create,createSimple -- Main Locals

local function initDeps(data)
	Main = data.Main
	Lib = data.Lib
	Apps = data.Apps
	Settings = data.Settings

	API = data.API
	RMD = data.RMD
	env = data.env
	service = data.service
	plr = data.plr
	create = data.create
	createSimple = data.createSimple
end

local function initAfterMain()
	Explorer = Apps.Explorer
	Properties = Apps.Properties
	ScriptViewer = Apps.ScriptViewer
	Notebook = Apps.Notebook
end

local function main()
	local Lib = {}

	local renderStepped = service.RunService.RenderStepped
	local signalWait = renderStepped.wait
	local PH = newproxy() -- Placeholder, must be replaced in constructor
	local SIGNAL = newproxy()

	-- Usually for classes that work with a Roblox Object
	local function initObj(props,mt)
		local type = type
		local function copy(t)
			local res = {}
			for i,v in pairs(t) do
				if v == SIGNAL then
					res[i] = Lib.Signal.new()
				elseif type(v) == "table" then
					res[i] = copy(v)
				else
					res[i] = v
				end
			end		
			return res
		end

		local newObj = copy(props)
		return setmetatable(newObj,mt)
	end

	local function getGuiMT(props,funcs)
		return {__index = function(self,ind) if not props[ind] then return funcs[ind] or self.Gui[ind] end end,
		__newindex = function(self,ind,val) if not props[ind] then self.Gui[ind] = val else rawset(self,ind,val) end end}
	end

	-- Functions

	Lib.FormatLuaString = (function()
		local string = string
		local gsub = string.gsub
		local format = string.format
		local char = string.char
		local cleanTable = {['"'] = '\\"', ['\\'] = '\\\\'}
		for i = 0,31 do
			cleanTable[char(i)] = "\\"..format("%03d",i)
		end
		for i = 127,255 do
			cleanTable[char(i)] = "\\"..format("%03d",i)
		end

		return function(str)
			return gsub(str,"[\"\\\0-\31\127-\255]",cleanTable)
		end
	end)()

	Lib.CheckMouseInGui = function(gui)
		if gui == nil then return false end
		local mouse = Main.Mouse
		local guiPosition = gui.AbsolutePosition
		local guiSize = gui.AbsoluteSize	

		return mouse.X >= guiPosition.X and mouse.X < guiPosition.X + guiSize.X and mouse.Y >= guiPosition.Y and mouse.Y < guiPosition.Y + guiSize.Y
	end

	Lib.IsShiftDown = function()
		return service.UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or service.UserInputService:IsKeyDown(Enum.KeyCode.RightShift)
	end

	Lib.IsCtrlDown = function()
		return service.UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) or service.UserInputService:IsKeyDown(Enum.KeyCode.RightControl)
	end

	Lib.CreateArrow = function(size,num,dir)
		local max = num
		local arrowFrame = createSimple("Frame",{
			BackgroundTransparency = 1,
			Name = "Arrow",
			Size = UDim2.new(0,size,0,size)
		})
		if dir == "up" then
			for i = 1,num do
				local newLine = createSimple("Frame",{
					BackgroundColor3 = Color3.new(220/255,220/255,220/255),
					BorderSizePixel = 0,
					Position = UDim2.new(0,math.floor(size/2)-(i-1),0,math.floor(size/2)+i-math.floor(max/2)-1),
					Size = UDim2.new(0,i+(i-1),0,1),
					Parent = arrowFrame
				})
			end
			return arrowFrame
		elseif dir == "down" then
			for i = 1,num do
				local newLine = createSimple("Frame",{
					BackgroundColor3 = Color3.new(220/255,220/255,220/255),
					BorderSizePixel = 0,
					Position = UDim2.new(0,math.floor(size/2)-(i-1),0,math.floor(size/2)-i+math.floor(max/2)+1),
					Size = UDim2.new(0,i+(i-1),0,1),
					Parent = arrowFrame
				})
			end
			return arrowFrame
		elseif dir == "left" then
			for i = 1,num do
				local newLine = createSimple("Frame",{
					BackgroundColor3 = Color3.new(220/255,220/255,220/255),
					BorderSizePixel = 0,
					Position = UDim2.new(0,math.floor(size/2)+i-math.floor(max/2)-1,0,math.floor(size/2)-(i-1)),
					Size = UDim2.new(0,1,0,i+(i-1)),
					Parent = arrowFrame
				})
			end
			return arrowFrame
		elseif dir == "right" then
			for i = 1,num do
				local newLine = createSimple("Frame",{
					BackgroundColor3 = Color3.new(220/255,220/255,220/255),
					BorderSizePixel = 0,
					Position = UDim2.new(0,math.floor(size/2)-i+math.floor(max/2)+1,0,math.floor(size/2)-(i-1)),
					Size = UDim2.new(0,1,0,i+(i-1)),
					Parent = arrowFrame
				})
			end
			return arrowFrame
		end
		error("r u ok")
	end

	Lib.ParseXML = (function()
		local func = function()
			-- Only exists to parse RMD
			-- from https://github.com/jonathanpoelen/xmlparser

			local string, print, pairs = string, print, pairs

			-- http://lua-users.org/wiki/StringTrim
			local trim = function(s)
				local from = s:match"^%s*()"
				return from > #s and "" or s:match(".*%S", from)
			end

			local gtchar = string.byte('>', 1)
			local slashchar = string.byte('/', 1)
			local D = string.byte('D', 1)
			local E = string.byte('E', 1)

			function parse(s, evalEntities)
				-- remove comments
				s = s:gsub('<!%-%-(.-)%-%->', '')

				local entities, tentities = {}

				if evalEntities then
					local pos = s:find('<[_%w]')
					if pos then
						s:sub(1, pos):gsub('<!ENTITY%s+([_%w]+)%s+(.)(.-)%2', function(name, q, entity)
							entities[#entities+1] = {name=name, value=entity}
						end)
						tentities = createEntityTable(entities)
						s = replaceEntities(s:sub(pos), tentities)
					end
				end

				local t, l = {}, {}

				local addtext = function(txt)
					txt = txt:match'^%s*(.*%S)' or ''
					if #txt ~= 0 then
						t[#t+1] = {text=txt}
					end		
				end

				s:gsub('<([?!/]?)([-:_%w]+)%s*(/?>?)([^<]*)', function(type, name, closed, txt)
					-- open
					if #type == 0 then
						local a = {}
						if #closed == 0 then
							local len = 0
							for all,aname,_,value,starttxt in string.gmatch(txt, "(.-([-_%w]+)%s*=%s*(.)(.-)%3%s*(/?>?))") do
								len = len + #all
								a[aname] = value
								if #starttxt ~= 0 then
									txt = txt:sub(len+1)
									closed = starttxt
									break
								end
							end
						end
						t[#t+1] = {tag=name, attrs=a, children={}}

						if closed:byte(1) ~= slashchar then
							l[#l+1] = t
							t = t[#t].children
						end

						addtext(txt)
						-- close
					elseif '/' == type then
						t = l[#l]
						l[#l] = nil

						addtext(txt)
						-- ENTITY
					elseif '!' == type then
						if E == name:byte(1) then
							txt:gsub('([_%w]+)%s+(.)(.-)%2', function(name, q, entity)
								entities[#entities+1] = {name=name, value=entity}
							end, 1)
						end
						-- elseif '?' == type then
						--	 print('?	' .. name .. ' // ' .. attrs .. '$$')
						-- elseif '-' == type then
						--	 print('comment	' .. name .. ' // ' .. attrs .. '$$')
						-- else
						--	 print('o	' .. #p .. ' // ' .. name .. ' // ' .. attrs .. '$$')
					end
				end)

				return {children=t, entities=entities, tentities=tentities}
			end

			function parseText(txt)
				return parse(txt)
			end

			function defaultEntityTable()
				return { quot='"', apos='\'', lt='<', gt='>', amp='&', tab='\t', nbsp=' ', }
			end

			function replaceEntities(s, entities)
				return s:gsub('&([^;]+);', entities)
			end

			function createEntityTable(docEntities, resultEntities)
				entities = resultEntities or defaultEntityTable()
				for _,e in pairs(docEntities) do
					e.value = replaceEntities(e.value, entities)
					entities[e.name] = e.value
				end
				return entities
			end

			return parseText
		end
		local newEnv = setmetatable({},{__index = getfenv()})
		setfenv(func,newEnv)
		return func()
	end)()

	Lib.FastWait = function(s)
		if not s then return signalWait(renderStepped) end
		local start = tick()
		while tick() - start < s do signalWait(renderStepped) end
	end

	Lib.ButtonAnim = function(button,data)
		local holding = false
		local disabled = false
		local mode = data and data.Mode or 1
		local control = {}

		if mode == 2 then
			local lerpTo = data.LerpTo or Color3.new(0,0,0)
			local delta = data.LerpDelta or 0.2
			control.StartColor = data.StartColor or button.BackgroundColor3
			control.PressColor = data.PressColor or control.StartColor:lerp(lerpTo,delta)
			control.HoverColor = data.HoverColor or control.StartColor:lerp(control.PressColor,0.6)
			control.OutlineColor = data.OutlineColor
		end

		button.InputBegan:Connect(function(input)
			if disabled then return end

			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				if not holding then
					if mode == 1 then
						button.BackgroundTransparency = 0.4
					elseif mode == 2 then
						button.BackgroundColor3 = control.HoverColor
					end
				end
			elseif input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
				holding = true
				if mode == 1 then
					button.BackgroundTransparency = 0
				elseif mode == 2 then
					button.BackgroundColor3 = control.PressColor
					if control.OutlineColor then button.BorderColor3 = control.PressColor end
				end
			end
		end)

		button.InputEnded:Connect(function(input)
			if disabled then return end

			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				if not holding then
					if mode == 1 then
						button.BackgroundTransparency = 1
					elseif mode == 2 then
						button.BackgroundColor3 = control.StartColor
					end
				end
			elseif input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
				holding = false
				if mode == 1 then
					button.BackgroundTransparency = Lib.CheckMouseInGui(button) and 0.4 or 1
				elseif mode == 2 then
					button.BackgroundColor3 = Lib.CheckMouseInGui(button) and control.HoverColor or control.StartColor
					if control.OutlineColor then button.BorderColor3 = control.OutlineColor end
				end
			end
		end)

		control.Disable = function()
			disabled = true
			holding = false

			if mode == 1 then
				button.BackgroundTransparency = 1
			elseif mode == 2 then
				button.BackgroundColor3 = control.StartColor
			end
		end

		control.Enable = function()
			disabled = false
		end

		return control
	end

	Lib.FindAndRemove = function(t,item)
		local pos = table.find(t,item)
		if pos then table.remove(t,pos) end
	end

	Lib.AttachTo = function(obj,data)
		local target,posOffX,posOffY,sizeOffX,sizeOffY,resize,con
		local disabled = false

		local function update()
			if not obj or not target then return end

			local targetPos = target.AbsolutePosition
			local targetSize = target.AbsoluteSize
			obj.Position = UDim2.new(0,targetPos.X + posOffX,0,targetPos.Y + posOffY)
			if resize then obj.Size = UDim2.new(0,targetSize.X + sizeOffX,0,targetSize.Y + sizeOffY) end
		end

		local function setup(o,data)
			obj = o
			data = data or {}
			target = data.Target
			posOffX = data.PosOffX or 0
			posOffY = data.PosOffY or 0
			sizeOffX = data.SizeOffX or 0
			sizeOffY = data.SizeOffY or 0
			resize = data.Resize or false

			if con then con:Disconnect() con = nil end
			if target then
				con = target.Changed:Connect(function(prop)
					if not disabled and prop == "AbsolutePosition" or prop == "AbsoluteSize" then
						update()
					end
				end)
			end

			update()
		end
		setup(obj,data)

		return {
			SetData = function(obj,data)
				setup(obj,data)
			end,
			Enable = function()
				disabled = false
				update()
			end,
			Disable = function()
				disabled = true
			end,
			Destroy = function()
				con:Disconnect()
				con = nil
			end,
		}
	end

	Lib.ProtectedGuis = {}

	Lib.ShowGui = Main.SecureGui

	Lib.ColorToBytes = function(col)
		local round = math.round
		return string.format("%d, %d, %d",round(col.r*255),round(col.g*255),round(col.b*255))
	end

	Lib.ReadFile = function(filename)
		if not env.readfile then return end

		local s,contents = pcall(env.readfile,filename)
		if s and contents then return contents end
	end

	Lib.DeferFunc = function(f,...)
		signalWait(renderStepped)
		return f(...)
	end

	Lib.LoadCustomAsset = function(filepath)
		if not env.getcustomasset or not env.isfile or not env.isfile(filepath) then return end

		return env.getcustomasset(filepath)
	end

	Lib.FetchCustomAsset = function(url,filepath)
		if not env.writefile then return end

		local s,data = pcall(oldgame.HttpGet,game,url)
		if not s then return end

		env.writefile(filepath,data)
		return Lib.LoadCustomAsset(filepath)
	end

	-- Classes

	Lib.Signal = (function()
		local funcs = {}

		local disconnect = function(con)
			local pos = table.find(con.Signal.Connections,con)
			if pos then table.remove(con.Signal.Connections,pos) end
		end

		funcs.Connect = function(self,func)
			if type(func) ~= "function" then error("Attempt to connect a non-function") end		
			local con = {
				Signal = self,
				Func = func,
				Disconnect = disconnect
			}
			self.Connections[#self.Connections+1] = con
			return con
		end

		funcs.Fire = function(self,...)
			for i,v in next,self.Connections do
				xpcall(coroutine.wrap(v.Func),function(e) warn(e.."\n"..debug.traceback()) end,...)
			end
		end

		local mt = {
			__index = funcs,
			__tostring = function(self)
				return "Signal: " .. tostring(#self.Connections) .. " Connections"
			end
		}

		local function new()
			local obj = {}
			obj.Connections = {}

			return setmetatable(obj,mt)
		end

		return {new = new}
	end)()

	Lib.Set = (function()
		local funcs = {}

		funcs.Add = function(self,obj)
			if self.Map[obj] then return end

			local list = self.List
			list[#list+1] = obj
			self.Map[obj] = true
			self.Changed:Fire()
		end

		funcs.AddTable = function(self,t)
			local changed
			local list,map = self.List,self.Map
			for i = 1,#t do
				local elem = t[i]
				if not map[elem] then
					list[#list+1] = elem
					map[elem] = true
					changed = true
				end
			end
			if changed then self.Changed:Fire() end
		end

		funcs.Remove = function(self,obj)
			if not self.Map[obj] then return end

			local list = self.List
			local pos = table.find(list,obj)
			if pos then table.remove(list,pos) end
			self.Map[obj] = nil
			self.Changed:Fire()
		end

		funcs.RemoveTable = function(self,t)
			local changed
			local list,map = self.List,self.Map
			local removeSet = {}
			for i = 1,#t do
				local elem = t[i]
				map[elem] = nil
				removeSet[elem] = true
			end

			for i = #list,1,-1 do
				local elem = list[i]
				if removeSet[elem] then
					table.remove(list,i)
					changed = true
				end
			end
			if changed then self.Changed:Fire() end
		end

		funcs.Set = function(self,obj)
			if #self.List == 1 and self.List[1] == obj then return end

			self.List = {obj}
			self.Map = {[obj] = true}
			self.Changed:Fire()
		end

		funcs.SetTable = function(self,t)
			local newList,newMap = {},{}
			self.List,self.Map = newList,newMap
			table.move(t,1,#t,1,newList)
			for i = 1,#t do
				newMap[t[i]] = true
			end
			self.Changed:Fire()
		end

		funcs.Clear = function(self)
			if #self.List == 0 then return end
			self.List = {}
			self.Map = {}
			self.Changed:Fire()
		end

		local mt = {__index = funcs}

		local function new()
			local obj = setmetatable({
				List = {},
				Map = {},
				Changed = Lib.Signal.new()
			},mt)

			return obj
		end

		return {new = new}
	end)()
	
	Lib.IconMap = (function()
		local funcs = {}
		local IconList = {
			Old = {
				MapId = 483448923,
				IconSize = 16,
				Witdh = 16,
				Height = 16,
				Icons = {
					["Accessory"] = 32;
					["Accoutrement"] = 32;
					["AdService"] = 73;
					["Animation"] = 60;
					["AnimationController"] = 60;
					["AnimationTrack"] = 60;
					["Animator"] = 60;
					["ArcHandles"] = 56;
					["AssetService"] = 72;
					["Attachment"] = 34;
					["Backpack"] = 20;
					["BadgeService"] = 75;
					["BallSocketConstraint"] = 89;
					["BillboardGui"] = 64;
					["BinaryStringValue"] = 4;
					["BindableEvent"] = 67;
					["BindableFunction"] = 66;
					["BlockMesh"] = 8;
					["BloomEffect"] = 90;
					["BlurEffect"] = 90;
					["BodyAngularVelocity"] = 14;
					["BodyForce"] = 14;
					["BodyGyro"] = 14;
					["BodyPosition"] = 14;
					["BodyThrust"] = 14;
					["BodyVelocity"] = 14;
					["BoolValue"] = 4;
					["BoxHandleAdornment"] = 54;
					["BrickColorValue"] = 4;
					["Camera"] = 5;
					["CFrameValue"] = 4;
					["CharacterMesh"] = 60;
					["Chat"] = 33;
					["ClickDetector"] = 41;
					["CollectionService"] = 30;
					["Color3Value"] = 4;
					["ColorCorrectionEffect"] = 90;
					["ConeHandleAdornment"] = 54;
					["Configuration"] = 58;
					["ContentProvider"] = 72;
					["ContextActionService"] = 41;
					["CoreGui"] = 46;
					["CoreScript"] = 18;
					["CornerWedgePart"] = 1;
					["CustomEvent"] = 4;
					["CustomEventReceiver"] = 4;
					["CylinderHandleAdornment"] = 54;
					["CylinderMesh"] = 8;
					["CylindricalConstraint"] = 89;
					["Debris"] = 30;
					["Decal"] = 7;
					["Dialog"] = 62;
					["DialogChoice"] = 63;
					["DoubleConstrainedValue"] = 4;
					["Explosion"] = 36;
					["FileMesh"] = 8;
					["Fire"] = 61;
					["Flag"] = 38;
					["FlagStand"] = 39;
					["FloorWire"] = 4;
					["Folder"] = 70;
					["ForceField"] = 37;
					["Frame"] = 48;
					["GamePassService"] = 19;
					["Glue"] = 34;
					["GuiButton"] = 52;
					["GuiMain"] = 47;
					["GuiService"] = 47;
					["Handles"] = 53;
					["HapticService"] = 84;
					["Hat"] = 45;
					["HingeConstraint"] = 89;
					["Hint"] = 33;
					["HopperBin"] = 22;
					["HttpService"] = 76;
					["Humanoid"] = 9;
					["ImageButton"] = 52;
					["ImageLabel"] = 49;
					["InsertService"] = 72;
					["IntConstrainedValue"] = 4;
					["IntValue"] = 4;
					["JointInstance"] = 34;
					["JointsService"] = 34;
					["Keyframe"] = 60;
					["KeyframeSequence"] = 60;
					["KeyframeSequenceProvider"] = 60;
					["Lighting"] = 13;
					["LineHandleAdornment"] = 54;
					["LocalScript"] = 18;
					["LogService"] = 87;
					["MarketplaceService"] = 46;
					["Message"] = 33;
					["Model"] = 2;
					["ModuleScript"] = 71;
					["Motor"] = 34;
					["Motor6D"] = 34;
					["MoveToConstraint"] = 89;
					["NegateOperation"] = 78;
					["NetworkClient"] = 16;
					["NetworkReplicator"] = 29;
					["NetworkServer"] = 15;
					["NumberValue"] = 4;
					["ObjectValue"] = 4;
					["Pants"] = 44;
					["ParallelRampPart"] = 1;
					["Part"] = 1;
					["ParticleEmitter"] = 69;
					["PartPairLasso"] = 57;
					["PathfindingService"] = 37;
					["Platform"] = 35;
					["Player"] = 12;
					["PlayerGui"] = 46;
					["Players"] = 21;
					["PlayerScripts"] = 82;
					["PointLight"] = 13;
					["PointsService"] = 83;
					["Pose"] = 60;
					["PrismaticConstraint"] = 89;
					["PrismPart"] = 1;
					["PyramidPart"] = 1;
					["RayValue"] = 4;
					["ReflectionMetadata"] = 86;
					["ReflectionMetadataCallbacks"] = 86;
					["ReflectionMetadataClass"] = 86;
					["ReflectionMetadataClasses"] = 86;
					["ReflectionMetadataEnum"] = 86;
					["ReflectionMetadataEnumItem"] = 86;
					["ReflectionMetadataEnums"] = 86;
					["ReflectionMetadataEvents"] = 86;
					["ReflectionMetadataFunctions"] = 86;
					["ReflectionMetadataMember"] = 86;
					["ReflectionMetadataProperties"] = 86;
					["ReflectionMetadataYieldFunctions"] = 86;
					["RemoteEvent"] = 80;
					["RemoteFunction"] = 79;
					["ReplicatedFirst"] = 72;
					["ReplicatedStorage"] = 72;
					["RightAngleRampPart"] = 1;
					["RocketPropulsion"] = 14;
					["RodConstraint"] = 89;
					["RopeConstraint"] = 89;
					["Rotate"] = 34;
					["RotateP"] = 34;
					["RotateV"] = 34;
					["RunService"] = 66;
					["ScreenGui"] = 47;
					["Script"] = 6;
					["ScrollingFrame"] = 48;
					["Seat"] = 35;
					["Selection"] = 55;
					["SelectionBox"] = 54;
					["SelectionPartLasso"] = 57;
					["SelectionPointLasso"] = 57;
					["SelectionSphere"] = 54;
					["ServerScriptService"] = 0;
					["ServerStorage"] = 74;
					["Shirt"] = 43;
					["ShirtGraphic"] = 40;
					["SkateboardPlatform"] = 35;
					["Sky"] = 28;
					["SlidingBallConstraint"] = 89;
					["Smoke"] = 59;
					["Snap"] = 34;
					["Sound"] = 11;
					["SoundService"] = 31;
					["Sparkles"] = 42;
					["SpawnLocation"] = 25;
					["SpecialMesh"] = 8;
					["SphereHandleAdornment"] = 54;
					["SpotLight"] = 13;
					["SpringConstraint"] = 89;
					["StarterCharacterScripts"] = 82;
					["StarterGear"] = 20;
					["StarterGui"] = 46;
					["StarterPack"] = 20;
					["StarterPlayer"] = 88;
					["StarterPlayerScripts"] = 82;
					["Status"] = 2;
					["StringValue"] = 4;
					["SunRaysEffect"] = 90;
					["SurfaceGui"] = 64;
					["SurfaceLight"] = 13;
					["SurfaceSelection"] = 55;
					["Team"] = 24;
					["Teams"] = 23;
					["TeleportService"] = 81;
					["Terrain"] = 65;
					["TerrainRegion"] = 65;
					["TestService"] = 68;
					["TextBox"] = 51;
					["TextButton"] = 51;
					["TextLabel"] = 50;
					["Texture"] = 10;
					["TextureTrail"] = 4;
					["Tool"] = 17;
					["TouchTransmitter"] = 37;
					["TrussPart"] = 1;
					["UnionOperation"] = 77;
					["UserInputService"] = 84;
					["Vector3Value"] = 4;
					["VehicleSeat"] = 35;
					["VelocityMotor"] = 34;
					["WedgePart"] = 1;
					["Weld"] = 34;
					["Workspace"] = 19;

				}
			},
			Vanilla3 = {
				MapId = (114851699900089),
				IconSize = 32,
				Witdh = 25,
				Height = 25,
				Icons = {
					Accessory = 1,
					Accoutrement = 2,
					Actor = 3,
					AdGui = 4,
					AdPortal = 5,
					AdService = 6,
					AdvancedDragger = 7,
					AirController = 8,
					AlignOrientation = 9,
					AlignPosition = 10,
					AnalysticsService = 11,
					AnalysticsSettings = 12,
					AnalyticsService = 13,
					AngularVelocity = 14,
					Animation = 15,
					AnimationClip = 16,
					AnimationClipProvider = 17,
					AnimationController = 18,
					AnimationFromVideoCreatorService = 19,
					AnimationFromVideoCreatorStudioService = 20,
					AnimationRigData = 21,
					AnimationStreamTrack = 22,
					AnimationTrack = 23,
					Animator = 24,
					AppStorageService = 25,
					AppUpdateService = 26,
					ArcHandles = 27,
					AssetCounterService = 28,
					AssetDeliveryProxy = 29,
					AssetImportService = 30,
					AssetImportSession = 31,
					AssetManagerService = 32,
					AssetService = 33,
					AssetSoundEffect = 34,
					Atmosphere = 35,
					Attachment = 36,
					AvatarEditorService = 37,
					AvatarImportService = 38,
					Backpack = 39,
					BackpackItem = 40,
					BadgeService = 41,
					BallSocketConstraint = 42,
					BasePart = 43,
					BasePlayerGui = 44,
					BaseScript = 45,
					BaseWrap = 46,
					Beam = 47,
					BevelMesh = 48,
					BillboardGui = 49,
					BinaryStringValue = 50,
					BindableEvent = 51,
					BindableFunction = 52,
					BlockMesh = 53,
					BloomEffect = 54,
					BlurEffect = 55,
					BodyAngularVelocity = 56,
					BodyColors = 57,
					BodyForce = 58,
					BodyGyro = 59,
					BodyMover = 60,
					BodyPosition = 61,
					BodyThrust = 62,
					BodyVelocity = 63,
					Bone = 64,
					BoolValue = 65,
					BoxHandleAdornment = 66,
					Breakpoint = 67,
					BreakpointManager = 68,
					BrickColorValue = 69,
					BrowserService = 70,
					BubbleChatConfiguration = 71,
					BulkImportService = 72,
					CacheableContentProvider = 73,
					CalloutService = 74,
					Camera = 75,
					CanvasGroup = 76,
					CatalogPages = 77,
					CFrameValue = 78,
					ChangeHistoryService = 79,
					ChannelSelectorSoundEffect = 80,
					CharacterAppearance = 81,
					CharacterMesh = 82,
					Chat = 83,
					ChatInputBarConfiguration = 84,
					ChatWindowConfiguration = 85,
					ChorusSoundEffect = 86,
					ClickDetector = 87,
					ClientReplicator = 88,
					ClimbController = 89,
					Clothing = 90,
					Clouds = 91,
					ClusterPacketCache = 92,
					CollectionService = 93,
					Color3Value = 94,
					ColorCorrectionEffect = 95,
					CommandInstance = 96,
					CommandService = 97,
					CompressorSoundEffect = 98,
					ConeHandleAdornment = 99,
					Configuration = 100,
					ConfigureServerService = 101,
					Constraint = 102,
					ContentProvider = 103,
					ContextActionService = 104,
					Controller = 105,
					ControllerBase = 106,
					ControllerManager = 107,
					ControllerService = 108,
					CookiesService = 109,
					CoreGui = 110,
					CorePackages = 111,
					CoreScript = 112,
					CoreScriptSyncService = 113,
					CornerWedgePart = 114,
					CrossDMScriptChangeListener = 115,
					CSGDictionaryService = 116,
					CurveAnimation = 117,
					CustomEvent = 118,
					CustomEventReceiver = 119,
					CustomSoundEffect = 120,
					CylinderHandleAdornment = 121,
					CylinderMesh = 122,
					CylindricalConstraint = 123,
					DataModel = 124,
					DataModelMesh = 125,
					DataModelPatchService = 126,
					DataModelSession = 127,
					DataStore = 128,
					DataStoreIncrementOptions = 129,
					DataStoreInfo = 130,
					DataStoreKey = 131,
					DataStoreKeyInfo = 132,
					DataStoreKeyPages = 133,
					DataStoreListingPages = 134,
					DataStoreObjectVersionInfo = 135,
					DataStoreOptions = 136,
					DataStorePages = 137,
					DataStoreService = 138,
					DataStoreSetOptions = 139,
					DataStoreVersionPages = 140,
					Debris = 141,
					DebuggablePluginWatcher = 142,
					DebuggerBreakpoint = 143,
					DebuggerConnection = 144,
					DebuggerConnectionManager = 145,
					DebuggerLuaResponse = 146,
					DebuggerManager = 147,
					DebuggerUIService = 148,
					DebuggerVariable = 149,
					DebuggerWatch = 150,
					DebugSettings = 151,
					Decal = 152,
					DepthOfFieldEffect = 153,
					DeviceIdService = 154,
					Dialog = 155,
					DialogChoice = 156,
					DistortionSoundEffect = 157,
					DockWidgetPluginGui = 158,
					DoubleConstrainedValue = 159,
					DraftsService = 160,
					Dragger = 161,
					DraggerService = 162,
					DynamicRotate = 163,
					EchoSoundEffect = 164,
					EmotesPages = 165,
					EqualizerSoundEffect = 166,
					EulerRotationCurve = 167,
					EventIngestService = 168,
					Explosion = 169,
					FaceAnimatorService = 170,
					FaceControls = 171,
					FaceInstance = 172,
					FacialAnimationRecordingService = 173,
					FacialAnimationStreamingService = 174,
					Feature = 175,
					File = 176,
					FileMesh = 177,
					Fire = 178,
					Flag = 179,
					FlagStand = 180,
					FlagStandService = 181,
					FlangeSoundEffect = 182,
					FloatCurve = 183,
					FloorWire = 184,
					FlyweightService = 185,
					Folder = 186,
					ForceField = 187,
					FormFactorPart = 188,
					Frame = 189,
					FriendPages = 190,
					FriendService = 191,
					FunctionalTest = 192,
					GamepadService = 193,
					GamePassService = 194,
					GameSettings = 195,
					GenericSettings = 196,
					Geometry = 197,
					GetTextBoundsParams = 198,
					GlobalDataStore = 199,
					GlobalSettings = 200,
					Glue = 201,
					GoogleAnalyticsConfiguration = 202,
					GroundController = 203,
					GroupService = 204,
					GuiBase = 205,
					GuiBase2d = 206,
					GuiBase3d = 207,
					GuiButton = 208,
					GuidRegistryService = 209,
					GuiLabel = 210,
					GuiMain = 211,
					GuiObject = 212,
					GuiService = 213,
					HandleAdornment = 214,
					Handles = 215,
					HandlesBase = 216,
					HapticService = 217,
					Hat = 218,
					HeightmapImporterService = 219,
					HiddenSurfaceRemovalAsset = 220,
					Highlight = 221,
					HingeConstraint = 222,
					Hint = 223,
					Hole = 224,
					Hopper = 225,
					HopperBin = 226,
					HSRDataContentProvider = 227,
					HttpRbxApiService = 228,
					HttpRequest = 229,
					HttpService = 230,
					Humanoid = 231,
					HumanoidController = 232,
					HumanoidDescription = 233,
					IKControl = 234,
					ILegacyStudioBridge = 235,
					ImageButton = 236,
					ImageHandleAdornment = 237,
					ImageLabel = 238,
					ImporterAnimationSettings = 239,
					ImporterBaseSettings = 240,
					ImporterFacsSettings = 241,
					ImporterGroupSettings = 242,
					ImporterJointSettings = 243,
					ImporterMaterialSettings = 244,
					ImporterMeshSettings = 245,
					ImporterRootSettings = 246,
					IncrementalPatchBuilder = 247,
					InputObject = 248,
					InsertService = 249,
					Instance = 250,
					InstanceAdornment = 251,
					IntConstrainedValue = 252,
					IntValue = 253,
					InventoryPages = 254,
					IXPService = 255,
					JointInstance = 256,
					JointsService = 257,
					KeyboardService = 258,
					Keyframe = 259,
					KeyframeMarker = 260,
					KeyframeSequence = 261,
					KeyframeSequenceProvider = 262,
					LanguageService = 263,
					LayerCollector = 264,
					LegacyStudioBridge = 265,
					Light = 266,
					Lighting = 267,
					LinearVelocity = 268,
					LineForce = 269,
					LineHandleAdornment = 270,
					LocalDebuggerConnection = 271,
					LocalizationService = 272,
					LocalizationTable = 273,
					LocalScript = 274,
					LocalStorageService = 275,
					LodDataEntity = 276,
					LodDataService = 277,
					LoginService = 278,
					LogService = 279,
					LSPFileSyncService = 280,
					LuaSettings = 281,
					LuaSourceContainer = 282,
					LuauScriptAnalyzerService = 283,
					LuaWebService = 284,
					ManualGlue = 285,
					ManualSurfaceJointInstance = 286,
					ManualWeld = 287,
					MarkerCurve = 288,
					MarketplaceService = 289,
					MaterialService = 290,
					MaterialVariant = 291,
					MemoryStoreQueue = 292,
					MemoryStoreService = 293,
					MemoryStoreSortedMap = 294,
					MemStorageConnection = 295,
					MemStorageService = 296,
					MeshContentProvider = 297,
					MeshPart = 298,
					Message = 299,
					MessageBusConnection = 300,
					MessageBusService = 301,
					MessagingService = 302,
					MetaBreakpoint = 303,
					MetaBreakpointContext = 304,
					MetaBreakpointManager = 305,
					Model = 306,
					ModuleScript = 307,
					Motor = 308,
					Motor6D = 309,
					MotorFeature = 310,
					Mouse = 311,
					MouseService = 312,
					MultipleDocumentInterfaceInstance = 313,
					NegateOperation = 314,
					NetworkClient = 315,
					NetworkMarker = 316,
					NetworkPeer = 317,
					NetworkReplicator = 318,
					NetworkServer = 319,
					NetworkSettings = 320,
					NoCollisionConstraint = 321,
					NonReplicatedCSGDictionaryService = 322,
					NotificationService = 323,
					NumberPose = 324,
					NumberValue = 325,
					ObjectValue = 326,
					OrderedDataStore = 327,
					OutfitPages = 328,
					PackageLink = 329,
					PackageService = 330,
					PackageUIService = 331,
					Pages = 332,
					Pants = 333,
					ParabolaAdornment = 334,
					Part = 335,
					PartAdornment = 336,
					ParticleEmitter = 337,
					PartOperation = 338,
					PartOperationAsset = 339,
					PatchMapping = 340,
					Path = 341,
					PathfindingLink = 342,
					PathfindingModifier = 343,
					PathfindingService = 344,
					PausedState = 345,
					PausedStateBreakpoint = 346,
					PausedStateException = 347,
					PermissionsService = 348,
					PhysicsService = 349,
					PhysicsSettings = 350,
					PitchShiftSoundEffect = 351,
					Plane = 352,
					PlaneConstraint = 353,
					Platform = 354,
					Player = 355,
					PlayerEmulatorService = 356,
					PlayerGui = 357,
					PlayerMouse = 358,
					Players = 359,
					PlayerScripts = 360,
					Plugin = 361,
					PluginAction = 362,
					PluginDebugService = 363,
					PluginDragEvent = 364,
					PluginGui = 365,
					PluginGuiService = 366,
					PluginManagementService = 367,
					PluginManager = 368,
					PluginManagerInterface = 369,
					PluginMenu = 370,
					PluginMouse = 371,
					PluginPolicyService = 372,
					PluginToolbar = 373,
					PluginToolbarButton = 374,
					PointLight = 375,
					PointsService = 376,
					PolicyService = 377,
					Pose = 378,
					PoseBase = 379,
					PostEffect = 380,
					PrismaticConstraint = 381,
					ProcessInstancePhysicsService = 382,
					ProximityPrompt = 383,
					ProximityPromptService = 384,
					PublishService = 385,
					PVAdornment = 386,
					PVInstance = 387,
					QWidgetPluginGui = 388,
					RayValue = 389,
					RbxAnalyticsService = 390,
					ReflectionMetadata = 391,
					ReflectionMetadataCallbacks = 392,
					ReflectionMetadataClass = 393,
					ReflectionMetadataClasses = 394,
					ReflectionMetadataEnum = 395,
					ReflectionMetadataEnumItem = 396,
					ReflectionMetadataEnums = 397,
					ReflectionMetadataEvents = 398,
					ReflectionMetadataFunctions = 399,
					ReflectionMetadataItem = 400,
					ReflectionMetadataMember = 401,
					ReflectionMetadataProperties = 402,
					ReflectionMetadataYieldFunctions = 403,
					RemoteDebuggerServer = 404,
					RemoteEvent = 405,
					RemoteFunction = 406,
					RenderingTest = 407,
					RenderSettings = 408,
					ReplicatedFirst = 409,
					ReplicatedStorage = 410,
					ReverbSoundEffect = 411,
					RigidConstraint = 412,
					RobloxPluginGuiService = 413,
					RobloxReplicatedStorage = 414,
					RocketPropulsion = 415,
					RodConstraint = 416,
					RopeConstraint = 417,
					Rotate = 418,
					RotateP = 419,
					RotateV = 420,
					RotationCurve = 421,
					RtMessagingService = 422,
					RunningAverageItemDouble = 423,
					RunningAverageItemInt = 424,
					RunningAverageTimeIntervalItem = 425,
					RunService = 426,
					RuntimeScriptService = 427,
					ScreenGui = 428,
					ScreenshotHud = 429,
					Script = 430,
					ScriptChangeService = 431,
					ScriptCloneWatcher = 432,
					ScriptCloneWatcherHelper = 433,
					ScriptContext = 434,
					ScriptDebugger = 435,
					ScriptDocument = 436,
					ScriptEditorService = 437,
					ScriptRegistrationService = 438,
					ScriptService = 439,
					ScrollingFrame = 440,
					Seat = 441,
					Selection = 442,
					SelectionBox = 443,
					SelectionLasso = 444,
					SelectionPartLasso = 445,
					SelectionPointLasso = 446,
					SelectionSphere = 447,
					ServerReplicator = 448,
					ServerScriptService = 449,
					ServerStorage = 450,
					ServiceProvider = 451,
					SessionService = 452,
					Shirt = 453,
					ShirtGraphic = 454,
					SkateboardController = 455,
					SkateboardPlatform = 456,
					Skin = 457,
					Sky = 458,
					SlidingBallConstraint = 459,
					Smoke = 460,
					Snap = 461,
					SnippetService = 462,
					SocialService = 463,
					SolidModelContentProvider = 464,
					Sound = 465,
					SoundEffect = 466,
					SoundGroup = 467,
					SoundService = 468,
					Sparkles = 469,
					SpawnerService = 470,
					SpawnLocation = 471,
					Speaker = 472,
					SpecialMesh = 473,
					SphereHandleAdornment = 474,
					SpotLight = 475,
					SpringConstraint = 476,
					StackFrame = 477,
					StandalonePluginScripts = 478,
					StandardPages = 479,
					StarterCharacterScripts = 480,
					StarterGear = 481,
					StarterGui = 482,
					StarterPack = 483,
					StarterPlayer = 484,
					StarterPlayerScripts = 485,
					Stats = 486,
					StatsItem = 487,
					Status = 488,
					StopWatchReporter = 489,
					StringValue = 490,
					Studio = 491,
					StudioAssetService = 492,
					StudioData = 493,
					StudioDeviceEmulatorService = 494,
					StudioHighDpiService = 495,
					StudioPublishService = 496,
					StudioScriptDebugEventListener = 497,
					StudioService = 498,
					StudioTheme = 499,
					SunRaysEffect = 500,
					SurfaceAppearance = 501,
					SurfaceGui = 502,
					SurfaceGuiBase = 503,
					SurfaceLight = 504,
					SurfaceSelection = 505,
					SwimController = 506,
					TaskScheduler = 507,
					Team = 508,
					TeamCreateService = 509,
					Teams = 510,
					TeleportAsyncResult = 511,
					TeleportOptions = 512,
					TeleportService = 513,
					TemporaryCageMeshProvider = 514,
					TemporaryScriptService = 515,
					Terrain = 516,
					TerrainDetail = 517,
					TerrainRegion = 518,
					TestService = 519,
					TextBox = 520,
					TextBoxService = 521,
					TextButton = 522,
					TextChannel = 523,
					TextChatCommand = 524,
					TextChatConfigurations = 525,
					TextChatMessage = 526,
					TextChatMessageProperties = 527,
					TextChatService = 528,
					TextFilterResult = 529,
					TextLabel = 530,
					TextService = 531,
					TextSource = 532,
					Texture = 533,
					ThirdPartyUserService = 534,
					ThreadState = 535,
					TimerService = 536,
					ToastNotificationService = 537,
					Tool = 538,
					ToolboxService = 539,
					Torque = 540,
					TorsionSpringConstraint = 541,
					TotalCountTimeIntervalItem = 542,
					TouchInputService = 543,
					TouchTransmitter = 544,
					TracerService = 545,
					TrackerStreamAnimation = 546,
					Trail = 547,
					Translator = 548,
					TremoloSoundEffect = 549,
					TriangleMeshPart = 550,
					TrussPart = 551,
					Tween = 552,
					TweenBase = 553,
					TweenService = 554,
					UGCValidationService = 555,
					UIAspectRatioConstraint = 556,
					UIBase = 557,
					UIComponent = 558,
					UIConstraint = 559,
					UICorner = 560,
					UIGradient = 561,
					UIGridLayout = 562,
					UIGridStyleLayout = 563,
					UILayout = 564,
					UIListLayout = 565,
					UIPadding = 566,
					UIPageLayout = 567,
					UIScale = 568,
					UISizeConstraint = 569,
					UIStroke = 570,
					UITableLayout = 571,
					UITextSizeConstraint = 572,
					UnionOperation = 573,
					UniversalConstraint = 574,
					UnvalidatedAssetService = 575,
					UserGameSettings = 576,
					UserInputService = 577,
					UserService = 578,
					UserSettings = 579,
					UserStorageService = 580,
					ValueBase = 581,
					Vector3Curve = 582,
					Vector3Value = 583,
					VectorForce = 584,
					VehicleController = 585,
					VehicleSeat = 586,
					VelocityMotor = 587,
					VersionControlService = 588,
					VideoCaptureService = 589,
					VideoFrame = 590,
					ViewportFrame = 591,
					VirtualInputManager = 592,
					VirtualUser = 593,
					VisibilityService = 594,
					Visit = 595,
					VoiceChannel = 596,
					VoiceChatInternal = 597,
					VoiceChatService = 598,
					VoiceSource = 599,
					VRService = 600,
					WedgePart = 601,
					Weld = 602,
					WeldConstraint = 603,
					WireframeHandleAdornment = 604,
					Workspace = 605,
					WorldModel = 606,
					WorldRoot = 607,
					WrapLayer = 608,
					WrapTarget = 609,

				}
			},
			NewDark = {
				MapId = 135148380892747,
				Icons = {
					Accessory = 1,
					Actor = 2,
					AdGui = 3,
					AdPortal = 4,
					AirController = 5,
					AlignOrientation = 6,
					AlignPosition = 7,
					AngularVelocity = 8,
					Animation = 9,
					AnimationConstraint = 10,
					AnimationController = 11,
					AnimationFromVideoCreatorService = 12,
					Animator = 13,
					ArcHandles = 14,
					Atmosphere = 15,
					Attachment = 16,
					AudioAnalyzer = 17,
					AudioChannelMixer = 18,
					AudioChannelSplitter = 19,
					AudioChorus = 20,
					AudioCompressor = 21,
					AudioDeviceInput = 22,
					AudioDeviceOutput = 23,
					AudioDistortion = 24,
					AudioEcho = 25,
					AudioEmitter = 26,
					AudioEqualizer = 27,
					AudioFader = 28,
					AudioFilter = 29,
					AudioFlanger = 30,
					AudioGate = 31,
					AudioLimiter = 32,
					AudioListener = 33,
					AudioPitchShifter = 34,
					AudioPlayer = 35,
					AudioRecorder = 36,
					AudioReverb = 37,
					AudioTextToSpeech = 38,
					AuroraScript = 39,
					AvatarEditorService = 40,
					AvatarSettings = 41,
					Backpack = 42,
					BallSocketConstraint = 43,
					BasePlate = 44,
					Beam = 45,
					BillboardGui = 46,
					BindableEvent = 47,
					BindableFunction = 48,
					BlockMesh = 49,
					BloomEffect = 50,
					BlurEffect = 51,
					BodyAngularVelocity = 52,
					BodyColors = 53,
					BodyForce = 54,
					BodyGyro = 55,
					BodyPosition = 56,
					BodyThrust = 57,
					BodyVelocity = 58,
					Bone = 59,
					BoolValue = 60,
					BoxHandleAdornment = 61,
					Breakpoint = 62,
					BrickColorValue = 63,
					BubbleChatConfiguration = 64,
					Buggaroo = 65,
					Camera = 66,
					CanvasGroup = 67,
					CFrameValue = 68,
					ChannelTabsConfiguration = 69,
					CharacterControllerManager = 70,
					CharacterMesh = 71,
					Chat = 72,
					ChatInputBarConfiguration = 73,
					ChatWindowConfiguration = 74,
					ChorusSoundEffect = 75,
					Class = 76,
					Cleanup = 77,
					ClickDetector = 78,
					ClientReplicator = 79,
					ClimbController = 80,
					Clouds = 81,
					Color = 82,
					ColorCorrectionEffect = 83,
					CompressorSoundEffect = 84,
					ConeHandleAdornment = 85,
					Configuration = 86,
					Constant = 87,
					Constructor = 88,
					Controller = 89,
					CoreGui = 90,
					CornerWedgePart = 91,
					CylinderHandleAdornment = 92,
					CylindricalConstraint = 93,
					Decal = 94,
					DepthOfFieldEffect = 95,
					Dialog = 96,
					DialogChoice = 97,
					DistortionSoundEffect = 98,
					DragDetector = 99,
					EchoSoundEffect = 100,
					EditableImage = 101,
					EditableMesh = 102,
					Enum = 103,
					EnumMember = 104,
					EqualizerSoundEffect = 105,
					Event = 106,
					Explosion = 107,
					FaceControls = 108,
					Field = 109,
					File = 110,
					Fire = 111,
					FlangeSoundEffect = 112,
					Folder = 113,
					ForceField = 114,
					Frame = 115,
					Function = 116,
					GameSettings = 117,
					GroundController = 118,
					Handles = 119,
					HapticEffect = 120,
					HapticService = 121,
					HeightmapImporterService = 122,
					Highlight = 123,
					HingeConstraint = 124,
					Humanoid = 125,
					HumanoidDescription = 126,
					IKControl = 127,
					ImageButton = 128,
					ImageHandleAdornment = 129,
					ImageLabel = 130,
					InputAction = 131,
					InputBinding = 132,
					InputContext = 133,
					Interface = 134,
					IntersectOperation = 135,
					Keyword = 136,
					Lighting = 137,
					LinearVelocity = 138,
					LineForce = 139,
					LineHandleAdornment = 140,
					LocalFile = 141,
					LocalizationService = 142,
					LocalizationTable = 143,
					LocalScript = 144,
					MaterialService = 145,
					MaterialVariant = 146,
					MemoryStoreService = 147,
					MeshPart = 148,
					Meshparts = 149,
					MessagingService = 150,
					Method = 151,
					Model = 152,
					Modelgroups = 153,
					Module = 154,
					ModuleScript = 155,
					Motor6D = 156,
					NegateOperation = 157,
					NetworkClient = 158,
					NoCollisionConstraint = 159,
					Operator = 160,
					PackageLink = 161,
					Pants = 162,
					Part = 163,
					ParticleEmitter = 164,
					Path2D = 165,
					PathfindingLink = 166,
					PathfindingModifier = 167,
					PathfindingService = 168,
					PitchShiftSoundEffect = 169,
					Place = 170,
					Placeholder = 171,
					Plane = 172,
					PlaneConstraint = 173,
					Player = 174,
					Players = 175,
					PluginGuiService = 176,
					PointLight = 177,
					PrismaticConstraint = 178,
					Property = 179,
					ProximityPrompt = 180,
					PublishService = 181,
					Reference = 182,
					RemoteEvent = 183,
					RemoteFunction = 184,
					RenderingTest = 185,
					ReplicatedFirst = 186,
					ReplicatedScriptService = 187,
					ReplicatedStorage = 188,
					ReverbSoundEffect = 189,
					RigidConstraint = 190,
					RobloxPluginGuiService = 191,
					RocketPropulsion = 192,
					RodConstraint = 193,
					RopeConstraint = 194,
					Rotate = 195,
					ScreenGui = 196,
					Script = 197,
					ScrollingFrame = 198,
					Seat = 199,
					Selected_Workspace = 200,
					SelectionBox = 201,
					SelectionSphere = 202,
					ServerScriptService = 203,
					ServerStorage = 204,
					Service = 205,
					Shirt = 206,
					ShirtGraphic = 207,
					SkinnedMeshPart = 208,
					Sky = 209,
					Smoke = 210,
					Snap = 211,
					Snippet = 212,
					SocialService = 213,
					Sound = 214,
					SoundEffect = 215,
					SoundGroup = 216,
					SoundService = 217,
					Sparkles = 218,
					SpawnLocation = 219,
					SpecialMesh = 220,
					SphereHandleAdornment = 221,
					SpotLight = 222,
					SpringConstraint = 223,
					StandalonePluginScripts = 224,
					StarterCharacterScripts = 225,
					StarterGui = 226,
					StarterPack = 227,
					StarterPlayer = 228,
					StarterPlayerScripts = 229,
					Struct = 230,
					StyleDerive = 231,
					StyleLink = 232,
					StyleRule = 233,
					StyleSheet = 234,
					SunRaysEffect = 235,
					SurfaceAppearance = 236,
					SurfaceGui = 237,
					SurfaceLight = 238,
					SurfaceSelection = 239,
					SwimController = 240,
					TaskScheduler = 241,
					Team = 242,
					Teams = 243,
					Terrain = 244,
					TerrainDetail = 245,
					TestService = 246,
					TextBox = 247,
					TextBoxService = 248,
					TextButton = 249,
					TextChannel = 250,
					TextChatCommand = 251,
					TextChatService = 252,
					TextLabel = 253,
					TextString = 254,
					Texture = 255,
					Tool = 256,
					Torque = 257,
					TorsionSpringConstraint = 258,
					Trail = 259,
					TremoloSoundEffect = 260,
					TrussPart = 261,
					TypeParameter = 262,
					UGCValidationService = 263,
					UIAspectRatioConstraint = 264,
					UICorner = 265,
					UIDragDetector = 266,
					UIFlexItem = 267,
					UIGradient = 268,
					UIGridLayout = 269,
					UIListLayout = 270,
					UIPadding = 271,
					UIPageLayout = 272,
					UIScale = 273,
					UISizeConstraint = 274,
					UIStroke = 275,
					UITableLayout = 276,
					UITextSizeConstraint = 277,
					UnionOperation = 278,
					Unit = 279,
					UniversalConstraint = 280,
					UnreliableRemoteEvent = 281,
					UpdateAvailable = 282,
					UserService = 283,
					Value = 284,
					Variable = 285,
					VectorForce = 286,
					VehicleSeat = 287,
					VideoDisplay = 288,
					VideoFrame = 289,
					VideoPlayer = 290,
					ViewportFrame = 291,
					VirtualUser = 292,
					VoiceChannel = 293,
					Voicechat = 294,
					VoiceChatService = 295,
					VRService = 296,
					WedgePart = 297,
					Weld = 298,
					WeldConstraint = 299,
					Wire = 300,
					WireframeHandleAdornment = 301,
					Workspace = 302,
					WorldModel = 303,
					WrapDeformer = 304,
					WrapLayer = 305,
					WrapTarget = 306,
					
					Color3Value = 284,
					IntValue = 284,
					NumberValue = 284,
					ObjectValue = 284,
					RayValue = 284,
					StringValue = 284,
					Vector3Value = 284,
				},
				IconSize = 32,
				Witdh = 18,
				Height = 18,
			},
			NewLight = {
				MapId = "",
				Icons = {
					Class = "rbxasset://studio_svg_textures/Shared/InsertableObjects/Light/Standard/",
				},
				IconSize = 16,
				Witdh = 18,
				Height = 18,
			}
		}
		if Settings.ClassIcon and IconList[Settings.ClassIcon] then
			funcs.ExplorerIcons = {
				["MapId"] = IconList[Settings.ClassIcon].MapId,
				["Icons"] = IconList[Settings.ClassIcon].Icons,
				["IconSize"] = IconList[Settings.ClassIcon].IconSize,
				["Witdh"] = IconList[Settings.ClassIcon].Witdh,
				["Height"] = IconList[Settings.ClassIcon].Height}
		else
			funcs.ExplorerIcons = { ["MapId"] = IconList.Old.MapId, ["Icons"] = IconList.Old.Icons, ["IconSize"] = IconList.Old.IconSize }
		end
		
		

		funcs.GetLabel = function(self)
			local label = Instance.new("ImageLabel")
			self:SetupLabel(label)
			return label
		end

		funcs.SetupLabel = function(self,obj)
			obj.BackgroundTransparency = 1
			obj.ImageRectOffset = Vector2.new(0, 0)
			obj.ImageRectSize = Vector2.new(self.IconSizeX, self.IconSizeY)
			obj.ScaleType = Enum.ScaleType.Crop
			obj.Size = UDim2.new(0, self.IconSizeX, 0, self.IconSizeY)
		end

		funcs.Display = function(self,obj,index)
			obj.Image = self.MapId
			obj.ImageRectSize = Vector2.new(self.IconSizeX, self.IconSizeY)
			if not self.NumX then
				obj.ImageRectOffset = Vector2.new(self.IconSizeX*index, 0)
			else
				obj.ImageRectOffset = Vector2.new(self.IconSizeX*(index % self.NumX), self.IconSizeY*math.floor(index / self.NumX))
			end
		end

		funcs.DisplayByKey = function(self, obj, key)
			if self.IndexDict[key] then
				self:Display(obj, self.IndexDict[key])
			else
				local rmdEntry = RMD.Classes[obj.ClassName]
				Explorer.ClassIcons:Display(obj, rmdEntry and rmdEntry.ExplorerImageIndex or 0)
			end
		end

		funcs.IconDehash = function(self, _id)
			return math.floor(_id / 14 % 14), math.floor(_id % 14)
		end
		
		local ClassNameNoImage = {}
		funcs.GetExplorerIcon = function(self, obj, index)
			if Settings.ClassIcon == "Vanilla3" then
				obj.Size = UDim2.fromOffset(16, 16)

				index = (self.ExplorerIcons.Icons[index] or 250) - 1
				obj.ImageRectOffset = Vector2.new(funcs.ExplorerIcons.IconSize * (index % funcs.ExplorerIcons.Height), funcs.ExplorerIcons.IconSize * math.floor(index / funcs.ExplorerIcons.Height))
				obj.ImageRectSize = Vector2.new(funcs.ExplorerIcons.IconSize, funcs.ExplorerIcons.IconSize)
			elseif Settings.ClassIcon == "Old" then
				index = (self.ExplorerIcons.Icons[index] or 0)
				local row, col = self:IconDehash(index)
				local MapSize = Vector2.new(256, 256)
				local pad, border = 2, 1

				obj.Position = UDim2.new(-col - (pad * (col + 1) + border) / funcs.ExplorerIcons.IconSize, 0, -row - (pad * (row + 1) + border) / funcs.ExplorerIcons.IconSize, 0)
				obj.Size = UDim2.new(MapSize.X / funcs.ExplorerIcons.IconSize, 0, MapSize.Y / funcs.ExplorerIcons.IconSize, 0)
			elseif Settings.ClassIcon == "NewLight" or Settings.ClassIcon == "NewDark" then
				local isService = string.find(index, "Service") and game:GetService(index)
				
				obj.Size = UDim2.fromOffset(16, 16)
				index = (self.ExplorerIcons.Icons[index] or (isService and self.ExplorerIcons.Icons.Service) or self.ExplorerIcons.Icons.Placeholder) - 1
				obj.ImageRectOffset = Vector2.new(funcs.ExplorerIcons.IconSize * (index % funcs.ExplorerIcons.Height), funcs.ExplorerIcons.IconSize * math.floor(index / funcs.ExplorerIcons.Height))
				obj.ImageRectSize = Vector2.new(funcs.ExplorerIcons.IconSize, funcs.ExplorerIcons.IconSize)
			else
				index = (self.ExplorerIcons.Icons[index] or 0)
				local row, col = self:IconDehash(index)
				local MapSize = Vector2.new(256, 256)
				local pad, border = 2, 1

				obj.Position = UDim2.new(-col - (pad * (col + 1) + border) / funcs.ExplorerIcons.IconSize, 0, -row - (pad * (row + 1) + border) / funcs.ExplorerIcons.IconSize, 0)
				obj.Size = UDim2.new(MapSize.X / funcs.ExplorerIcons.IconSize, 0, MapSize.Y / funcs.ExplorerIcons.IconSize, 0)
			end
			
		end

		funcs.DisplayExplorerIcons = function(self, Frame, index)
			if Frame:FindFirstChild("IconMap") then
				self:GetExplorerIcon(Frame.IconMap, index)
			else
				Frame.ClipsDescendants = true

				local obj = Instance.new("ImageLabel", Frame)
				obj.BackgroundTransparency = 1
				obj.Image = ("http://www.roblox.com/asset/?id=" .. (self.ExplorerIcons.MapId))
				obj.Name = "IconMap"
				self:GetExplorerIcon(obj, index)
			end
		end

		funcs.SetDict = function(self,dict)
			self.IndexDict = dict
		end

		local mt = {}
		mt.__index = funcs

		local function new(mapId,mapSizeX,mapSizeY,iconSizeX,iconSizeY)
			local obj = setmetatable({
				MapId = mapId,
				MapSizeX = mapSizeX,
				MapSizeY = mapSizeY,
				IconSizeX = iconSizeX,
				IconSizeY = iconSizeY,
				NumX = mapSizeX/iconSizeX,
				IndexDict = {}
			}, mt)
			return obj
		end

		local function newLinear(mapId,iconSizeX,iconSizeY)
			local obj = setmetatable({
				MapId = mapId,
				IconSizeX = iconSizeX,
				IconSizeY = iconSizeY,
				IndexDict = {}
			},mt)
			return obj
		end
		
		local function getIconDataFromName(name)
			return IconList[name] or error("Name not found")
		end

		return {new = new, newLinear = newLinear, getIconDataFromName = getIconDataFromName}
	end)()

	Lib.ScrollBar = (function()
		local funcs = {}
		local user = service.UserInputService
		local mouse = plr:GetMouse()
		local checkMouseInGui = Lib.CheckMouseInGui
		local createArrow = Lib.CreateArrow

		local function drawThumb(self)
			local total = self.TotalSpace
			local visible = self.VisibleSpace
			local index = self.Index
			local scrollThumb = self.GuiElems.ScrollThumb
			local scrollThumbFrame = self.GuiElems.ScrollThumbFrame

			if not (self:CanScrollUp()	or self:CanScrollDown()) then
				scrollThumb.Visible = false
			else
				scrollThumb.Visible = true
			end

			if self.Horizontal then
				scrollThumb.Size = UDim2.new(visible/total,0,1,0)
				if scrollThumb.AbsoluteSize.X < 16 then
					scrollThumb.Size = UDim2.new(0,16,1,0)
				end
				local fs = scrollThumbFrame.AbsoluteSize.X
				local bs = scrollThumb.AbsoluteSize.X
				scrollThumb.Position = UDim2.new(self:GetScrollPercent()*(fs-bs)/fs,0,0,0)
			else
				scrollThumb.Size = UDim2.new(1,0,visible/total,0)
				if scrollThumb.AbsoluteSize.Y < 16 then
					scrollThumb.Size = UDim2.new(1,0,0,16)
				end
				local fs = scrollThumbFrame.AbsoluteSize.Y
				local bs = scrollThumb.AbsoluteSize.Y
				scrollThumb.Position = UDim2.new(0,0,self:GetScrollPercent()*(fs-bs)/fs,0)
			end
		end

		local function createFrame(self)
			local newFrame = createSimple("Frame",{Style=0,Active=true,AnchorPoint=Vector2.new(0,0),BackgroundColor3=Color3.new(0.35294118523598,0.35294118523598,0.35294118523598),BackgroundTransparency=0,BorderColor3=Color3.new(0.10588236153126,0.16470588743687,0.20784315466881),BorderSizePixel=0,ClipsDescendants=false,Draggable=false,Position=UDim2.new(1,-16,0,0),Rotation=0,Selectable=false,Size=UDim2.new(0,16,1,0),SizeConstraint=0,Visible=true,ZIndex=1,Name="ScrollBar",})
			local button1, button2

			if self.Horizontal then
				newFrame.Size = UDim2.new(1,0,0,16)
				button1 = createSimple("ImageButton",{
					Parent = newFrame,
					Name = "Left",
					Size = UDim2.new(0,16,0,16),
					BackgroundTransparency = 1,
					BorderSizePixel = 0,
					AutoButtonColor = false
				})
				createArrow(16,4,"left").Parent = button1
				button2 = createSimple("ImageButton",{
					Parent = newFrame,
					Name = "Right",
					Position = UDim2.new(1,-16,0,0),
					Size = UDim2.new(0,16,0,16),
					BackgroundTransparency = 1,
					BorderSizePixel = 0,
					AutoButtonColor = false
				})
				createArrow(16,4,"right").Parent = button2
			else
				newFrame.Size = UDim2.new(0,16,1,0)
				button1 = createSimple("ImageButton",{
					Parent = newFrame,
					Name = "Up",
					Size = UDim2.new(0,16,0,16),
					BackgroundTransparency = 1,
					BorderSizePixel = 0,
					AutoButtonColor = false
				})
				createArrow(16,4,"up").Parent = button1
				button2 = createSimple("ImageButton",{
					Parent = newFrame,
					Name = "Down",
					Position = UDim2.new(0,0,1,-16),
					Size = UDim2.new(0,16,0,16),
					BackgroundTransparency = 1,
					BorderSizePixel = 0,
					AutoButtonColor = false
				})
				createArrow(16,4,"down").Parent = button2
			end

			local scrollThumbFrame = createSimple("ImageButton", {
				BackgroundTransparency = 1,
				Parent = newFrame
			})
			if self.Horizontal then
				scrollThumbFrame.Position = UDim2.new(0,16,0,0)
				scrollThumbFrame.Size = UDim2.new(1,-32,1,0)
			else
				scrollThumbFrame.Position = UDim2.new(0,0,0,16)
				scrollThumbFrame.Size = UDim2.new(1,0,1,-32)
			end

			local scrollThumb = createSimple("Frame", {
				BackgroundColor3 = Color3.new(120/255, 120/255, 120/255),
				BorderSizePixel = 0,
				Parent = scrollThumbFrame
			})

			local markerFrame = createSimple("Frame", {
				BackgroundTransparency = 1,
				Name = "Markers",
				Size = UDim2.new(1, 0, 1, 0),
				Parent = scrollThumbFrame
			})

			local buttonPress = false
			local thumbPress = false
			local thumbFramePress = false

			local function handleButtonPress(button, scrollDirection)
				if self:CanScroll(scrollDirection) then
					button.BackgroundTransparency = 0.5
					self:ScrollToDirection(scrollDirection)
					self.Scrolled:Fire()
					local buttonTick = tick()
					local releaseEvent
					releaseEvent = user.InputEnded:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
							releaseEvent:Disconnect()
							button.BackgroundTransparency = checkMouseInGui(button) and 0.8 or 1
							buttonPress = false
						end
					end)
					while buttonPress do
						if tick() - buttonTick >= 0.25 and self:CanScroll(scrollDirection) then
							self:ScrollToDirection(scrollDirection)
							self.Scrolled:Fire()
						end
						task.wait()
					end
				end
			end

			button1.MouseButton1Down:Connect(function(input)
				buttonPress = true
				handleButtonPress(button1, "Up")
			end)

			button1.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					button1.BackgroundTransparency = 1
				end
			end)

			button2.MouseButton1Down:Connect(function(input)
				buttonPress = true
				handleButtonPress(button2, "Down")
			end)

			button2.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					button2.BackgroundTransparency = 1
				end
			end)

			scrollThumb.InputBegan:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
					local dir = self.Horizontal and "X" or "Y"
					local lastThumbPos = nil
					thumbPress = true
					scrollThumb.BackgroundTransparency = 0
					local mouseOffset = mouse[dir] - scrollThumb.AbsolutePosition[dir]
					local releaseEvent
					local mouseEvent

					releaseEvent = user.InputEnded:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
							releaseEvent:Disconnect()
							if mouseEvent then mouseEvent:Disconnect() end
							scrollThumb.BackgroundTransparency = 0.2
							thumbPress = false
						end
					end)

					mouseEvent = user.InputChanged:Connect(function(input)
						if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) and thumbPress then
							local thumbFrameSize = scrollThumbFrame.AbsoluteSize[dir] - scrollThumb.AbsoluteSize[dir]
							local pos = mouse[dir] - scrollThumbFrame.AbsolutePosition[dir] - mouseOffset
							if pos > thumbFrameSize then pos = thumbFrameSize
							elseif pos < 0 then pos = 0 end
							if lastThumbPos ~= pos then
								lastThumbPos = pos
								self:ScrollTo(math.floor(0.5 + pos / thumbFrameSize * (self.TotalSpace - self.VisibleSpace)))
							end
						end
					end)
				end
			end)

			scrollThumb.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
					scrollThumb.BackgroundTransparency = 0
				end
			end)

			scrollThumbFrame.InputBegan:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and not checkMouseInGui(scrollThumb) then
					local dir = self.Horizontal and "X" or "Y"
					local scrollDir = (mouse[dir] >= scrollThumb.AbsolutePosition[dir] + scrollThumb.AbsoluteSize[dir]) and 1 or 0
					local function doTick()
						local scrollSize = self.VisibleSpace - 1
						if scrollDir == 0 and mouse[dir] < scrollThumb.AbsolutePosition[dir] then
							self:ScrollTo(self.Index - scrollSize)
						elseif scrollDir == 1 and mouse[dir] >= scrollThumb.AbsolutePosition[dir] + scrollThumb.AbsoluteSize[dir] then
							self:ScrollTo(self.Index + scrollSize)
						end
					end

					thumbPress = false
					thumbFramePress = true
					doTick()
					local thumbFrameTick = tick()
					local releaseEvent
					releaseEvent = user.InputEnded:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
							releaseEvent:Disconnect()
							thumbFramePress = false
						end
					end)

					while thumbFramePress do
						if tick() - thumbFrameTick >= 0.3 and checkMouseInGui(scrollThumbFrame) then
							doTick()
						end
						task.wait()
					end
				end
			end)

			newFrame.MouseWheelForward:Connect(function()
				self:ScrollTo(self.Index - self.WheelIncrement)
			end)

			newFrame.MouseWheelBackward:Connect(function()
				self:ScrollTo(self.Index + self.WheelIncrement)
			end)

			self.GuiElems.ScrollThumb = scrollThumb
			self.GuiElems.ScrollThumbFrame = scrollThumbFrame
			self.GuiElems.Button1 = button1
			self.GuiElems.Button2 = button2
			self.GuiElems.MarkerFrame = markerFrame

			return newFrame
		end

		funcs.Update = function(self,nocallback)
			local total = self.TotalSpace
			local visible = self.VisibleSpace
			local index = self.Index
			local button1 = self.GuiElems.Button1
			local button2 = self.GuiElems.Button2

			self.Index = math.clamp(self.Index, 0, math.max(0, total - visible))

			if self.LastTotalSpace ~= self.TotalSpace then
				self.LastTotalSpace = self.TotalSpace
				self:UpdateMarkers()
			end

			if self:CanScrollUp() then
				for i,v in pairs(button1.Arrow:GetChildren()) do
					v.BackgroundTransparency = 0
				end
			else
				button1.BackgroundTransparency = 1
				for i,v in pairs(button1.Arrow:GetChildren()) do
					v.BackgroundTransparency = 0.5
				end
			end
			if self:CanScrollDown() then
				for i,v in pairs(button2.Arrow:GetChildren()) do
					v.BackgroundTransparency = 0
				end
			else
				button2.BackgroundTransparency = 1
				for i,v in pairs(button2.Arrow:GetChildren()) do
					v.BackgroundTransparency = 0.5
				end
			end

			drawThumb(self)
		end

		funcs.UpdateMarkers = function(self)
			local markerFrame = self.GuiElems.MarkerFrame
			markerFrame:ClearAllChildren()

			for i,v in pairs(self.Markers) do
				if i < self.TotalSpace then
					createSimple("Frame", {
						BackgroundTransparency = 0,
						BackgroundColor3 = v,
						BorderSizePixel = 0,
						Position = self.Horizontal and UDim2.new(i/self.TotalSpace,0,1,-6) or UDim2.new(1,-6,i/self.TotalSpace,0),
						Size = self.Horizontal and UDim2.new(0,1,0,6) or UDim2.new(0,6,0,1),
						Name = "Marker"..tostring(i),
						Parent = markerFrame
					})
				end
			end
		end

		funcs.AddMarker = function(self,ind,color)
			self.Markers[ind] = color or Color3.new(0,0,0)
		end
		funcs.ScrollTo = function(self, ind, nocallback)
			self.Index = ind
			self:Update()
			if not nocallback then
				self.Scrolled:Fire()
			end
		end
		funcs.ScrollUp = function(self)
			self.Index = self.Index - self.Increment
			self:Update()
		end
		funcs.CanScroll = function(self, direction)
			if direction == "Up" then
				return self:CanScrollUp()
			elseif direction == "Down" then
				return self:CanScrollDown()
			end
			return false
		end
		funcs.ScrollDown = function(self)
			self.Index = self.Index + self.Increment
			self:Update()
		end
		funcs.CanScrollUp = function(self)
			return self.Index > 0
		end
		funcs.CanScrollDown = function(self)
			return self.Index + self.VisibleSpace < self.TotalSpace
		end
		funcs.GetScrollPercent = function(self)
			return self.Index/(self.TotalSpace-self.VisibleSpace)
		end
		funcs.SetScrollPercent = function(self,perc)
			self.Index = math.floor(perc*(self.TotalSpace-self.VisibleSpace))
			self:Update()
		end
		funcs.ScrollToDirection = function(self, Direaction)
			if Direaction == "Up" then
				self:ScrollUp()
			elseif Direaction == "Down" then
				self:ScrollDown()
			end
		end

		funcs.Texture = function(self,data)
			self.ThumbColor = data.ThumbColor or Color3.new(0,0,0)
			self.ThumbSelectColor = data.ThumbSelectColor or Color3.new(0,0,0)
			self.GuiElems.ScrollThumb.BackgroundColor3 = data.ThumbColor or Color3.new(0,0,0)
			self.Gui.BackgroundColor3 = data.FrameColor or Color3.new(0,0,0)
			self.GuiElems.Button1.BackgroundColor3 = data.ButtonColor or Color3.new(0,0,0)
			self.GuiElems.Button2.BackgroundColor3 = data.ButtonColor or Color3.new(0,0,0)
			for i,v in pairs(self.GuiElems.Button1.Arrow:GetChildren()) do
				v.BackgroundColor3 = data.ArrowColor or Color3.new(0,0,0)
			end
			for i,v in pairs(self.GuiElems.Button2.Arrow:GetChildren()) do
				v.BackgroundColor3 = data.ArrowColor or Color3.new(0,0,0)
			end
		end

		funcs.SetScrollFrame = function(self,frame)
			if self.ScrollUpEvent then self.ScrollUpEvent:Disconnect() self.ScrollUpEvent = nil end
			if self.ScrollDownEvent then self.ScrollDownEvent:Disconnect() self.ScrollDownEvent = nil end
			self.ScrollUpEvent = frame.MouseWheelForward:Connect(function() self:ScrollTo(self.Index - self.WheelIncrement) end)
			self.ScrollDownEvent = frame.MouseWheelBackward:Connect(function() self:ScrollTo(self.Index + self.WheelIncrement) end)
		end

		local mt = {}
		mt.__index = funcs

		local function new(hor)
			local obj = setmetatable({
				Index = 0,
				VisibleSpace = 0,
				TotalSpace = 0,
				Increment = 1,
				WheelIncrement = 1,
				Markers = {},
				GuiElems = {},
				Horizontal = hor,
				LastTotalSpace = 0,
				Scrolled = Lib.Signal.new()
			},mt)
			obj.Gui = createFrame(obj)
			obj:Texture({
				ThumbColor = Color3.fromRGB(60,60,60),
				ThumbSelectColor = Color3.fromRGB(75,75,75),
				ArrowColor = Color3.new(1,1,1),
				FrameColor = Color3.fromRGB(40,40,40),
				ButtonColor = Color3.fromRGB(75,75,75)
			})
			return obj
		end

		return {new = new}
	end)()

	Lib.Window = (function()
		local funcs = {}
		local static = {MinWidth = 200, FreeWidth = 200}
		local mouse = plr:GetMouse()
		local sidesGui,alignIndicator
		local visibleWindows = {}
		local leftSide = {Width = 300, Windows = {}, ResizeCons = {}, Hidden = true}
		local rightSide = {Width = 300, Windows = {}, ResizeCons = {}, Hidden = true}

		local displayOrderStart
		local sideDisplayOrder
		local sideTweenInfo = TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
		local tweens = {}
		local isA = game.IsA

		local theme = {
			MainColor1 = Color3.fromRGB(52,52,52),
			MainColor2 = Color3.fromRGB(45,45,45),
			Button = Color3.fromRGB(60,60,60)
		}

		local function stopTweens()
			for i = 1,#tweens do
				tweens[i]:Cancel()
			end
			tweens = {}
		end

		local function resizeHook(self,resizer,dir)
			local pressing = false
			
			local guiMain = self.GuiElems.Main
			
			resizer.MouseEnter:Connect(function() resizer.BackgroundTransparency = 0.5 end)
			resizer.MouseButton1Down:Connect(function() pressing = true resizer.BackgroundTransparency = 0.5 end)
			resizer.MouseButton1Up:Connect(function() pressing = false resizer.BackgroundTransparency = 1 end)
			
			
			
			resizer.InputBegan:Connect(function(input)
				if not self.Dragging and not self.Resizing and self.Resizable and self.ResizableInternal and pressing then
					local isH = dir:find("[WE]") and true
					local isV = dir:find("[NS]") and true
					local signX = dir:find("W",1,true) and -1 or 1
					local signY = dir:find("N",1,true) and -1 or 1

					if self.Minimized and isV then return end
					
					if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
						
						local releaseEvent, mouseEvent

						local offX = input.Position.X - resizer.AbsolutePosition.X
						local offY = input.Position.Y - resizer.AbsolutePosition.Y

						self.Resizing = resizer
						
						releaseEvent = service.UserInputService.InputEnded:Connect(function(input)
							if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
								releaseEvent:Disconnect()
								if mouseEvent then mouseEvent:Disconnect() end
								self.Resizing = false
								resizer.BackgroundTransparency = 1
							end
						end)

						mouseEvent = service.UserInputService.InputChanged:Connect(function(input)
							if self.Resizable and self.ResizableInternal and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
								self:StopTweens()
								local deltaX = input.Position.X - resizer.AbsolutePosition.X - offX
								local deltaY = input.Position.Y - resizer.AbsolutePosition.Y - offY

								if guiMain.AbsoluteSize.X + deltaX * signX < self.MinX then deltaX = signX * (self.MinX - guiMain.AbsoluteSize.X) end
								if guiMain.AbsoluteSize.Y + deltaY * signY < self.MinY then deltaY = signY * (self.MinY - guiMain.AbsoluteSize.Y) end
								if signY < 0 and guiMain.AbsolutePosition.Y + deltaY < 0 then deltaY = -guiMain.AbsolutePosition.Y end

								guiMain.Position = guiMain.Position + UDim2.new(0, (signX < 0 and deltaX or 0), 0, (signY < 0 and deltaY or 0))
								self.SizeX = self.SizeX + (isH and deltaX * signX or 0)
								self.SizeY = self.SizeY + (isV and deltaY * signY or 0)
								guiMain.Size = UDim2.new(0, self.SizeX, 0, self.Minimized and 20 or self.SizeY)
							end
						end)
					end
				end
			end)

			resizer.InputEnded:Connect(function(input)
				--if input.UserInputType == Enum.UserInputType.Touch and Main.AllowDraggableOnMobile == false then return end
				if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) and self.Resizing ~= resizer then
					resizer.BackgroundTransparency = 1
				end
			end)
		end

		local updateWindows

		local function moveToTop(window)
			local found = table.find(visibleWindows,window)
			if found then
				table.remove(visibleWindows,found)
				table.insert(visibleWindows,1,window)
				updateWindows()
			end
		end

		local function sideHasRoom(side,neededSize)
			local maxY = sidesGui.AbsoluteSize.Y - (math.max(0,#side.Windows - 1) * 4)
			local inc = 0
			for i,v in pairs(side.Windows) do
				inc = inc + (v.MinY or 100)
				if inc > maxY - neededSize then return false end
			end

			return true
		end

		local function getSideInsertPos(side,curY)
			local pos = #side.Windows + 1
			local range = {0,sidesGui.AbsoluteSize.Y}

			for i,v in pairs(side.Windows) do
				local midPos = v.PosY + v.SizeY/2
				if curY <= midPos then
					pos = i
					range[2] = midPos
					break
				else
					range[1] = midPos
				end
			end

			return pos,range
		end

		local function focusInput(self,obj)
			if isA(obj,"GuiButton") then
				obj.MouseButton1Down:Connect(function()
					moveToTop(self)
				end)
			elseif isA(obj,"TextBox") then
				obj.Focused:Connect(function()
					moveToTop(self)
				end)
			end
		end

		local createGui = function(self)
			local gui = create({
				{1,"ScreenGui",{Name="Window",}},
				{2,"Frame",{Active=true,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Main",Parent={1},Position=UDim2.new(0,0,0,0),Size=UDim2.new(0,300,0,300),}},
				--[[background mod set to 0.05]]	{3,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,Name="Content",Parent={2},Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),ClipsDescendants=true}},
				{4,"Frame",{BackgroundColor3=Color3.fromRGB(33,33,33),BorderSizePixel=0,Name="Line",Parent={3},Size=UDim2.new(1,0,0,1),}},
				{5,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="TopBar",Parent={2},Size=UDim2.new(1,0,0,20),Text = ""}},
				{6,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={5},Position=UDim2.new(0,5,0,0),Size=UDim2.new(1,-10,0,20),Text="Window",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0}},
				{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Close",Parent={5},Position=UDim2.new(1,-18,0,2),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
				{8,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5054663650",Parent={7},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,10,0,10),}},
				{9,"UICorner",{CornerRadius=UDim.new(0,4),Parent={7},}},
				--[[lol mod]]	{9,"UICorner",{CornerRadius=UDim.new(0,4),Parent={2},}},
				{10,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Minimize",Parent={5},Position=UDim2.new(1,-36,0,2),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
				{11,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034768003",Parent={10},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,10,0,10),}},
				{12,"UICorner",{CornerRadius=UDim.new(0,4),Parent={10},}},
				{13,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1427967925",Name="Outlines",Parent={2},Position=UDim2.new(0,-5,0,-5),ScaleType=1,Size=UDim2.new(1,10,1,10),SliceCenter=Rect.new(6,6,25,25),TileSize=UDim2.new(0,20,0,20),}},
				{14,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="ResizeControls",Parent={2},Position=UDim2.new(0,-5,0,-5),Size=UDim2.new(1,10,1,10),}},
				{15,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="North",Parent={14},Position=UDim2.new(0,5,0,0),Size=UDim2.new(1,-10,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{16,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="South",Parent={14},Position=UDim2.new(0,5,1,-5),Size=UDim2.new(1,-10,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{17,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="NorthEast",Parent={14},Position=UDim2.new(1,-5,0,0),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{18,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="East",Parent={14},Position=UDim2.new(1,-5,0,5),Size=UDim2.new(0,5,1,-10),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{19,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="West",Parent={14},Position=UDim2.new(0,0,0,5),Size=UDim2.new(0,5,1,-10),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{20,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SouthEast",Parent={14},Position=UDim2.new(1,-5,1,-5),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{21,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="NorthWest",Parent={14},Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{22,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SouthWest",Parent={14},Position=UDim2.new(0,0,1,-5),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
			})

			local guiMain = gui.Main
			local guiTopBar = guiMain.TopBar
			local guiResizeControls = guiMain.ResizeControls

			self.GuiElems.Main = guiMain
			self.GuiElems.TopBar = guiMain.TopBar
			self.GuiElems.Content = guiMain.Content
			self.GuiElems.Line = guiMain.Content.Line
			self.GuiElems.Outlines = guiMain.Outlines
			self.GuiElems.Title = guiTopBar.Title
			self.GuiElems.Close = guiTopBar.Close
			self.GuiElems.Minimize = guiTopBar.Minimize
			self.GuiElems.ResizeControls = guiResizeControls
			self.ContentPane = guiMain.Content
			
			-- dont mind this, im testing what if the frame background is blurry 
			--blur.new(guiMain.Content, "Rectangle")

			--blur.updateAll()
			
			local ButtonDown = false
			guiTopBar.MouseButton1Down:Connect(function() ButtonDown = true end)
			guiTopBar.MouseButton1Up:Connect(function() ButtonDown = false end)

			if Settings.Window.TitleOnMiddle then
				self.GuiElems.Title.TextXAlignment = 2
				self.GuiElems.Title.Size = UDim2.new(1,-20,0,20)
			end

			if Settings.Window.Transparency then
				self.GuiElems.Content.BackgroundTransparency = Settings.Window.Transparency
				--self.GuiElems
			end


			guiTopBar.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					if self.Draggable then
						local releaseEvent, mouseEvent

						local maxX = sidesGui.AbsoluteSize.X
						local initX = guiMain.AbsolutePosition.X
						local initY = guiMain.AbsolutePosition.Y
						local offX = input.Position.X - initX
						local offY = input.Position.Y - initY

						local alignInsertPos, alignInsertSide

						guiDragging = true

						releaseEvent = service.UserInputService.InputEnded:Connect(function(input)
							if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
								releaseEvent:Disconnect()
								if mouseEvent then mouseEvent:Disconnect() end
								guiDragging = false
								alignIndicator.Parent = nil
								if alignInsertSide then
									local targetSide = (alignInsertSide == "left" and leftSide) or (alignInsertSide == "right" and rightSide)
									self:AlignTo(targetSide, alignInsertPos)
								end
							end
						end)

						mouseEvent = service.UserInputService.InputChanged:Connect(function(input)
							if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) and self.Draggable and not self.Closed and ButtonDown then
								if self.Aligned then
									if leftSide.Resizing or rightSide.Resizing then return end
									local posX, posY = input.Position.X - offX, input.Position.Y - offY
									local delta = math.sqrt((posX - initX)^2 + (posY - initY)^2)
									if delta >= 5 then
										self:SetAligned(false)
									end
								else
									local inputX, inputY = input.Position.X, input.Position.Y
									local posX, posY = inputX - offX, inputY - offY
									if posY < 0 then posY = 0 end
									guiMain.Position = UDim2.new(0, posX, 0, posY)

									if self.Resizable and self.Alignable then
										if inputX < 25 then
											if sideHasRoom(leftSide, self.MinY or 100) then
												local insertPos, range = getSideInsertPos(leftSide, inputY)
												alignIndicator.Indicator.Position = UDim2.new(0, -15, 0, range[1])
												alignIndicator.Indicator.Size = UDim2.new(0, 40, 0, range[2] - range[1])
												Lib.ShowGui(alignIndicator)
												alignInsertPos = insertPos
												alignInsertSide = "left"
												return
											end
										elseif inputX >= maxX - 25 then
											if sideHasRoom(rightSide, self.MinY or 100) then
												local insertPos, range = getSideInsertPos(rightSide, inputY)
												alignIndicator.Indicator.Position = UDim2.new(0, maxX - 25, 0, range[1])
												alignIndicator.Indicator.Size = UDim2.new(0, 40, 0, range[2] - range[1])
												Lib.ShowGui(alignIndicator)
												alignInsertPos = insertPos
												alignInsertSide = "right"
												return
											end
										end
									end
									alignIndicator.Parent = nil
									alignInsertPos = nil
									alignInsertSide = nil
								end
							end
						end)
					end
				end
			end)

			guiTopBar.Close.MouseButton1Click:Connect(function()
				if self.Closed then return end
				self:Close()
			end)

			guiTopBar.Minimize.MouseButton1Click:Connect(function()
				if self.Closed then return end
				if self.Aligned then
					self:SetAligned(false)
				else
					self:SetMinimized()
				end
			end)

			guiTopBar.Minimize.MouseButton2Click:Connect(function()
				if self.Closed then return end
				if not self.Aligned then
					self:SetMinimized(nil,2)
					guiTopBar.Minimize.BackgroundTransparency = 1
				end
			end)

			guiMain.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch and not self.Aligned and not self.Closed then
					moveToTop(self)
				end
			end)

			guiMain:GetPropertyChangedSignal("AbsolutePosition"):Connect(function()
				local absPos = guiMain.AbsolutePosition
				self.PosX = absPos.X
				self.PosY = absPos.Y
			end)

			resizeHook(self,guiResizeControls.North,"N")
			resizeHook(self,guiResizeControls.NorthEast,"NE")
			resizeHook(self,guiResizeControls.East,"E")
			resizeHook(self,guiResizeControls.SouthEast,"SE")
			resizeHook(self,guiResizeControls.South,"S")
			resizeHook(self,guiResizeControls.SouthWest,"SW")
			resizeHook(self,guiResizeControls.West,"W")
			resizeHook(self,guiResizeControls.NorthWest,"NW")

			guiMain.Size = UDim2.new(0,self.SizeX,0,self.SizeY)

			gui.DescendantAdded:Connect(function(obj) focusInput(self,obj) end)
			local descs = gui:GetDescendants()
			for i = 1,#descs do
				focusInput(self,descs[i])
			end

			self.MinimizeAnim = Lib.ButtonAnim(guiTopBar.Minimize)
			self.CloseAnim = Lib.ButtonAnim(guiTopBar.Close)

			return gui
		end

		local function updateSideFrames(noTween)
			stopTweens()
			leftSide.Frame.Size = UDim2.new(0,leftSide.Width,1,0)
			rightSide.Frame.Size = UDim2.new(0,rightSide.Width,1,0)
			leftSide.Frame.Resizer.Position = UDim2.new(0,leftSide.Width,0,0)
			rightSide.Frame.Resizer.Position = UDim2.new(0,-5,0,0)

			--leftSide.Frame.Visible = (#leftSide.Windows > 0)
			--rightSide.Frame.Visible = (#rightSide.Windows > 0)

			--[[if #leftSide.Windows > 0 and leftSide.Frame.Position == UDim2.new(0,-leftSide.Width-5,0,0) then
				leftSide.Frame:TweenPosition(UDim2.new(0,0,0,0),Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.3,true)
			elseif #leftSide.Windows == 0 and leftSide.Frame.Position == UDim2.new(0,0,0,0) then
				leftSide.Frame:TweenPosition(UDim2.new(0,-leftSide.Width-5,0,0),Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.3,true)
			end
			local rightTweenPos = (#rightSide.Windows == 0 and UDim2.new(1,5,0,0) or UDim2.new(1,-rightSide.Width,0,0))
			rightSide.Frame:TweenPosition(rightTweenPos,Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.3,true)]]
			local leftHidden = #leftSide.Windows == 0 or leftSide.Hidden
			local rightHidden = #rightSide.Windows == 0 or rightSide.Hidden
			local leftPos = (leftHidden and UDim2.new(0,-leftSide.Width-10,0,0) or UDim2.new(0,0,0,0))
			local rightPos = (rightHidden and UDim2.new(1,10,0,0) or UDim2.new(1,-rightSide.Width,0,0))

			sidesGui.LeftToggle.Text = leftHidden and ">" or "<"
			sidesGui.RightToggle.Text = rightHidden and "<" or ">"

			if not noTween then
				local function insertTween(...)
					local tween = service.TweenService:Create(...)
					tweens[#tweens+1] = tween
					tween:Play()
				end
				insertTween(leftSide.Frame,sideTweenInfo,{Position = leftPos})
				insertTween(rightSide.Frame,sideTweenInfo,{Position = rightPos})
				insertTween(sidesGui.LeftToggle,sideTweenInfo,{Position = UDim2.new(0,#leftSide.Windows == 0 and -16 or 0,0,-36)})
				insertTween(sidesGui.RightToggle,sideTweenInfo,{Position = UDim2.new(1,#rightSide.Windows == 0 and 0 or -16,0,-36)})
			else
				leftSide.Frame.Position = leftPos
				rightSide.Frame.Position = rightPos
				sidesGui.LeftToggle.Position = UDim2.new(0,#leftSide.Windows == 0 and -16 or 0,0,-36)
				sidesGui.RightToggle.Position = UDim2.new(1,#rightSide.Windows == 0 and 0 or -16,0,-36)
			end
		end

		local function getSideFramePos(side)
			local leftHidden = #leftSide.Windows == 0 or leftSide.Hidden
			local rightHidden = #rightSide.Windows == 0 or rightSide.Hidden
			if side == leftSide then
				return (leftHidden and UDim2.new(0,-leftSide.Width-10,0,0) or UDim2.new(0,0,0,0))
			else
				return (rightHidden and UDim2.new(1,10,0,0) or UDim2.new(1,-rightSide.Width,0,0))
			end
		end

		local function sideResized(side)
			local currentPos = 0
			local sideFramePos = getSideFramePos(side)
			for i,v in pairs(side.Windows) do
				v.SizeX = side.Width
				v.GuiElems.Main.Size = UDim2.new(0,side.Width,0,v.SizeY)
				v.GuiElems.Main.Position = UDim2.new(sideFramePos.X.Scale,sideFramePos.X.Offset,0,currentPos)
				currentPos = currentPos + v.SizeY+4
			end
		end

		local function sideResizerHook(resizer,dir,side,pos)
			local pressing = false
			
			local mouse = Main.Mouse
			local windows = side.Windows

			resizer.MouseEnter:Connect(function() resizer.BackgroundColor3 = theme.MainColor2 end)
			resizer.MouseButton1Down:Connect(function() pressing = true resizer.BackgroundColor3 = theme.MainColor2 end)
			resizer.MouseButton1Up:Connect(function() pressing = false resizer.BackgroundColor3 = theme.Button end)


			resizer.InputBegan:Connect(function(input)
				if not side.Resizing and pressing then
					if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
						resizer.BackgroundColor3 = theme.MainColor2
					end 
					if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
						local releaseEvent,mouseEvent

						local offX = mouse.X - resizer.AbsolutePosition.X
						local offY = mouse.Y - resizer.AbsolutePosition.Y

						side.Resizing = resizer
						resizer.BackgroundColor3 = theme.MainColor2

						releaseEvent = service.UserInputService.InputEnded:Connect(function(input)
							if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
								releaseEvent:Disconnect()
								mouseEvent:Disconnect()
								side.Resizing = false
								resizer.BackgroundColor3 = theme.Button
							end
						end)

						mouseEvent = service.UserInputService.InputChanged:Connect(function(input)
							if not resizer.Parent then
								releaseEvent:Disconnect()
								mouseEvent:Disconnect()
								side.Resizing = false
								return
							end
							if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
								if dir == "V" then
									local delta = input.Position.Y - resizer.AbsolutePosition.Y - offY

									if delta > 0 then
										local neededSize = delta
										for i = pos+1,#windows do
											local window = windows[i]
											local newSize = math.max(window.SizeY-neededSize,(window.MinY or 100))
											neededSize = neededSize - (window.SizeY - newSize)
											window.SizeY = newSize
										end
										windows[pos].SizeY = windows[pos].SizeY + math.max(0,delta-neededSize)
									else
										local neededSize = -delta
										for i = pos,1,-1 do
											local window = windows[i]
											local newSize = math.max(window.SizeY-neededSize,(window.MinY or 100))
											neededSize = neededSize - (window.SizeY - newSize)
											window.SizeY = newSize
										end
										windows[pos+1].SizeY = windows[pos+1].SizeY + math.max(0,-delta-neededSize)
									end

									updateSideFrames()
									sideResized(side)
								elseif dir == "H" then
									local maxWidth = math.max(300,sidesGui.AbsoluteSize.X-static.FreeWidth)
									local otherSide = (side == leftSide and rightSide or leftSide)
									local delta = input.Position.X - resizer.AbsolutePosition.X - offX
									delta = (side == leftSide and delta or -delta)

									local proposedSize = math.max(static.MinWidth,side.Width + delta)
									if proposedSize + otherSide.Width <= maxWidth then
										side.Width = proposedSize
									else
										local newOtherSize = maxWidth - proposedSize
										if newOtherSize >= static.MinWidth then
											side.Width = proposedSize
											otherSide.Width = newOtherSize
										else
											side.Width = maxWidth - static.MinWidth
											otherSide.Width = static.MinWidth
										end
									end

									updateSideFrames(true)
									sideResized(side)
									sideResized(otherSide)
								end
							end
						end)
					end
				end
			end)

			resizer.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch and side.Resizing ~= resizer then
					resizer.BackgroundColor3 = theme.Button
				end
			end)
		end

		local function renderSide(side,noTween) -- TODO: Use existing resizers
			local currentPos = 0
			local sideFramePos = getSideFramePos(side)
			local template = side.WindowResizer:Clone()
			for i,v in pairs(side.ResizeCons) do v:Disconnect() end
			for i,v in pairs(side.Frame:GetChildren()) do if v.Name == "WindowResizer" then v:Destroy() end end
			side.ResizeCons = {}
			side.Resizing = nil

			for i,v in pairs(side.Windows) do
				v.SidePos = i
				local isEnd = i == #side.Windows
				local size = UDim2.new(0,side.Width,0,v.SizeY)
				local pos = UDim2.new(sideFramePos.X.Scale,sideFramePos.X.Offset,0,currentPos)
				Lib.ShowGui(v.Gui)
				--v.GuiElems.Main:TweenSizeAndPosition(size,pos,Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.3,true)
				if noTween then
					v.GuiElems.Main.Size = size
					v.GuiElems.Main.Position = pos
				else
					local tween = service.TweenService:Create(v.GuiElems.Main,sideTweenInfo,{Size = size, Position = pos})
					tweens[#tweens+1] = tween
					tween:Play()
				end
				currentPos = currentPos + v.SizeY+4

				if not isEnd then
					local newTemplate = template:Clone()
					newTemplate.Position = UDim2.new(1,-side.Width,0,currentPos-4)
					side.ResizeCons[#side.ResizeCons+1] = v.Gui.Main:GetPropertyChangedSignal("Size"):Connect(function()
						newTemplate.Position = UDim2.new(1,-side.Width,0, v.GuiElems.Main.Position.Y.Offset + v.GuiElems.Main.Size.Y.Offset)
					end)
					side.ResizeCons[#side.ResizeCons+1] = v.Gui.Main:GetPropertyChangedSignal("Position"):Connect(function()
						newTemplate.Position = UDim2.new(1,-side.Width,0, v.GuiElems.Main.Position.Y.Offset + v.GuiElems.Main.Size.Y.Offset)
					end)
					sideResizerHook(newTemplate,"V",side,i)
					newTemplate.Parent = side.Frame
				end
			end

			--side.Frame.Back.Position = UDim2.new(0,0,0,0)
			--side.Frame.Back.Size = UDim2.new(0,side.Width,1,0)
		end

		local function updateSide(side,noTween)
			local oldHeight = 0
			local currentPos = 0
			local neededSize = 0
			local windows = side.Windows
			local height = sidesGui.AbsoluteSize.Y - (math.max(0,#windows - 1) * 4)

			for i,v in pairs(windows) do oldHeight = oldHeight + v.SizeY end
			for i,v in pairs(windows) do
				if i == #windows then
					v.SizeY = height-currentPos
					neededSize = math.max(0,(v.MinY or 100)-v.SizeY)
				else
					v.SizeY = math.max(math.floor(v.SizeY/oldHeight*height),v.MinY or 100)
				end
				currentPos = currentPos + v.SizeY
			end

			if neededSize > 0 then
				for i = #windows-1,1,-1 do
					local window = windows[i]
					local newSize = math.max(window.SizeY-neededSize,(window.MinY or 100))
					neededSize = neededSize - (window.SizeY - newSize)
					window.SizeY = newSize
				end
				local lastWindow = windows[#windows]
				lastWindow.SizeY = (lastWindow.MinY or 100)-neededSize
			end
			renderSide(side,noTween)
		end

		updateWindows = function(noTween)
			updateSideFrames(noTween)
			updateSide(leftSide,noTween)
			updateSide(rightSide,noTween)
			local count = 0
			for i = #visibleWindows,1,-1 do
				visibleWindows[i].Gui.DisplayOrder = displayOrderStart + count
				Lib.ShowGui(visibleWindows[i].Gui)
				count = count + 1
			end

			--[[local leftTweenPos = (#leftSide.Windows == 0 and UDim2.new(0,-leftSide.Width-5,0,0) or UDim2.new(0,0,0,0))
			leftSide.Frame:TweenPosition(leftTweenPos,Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.3,true)
			local rightTweenPos = (#rightSide.Windows == 0 and UDim2.new(1,5,0,0) or UDim2.new(1,-rightSide.Width,0,0))
			rightSide.Frame:TweenPosition(rightTweenPos,Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.3,true)]]
		end

		funcs.SetMinimized = function(self,set,mode)
			local oldVal = self.Minimized
			local newVal
			if set == nil then newVal = not self.Minimized else newVal = set end
			self.Minimized = newVal
			if not mode then mode = 1 end

			local resizeControls = self.GuiElems.ResizeControls
			local minimizeControls = {"North","NorthEast","NorthWest","South","SouthEast","SouthWest"}
			for i = 1,#minimizeControls do
				local control = resizeControls:FindFirstChild(minimizeControls[i])
				if control then control.Visible = not newVal end
			end

			if mode == 1 or mode == 2 then
				self:StopTweens()
				if mode == 1 then
					self.GuiElems.Main:TweenSize(UDim2.new(0,self.SizeX,0,newVal and 20 or self.SizeY),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
				else
					local maxY = sidesGui.AbsoluteSize.Y
					local newPos = UDim2.new(0,self.PosX,0,newVal and math.min(maxY-20,self.PosY + self.SizeY - 20) or math.max(0,self.PosY - self.SizeY + 20))

					self.GuiElems.Main:TweenPosition(newPos,Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
					self.GuiElems.Main:TweenSize(UDim2.new(0,self.SizeX,0,newVal and 20 or self.SizeY),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
				end
				self.GuiElems.Minimize.ImageLabel.Image = newVal and "rbxassetid://5060023708" or "rbxassetid://5034768003"
			end

			if oldVal ~= newVal then
				if newVal then
					self.OnMinimize:Fire()
				else
					self.OnRestore:Fire()
				end
			end
		end

		funcs.Resize = function(self,sizeX,sizeY)
			self.SizeX = sizeX or self.SizeX
			self.SizeY = sizeY or self.SizeY
			self.GuiElems.Main.Size = UDim2.new(0,self.SizeX,0,self.SizeY)
		end

		funcs.SetSize = funcs.Resize

		funcs.SetTitle = function(self,title)
			self.GuiElems.Title.Text = title
		end

		funcs.SetResizable = function(self,val)
			self.Resizable = val
			self.GuiElems.ResizeControls.Visible = self.Resizable and self.ResizableInternal
		end

		funcs.SetResizableInternal = function(self,val)
			self.ResizableInternal = val
			self.GuiElems.ResizeControls.Visible = self.Resizable and self.ResizableInternal
		end

		funcs.SetAligned = function(self,val)
			self.Aligned = val
			self:SetResizableInternal(not val)
			self.GuiElems.Main.Active = not val
			self.GuiElems.Main.Outlines.Visible = not val
			if not val then
				for i,v in pairs(leftSide.Windows) do if v == self then table.remove(leftSide.Windows,i) break end end
				for i,v in pairs(rightSide.Windows) do if v == self then table.remove(rightSide.Windows,i) break end end
				if not table.find(visibleWindows,self) then table.insert(visibleWindows,1,self) end
				self.GuiElems.Minimize.ImageLabel.Image = "rbxassetid://5034768003"
				self.Side = nil
				updateWindows()
			else
				self:SetMinimized(false,3)
				for i,v in pairs(visibleWindows) do if v == self then table.remove(visibleWindows,i) break end end
				self.GuiElems.Minimize.ImageLabel.Image = "rbxassetid://5448127505"
			end
		end

		funcs.Add = function(self,obj,name)
			if type(obj) == "table" and obj.Gui and obj.Gui:IsA("GuiObject") then
				obj.Gui.Parent = self.ContentPane
			else
				obj.Parent = self.ContentPane
			end
			if name then self.Elements[name] = obj end
		end

		funcs.GetElement = function(self,obj,name)
			return self.Elements[name]
		end

		funcs.AlignTo = function(self,side,pos,size,silent)
			if table.find(side.Windows,self) or self.Closed then return end

			size = size or self.SizeY
			if size > 0 and size <= 1 then
				local totalSideHeight = 0
				for i,v in pairs(side.Windows) do totalSideHeight = totalSideHeight + v.SizeY end
				self.SizeY = (totalSideHeight > 0 and totalSideHeight * size * 2) or size
			else
				self.SizeY = (size > 0 and size or 100)
			end

			self:SetAligned(true)
			self.Side = side
			self.SizeX = side.Width
			self.Gui.DisplayOrder = sideDisplayOrder + 1
			for i,v in pairs(side.Windows) do v.Gui.DisplayOrder = sideDisplayOrder end
			pos = math.min(#side.Windows+1, pos or 1)
			self.SidePos = pos
			table.insert(side.Windows, pos, self)

			if not silent then
				side.Hidden = false
			end
			updateWindows(silent)
		end

		funcs.Close = function(self)
			self.Closed = true
			self:SetResizableInternal(false)

			Lib.FindAndRemove(leftSide.Windows,self)
			Lib.FindAndRemove(rightSide.Windows,self)
			Lib.FindAndRemove(visibleWindows,self)

			self.MinimizeAnim.Disable()
			self.CloseAnim.Disable()
			self.ClosedSide = self.Side
			self.Side = nil
			self.OnDeactivate:Fire()

			if not self.Aligned then
				self:StopTweens()
				local ti = TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)

				local closeTime = tick()
				self.LastClose = closeTime

				self:DoTween(self.GuiElems.Main,ti,{Size = UDim2.new(0,self.SizeX,0,20)})
				self:DoTween(self.GuiElems.Title,ti,{TextTransparency = 1})
				self:DoTween(self.GuiElems.Minimize.ImageLabel,ti,{ImageTransparency = 1})
				self:DoTween(self.GuiElems.Close.ImageLabel,ti,{ImageTransparency = 1})
				Lib.FastWait(0.2)
				if closeTime ~= self.LastClose then return end

				self:DoTween(self.GuiElems.TopBar,ti,{BackgroundTransparency = 1})
				self:DoTween(self.GuiElems.Outlines,ti,{ImageTransparency = 1})
				Lib.FastWait(0.2)
				if closeTime ~= self.LastClose then return end
			end

			self.Aligned = false
			self.Gui.Parent = nil
			updateWindows(true)
		end

		funcs.Hide = funcs.Close

		funcs.IsVisible = function(self)
			return not self.Closed and ((self.Side and not self.Side.Hidden) or not self.Side)
		end

		funcs.IsContentVisible = function(self)
			return self:IsVisible() and not self.Minimized
		end

		funcs.Focus = function(self)
			moveToTop(self)
		end

		funcs.MoveInBoundary = function(self)
			local posX,posY = self.PosX,self.PosY
			local maxX,maxY = sidesGui.AbsoluteSize.X,sidesGui.AbsoluteSize.Y
			posX = math.min(posX,maxX-self.SizeX)
			posY = math.min(posY,maxY-20)
			self.GuiElems.Main.Position = UDim2.new(0,posX,0,posY)
		end

		funcs.DoTween = function(self,...)
			local tween = service.TweenService:Create(...)
			self.Tweens[#self.Tweens+1] = tween
			tween:Play()
		end

		funcs.StopTweens = function(self)
			for i,v in pairs(self.Tweens) do
				v:Cancel()
			end
			self.Tweens = {}
		end

		funcs.Show = function(self,data)
			return static.ShowWindow(self,data)
		end

		funcs.ShowAndFocus = function(self,data)
			static.ShowWindow(self,data)
			service.RunService.RenderStepped:wait()
			self:Focus()
		end

		static.ShowWindow = function(window,data)
			data = data or {}
			local align = data.Align
			local pos = data.Pos
			local size = data.Size
			local targetSide = (align == "left" and leftSide) or (align == "right" and rightSide)

			if not window.Closed then
				if not window.Aligned then
					window:SetMinimized(false)
				elseif window.Side and not data.Silent then
					static.SetSideVisible(window.Side,true)
				end
				return
			end

			window.Closed = false
			window.LastClose = tick()
			window.GuiElems.Title.TextTransparency = 0
			window.GuiElems.Minimize.ImageLabel.ImageTransparency = 0
			window.GuiElems.Close.ImageLabel.ImageTransparency = 0
			window.GuiElems.TopBar.BackgroundTransparency = 0
			window.GuiElems.Outlines.ImageTransparency = 0
			window.GuiElems.Minimize.ImageLabel.Image = "rbxassetid://5034768003"
			window.GuiElems.Main.Active = true
			window.GuiElems.Main.Outlines.Visible = true
			window:SetMinimized(false,3)
			window:SetResizableInternal(true)
			window.MinimizeAnim.Enable()
			window.CloseAnim.Enable()

			if align then
				window:AlignTo(targetSide,pos,size,data.Silent)
			else
				if align == nil and window.ClosedSide then -- Regular open
					window:AlignTo(window.ClosedSide,window.SidePos,size,true)
					static.SetSideVisible(window.ClosedSide,true)
				else
					if table.find(visibleWindows,window) then return end

					-- TODO: make better
					window.GuiElems.Main.Size = UDim2.new(0,window.SizeX,0,20)
					local ti = TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
					window:StopTweens()
					window:DoTween(window.GuiElems.Main,ti,{Size = UDim2.new(0,window.SizeX,0,window.SizeY)})

					window.SizeY = size or window.SizeY
					table.insert(visibleWindows,1,window)
					updateWindows()
				end
			end

			window.ClosedSide = nil
			window.OnActivate:Fire()
		end

		static.ToggleSide = function(name)
			local side = (name == "left" and leftSide or rightSide)
			side.Hidden = not side.Hidden
			for i,v in pairs(side.Windows) do
				if side.Hidden then
					v.OnDeactivate:Fire()
				else
					v.OnActivate:Fire()
				end
			end
			updateWindows()
		end

		static.SetSideVisible = function(s,vis)
			local side = (type(s) == "table" and s) or (s == "left" and leftSide or rightSide)
			side.Hidden = not vis
			for i,v in pairs(side.Windows) do
				if side.Hidden then
					v.OnDeactivate:Fire()
				else
					v.OnActivate:Fire()
				end
			end
			updateWindows()
		end

		static.Init = function()
			displayOrderStart = Main.DisplayOrders.Window
			sideDisplayOrder = Main.DisplayOrders.SideWindow

			sidesGui = Instance.new("ScreenGui")
			local leftFrame = create({
				{1,"Frame",{Active=true,Name="LeftSide",BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,}},
				{2,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="Resizer",Parent={1},Size=UDim2.new(0,5,1,0),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{3,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={2},Position=UDim2.new(0,0,0,0),Size=UDim2.new(0,1,1,0),}},
				{4,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="WindowResizer",Parent={1},Position=UDim2.new(1,-300,0,0),Size=UDim2.new(1,0,0,4),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{5,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={4},Size=UDim2.new(1,0,0,1),}},
			})
			leftSide.Frame = leftFrame
			leftFrame.Position = UDim2.new(0,-leftSide.Width-10,0,0)
			leftSide.WindowResizer = leftFrame.WindowResizer
			leftFrame.WindowResizer.Parent = nil
			leftFrame.Parent = sidesGui

			local rightFrame = create({
				{1,"Frame",{Active=true,Name="RightSide",BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,}},
				{2,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="Resizer",Parent={1},Size=UDim2.new(0,5,1,0),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{3,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={2},Position=UDim2.new(0,4,0,0),Size=UDim2.new(0,1,1,0),}},
				{4,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="WindowResizer",Parent={1},Position=UDim2.new(1,-300,0,0),Size=UDim2.new(1,0,0,4),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
				{5,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={4},Size=UDim2.new(1,0,0,1),}},
			})
			rightSide.Frame = rightFrame
			rightFrame.Position = UDim2.new(1,10,0,0)
			rightSide.WindowResizer = rightFrame.WindowResizer
			rightFrame.WindowResizer.Parent = nil
			rightFrame.Parent = sidesGui

			if Settings.Window.Transparency and Settings.Window.Transparency > 0 then
				leftSide.BackgroundTransparency = 1
				rightSide.BackgroundTransparency = 1

				leftFrame.BackgroundTransparency = 1
				rightFrame.BackgroundTransparency = 1
			end

			sideResizerHook(leftFrame.Resizer,"H",leftSide)
			sideResizerHook(rightFrame.Resizer,"H",rightSide)

			alignIndicator = Instance.new("ScreenGui")
			alignIndicator.DisplayOrder = Main.DisplayOrders.Core
			local indicator = Instance.new("Frame",alignIndicator)
			indicator.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
			indicator.BorderSizePixel = 0
			indicator.BackgroundTransparency = 0.8
			indicator.Name = "Indicator"
			local corner = Instance.new("UICorner",indicator)
			corner.CornerRadius = UDim.new(0,10)

			local leftToggle = create({{1,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderMode=2,Font=10,Name="LeftToggle",Position=UDim2.new(0,0,0,-36),Size=UDim2.new(0,16,0,36),Text="<",TextColor3=Color3.new(1,1,1),TextSize=14,}}})
			local rightToggle = leftToggle:Clone()
			rightToggle.Name = "RightToggle"
			rightToggle.Position = UDim2.new(1,-16,0,-36)
			Lib.ButtonAnim(leftToggle,{Mode = 2,PressColor = Color3.fromRGB(32,32,32)})
			Lib.ButtonAnim(rightToggle,{Mode = 2,PressColor = Color3.fromRGB(32,32,32)})

			leftToggle.MouseButton1Click:Connect(function()
				static.ToggleSide("left")
			end)

			rightToggle.MouseButton1Click:Connect(function()
				static.ToggleSide("right")
			end)

			leftToggle.Parent = sidesGui
			rightToggle.Parent = sidesGui

			sidesGui:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
				local maxWidth = math.max(300,sidesGui.AbsoluteSize.X-static.FreeWidth)
				leftSide.Width = math.max(static.MinWidth,math.min(leftSide.Width,maxWidth-rightSide.Width))
				rightSide.Width = math.max(static.MinWidth,math.min(rightSide.Width,maxWidth-leftSide.Width))
				for i = 1,#visibleWindows do
					visibleWindows[i]:MoveInBoundary()
				end
				updateWindows(true)
			end)

			sidesGui.DisplayOrder = sideDisplayOrder - 1
			Lib.ShowGui(sidesGui)
			updateSideFrames()
		end

		local mt = {__index = funcs}
		static.new = function()
			local obj = setmetatable({
				Minimized = false,
				Dragging = false,
				Resizing = false,
				Aligned = false,
				Draggable = true,
				Resizable = true,
				ResizableInternal = true,
				Alignable = true,
				Closed = true,
				SizeX = 300,
				SizeY = 300,
				MinX = 200,
				MinY = 200,
				PosX = 0,
				PosY = 0,
				GuiElems = {},
				Tweens = {},
				Elements = {},
				OnActivate = Lib.Signal.new(),
				OnDeactivate = Lib.Signal.new(),
				OnMinimize = Lib.Signal.new(),
				OnRestore = Lib.Signal.new()
			},mt)
			obj.Gui = createGui(obj)
			return obj
		end

		return static
	end)()

	Lib.ContextMenu = (function()
		local funcs = {}
		local mouse

		local function createGui(self)
			local contextGui = create({
				{1,"ScreenGui",{DisplayOrder=1000000,Name="Context",ZIndexBehavior=1,}},
				{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),Name="Main",Parent={1},Position=UDim2.new(0.5,-100,0.5,-150),Size=UDim2.new(0,200,0,100),}},
				{3,"UICorner",{CornerRadius=UDim.new(0,4),Parent={2},}},
				{4,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),Name="Container",Parent={2},Position=UDim2.new(0,1,0,1),Size=UDim2.new(1,-2,1,-2),}},
				{5,"UICorner",{CornerRadius=UDim.new(0,4),Parent={4},}},
				{6,"ScrollingFrame",{Active=true,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BackgroundTransparency=1,BorderSizePixel=0,CanvasSize=UDim2.new(0,0,0,0),Name="List",Parent={4},Position=UDim2.new(0,2,0,2),ScrollBarImageColor3=Color3.new(0,0,0),ScrollBarThickness=4,Size=UDim2.new(1,-4,1,-4),VerticalScrollBarInset=1,}},
				{7,"UIListLayout",{Parent={6},SortOrder=2,}},
				{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="SearchFrame",Parent={4},Size=UDim2.new(1,0,0,24),Visible=false,}},
				{9,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.1176470592618,0.1176470592618,0.1176470592618),BorderSizePixel=0,Name="SearchContainer",Parent={8},Position=UDim2.new(0,3,0,3),Size=UDim2.new(1,-6,0,18),}},
				{10,"TextBox",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="SearchBox",Parent={9},PlaceholderColor3=Color3.new(0.39215689897537,0.39215689897537,0.39215689897537),PlaceholderText="Search",Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-8,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
				{11,"UICorner",{CornerRadius=UDim.new(0,2),Parent={9},}},
				{12,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={8},Position=UDim2.new(0,0,1,0),Size=UDim2.new(1,0,0,1),}},
				{13,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Font=3,Name="Entry",Parent={1},Size=UDim2.new(1,0,0,22),Text="",TextSize=14,Visible=false,}},
				{14,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="EntryName",Parent={13},Position=UDim2.new(0,24,0,0),Size=UDim2.new(1,-24,1,0),Text="Duplicate",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{15,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Shortcut",Parent={13},Position=UDim2.new(0,24,0,0),Size=UDim2.new(1,-30,1,0),Text="Ctrl+D",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{16,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ImageRectOffset=Vector2.new(304,0),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={13},Position=UDim2.new(0,2,0,3),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
				{17,"UICorner",{CornerRadius=UDim.new(0,4),Parent={13},}},
				{18,"Frame",{BackgroundColor3=Color3.new(0.21568629145622,0.21568629145622,0.21568629145622),BackgroundTransparency=1,BorderSizePixel=0,Name="Divider",Parent={1},Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,0,7),Visible=false,}},
				{19,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="Line",Parent={18},Position=UDim2.new(0,0,0.5,0),Size=UDim2.new(1,0,0,1),}},
				{20,"TextLabel",{AnchorPoint=Vector2.new(0,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="DividerName",Parent={18},Position=UDim2.new(0,2,0.5,0),Size=UDim2.new(1,-4,1,0),Text="Objects",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.60000002384186,TextXAlignment=0,Visible=false,}}
			})

			self.GuiElems.Main = contextGui.Main
			self.GuiElems.List = contextGui.Main.Container.List
			self.GuiElems.Entry = contextGui.Entry
			self.GuiElems.Divider = contextGui.Divider
			self.GuiElems.SearchFrame = contextGui.Main.Container.SearchFrame
			self.GuiElems.SearchBar = self.GuiElems.SearchFrame.SearchContainer.SearchBox
			Lib.ViewportTextBox.convert(self.GuiElems.SearchBar)

			self.GuiElems.SearchBar:GetPropertyChangedSignal("Text"):Connect(function()
				local lower,find = string.lower,string.find
				local searchText = lower(self.GuiElems.SearchBar.Text)
				local items = self.Items
				local map = self.ItemToEntryMap

				if searchText ~= "" then
					local results = {}
					local count = 1
					for i = 1,#items do
						local item = items[i]
						local entry = map[item]
						if entry then
							if not item.Divider and find(lower(item.Name),searchText,1,true) then
								results[count] = item
								count = count + 1
							else
								entry.Visible = false
							end
						end
					end
					table.sort(results,function(a,b) return a.Name < b.Name end)
					for i = 1,#results do
						local entry = map[results[i]]
						entry.LayoutOrder = i
						entry.Visible = true
					end
				else
					for i = 1,#items do
						local entry = map[items[i]]
						if entry then entry.LayoutOrder = i entry.Visible = true end
					end
				end

				local toSize = self.GuiElems.List.UIListLayout.AbsoluteContentSize.Y + 6
				self.GuiElems.List.CanvasSize = UDim2.new(0,0,0,toSize-6)
			end)

			return contextGui
		end

		funcs.Add = function(self,item)
			local newItem = {
				Name = item.Name or "Item",
				Icon = item.Icon or "",
				Shortcut = item.Shortcut or "",
				OnClick = item.OnClick,
				OnHover = item.OnHover,
				Disabled = item.Disabled or false,
				DisabledIcon = item.DisabledIcon or "",
				IconMap = item.IconMap,
				OnRightClick = item.OnRightClick
			}

			if self.QueuedDivider then
				local text = self.QueuedDividerText and #self.QueuedDividerText > 0 and self.QueuedDividerText
				self:AddDivider(text)
			end
			self.Items[#self.Items+1] = newItem
			self.Updated = nil
		end

		funcs.AddRegistered = function(self,name,disabled)
			if not self.Registered[name] then error(name.." is not registered") end

			if self.QueuedDivider then
				local text = self.QueuedDividerText and #self.QueuedDividerText > 0 and self.QueuedDividerText
				self:AddDivider(text)
			end
			self.Registered[name].Disabled = disabled
			self.Items[#self.Items+1] = self.Registered[name]
			self.Updated = nil
		end

		funcs.Register = function(self,name,item)
			self.Registered[name] = {
				Name = item.Name or "Item",
				Icon = item.Icon or "",
				Shortcut = item.Shortcut or "",
				OnClick = item.OnClick,
				OnHover = item.OnHover,
				DisabledIcon = item.DisabledIcon or "",
				IconMap = item.IconMap,
				OnRightClick = item.OnRightClick
			}
		end

		funcs.UnRegister = function(self,name)
			self.Registered[name] = nil
		end

		funcs.AddDivider = function(self,text)
			self.QueuedDivider = false
			local textWidth = text and service.TextService:GetTextSize(text,14,Enum.Font.SourceSans,Vector2.new(999999999,20)).X or nil
			table.insert(self.Items,{Divider = true, Text = text, TextSize = textWidth and textWidth+4})
			self.Updated = nil
		end

		funcs.QueueDivider = function(self,text)
			self.QueuedDivider = true
			self.QueuedDividerText = text or ""
		end

		funcs.Clear = function(self)
			self.Items = {}
			self.Updated = nil
		end

		funcs.Refresh = function(self)
			for i,v in pairs(self.GuiElems.List:GetChildren()) do
				if not v:IsA("UIListLayout") then
					v:Destroy()
				end
			end
			local map = {}
			self.ItemToEntryMap = map

			local dividerFrame = self.GuiElems.Divider
			local contextList = self.GuiElems.List
			local entryFrame = self.GuiElems.Entry
			local items = self.Items

			for i = 1,#items do
				local item = items[i]
				if item.Divider then
					local newDivider = dividerFrame:Clone()
					newDivider.Line.BackgroundColor3 = self.Theme.DividerColor
					if item.Text then
						newDivider.Size = UDim2.new(1,0,0,20)
						newDivider.Line.Position = UDim2.new(0,item.TextSize,0.5,0)
						newDivider.Line.Size = UDim2.new(1,-item.TextSize,0,1)
						newDivider.DividerName.TextColor3 = self.Theme.TextColor
						newDivider.DividerName.Text = item.Text
						newDivider.DividerName.Visible = true
					end
					newDivider.Visible = true
					map[item] = newDivider
					newDivider.Parent = contextList
				else
					local newEntry = entryFrame:Clone()
					newEntry.BackgroundColor3 = self.Theme.HighlightColor
					newEntry.EntryName.TextColor3 = self.Theme.TextColor
					newEntry.EntryName.Text = item.Name
					newEntry.Shortcut.Text = item.Shortcut
					if item.Disabled then
						newEntry.EntryName.TextColor3 = Color3.new(150/255,150/255,150/255)
						newEntry.Shortcut.TextColor3 = Color3.new(150/255,150/255,150/255)
					end

					if self.Iconless then
						newEntry.EntryName.Position = UDim2.new(0,2,0,0)
						newEntry.EntryName.Size = UDim2.new(1,-4,0,20)
						newEntry.Icon.Visible = false
					else
						local iconIndex = item.Disabled and item.DisabledIcon or item.Icon
						-- Explorer.MiscIcons:DisplayExplorerIcons(newEntry.Icon, iconIndex)
						if item.IconMap then
							if type(iconIndex) == "number" then
								item.IconMap:Display(newEntry.Icon, iconIndex)
							elseif type(iconIndex) == "string" then
								item.IconMap:DisplayByKey(newEntry.Icon, iconIndex)
							end
						elseif type(iconIndex) == "string" then
							newEntry.Icon.Image = iconIndex
						end
					end

					if not item.Disabled then
						if item.OnClick then
							newEntry.MouseButton1Click:Connect(function()
								item.OnClick(item.Name)
								if not item.NoHide then
									self:Hide()
								end
							end)
						end

						if item.OnRightClick then
							newEntry.MouseButton2Click:Connect(function()
								item.OnRightClick(item.Name)
								if not item.NoHide then
									self:Hide()
								end
							end)
						end
					end

					newEntry.InputBegan:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
							newEntry.BackgroundTransparency = 0
						end
					end)

					newEntry.InputEnded:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
							newEntry.BackgroundTransparency = 1
						end
					end)

					newEntry.Visible = true
					map[item] = newEntry
					newEntry.Parent = contextList
				end
			end
			self.Updated = true
		end

		funcs.Show = function(self,x,y)
			local elems = self.GuiElems
			elems.SearchFrame.Visible = self.SearchEnabled
			elems.List.Position = UDim2.new(0,2,0,2 + (self.SearchEnabled and 24 or 0))
			elems.List.Size = UDim2.new(1,-4,1,-4 - (self.SearchEnabled and 24 or 0))
			if self.SearchEnabled and self.ClearSearchOnShow then elems.SearchBar.Text = "" end
			self.GuiElems.List.CanvasPosition = Vector2.new(0,0)

			if not self.Updated then
				self:Refresh()
			end

			-- Vars
			local reverseY = false
			local x,y = x or mouse.X, y or mouse.Y
			local maxX,maxY = mouse.ViewSizeX,mouse.ViewSizeY

			-- Position and show
			if x + self.Width > maxX then
				x = self.ReverseX and x - self.Width or maxX - self.Width
			end
			elems.Main.Position = UDim2.new(0,x,0,y)
			elems.Main.Size = UDim2.new(0,self.Width,0,0)
			self.Gui.DisplayOrder = Main.DisplayOrders.Menu
			Lib.ShowGui(self.Gui)

			-- Size adjustment
			local toSize = elems.List.UIListLayout.AbsoluteContentSize.Y + 6 -- Padding
			if self.MaxHeight and toSize > self.MaxHeight then
				elems.List.CanvasSize = UDim2.new(0,0,0,toSize-6)
				toSize = self.MaxHeight
			else
				elems.List.CanvasSize = UDim2.new(0,0,0,0)
			end
			if y + toSize > maxY then reverseY = true end

			-- Close event
			local closable
			if self.CloseEvent then self.CloseEvent:Disconnect() end
			self.CloseEvent = service.UserInputService.InputBegan:Connect(function(input)
				if not closable then return end

				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					if not Lib.CheckMouseInGui(elems.Main) then
						self.CloseEvent:Disconnect()
						self:Hide()
					end
				end
			end)

			-- Resize
			if reverseY then
				elems.Main.Position = UDim2.new(0,x,0,y-(self.ReverseYOffset or 0))
				local newY = y - toSize - (self.ReverseYOffset or 0)
				y = newY >= 0 and newY or 0
				elems.Main:TweenSizeAndPosition(UDim2.new(0,self.Width,0,toSize),UDim2.new(0,x,0,y),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.2,true)
			else
				elems.Main:TweenSize(UDim2.new(0,self.Width,0,toSize),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.2,true)
			end

			-- Close debounce
			Lib.FastWait()
			if self.SearchEnabled and self.FocusSearchOnShow then elems.SearchBar:CaptureFocus() end
			closable = true
		end

		funcs.Hide = function(self)
			self.Gui.Parent = nil
		end

		funcs.ApplyTheme = function(self,data)
			local theme = self.Theme
			theme.ContentColor = data.ContentColor or Settings.Theme.Menu
			theme.OutlineColor = data.OutlineColor or Settings.Theme.Menu
			theme.DividerColor = data.DividerColor or Settings.Theme.Outline2
			theme.TextColor = data.TextColor or Settings.Theme.Text
			theme.HighlightColor = data.HighlightColor or Settings.Theme.Main1

			self.GuiElems.Main.BackgroundColor3 = theme.OutlineColor
			self.GuiElems.Main.Container.BackgroundColor3 = theme.ContentColor
		end

		local mt = {__index = funcs}
		local function new()
			if not mouse then mouse = Main.Mouse or service.Players.LocalPlayer:GetMouse() end

			local obj = setmetatable({
				Width = 200,
				MaxHeight = nil,
				Iconless = false,
				SearchEnabled = false,
				ClearSearchOnShow = true,
				FocusSearchOnShow = true,
				Updated = false,
				QueuedDivider = false,
				QueuedDividerText = "",
				Items = {},
				Registered = {},
				GuiElems = {},
				Theme = {}
			},mt)
			obj.Gui = createGui(obj)
			obj:ApplyTheme({})
			return obj
		end

		return {new = new}
	end)()

	Lib.CodeFrame = (function()
		local funcs = {}

		local typeMap = {
			[1] = "String",
			[2] = "String",
			[3] = "String",
			[4] = "Comment",
			[5] = "Operator",
			[6] = "Number",
			[7] = "Keyword",
			[8] = "BuiltIn",
			[9] = "LocalMethod",
			[10] = "LocalProperty",
			[11] = "Nil",
			[12] = "Bool",
			[13] = "Function",
			[14] = "Local",
			[15] = "Self",
			[16] = "FunctionName",
			[17] = "Bracket"
		}

		local specialKeywordsTypes = {
			["nil"] = 11,
			["true"] = 12,
			["false"] = 12,
			["function"] = 13,
			["local"] = 14,
			["self"] = 15
		}

		local keywords = {
			["and"] = true,
			["break"] = true, 
			["do"] = true,
			["else"] = true,
			["elseif"] = true,
			["end"] = true,
			["false"] = true,
			["for"] = true,
			["function"] = true,
			["if"] = true,
			["in"] = true,
			["local"] = true,
			["nil"] = true,
			["not"] = true,
			["or"] = true,
			["repeat"] = true,
			["return"] = true,
			["then"] = true,
			["true"] = true,
			["until"] = true,
			["while"] = true,
			["plugin"] = true
		}

		local builtIns = {
			["delay"] = true,
			["elapsedTime"] = true,
			["require"] = true,
			["spawn"] = true,
			["tick"] = true,
			["time"] = true,
			["typeof"] = true,
			["UserSettings"] = true,
			["wait"] = true,
			["warn"] = true,
			["game"] = true,
			["shared"] = true,
			["script"] = true,
			["workspace"] = true,
			["assert"] = true,
			["collectgarbage"] = true,
			["error"] = true,
			["getfenv"] = true,
			["getmetatable"] = true,
			["ipairs"] = true,
			["loadstring"] = true,
			["newproxy"] = true,
			["next"] = true,
			["pairs"] = true,
			["pcall"] = true,
			["print"] = true,
			["rawequal"] = true,
			["rawget"] = true,
			["rawset"] = true,
			["select"] = true,
			["setfenv"] = true,
			["setmetatable"] = true,
			["tonumber"] = true,
			["tostring"] = true,
			["type"] = true,
			["unpack"] = true,
			["xpcall"] = true,
			["_G"] = true,
			["_VERSION"] = true,
			["coroutine"] = true,
			["debug"] = true,
			["math"] = true,
			["os"] = true,
			["string"] = true,
			["table"] = true,
			["bit32"] = true,
			["utf8"] = true,
			["Axes"] = true,
			["BrickColor"] = true,
			["CFrame"] = true,
			["Color3"] = true,
			["ColorSequence"] = true,
			["ColorSequenceKeypoint"] = true,
			["DockWidgetPluginGuiInfo"] = true,
			["Enum"] = true,
			["Faces"] = true,
			["Instance"] = true,
			["NumberRange"] = true,
			["NumberSequence"] = true,
			["NumberSequenceKeypoint"] = true,
			["PathWaypoint"] = true,
			["PhysicalProperties"] = true,
			["Random"] = true,
			["Ray"] = true,
			["Rect"] = true,
			["Region3"] = true,
			["Region3int16"] = true,
			["TweenInfo"] = true,
			["UDim"] = true,
			["UDim2"] = true,
			["Vector2"] = true,
			["Vector2int16"] = true,
			["Vector3"] = true,
			["Vector3int16"] = true,

			["getgenv"] = true,
			["getrenv"] = true,
			["getsenv"] = true,
			["getgc"] = true,
			["getreg"] = true,
			["filtergc"] = true,
			["saveinstave"] = true,
			["decompile"] = true,
			["syn"] = true,
			["getupvalue"] = true,
			["getupvalues"] = true,
			["setupvalue"] = true,
			["getstack"] = true,
			["setstack"] = true,
			["getconstants"] = true,
			["getconstant"] = true,
			["setconstant"] = true,
			["getproto"] = true,
			["getprotos"] = true,
			["checkcaller"] = true,
			["clonefunction"] = true,
			["cloneref"] = true,
			["getfunctionhash"] = true,
			["gethwid"] = true,
			["hookfunction"] = true,
			["hookmetamethod"] = true,
			["iscclosure"] = true,
			["islclosure"] = true,
			["newcclosure"] = true,
			["isexecutorclosure"] = true,
			["restorefunction"] = true,
			["crypt"] = true,
			["Drawing"] = true,

		}

		local builtInInited = false

		local richReplace = {
			["'"] = "&apos;",
			["\""] = "&quot;",
			["<"] = "&lt;",
			[">"] = "&gt;",
			["&"] = "&amp;"
		}

		local tabSub = "\205"
		local tabReplacement = (" %s%s "):format(tabSub,tabSub)

		local tabJumps = {
			[("[^%s] %s"):format(tabSub,tabSub)] = 0,
			[(" %s%s"):format(tabSub,tabSub)] = -1,
			[("%s%s "):format(tabSub,tabSub)] = 2,
			[("%s [^%s]"):format(tabSub,tabSub)] = 1,
		}

		local tweenService = service.TweenService
		local lineTweens = {}

		local function initBuiltIn()
			local env = getfenv()
			local type = type
			local tostring = tostring
			for name,_ in next,builtIns do
				local envVal = env[name]
				if type(envVal) == "table" then
					local items = {}
					for i,v in next,envVal do
						items[i] = true
					end
					builtIns[name] = items
				end
			end

			local enumEntries = {}
			local enums = Enum:GetEnums()
			for i = 1,#enums do
				enumEntries[tostring(enums[i])] = true
			end
			builtIns["Enum"] = enumEntries

			builtInInited = true
		end

		local function setupEditBox(obj)
			local editBox = obj.GuiElems.EditBox

			editBox.Focused:Connect(function()
				obj:ConnectEditBoxEvent()
				obj.Editing = true
			end)

			editBox.FocusLost:Connect(function()
				obj:DisconnectEditBoxEvent()
				obj.Editing = false
			end)

			editBox:GetPropertyChangedSignal("Text"):Connect(function()
				local text = editBox.Text
				if #text == 0 or obj.EditBoxCopying then return end
				editBox.Text = ""
				obj:AppendText(text)
			end)
		end

		local function setupMouseSelection(obj)
			local mouse = plr:GetMouse()
			local codeFrame = obj.GuiElems.LinesFrame
			local lines = obj.Lines

			codeFrame.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					local fontSizeX,fontSizeY = math.ceil(obj.FontSize/2),obj.FontSize

					local relX = mouse.X - codeFrame.AbsolutePosition.X
					local relY = mouse.Y - codeFrame.AbsolutePosition.Y
					local selX = math.round(relX / fontSizeX) + obj.ViewX
					local selY = math.floor(relY / fontSizeY) + obj.ViewY
					local releaseEvent,mouseEvent,scrollEvent
					local scrollPowerV,scrollPowerH = 0,0
					selY = math.min(#lines-1,selY)
					local relativeLine = lines[selY+1] or ""
					selX = math.min(#relativeLine, selX + obj:TabAdjust(selX,selY))

					obj.SelectionRange = {{-1,-1},{-1,-1}}
					obj:MoveCursor(selX,selY)
					obj.FloatCursorX = selX

					local function updateSelection()
						local relX = mouse.X - codeFrame.AbsolutePosition.X
						local relY = mouse.Y - codeFrame.AbsolutePosition.Y
						local sel2X = math.max(0,math.round(relX / fontSizeX) + obj.ViewX)
						local sel2Y = math.max(0,math.floor(relY / fontSizeY) + obj.ViewY)

						sel2Y = math.min(#lines-1,sel2Y)
						local relativeLine = lines[sel2Y+1] or ""
						sel2X = math.min(#relativeLine, sel2X + obj:TabAdjust(sel2X,sel2Y))

						if sel2Y < selY or (sel2Y == selY and sel2X < selX) then
							obj.SelectionRange = {{sel2X,sel2Y},{selX,selY}}
						else						
							obj.SelectionRange = {{selX,selY},{sel2X,sel2Y}}
						end

						obj:MoveCursor(sel2X,sel2Y)
						obj.FloatCursorX = sel2X
						obj:Refresh()
					end

					releaseEvent = service.UserInputService.InputEnded:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
							releaseEvent:Disconnect()
							mouseEvent:Disconnect()
							scrollEvent:Disconnect()
							obj:SetCopyableSelection()
							--updateSelection()
						end
					end)

					mouseEvent = service.UserInputService.InputChanged:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
							local upDelta = mouse.Y - codeFrame.AbsolutePosition.Y
							local downDelta = mouse.Y - codeFrame.AbsolutePosition.Y - codeFrame.AbsoluteSize.Y
							local leftDelta = mouse.X - codeFrame.AbsolutePosition.X
							local rightDelta = mouse.X - codeFrame.AbsolutePosition.X - codeFrame.AbsoluteSize.X
							scrollPowerV = 0
							scrollPowerH = 0
							if downDelta > 0 then
								scrollPowerV = math.floor(downDelta*0.05) + 1
							elseif upDelta < 0 then
								scrollPowerV = math.ceil(upDelta*0.05) - 1
							end
							if rightDelta > 0 then
								scrollPowerH = math.floor(rightDelta*0.05) + 1
							elseif leftDelta < 0 then
								scrollPowerH = math.ceil(leftDelta*0.05) - 1
							end
							updateSelection()
						end
					end)

					scrollEvent = game:GetService("RunService").RenderStepped:Connect(function()
						if scrollPowerV ~= 0 or scrollPowerH ~= 0 then
							obj:ScrollDelta(scrollPowerH,scrollPowerV)
							updateSelection()
						end
					end)

					obj:Refresh()
				end
			end)
		end

		local function makeFrame(obj)
			local frame = create({
				{1,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel = 0,Position=UDim2.new(0.5,-300,0.5,-200),Size=UDim2.new(0,600,0,400),}},
			})

			if Settings.Window.Transparency and Settings.Window.Transparency > 0 then
				frame.BackgroundTransparency = 0.5
			end

			local elems = {}

			local linesFrame = Instance.new("Frame")
			linesFrame.Name = "Lines"
			linesFrame.BackgroundTransparency = 1
			linesFrame.Size = UDim2.new(1,0,1,0)
			linesFrame.ClipsDescendants = true
			linesFrame.Parent = frame

			local lineNumbersLabel = Instance.new("TextLabel")
			lineNumbersLabel.Name = "LineNumbers"
			lineNumbersLabel.BackgroundTransparency = 1
			lineNumbersLabel.Font = Enum.Font.Code
			lineNumbersLabel.TextXAlignment = Enum.TextXAlignment.Right
			lineNumbersLabel.TextYAlignment = Enum.TextYAlignment.Top
			lineNumbersLabel.ClipsDescendants = true
			lineNumbersLabel.RichText = true
			lineNumbersLabel.Parent = frame

			local cursor = Instance.new("Frame")
			cursor.Name = "Cursor"
			cursor.BackgroundColor3 = Color3.fromRGB(220,220,220)
			cursor.BorderSizePixel = 0
			cursor.Parent = frame

			local editBox = Instance.new("TextBox")
			editBox.Name = "EditBox"
			editBox.MultiLine = true
			editBox.Visible = false
			editBox.Parent = frame

			lineTweens.Invis = tweenService:Create(cursor,TweenInfo.new(0.4,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{BackgroundTransparency = 1})
			lineTweens.Vis = tweenService:Create(cursor,TweenInfo.new(0.2,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{BackgroundTransparency = 0})

			elems.LinesFrame = linesFrame
			elems.LineNumbersLabel = lineNumbersLabel
			elems.Cursor = cursor
			elems.EditBox = editBox
			elems.ScrollCorner = create({{1,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Name="ScrollCorner",Position=UDim2.new(1,-16,1,-16),Size=UDim2.new(0,16,0,16),Visible=false,}}})

			elems.ScrollCorner.Parent = frame
			linesFrame.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					obj:SetEditing(true,input)
				end
			end)

			obj.Frame = frame
			obj.Gui = frame
			obj.GuiElems = elems
			setupEditBox(obj)
			setupMouseSelection(obj)

			return frame
		end

		funcs.GetSelectionText = function(self)
			if not self:IsValidRange() then return "" end

			local selectionRange = self.SelectionRange
			local selX,selY = selectionRange[1][1], selectionRange[1][2]
			local sel2X,sel2Y = selectionRange[2][1], selectionRange[2][2]
			local deltaLines = sel2Y-selY
			local lines = self.Lines

			if not lines[selY+1] or not lines[sel2Y+1] then return "" end

			if deltaLines == 0 then
				return self:ConvertText(lines[selY+1]:sub(selX+1,sel2X), false)
			end

			local leftSub = lines[selY+1]:sub(selX+1)
			local rightSub = lines[sel2Y+1]:sub(1,sel2X)

			local result = leftSub.."\n" 
			for i = selY+1,sel2Y-1 do
				result = result..lines[i+1].."\n"
			end
			result = result..rightSub

			return self:ConvertText(result,false)
		end

		funcs.SetCopyableSelection = function(self)
			local text = self:GetSelectionText()
			local editBox = self.GuiElems.EditBox

			self.EditBoxCopying = true
			editBox.Text = text
			editBox.SelectionStart = 1
			editBox.CursorPosition = #editBox.Text + 1
			self.EditBoxCopying = false
		end

		funcs.ConnectEditBoxEvent = function(self)
			if self.EditBoxEvent then
				self.EditBoxEvent:Disconnect()
			end

			self.EditBoxEvent = service.UserInputService.InputBegan:Connect(function(input)
				if input.UserInputType ~= Enum.UserInputType.Keyboard then return end

				local keycodes = Enum.KeyCode
				local keycode = input.KeyCode

				local function setupMove(key,func)
					local endCon,finished
					endCon = service.UserInputService.InputEnded:Connect(function(input)
						if input.KeyCode ~= key then return end
						endCon:Disconnect()
						finished = true
					end)
					func()
					Lib.FastWait(0.5)
					while not finished do func() Lib.FastWait(0.03) end
				end

				if keycode == keycodes.Down then
					setupMove(keycodes.Down,function()
						self.CursorX = self.FloatCursorX
						self.CursorY = self.CursorY + 1
						self:UpdateCursor()
						self:JumpToCursor()
					end)
				elseif keycode == keycodes.Up then
					setupMove(keycodes.Up,function()
						self.CursorX = self.FloatCursorX
						self.CursorY = self.CursorY - 1
						self:UpdateCursor()
						self:JumpToCursor()
					end)
				elseif keycode == keycodes.Left then
					setupMove(keycodes.Left,function()
						local line = self.Lines[self.CursorY+1] or ""
						self.CursorX = self.CursorX - 1 - (line:sub(self.CursorX-3,self.CursorX) == tabReplacement and 3 or 0)
						if self.CursorX < 0 then
							self.CursorY = self.CursorY - 1
							local line2 = self.Lines[self.CursorY+1] or ""
							self.CursorX = #line2
						end
						self.FloatCursorX = self.CursorX
						self:UpdateCursor()
						self:JumpToCursor()
					end)
				elseif keycode == keycodes.Right then
					setupMove(keycodes.Right,function()
						local line = self.Lines[self.CursorY+1] or ""
						self.CursorX = self.CursorX + 1 + (line:sub(self.CursorX+1,self.CursorX+4) == tabReplacement and 3 or 0)
						if self.CursorX > #line then
							self.CursorY = self.CursorY + 1
							self.CursorX = 0
						end
						self.FloatCursorX = self.CursorX
						self:UpdateCursor()
						self:JumpToCursor()
					end)
				elseif keycode == keycodes.Backspace then
					setupMove(keycodes.Backspace,function()
						local startRange,endRange
						if self:IsValidRange() then
							startRange = self.SelectionRange[1]
							endRange = self.SelectionRange[2]
						else
							endRange = {self.CursorX,self.CursorY}
						end

						if not startRange then
							local line = self.Lines[self.CursorY+1] or ""
							self.CursorX = self.CursorX - 1 - (line:sub(self.CursorX-3,self.CursorX) == tabReplacement and 3 or 0)
							if self.CursorX < 0 then
								self.CursorY = self.CursorY - 1
								local line2 = self.Lines[self.CursorY+1] or ""
								self.CursorX = #line2
							end
							self.FloatCursorX = self.CursorX
							self:UpdateCursor()

							startRange = startRange or {self.CursorX,self.CursorY}
						end

						self:DeleteRange({startRange,endRange},false,true)
						self:ResetSelection(true)
						self:JumpToCursor()
					end)
				elseif keycode == keycodes.Delete then
					setupMove(keycodes.Delete,function()
						local startRange,endRange
						if self:IsValidRange() then
							startRange = self.SelectionRange[1]
							endRange = self.SelectionRange[2]
						else
							startRange = {self.CursorX,self.CursorY}
						end

						if not endRange then
							local line = self.Lines[self.CursorY+1] or ""
							local endCursorX = self.CursorX + 1 + (line:sub(self.CursorX+1,self.CursorX+4) == tabReplacement and 3 or 0)
							local endCursorY = self.CursorY
							if endCursorX > #line then
								endCursorY = endCursorY + 1
								endCursorX = 0
							end
							self:UpdateCursor()

							endRange = endRange or {endCursorX,endCursorY}
						end

						self:DeleteRange({startRange,endRange},false,true)
						self:ResetSelection(true)
						self:JumpToCursor()
					end)
				elseif service.UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then
					if keycode == keycodes.A then
						self.SelectionRange = {{0,0},{#self.Lines[#self.Lines],#self.Lines-1}}
						self:SetCopyableSelection()
						self:Refresh()
					end
				end
			end)
		end

		funcs.DisconnectEditBoxEvent = function(self)
			if self.EditBoxEvent then
				self.EditBoxEvent:Disconnect()
			end
		end

		funcs.ResetSelection = function(self,norefresh)
			self.SelectionRange = {{-1,-1},{-1,-1}}
			if not norefresh then self:Refresh() end
		end

		funcs.IsValidRange = function(self,range)
			local selectionRange = range or self.SelectionRange
			local selX,selY = selectionRange[1][1], selectionRange[1][2]
			local sel2X,sel2Y = selectionRange[2][1], selectionRange[2][2]

			if selX == -1 or (selX == sel2X and selY == sel2Y) then return false end

			return true
		end

		funcs.DeleteRange = function(self,range,noprocess,updatemouse)
			range = range or self.SelectionRange
			if not self:IsValidRange(range) then return end

			local lines = self.Lines
			local selX,selY = range[1][1], range[1][2]
			local sel2X,sel2Y = range[2][1], range[2][2]
			local deltaLines = sel2Y-selY

			if not lines[selY+1] or not lines[sel2Y+1] then return end

			local leftSub = lines[selY+1]:sub(1,selX)
			local rightSub = lines[sel2Y+1]:sub(sel2X+1)
			lines[selY+1] = leftSub..rightSub

			local remove = table.remove
			for i = 1,deltaLines do
				remove(lines,selY+2)
			end

			if range == self.SelectionRange then self.SelectionRange = {{-1,-1},{-1,-1}} end
			if updatemouse then
				self.CursorX = selX
				self.CursorY = selY
				self:UpdateCursor()
			end

			if not noprocess then
				self:ProcessTextChange()
			end
		end

		funcs.AppendText = function(self,text)
			self:DeleteRange(nil,true,true)
			local lines,cursorX,cursorY = self.Lines,self.CursorX,self.CursorY
			local line = lines[cursorY+1]
			local before = line:sub(1,cursorX)
			local after = line:sub(cursorX+1)

			text = text:gsub("\r\n","\n")
			text = self:ConvertText(text,true) -- Tab Convert

			local textLines = text:split("\n")
			local insert = table.insert

			for i = 1,#textLines do
				local linePos = cursorY+i
				if i > 1 then insert(lines,linePos,"") end

				local textLine = textLines[i]
				local newBefore = (i == 1 and before or "")
				local newAfter = (i == #textLines and after or "")

				lines[linePos] = newBefore..textLine..newAfter
			end

			if #textLines > 1 then cursorX = 0 end

			self:ProcessTextChange()
			self.CursorX = cursorX + #textLines[#textLines]
			self.CursorY = cursorY + #textLines-1
			self:UpdateCursor()
		end

		funcs.ScrollDelta = function(self,x,y)
			self.ScrollV:ScrollTo(self.ScrollV.Index + y)
			self.ScrollH:ScrollTo(self.ScrollH.Index + x)
		end

		-- x and y starts at 0
		funcs.TabAdjust = function(self,x,y)
			local lines = self.Lines
			local line = lines[y+1]
			x=x+1

			if line then
				local left = line:sub(x-1,x-1)
				local middle = line:sub(x,x)
				local right = line:sub(x+1,x+1)
				local selRange = (#left > 0 and left or " ") .. (#middle > 0 and middle or " ") .. (#right > 0 and right or " ")

				for i,v in pairs(tabJumps) do
					if selRange:find(i) then
						return v
					end
				end
			end
			return 0
		end

		funcs.SetEditing = function(self,on,input)			
			self:UpdateCursor(input)

			if on then
				if self.Editable then
					self.GuiElems.EditBox.Text = ""
					self.GuiElems.EditBox:CaptureFocus()
				end
			else
				self.GuiElems.EditBox:ReleaseFocus()
			end
		end

		funcs.CursorAnim = function(self,on)
			local cursor = self.GuiElems.Cursor
			local animTime = tick()
			self.LastAnimTime = animTime

			if not on then return end

			lineTweens.Invis:Cancel()
			lineTweens.Vis:Cancel()
			cursor.BackgroundTransparency = 0

			coroutine.wrap(function()
				while self.Editable do
					Lib.FastWait(0.5)
					if self.LastAnimTime ~= animTime then return end
					lineTweens.Invis:Play()
					Lib.FastWait(0.4)
					if self.LastAnimTime ~= animTime then return end
					lineTweens.Vis:Play()
					Lib.FastWait(0.2)
				end
			end)()
		end

		funcs.MoveCursor = function(self,x,y)
			self.CursorX = x
			self.CursorY = y
			self:UpdateCursor()
			self:JumpToCursor()
		end

		funcs.JumpToCursor = function(self)
			self:Refresh()
		end

		funcs.UpdateCursor = function(self,input)
			local linesFrame = self.GuiElems.LinesFrame
			local cursor = self.GuiElems.Cursor			
			local hSize = math.max(0,linesFrame.AbsoluteSize.X)
			local vSize = math.max(0,linesFrame.AbsoluteSize.Y)
			local maxLines = math.ceil(vSize / self.FontSize)
			local maxCols = math.ceil(hSize / math.ceil(self.FontSize/2))
			local viewX,viewY = self.ViewX,self.ViewY
			local totalLinesStr = tostring(#self.Lines)
			local fontWidth = math.ceil(self.FontSize / 2)
			local linesOffset = #totalLinesStr*fontWidth + 4*fontWidth

			if input then
				local linesFrame = self.GuiElems.LinesFrame
				local frameX,frameY = linesFrame.AbsolutePosition.X,linesFrame.AbsolutePosition.Y
				local mouseX,mouseY = input.Position.X,input.Position.Y
				local fontSizeX,fontSizeY = math.ceil(self.FontSize/2),self.FontSize

				self.CursorX = self.ViewX + math.round((mouseX - frameX) / fontSizeX)
				self.CursorY = self.ViewY + math.floor((mouseY - frameY) / fontSizeY)
			end

			local cursorX,cursorY = self.CursorX,self.CursorY

			local line = self.Lines[cursorY+1] or ""
			if cursorX > #line then cursorX = #line
			elseif cursorX < 0 then cursorX = 0 end

			if cursorY >= #self.Lines then
				cursorY = math.max(0,#self.Lines-1)
			elseif cursorY < 0 then
				cursorY = 0
			end

			cursorX = cursorX + self:TabAdjust(cursorX,cursorY)

			-- Update modified
			self.CursorX = cursorX
			self.CursorY = cursorY

			local cursorVisible = (cursorX >= viewX) and (cursorY >= viewY) and (cursorX <= viewX + maxCols) and (cursorY <= viewY + maxLines)
			if cursorVisible then
				local offX = (cursorX - viewX)
				local offY = (cursorY - viewY)
				cursor.Position = UDim2.new(0,linesOffset + offX*math.ceil(self.FontSize/2) - 1,0,offY*self.FontSize)
				cursor.Size = UDim2.new(0,1,0,self.FontSize+2)
				cursor.Visible = true
				self:CursorAnim(true)
			else
				cursor.Visible = false
			end
		end

		funcs.MapNewLines = function(self)
			local newLines = {}
			local count = 1
			local text = self.Text
			local find = string.find
			local init = 1

			local pos = find(text,"\n",init,true)
			while pos do
				newLines[count] = pos
				count = count + 1
				init = pos + 1
				pos = find(text,"\n",init,true)
			end

			self.NewLines = newLines
		end

		funcs.PreHighlight = function(self)
			local start = tick()
			local text = self.Text:gsub("\\\\","  ")
			--print("BACKSLASH SUB",tick()-start)
			local textLen = #text
			local found = {}
			local foundMap = {}
			local extras = {}
			local find = string.find
			local sub = string.sub
			self.ColoredLines = {}

			local function findAll(str,pattern,typ,raw)
				local count = #found+1
				local init = 1
				local x,y,extra = find(str,pattern,init,raw)
				while x do
					found[count] = x
					foundMap[x] = typ
					if extra then
						extras[x] = extra
					end

					count = count+1
					init = y+1
					x,y,extra = find(str,pattern,init,raw)
				end
			end
			local start = tick()
			findAll(text,'"',1,true)
			findAll(text,"'",2,true)
			findAll(text,"%[(=*)%[",3)
			findAll(text,"--",4,true)
			table.sort(found)

			local newLines = self.NewLines
			local curLine = 0
			local lineTableCount = 1
			local lineStart = 0
			local lineEnd = 0
			local lastEnding = 0
			local foundHighlights = {}

			for i = 1,#found do
				local pos = found[i]
				if pos <= lastEnding then continue end

				local ending = pos
				local typ = foundMap[pos]
				if typ == 1 then
					ending = find(text,'"',pos+1,true)
					while ending and sub(text,ending-1,ending-1) == "\\" do
						ending = find(text,'"',ending+1,true)
					end
					if not ending then ending = textLen end
				elseif typ == 2 then
					ending = find(text,"'",pos+1,true)
					while ending and sub(text,ending-1,ending-1) == "\\" do
						ending = find(text,"'",ending+1,true)
					end
					if not ending then ending = textLen end
				elseif typ == 3 then
					_,ending = find(text,"]"..extras[pos].."]",pos+1,true)
					if not ending then ending = textLen end
				elseif typ == 4 then
					local ahead = foundMap[pos+2]

					if ahead == 3 then
						_,ending = find(text,"]"..extras[pos+2].."]",pos+1,true)
						if not ending then ending = textLen end
					else
						ending = find(text,"\n",pos+1,true) or textLen
					end
				end

				while pos > lineEnd do
					curLine = curLine + 1
					--lineTableCount = 1
					lineEnd = newLines[curLine] or textLen+1
				end
				while true do
					local lineTable = foundHighlights[curLine]
					if not lineTable then lineTable = {} foundHighlights[curLine] = lineTable end
					lineTable[pos] = {typ,ending}
					--lineTableCount = lineTableCount + 1

					if ending > lineEnd then
						curLine = curLine + 1
						lineEnd = newLines[curLine] or textLen+1
					else
						break
					end
				end

				lastEnding = ending
				--if i < 200 then print(curLine) end
			end
			self.PreHighlights = foundHighlights
			--print(tick()-start)
			--print(#found,curLine)
		end

		funcs.HighlightLine = function(self,line)
			local cached = self.ColoredLines[line]
			if cached then return cached end

			local sub = string.sub
			local find = string.find
			local match = string.match
			local highlights = {}
			local preHighlights = self.PreHighlights[line] or {}
			local lineText = self.Lines[line] or ""
			local lineLen = #lineText
			local lastEnding = 0
			local currentType = 0
			local lastWord = nil
			local wordBeginsDotted = false
			local funcStatus = 0
			local lineStart = self.NewLines[line-1] or 0

			local preHighlightMap = {}
			for pos,data in next,preHighlights do
				local relativePos = pos-lineStart
				if relativePos < 1 then
					currentType = data[1]
					lastEnding = data[2] - lineStart
					--warn(pos,data[2])
				else
					preHighlightMap[relativePos] = {data[1],data[2]-lineStart}
				end
			end

			for col = 1,#lineText do
				if col <= lastEnding then highlights[col] = currentType continue end

				local pre = preHighlightMap[col]
				if pre then
					currentType = pre[1]
					lastEnding = pre[2]
					highlights[col] = currentType
					wordBeginsDotted = false
					lastWord = nil
					funcStatus = 0
				else
					local char = sub(lineText,col,col)
					if find(char,"[%a_]") then
						local word = match(lineText,"[%a%d_]+",col)
						local wordType = (keywords[word] and 7) or (builtIns[word] and 8)

						lastEnding = col+#word-1

						if wordType ~= 7 then
							if wordBeginsDotted then
								local prevBuiltIn = lastWord and builtIns[lastWord]
								wordType = (prevBuiltIn and type(prevBuiltIn) == "table" and prevBuiltIn[word] and 8) or 10
							end

							if wordType ~= 8 then
								local x,y,br = find(lineText,"^%s*([%({\"'])",lastEnding+1)
								if x then
									wordType = (funcStatus > 0 and br == "(" and 16) or 9
									funcStatus = 0
								end
							end
						else
							wordType = specialKeywordsTypes[word] or wordType
							funcStatus = (word == "function" and 1 or 0)
						end

						lastWord = word
						wordBeginsDotted = false
						if funcStatus > 0 then funcStatus = 1 end

						if wordType then
							currentType = wordType
							highlights[col] = currentType
						else
							currentType = nil
						end
					elseif find(char,"%p") then
						local isDot = (char == ".")
						local isNum = isDot and find(sub(lineText,col+1,col+1),"%d")
						highlights[col] = (isNum and 6 or 5)

						if not isNum then
							local dotStr = isDot and match(lineText,"%.%.?%.?",col)
							if dotStr and #dotStr > 1 then
								currentType = 5
								lastEnding = col+#dotStr-1
								wordBeginsDotted = false
								lastWord = nil
								funcStatus = 0
							else
								if isDot then
									if wordBeginsDotted then
										lastWord = nil
									else
										wordBeginsDotted = true
									end
								else
									wordBeginsDotted = false
									lastWord = nil
								end

								funcStatus = ((isDot or char == ":") and funcStatus == 1 and 2) or 0
							end
						end
					elseif find(char,"%d") then
						local _,endPos = find(lineText,"%x+",col)
						local endPart = sub(lineText,endPos,endPos+1)
						if (endPart == "e+" or endPart == "e-") and find(sub(lineText,endPos+2,endPos+2),"%d") then
							endPos = endPos + 1
						end
						currentType = 6
						lastEnding = endPos
						highlights[col] = 6
						wordBeginsDotted = false
						lastWord = nil
						funcStatus = 0
					else
						highlights[col] = currentType
						local _,endPos = find(lineText,"%s+",col)
						if endPos then
							lastEnding = endPos
						end
					end
				end
			end

			self.ColoredLines[line] = highlights
			return highlights
		end

		funcs.Refresh = function(self)
			local start = tick()

			local linesFrame = self.Frame.Lines
			local hSize = math.max(0,linesFrame.AbsoluteSize.X)
			local vSize = math.max(0,linesFrame.AbsoluteSize.Y)
			local maxLines = math.ceil(vSize / self.FontSize)
			local maxCols = math.ceil(hSize / math.ceil(self.FontSize/2))
			local gsub = string.gsub
			local sub = string.sub

			local viewX,viewY = self.ViewX,self.ViewY

			local lineNumberStr = ""

			for row = 1,maxLines do
				local lineFrame = self.LineFrames[row]
				if not lineFrame then
					lineFrame = Instance.new("Frame")
					lineFrame.Name = "Line"
					lineFrame.Position = UDim2.new(0,0,0,(row-1)*self.FontSize)
					lineFrame.Size = UDim2.new(1,0,0,self.FontSize)
					lineFrame.BorderSizePixel = 0
					lineFrame.BackgroundTransparency = 1

					local selectionHighlight = Instance.new("Frame")
					selectionHighlight.Name = "SelectionHighlight"
					selectionHighlight.BorderSizePixel = 0
					selectionHighlight.BackgroundColor3 = Settings.Theme.Syntax.SelectionBack
					selectionHighlight.Parent = lineFrame

					local label = Instance.new("TextLabel")
					label.Name = "Label"
					label.BackgroundTransparency = 1
					label.Font = Enum.Font.Code
					label.TextSize = self.FontSize
					label.Size = UDim2.new(1,0,0,self.FontSize)
					label.RichText = true
					label.TextXAlignment = Enum.TextXAlignment.Left
					label.TextColor3 = self.Colors.Text
					label.ZIndex = 2
					label.Parent = lineFrame

					lineFrame.Parent = linesFrame
					self.LineFrames[row] = lineFrame
				end

				local relaY = viewY + row
				local lineText = self.Lines[relaY] or ""
				local resText = ""
				local highlights = self:HighlightLine(relaY)
				local colStart = viewX + 1

				local richTemplates = self.RichTemplates
				local textTemplate = richTemplates.Text
				local selectionTemplate = richTemplates.Selection
				local curType = highlights[colStart]
				local curTemplate = richTemplates[typeMap[curType]] or textTemplate

				-- Selection Highlight
				local selectionRange = self.SelectionRange
				local selPos1 = selectionRange[1]
				local selPos2 = selectionRange[2]
				local selRow,selColumn = selPos1[2],selPos1[1]
				local sel2Row,sel2Column = selPos2[2],selPos2[1]
				local selRelaX,selRelaY = viewX,relaY-1

				if selRelaY >= selPos1[2] and selRelaY <= selPos2[2] then
					local fontSizeX = math.ceil(self.FontSize/2)
					local posX = (selRelaY == selPos1[2] and selPos1[1] or 0) - viewX
					local sizeX = (selRelaY == selPos2[2] and selPos2[1]-posX-viewX or maxCols+viewX)

					lineFrame.SelectionHighlight.Position = UDim2.new(0,posX*fontSizeX,0,0)
					lineFrame.SelectionHighlight.Size = UDim2.new(0,sizeX*fontSizeX,1,0)
					lineFrame.SelectionHighlight.Visible = true
				else
					lineFrame.SelectionHighlight.Visible = false
				end

				-- Selection Text Color for first char
				local inSelection = selRelaY >= selRow and selRelaY <= sel2Row and (selRelaY == selRow and viewX >= selColumn or selRelaY ~= selRow) and (selRelaY == sel2Row and viewX < sel2Column or selRelaY ~= sel2Row)
				if inSelection then
					curType = -999
					curTemplate = selectionTemplate
				end

				for col = 2,maxCols do
					local relaX = viewX + col
					local selRelaX = relaX-1
					local posType = highlights[relaX]

					-- Selection Text Color
					local inSelection = selRelaY >= selRow and selRelaY <= sel2Row and (selRelaY == selRow and selRelaX >= selColumn or selRelaY ~= selRow) and (selRelaY == sel2Row and selRelaX < sel2Column or selRelaY ~= sel2Row)
					if inSelection then
						posType = -999
					end

					if posType ~= curType then
						local template = (inSelection and selectionTemplate) or richTemplates[typeMap[posType]] or textTemplate

						if template ~= curTemplate then
							local nextText = gsub(sub(lineText,colStart,relaX-1),"['\"<>&]",richReplace)
							resText = resText .. (curTemplate ~= textTemplate and (curTemplate .. nextText .. "</font>") or nextText)
							colStart = relaX
							curTemplate = template
						end
						curType = posType
					end
				end

				local lastText = gsub(sub(lineText,colStart,viewX+maxCols),"['\"<>&]",richReplace)
				--warn("SUB",colStart,viewX+maxCols-1)
				if #lastText > 0 then
					resText = resText .. (curTemplate ~= textTemplate and (curTemplate .. lastText .. "</font>") or lastText)
				end

				if self.Lines[relaY] then

					-- REMOVED LINE HIGHLIGHT DUE TO BUG OFFSET
					lineNumberStr = lineNumberStr .. (relaY == self.CursorY and ("<b>"..relaY.."</b>\n") or relaY .. "\n")
					--lineNumberStr = lineNumberStr .. (relaY == self.CursorY and (relaY.."\n") or relaY .. "\n")
				end

				lineFrame.Label.Text = resText
			end

			for i = maxLines+1,#self.LineFrames do
				self.LineFrames[i]:Destroy()
				self.LineFrames[i] = nil
			end

			self.Frame.LineNumbers.Text = lineNumberStr
			self:UpdateCursor()

			--print("REFRESH TIME",tick()-start)
		end

		funcs.UpdateView = function(self)
			local totalLinesStr = tostring(#self.Lines)
			local fontWidth = math.ceil(self.FontSize / 2)
			local linesOffset = #totalLinesStr*fontWidth + 4*fontWidth

			local linesFrame = self.Frame.Lines
			local hSize = linesFrame.AbsoluteSize.X
			local vSize = linesFrame.AbsoluteSize.Y
			local maxLines = math.ceil(vSize / self.FontSize)
			local totalWidth = self.MaxTextCols*fontWidth
			local scrollV = self.ScrollV
			local scrollH = self.ScrollH

			scrollV.VisibleSpace = maxLines
			scrollV.TotalSpace = #self.Lines + 1
			scrollH.VisibleSpace = math.ceil(hSize/fontWidth)
			scrollH.TotalSpace = self.MaxTextCols + 1

			scrollV.Gui.Visible = #self.Lines + 1 > maxLines
			scrollH.Gui.Visible = totalWidth > hSize

			local oldOffsets = self.FrameOffsets
			self.FrameOffsets = Vector2.new(scrollV.Gui.Visible and -16 or 0, scrollH.Gui.Visible and -16 or 0)
			if oldOffsets ~= self.FrameOffsets then
				self:UpdateView()
			else
				scrollV:ScrollTo(self.ViewY,true)
				scrollH:ScrollTo(self.ViewX,true)

				if scrollV.Gui.Visible and scrollH.Gui.Visible then
					scrollV.Gui.Size = UDim2.new(0,16,1,-16)
					scrollH.Gui.Size = UDim2.new(1,-16,0,16)
					self.GuiElems.ScrollCorner.Visible = true
				else
					scrollV.Gui.Size = UDim2.new(0,16,1,0)
					scrollH.Gui.Size = UDim2.new(1,0,0,16)
					self.GuiElems.ScrollCorner.Visible = false
				end

				self.ViewY = scrollV.Index
				self.ViewX = scrollH.Index
				self.Frame.Lines.Position = UDim2.new(0,linesOffset,0,0)
				self.Frame.Lines.Size = UDim2.new(1,-linesOffset+oldOffsets.X,1,oldOffsets.Y)
				self.Frame.LineNumbers.Position = UDim2.new(0,fontWidth,0,0)
				self.Frame.LineNumbers.Size = UDim2.new(0,#totalLinesStr*fontWidth,1,oldOffsets.Y)
				self.Frame.LineNumbers.TextSize = self.FontSize
			end
		end

		funcs.ProcessTextChange = function(self)
			local maxCols = 0
			local lines = self.Lines

			for i = 1,#lines do
				local lineLen = #lines[i]
				if lineLen > maxCols then
					maxCols = lineLen
				end
			end

			self.MaxTextCols = maxCols
			self:UpdateView()	
			self.Text = table.concat(self.Lines,"\n")
			self:MapNewLines()
			self:PreHighlight()
			self:Refresh()
			--self.TextChanged:Fire()
		end

		funcs.ConvertText = function(self,text,toEditor)
			if toEditor then
				--return text:gsub("\t",(" %s%s "):format(tabSub,tabSub))
				return text:gsub("\t","    ") -- Fixed unknown unicode showing when pressing TAB
			else
				return text:gsub((" %s%s "):format(tabSub,tabSub),"\t")
			end
		end

		funcs.GetText = function(self) -- TODO: better (use new tab format)
			local source = table.concat(self.Lines,"\n")
			return self:ConvertText(source,false) -- Tab Convert
		end

		funcs.SetText = function(self,txt)
			txt = self:ConvertText(txt,true) -- Tab Convert
			local lines = self.Lines
			table.clear(lines)
			local count = 1

			for line in txt:gmatch("([^\n\r]*)[\n\r]?") do
				local len = #line
				lines[count] = line
				count = count + 1
			end

			self:ProcessTextChange()
		end

		funcs.MakeRichTemplates = function(self)
			local floor = math.floor
			local templates = {}

			for name,color in pairs(self.Colors) do
				templates[name] = ('<font color="rgb(%s,%s,%s)">'):format(floor(color.r*255),floor(color.g*255),floor(color.b*255))
			end

			self.RichTemplates = templates
		end

		funcs.ApplyTheme = function(self)
			local colors = Settings.Theme.Syntax
			self.Colors = colors
			self.Frame.LineNumbers.TextColor3 = colors.Text
			self.Frame.BackgroundColor3 = colors.Background
		end

		local mt = {__index = funcs}

		local function new()
			if not builtInInited then initBuiltIn() end

			local scrollV = Lib.ScrollBar.new()
			local scrollH = Lib.ScrollBar.new(true)
			scrollH.Gui.Position = UDim2.new(0,0,1,-16)
			local obj = setmetatable({
				FontSize = 16,
				ViewX = 0,
				ViewY = 0,
				Colors = Settings.Theme.Syntax,
				ColoredLines = {},
				Lines = {""},
				LineFrames = {},
				Editable = true,
				Editing = false,
				CursorX = 0,
				CursorY = 0,
				FloatCursorX = 0,
				Text = "",
				PreHighlights = {},
				SelectionRange = {{-1,-1},{-1,-1}},
				NewLines = {},
				FrameOffsets = Vector2.new(0,0),
				MaxTextCols = 0,
				ScrollV = scrollV,
				ScrollH = scrollH
			},mt)

			scrollV.WheelIncrement = 3
			scrollH.Increment = 2
			scrollH.WheelIncrement = 7

			scrollV.Scrolled:Connect(function()
				obj.ViewY = scrollV.Index
				obj:Refresh()
			end)

			scrollH.Scrolled:Connect(function()
				obj.ViewX = scrollH.Index
				obj:Refresh()
			end)

			makeFrame(obj)
			obj:MakeRichTemplates()
			obj:ApplyTheme()
			scrollV:SetScrollFrame(obj.Frame.Lines)
			scrollV.Gui.Parent = obj.Frame
			scrollH.Gui.Parent = obj.Frame

			obj:UpdateView()
			obj.Frame:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
				obj:UpdateView()
				obj:Refresh()
			end)

			return obj
		end

		return {new = new}
	end)()

	Lib.Checkbox = (function()
		local funcs = {}
		local c3 = Color3.fromRGB
		local v2 = Vector2.new
		local ud2s = UDim2.fromScale
		local ud2o = UDim2.fromOffset
		local ud = UDim.new
		local max = math.max
		local new = Instance.new
		local TweenSize = new("Frame").TweenSize
		local ti = TweenInfo.new
		local delay = delay

		local function ripple(object, color)
			local circle = new('Frame')
			circle.BackgroundColor3 = color
			circle.BackgroundTransparency = 0.75
			circle.BorderSizePixel = 0
			circle.AnchorPoint = v2(0.5, 0.5)
			circle.Size = ud2o()
			circle.Position = ud2s(0.5, 0.5)
			circle.Parent = object
			local rounding = new('UICorner')
			rounding.CornerRadius = ud(1)
			rounding.Parent = circle

			local abssz = object.AbsoluteSize
			local size = max(abssz.X, abssz.Y) * 5/3

			TweenSize(circle, ud2o(size, size), "Out", "Quart", 0.4)
			service.TweenService:Create(circle, ti(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.In), {BackgroundTransparency = 1}):Play()

			service.Debris:AddItem(circle, 0.4)
		end

		local function initGui(self,frame)
			local checkbox = frame or create({
				{1,"ImageButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Checkbox",Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,16,0,16),}},
				{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ripples",Parent={1},Size=UDim2.new(1,0,1,0),}},
				{3,"Frame",{BackgroundColor3=Color3.new(0.10196078568697,0.10196078568697,0.10196078568697),BorderSizePixel=0,Name="outline",Parent={1},Size=UDim2.new(0,16,0,16),}},
				{4,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="filler",Parent={3},Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,14,0,14),}},
				{5,"Frame",{BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="top",Parent={4},Size=UDim2.new(0,16,0,0),}},
				{6,"Frame",{AnchorPoint=Vector2.new(0,1),BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="bottom",Parent={4},Position=UDim2.new(0,0,0,14),Size=UDim2.new(0,16,0,0),}},
				{7,"Frame",{BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="left",Parent={4},Size=UDim2.new(0,0,0,16),}},
				{8,"Frame",{AnchorPoint=Vector2.new(1,0),BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="right",Parent={4},Position=UDim2.new(0,14,0,0),Size=UDim2.new(0,0,0,16),}},
				{9,"Frame",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,ClipsDescendants=true,Name="checkmark",Parent={4},Position=UDim2.new(0.5,0,0.5,0),Size=UDim2.new(0,0,0,20),}},
				{10,"ImageLabel",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://6234266378",Parent={9},Position=UDim2.new(0.5,0,0.5,0),ScaleType=3,Size=UDim2.new(0,15,0,11),}},
				{11,"ImageLabel",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6401617475",ImageColor3=Color3.new(0.20784313976765,0.69803923368454,0.98431372642517),Name="checkmark2",Parent={4},Position=UDim2.new(0.5,0,0.5,0),Size=UDim2.new(0,12,0,12),Visible=false,}},
				{12,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6425281788",ImageTransparency=0.20000000298023,Name="middle",Parent={4},ScaleType=2,Size=UDim2.new(1,0,1,0),TileSize=UDim2.new(0,2,0,2),Visible=false,}},
				{13,"UICorner",{CornerRadius=UDim.new(0,2),Parent={3},}},
			})
			local outline = checkbox.outline
			local filler = outline.filler
			local checkmark = filler.checkmark
			local ripples_container = checkbox.ripples

			-- walls
			local top, bottom, left, right = filler.top, filler.bottom, filler.left, filler.right

			self.Gui = checkbox
			self.GuiElems = {
				Top = top,
				Bottom = bottom,
				Left = left,
				Right = right,
				Outline = outline,
				Filler = filler,
				Checkmark = checkmark,
				Checkmark2 = filler.checkmark2,
				Middle = filler.middle
			}
	
			-- New:
			--[[checkbox.Activated:Connect(function()
				if Lib.CheckMouseInGui(checkbox) then
					if self.Style == 0 then
						ripple(ripples_container, self.Disabled and self.Colors.Disabled or self.Colors.Primary)
					end

					if not self.Disabled then
						self:SetState(not self.Toggled,true)
					else
						self:Paint()
					end

					self.OnInput:Fire()
				end
			end)]]
			
			-- Best input compatibility:
			checkbox.MouseButton1Up:Connect(function()
				if Lib.CheckMouseInGui(checkbox) then
					if self.Style == 0 then
						ripple(ripples_container, self.Disabled and self.Colors.Disabled or self.Colors.Primary)
					end

					if not self.Disabled then
						self:SetState(not self.Toggled,true)
					else
						self:Paint()
					end

					self.OnInput:Fire()
				end
			end)

			-- Old:
			--[[checkbox.InputBegan:Connect(function(i)
				if i.UserInputType == Enum.UserInputType.MouseButton1 then
					local release
					release = service.UserInputService.InputEnded:Connect(function(input)
						if input.UserInputType == Enum.UserInputType.MouseButton1 then
							release:Disconnect()

							if Lib.CheckMouseInGui(checkbox) then
								if self.Style == 0 then
									ripple(ripples_container, self.Disabled and self.Colors.Disabled or self.Colors.Primary)
								end

								if not self.Disabled then
									self:SetState(not self.Toggled,true)
								else
									self:Paint()
								end
								
								self.OnInput:Fire()
							end
						end
					end)
				end
			end)]]

			self:Paint()
		end

		funcs.Collapse = function(self,anim)
			local guiElems = self.GuiElems
			if anim then
				TweenSize(guiElems.Top, ud2o(14, 14), "In", "Quart", 4/15, true)
				TweenSize(guiElems.Bottom, ud2o(14, 14), "In", "Quart", 4/15, true)
				TweenSize(guiElems.Left, ud2o(14, 14), "In", "Quart", 4/15, true)
				TweenSize(guiElems.Right, ud2o(14, 14), "In", "Quart", 4/15, true)
			else
				guiElems.Top.Size = ud2o(14, 14)
				guiElems.Bottom.Size = ud2o(14, 14)
				guiElems.Left.Size = ud2o(14, 14)
				guiElems.Right.Size = ud2o(14, 14)
			end
		end

		funcs.Expand = function(self,anim)
			local guiElems = self.GuiElems
			if anim then
				TweenSize(guiElems.Top, ud2o(14, 0), "InOut", "Quart", 4/15, true)
				TweenSize(guiElems.Bottom, ud2o(14, 0), "InOut", "Quart", 4/15, true)
				TweenSize(guiElems.Left, ud2o(0, 14), "InOut", "Quart", 4/15, true)
				TweenSize(guiElems.Right, ud2o(0, 14), "InOut", "Quart", 4/15, true)
			else
				guiElems.Top.Size = ud2o(14, 0)
				guiElems.Bottom.Size = ud2o(14, 0)
				guiElems.Left.Size = ud2o(0, 14)
				guiElems.Right.Size = ud2o(0, 14)
			end
		end

		funcs.Paint = function(self)
			local guiElems = self.GuiElems

			if self.Style == 0 then
				local color_base = self.Disabled and self.Colors.Disabled
				guiElems.Outline.BackgroundColor3 = color_base or (self.Toggled and self.Colors.Primary) or self.Colors.Secondary
				local walls_color = color_base or self.Colors.Primary
				guiElems.Top.BackgroundColor3 = walls_color
				guiElems.Bottom.BackgroundColor3 = walls_color
				guiElems.Left.BackgroundColor3 = walls_color
				guiElems.Right.BackgroundColor3 = walls_color
			else
				guiElems.Outline.BackgroundColor3 = self.Disabled and self.Colors.Disabled or self.Colors.Secondary
				guiElems.Filler.BackgroundColor3 = self.Disabled and self.Colors.DisabledBackground or self.Colors.Background
				guiElems.Checkmark2.ImageColor3 = self.Disabled and self.Colors.DisabledCheck or self.Colors.Primary
			end
		end

		funcs.SetState = function(self,val,anim)
			self.Toggled = val

			if self.OutlineColorTween then self.OutlineColorTween:Cancel() end
			local setStateTime = tick()
			self.LastSetStateTime = setStateTime

			if self.Toggled then
				if self.Style == 0 then
					if anim then
						self.OutlineColorTween = service.TweenService:Create(self.GuiElems.Outline, ti(4/15, Enum.EasingStyle.Circular, Enum.EasingDirection.Out), {BackgroundColor3 = self.Colors.Primary})
						self.OutlineColorTween:Play()
						delay(0.15, function()
							if setStateTime ~= self.LastSetStateTime then return end
							self:Paint()
							TweenSize(self.GuiElems.Checkmark, ud2o(14, 20), "Out", "Bounce", 2/15, true)
						end)
					else
						self.GuiElems.Outline.BackgroundColor3 = self.Colors.Primary
						self:Paint()
						self.GuiElems.Checkmark.Size = ud2o(14, 20)
					end
					self:Collapse(anim)
				else
					self:Paint()
					self.GuiElems.Checkmark2.Visible = true
					self.GuiElems.Middle.Visible = false
				end
			else
				if self.Style == 0 then
					if anim then
						self.OutlineColorTween = service.TweenService:Create(self.GuiElems.Outline, ti(4/15, Enum.EasingStyle.Circular, Enum.EasingDirection.In), {BackgroundColor3 = self.Colors.Secondary})
						self.OutlineColorTween:Play()
						delay(0.15, function()
							if setStateTime ~= self.LastSetStateTime then return end
							self:Paint()
							TweenSize(self.GuiElems.Checkmark, ud2o(0, 20), "Out", "Quad", 1/15, true)
						end)
					else
						self.GuiElems.Outline.BackgroundColor3 = self.Colors.Secondary
						self:Paint()
						self.GuiElems.Checkmark.Size = ud2o(0, 20)
					end
					self:Expand(anim)
				else
					self:Paint()
					self.GuiElems.Checkmark2.Visible = false
					self.GuiElems.Middle.Visible = self.Toggled == nil
				end
			end
		end

		local mt = {__index = funcs}

		local function new(style)
			local obj = setmetatable({
				Toggled = false,
				Disabled = false,
				OnInput = Lib.Signal.new(),
				Style = style or 0,
				Colors = {
					Background = c3(36,36,36),
					Primary = c3(49,176,230),
					Secondary = c3(25,25,25),
					Disabled = c3(64,64,64),
					DisabledBackground = c3(52,52,52),
					DisabledCheck = c3(80,80,80)
				}
			},mt)
			initGui(obj)
			return obj
		end

		local function fromFrame(frame)
			local obj = setmetatable({
				Toggled = false,
				Disabled = false,
				Colors = {
					Background = c3(36,36,36),
					Primary = c3(49,176,230),
					Secondary = c3(25,25,25),
					Disabled = c3(64,64,64),
					DisabledBackground = c3(52,52,52)
				}
			},mt)
			initGui(obj,frame)
			return obj
		end

		return {new = new, fromFrame}
	end)()

	Lib.BrickColorPicker = (function()
		local funcs = {}
		local paletteCount = 0
		local mouse = service.Players.LocalPlayer:GetMouse()
		local hexStartX = 4
		local hexSizeX = 27
		local hexTriangleStart = 1
		local hexTriangleSize = 8

		local bottomColors = {
			Color3.fromRGB(17,17,17),
			Color3.fromRGB(99,95,98),
			Color3.fromRGB(163,162,165),
			Color3.fromRGB(205,205,205),
			Color3.fromRGB(223,223,222),
			Color3.fromRGB(237,234,234),
			Color3.fromRGB(27,42,53),
			Color3.fromRGB(91,93,105),
			Color3.fromRGB(159,161,172),
			Color3.fromRGB(202,203,209),
			Color3.fromRGB(231,231,236),
			Color3.fromRGB(248,248,248)
		}

		local function isMouseInHexagon(hex, touchPos)
			local relativeX = touchPos.X - hex.AbsolutePosition.X
			local relativeY = touchPos.Y - hex.AbsolutePosition.Y
			if relativeX >= hexStartX and relativeX < hexStartX + hexSizeX then
				relativeX = relativeX - 4
				local relativeWidth = (13 - math.min(relativeX, 26 - relativeX)) / 13
				if relativeY >= hexTriangleStart + hexTriangleSize * relativeWidth and relativeY < hex.AbsoluteSize.Y - hexTriangleStart - hexTriangleSize * relativeWidth then
					return true
				end
			end
			return false
		end

		local function hexInput(self, hex, color)
			hex.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					if isMouseInHexagon(hex, input.Position) then
						self.OnSelect:Fire(color)
						self:Close()
					end
				end
			end)

			hex.InputChanged:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
					if isMouseInHexagon(hex, input.Position) then
						self.OnPreview:Fire(color)
					end
				end
			end)
		end

		local function createGui(self)
			local gui = create({
				{1,"ScreenGui",{Name="BrickColor",}},
				{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),Parent={1},Position=UDim2.new(0.40000000596046,0,0.40000000596046,0),Size=UDim2.new(0,337,0,380),}},
				{3,"TextButton",{BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="MoreColors",Parent={2},Position=UDim2.new(0,5,1,-30),Size=UDim2.new(1,-10,0,25),Text="More Colors",TextColor3=Color3.new(1,1,1),TextSize=14,}},
				{4,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1281023007",ImageColor3=Color3.new(0.33333334326744,0.33333334326744,0.49803924560547),Name="Hex",Parent={2},Size=UDim2.new(0,35,0,35),Visible=false,}},
			})
			local colorFrame = gui.Frame
			local hex = colorFrame.Hex

			for row = 1,13 do
				local columns = math.min(row,14-row)+6
				for column = 1,columns do
					local nextColor = BrickColor.palette(paletteCount).Color
					local newHex = hex:Clone()
					newHex.Position = UDim2.new(0, (column-1)*25-(columns-7)*13+3*26 + 1, 0, (row-1)*23 + 4)
					newHex.ImageColor3 = nextColor
					newHex.Visible = true
					hexInput(self,newHex,nextColor)
					newHex.Parent = colorFrame
					paletteCount = paletteCount + 1
				end
			end

			for column = 1,12 do
				local nextColor = bottomColors[column]
				local newHex = hex:Clone()
				newHex.Position = UDim2.new(0, (column-1)*25-(12-7)*13+3*26 + 3, 0, 308)
				newHex.ImageColor3 = nextColor
				newHex.Visible = true
				hexInput(self,newHex,nextColor)
				newHex.Parent = colorFrame
				paletteCount = paletteCount + 1
			end

			colorFrame.MoreColors.MouseButton1Click:Connect(function()
				self.OnMoreColors:Fire()
				self:Close()
			end)

			self.Gui = gui
		end

		funcs.SetMoreColorsVisible = function(self,vis)
			local colorFrame = self.Gui.Frame
			colorFrame.Size = UDim2.new(0,337,0,380 - (not vis and 33 or 0))
			colorFrame.MoreColors.Visible = vis
		end

		funcs.Show = function(self,x,y,prevColor)
			self.PrevColor = prevColor or self.PrevColor

			local reverseY = false

			local x,y = x or mouse.X, y or mouse.Y
			local maxX,maxY = mouse.ViewSizeX,mouse.ViewSizeY
			Lib.ShowGui(self.Gui)
			local sizeX,sizeY = self.Gui.Frame.AbsoluteSize.X,self.Gui.Frame.AbsoluteSize.Y

			if x + sizeX > maxX then x = self.ReverseX and x - sizeX or maxX - sizeX end
			if y + sizeY > maxY then reverseY = true end

			local closable = false
			if self.CloseEvent then self.CloseEvent:Disconnect() end

			self.CloseEvent = service.UserInputService.InputBegan:Connect(function(input)
				if not closable or (input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch) then
					return
				end

				if not Lib.CheckMouseInGui(self.Gui.Frame) then
					self.CloseEvent:Disconnect()
					self:Close()
				end
			end)


			if reverseY then
				local newY = y - sizeY - (self.ReverseYOffset or 0)
				y = newY >= 0 and newY or 0
			end

			self.Gui.Frame.Position = UDim2.new(0,x,0,y)

			Lib.FastWait()
			closable = true
		end

		funcs.Close = function(self)
			self.Gui.Parent = nil
			self.OnCancel:Fire()
		end

		local mt = {__index = funcs}

		local function new()
			local obj = setmetatable({
				OnPreview = Lib.Signal.new(),
				OnSelect = Lib.Signal.new(),
				OnCancel = Lib.Signal.new(),
				OnMoreColors = Lib.Signal.new(),
				PrevColor = Color3.new(0,0,0)
			}, mt)
			createGui(obj)
			return obj
		end

		return {new = new}
	end)()

	Lib.ColorPicker = (function() -- TODO: Convert to newer class model
		local funcs = {}

		local function new()
			local newMt = setmetatable({},{})

			newMt.OnSelect = Lib.Signal.new()
			newMt.OnCancel = Lib.Signal.new()
			newMt.OnPreview = Lib.Signal.new()

			local guiContents = create({
				{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
				{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="BasicColors",Parent={1},Position=UDim2.new(0,5,0,5),Size=UDim2.new(0,180,0,200),}},
				{3,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={2},Position=UDim2.new(0,0,0,-5),Size=UDim2.new(1,0,0,26),Text="Basic Colors",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{4,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Blue",Parent={1},Position=UDim2.new(1,-63,0,255),Size=UDim2.new(0,52,0,16),}},
				{5,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={4},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{6,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={5},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
				{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={6},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{8,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={7},Size=UDim2.new(0,16,0,8),}},
				{9,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
				{10,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{11,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
				{12,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={6},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{13,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={12},Size=UDim2.new(0,16,0,8),}},
				{14,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
				{15,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{16,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
				{17,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={4},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Blue:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{18,"Frame",{BackgroundColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,ClipsDescendants=true,Name="ColorSpaceFrame",Parent={1},Position=UDim2.new(1,-261,0,4),Size=UDim2.new(0,222,0,202),}},
				{19,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),BorderSizePixel=0,Image="rbxassetid://1072518406",Name="ColorSpace",Parent={18},Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,220,0,200),}},
				{20,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Scope",Parent={19},Position=UDim2.new(0,210,0,190),Size=UDim2.new(0,20,0,20),}},
				{21,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Name="Line",Parent={20},Position=UDim2.new(0,9,0,0),Size=UDim2.new(0,2,0,20),}},
				{22,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Name="Line",Parent={20},Position=UDim2.new(0,0,0,9),Size=UDim2.new(0,20,0,2),}},
				{23,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="CustomColors",Parent={1},Position=UDim2.new(0,5,0,210),Size=UDim2.new(0,180,0,90),}},
				{24,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={23},Size=UDim2.new(1,0,0,20),Text="Custom Colors (RC = Set)",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{25,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Green",Parent={1},Position=UDim2.new(1,-63,0,233),Size=UDim2.new(0,52,0,16),}},
				{26,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={25},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{27,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={26},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
				{28,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={27},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{29,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={28},Size=UDim2.new(0,16,0,8),}},
				{30,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
				{31,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{32,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
				{33,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={27},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{34,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={33},Size=UDim2.new(0,16,0,8),}},
				{35,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
				{36,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{37,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
				{38,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={25},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Green:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{39,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Hue",Parent={1},Position=UDim2.new(1,-180,0,211),Size=UDim2.new(0,52,0,16),}},
				{40,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={39},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{41,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={40},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
				{42,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={41},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{43,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={42},Size=UDim2.new(0,16,0,8),}},
				{44,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
				{45,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{46,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
				{47,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={41},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{48,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={47},Size=UDim2.new(0,16,0,8),}},
				{49,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
				{50,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{51,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
				{52,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={39},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Hue:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{53,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="Preview",Parent={1},Position=UDim2.new(1,-260,0,211),Size=UDim2.new(0,35,1,-245),}},
				{54,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Red",Parent={1},Position=UDim2.new(1,-63,0,211),Size=UDim2.new(0,52,0,16),}},
				{55,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={54},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{56,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={55},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
				{57,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={56},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{58,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={57},Size=UDim2.new(0,16,0,8),}},
				{59,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
				{60,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{61,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
				{62,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={56},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{63,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={62},Size=UDim2.new(0,16,0,8),}},
				{64,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
				{65,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{66,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
				{67,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={54},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Red:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{68,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Sat",Parent={1},Position=UDim2.new(1,-180,0,233),Size=UDim2.new(0,52,0,16),}},
				{69,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={68},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{70,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={69},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
				{71,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={70},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{72,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={71},Size=UDim2.new(0,16,0,8),}},
				{73,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
				{74,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{75,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
				{76,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={70},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{77,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={76},Size=UDim2.new(0,16,0,8),}},
				{78,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
				{79,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{80,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
				{81,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={68},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Sat:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{82,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Val",Parent={1},Position=UDim2.new(1,-180,0,255),Size=UDim2.new(0,52,0,16),}},
				{83,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={82},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="255",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{84,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={83},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
				{85,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={84},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{86,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={85},Size=UDim2.new(0,16,0,8),}},
				{87,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
				{88,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{89,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
				{90,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={84},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
				{91,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={90},Size=UDim2.new(0,16,0,8),}},
				{92,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
				{93,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
				{94,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
				{95,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={82},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Val:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{96,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Cancel",Parent={1},Position=UDim2.new(1,-105,1,-28),Size=UDim2.new(0,100,0,25),Text="Cancel",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{97,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Ok",Parent={1},Position=UDim2.new(1,-210,1,-28),Size=UDim2.new(0,100,0,25),Text="OK",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{98,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Image="rbxassetid://1072518502",Name="ColorStrip",Parent={1},Position=UDim2.new(1,-30,0,5),Size=UDim2.new(0,13,0,200),}},
				{99,"Frame",{BackgroundColor3=Color3.new(0.3137255012989,0.3137255012989,0.3137255012989),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={1},Position=UDim2.new(1,-16,0,1),Size=UDim2.new(0,5,0,208),}},
				{100,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={99},Position=UDim2.new(0,-2,0,-4),Size=UDim2.new(0,8,0,16),}},
				{101,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,2,0,8),Size=UDim2.new(0,1,0,1),}},
				{102,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,3,0,7),Size=UDim2.new(0,1,0,3),}},
				{103,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,4,0,6),Size=UDim2.new(0,1,0,5),}},
				{104,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,5,0,5),Size=UDim2.new(0,1,0,7),}},
				{105,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,6,0,4),Size=UDim2.new(0,1,0,9),}},
			})
			local window = Lib.Window.new()
			window.Resizable = false
			window.Alignable = false
			window:SetTitle("Color Picker")
			window:Resize(450,330)
			for i,v in pairs(guiContents:GetChildren()) do
				v.Parent = window.GuiElems.Content
			end
			newMt.Window = window
			newMt.Gui = window.Gui
			local pickerGui = window.Gui.Main
			local pickerTopBar = pickerGui.TopBar
			local pickerFrame = pickerGui.Content
			local colorSpace = pickerFrame.ColorSpaceFrame.ColorSpace
			local colorStrip = pickerFrame.ColorStrip
			local previewFrame = pickerFrame.Preview
			local basicColorsFrame = pickerFrame.BasicColors
			local customColorsFrame = pickerFrame.CustomColors
			local okButton = pickerFrame.Ok
			local cancelButton = pickerFrame.Cancel
			local closeButton = pickerTopBar.Close

			local colorScope = colorSpace.Scope
			local colorArrow = pickerFrame.ArrowFrame.Arrow

			local hueInput = pickerFrame.Hue.Input
			local satInput = pickerFrame.Sat.Input
			local valInput = pickerFrame.Val.Input

			local redInput = pickerFrame.Red.Input
			local greenInput = pickerFrame.Green.Input
			local blueInput = pickerFrame.Blue.Input

			local user = service.UserInputService
			local mouse = service.Players.LocalPlayer:GetMouse()

			local hue,sat,val = 0,0,1
			local red,green,blue = 1,1,1
			local chosenColor = Color3.new(0,0,0)

			local basicColors = {Color3.new(0,0,0),Color3.new(0.66666668653488,0,0),Color3.new(0,0.33333334326744,0),Color3.new(0.66666668653488,0.33333334326744,0),Color3.new(0,0.66666668653488,0),Color3.new(0.66666668653488,0.66666668653488,0),Color3.new(0,1,0),Color3.new(0.66666668653488,1,0),Color3.new(0,0,0.49803924560547),Color3.new(0.66666668653488,0,0.49803924560547),Color3.new(0,0.33333334326744,0.49803924560547),Color3.new(0.66666668653488,0.33333334326744,0.49803924560547),Color3.new(0,0.66666668653488,0.49803924560547),Color3.new(0.66666668653488,0.66666668653488,0.49803924560547),Color3.new(0,1,0.49803924560547),Color3.new(0.66666668653488,1,0.49803924560547),Color3.new(0,0,1),Color3.new(0.66666668653488,0,1),Color3.new(0,0.33333334326744,1),Color3.new(0.66666668653488,0.33333334326744,1),Color3.new(0,0.66666668653488,1),Color3.new(0.66666668653488,0.66666668653488,1),Color3.new(0,1,1),Color3.new(0.66666668653488,1,1),Color3.new(0.33333334326744,0,0),Color3.new(1,0,0),Color3.new(0.33333334326744,0.33333334326744,0),Color3.new(1,0.33333334326744,0),Color3.new(0.33333334326744,0.66666668653488,0),Color3.new(1,0.66666668653488,0),Color3.new(0.33333334326744,1,0),Color3.new(1,1,0),Color3.new(0.33333334326744,0,0.49803924560547),Color3.new(1,0,0.49803924560547),Color3.new(0.33333334326744,0.33333334326744,0.49803924560547),Color3.new(1,0.33333334326744,0.49803924560547),Color3.new(0.33333334326744,0.66666668653488,0.49803924560547),Color3.new(1,0.66666668653488,0.49803924560547),Color3.new(0.33333334326744,1,0.49803924560547),Color3.new(1,1,0.49803924560547),Color3.new(0.33333334326744,0,1),Color3.new(1,0,1),Color3.new(0.33333334326744,0.33333334326744,1),Color3.new(1,0.33333334326744,1),Color3.new(0.33333334326744,0.66666668653488,1),Color3.new(1,0.66666668653488,1),Color3.new(0.33333334326744,1,1),Color3.new(1,1,1)}
			local customColors = {}

			local function updateColor(noupdate)
				local relativeX, relativeY, relativeStripY = 219 - hue * 219, 199 - sat * 199, 199 - val * 199
				local hsvColor = Color3.fromHSV(hue, sat, val)

				if noupdate == 2 or not noupdate then
					hueInput.Text = tostring(math.ceil(359 * hue))
					satInput.Text = tostring(math.ceil(255 * sat))
					valInput.Text = tostring(math.floor(255 * val))
				end
				if noupdate == 1 or not noupdate then
					redInput.Text = tostring(math.floor(255 * red))
					greenInput.Text = tostring(math.floor(255 * green))
					blueInput.Text = tostring(math.floor(255 * blue))
				end

				chosenColor = Color3.new(red, green, blue)
				colorScope.Position = UDim2.new(0, (relativeX - 9), 0, (relativeY - 9))
				colorStrip.ImageColor3 = Color3.fromHSV(hue, sat, 1)
				colorArrow.Position = UDim2.new(0, -2, 0, (relativeStripY - 4))
				previewFrame.BackgroundColor3 = chosenColor

				newMt.Color = chosenColor
				newMt.OnPreview:Fire(chosenColor)
			end

			local function handleInputBegan(input, updateFunc)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					while user:IsMouseButtonPressed(Enum.UserInputType.MouseButton1) do
						updateFunc()task.wait()
					end
				end
			end

			local function colorSpaceInput()
				local relativeX = mouse.X - colorSpace.AbsolutePosition.X
				local relativeY = mouse.Y - colorSpace.AbsolutePosition.Y

				if relativeX < 0 then relativeX = 0 elseif relativeX > 219 then relativeX = 219 end
				if relativeY < 0 then relativeY = 0 elseif relativeY > 199 then relativeY = 199 end

				hue = (219 - relativeX) / 219
				sat = (199 - relativeY) / 199

				local hsvColor = Color3.fromHSV(hue, sat, val)
				red, green, blue = hsvColor.R, hsvColor.G, hsvColor.B
				updateColor()
			end

			local function colorStripInput()
				local relativeY = mouse.Y - colorStrip.AbsolutePosition.Y

				if relativeY < 0 then relativeY = 0 elseif relativeY > 199 then relativeY = 199 end	

				val = (199 - relativeY) / 199

				local hsvColor = Color3.fromHSV(hue, sat, val)
				red, green, blue = hsvColor.R, hsvColor.G, hsvColor.B
				updateColor()
			end

			colorSpace.InputBegan:Connect(function(input) handleInputBegan(input, colorSpaceInput) end)
			colorStrip.InputBegan:Connect(function(input) handleInputBegan(input, colorStripInput) end)

			local function hookButtons(frame, func)
				frame.ArrowFrame.Up.InputBegan:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
						local releaseEvent, runEvent
						local startTime = tick()
						local pressing = true
						local startNum = tonumber(frame.Text)

						if not startNum then return end

						releaseEvent = user.InputEnded:Connect(function(endInput)
							if endInput.UserInputType == Enum.UserInputType.MouseButton1 or endInput.UserInputType == Enum.UserInputType.Touch then
								releaseEvent:Disconnect()
								pressing = false
							end
						end)

						startNum = startNum + 1
						func(startNum)
						while pressing do
							if tick() - startTime > 0.3 then
								startNum = startNum + 1
								func(startNum)
								startTime = tick()
							end
							task.wait(0.1)
						end
					end
				end)

				frame.ArrowFrame.Down.InputBegan:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
						local releaseEvent, runEvent
						local startTime = tick()
						local pressing = true
						local startNum = tonumber(frame.Text)

						if not startNum then return end

						releaseEvent = user.InputEnded:Connect(function(endInput)
							if endInput.UserInputType == Enum.UserInputType.MouseButton1 or endInput.UserInputType == Enum.UserInputType.Touch then
								releaseEvent:Disconnect()
								pressing = false
							end
						end)

						startNum = startNum - 1
						func(startNum)
						while pressing do
							if tick() - startTime > 0.3 then
								startNum = startNum - 1
								func(startNum)
								startTime = tick()
							end
							task.wait(0.1)
						end
					end
				end)
			end

			--[[local function UpdateBox(TextBox, Value, IsHSV, ...)
				local number = tonumber(TextBox.Text)
				if number then
					number = math.clamp(math.floor(number), 0, Value) / Value
					local HSV = Color3.fromHSV(func(number))
					red, green, blue = HSV.R, HSV.G, HSV.B
					
					TextBox.Text = tostring(number):sub(4)
					updateColor(IsHSV)
				end
			end]]

			local function updateHue(str)
				local num = tonumber(str)
				if num then
					hue = math.clamp(math.floor(num),0,359)/359
					local hsvColor = Color3.fromHSV(hue,sat,val)
					red,green,blue = hsvColor.r,hsvColor.g,hsvColor.b

					hueInput.Text = tostring(hue*359)
					updateColor(1)
				end
			end
			hueInput.FocusLost:Connect(function() updateHue(hueInput.Text) end) hookButtons(hueInput, hueInput)

			local function updateSat(str)
				local num = tonumber(str)
				if num then
					sat = math.clamp(math.floor(num),0,255)/255
					local hsvColor = Color3.fromHSV(hue,sat,val)
					red,green,blue = hsvColor.r,hsvColor.g,hsvColor.b
					satInput.Text = tostring(sat*255)
					updateColor(1)
				end
			end
			satInput.FocusLost:Connect(function() updateSat(satInput.Text) end) hookButtons(satInput,updateSat)

			local function updateVal(str)
				local num = tonumber(str)
				if num then
					val = math.clamp(math.floor(num),0,255)/255
					local hsvColor = Color3.fromHSV(hue,sat,val)
					red,green,blue = hsvColor.r,hsvColor.g,hsvColor.b
					valInput.Text = tostring(val*255)
					updateColor(1)
				end
			end
			valInput.FocusLost:Connect(function() updateVal(valInput.Text) end) hookButtons(valInput,updateVal)

			local function updateRed(str)
				local num = tonumber(str)
				if num then
					red = math.clamp(math.floor(num),0,255)/255
					local newColor = Color3.new(red,green,blue)
					hue,sat,val = Color3.toHSV(newColor)
					redInput.Text = tostring(red*255)
					updateColor(2)
				end
			end
			redInput.FocusLost:Connect(function() updateRed(redInput.Text) end) hookButtons(redInput,updateRed)

			local function updateGreen(str)
				local num = tonumber(str)
				if num then
					green = math.clamp(math.floor(num),0,255)/255
					local newColor = Color3.new(red,green,blue)
					hue,sat,val = Color3.toHSV(newColor)
					greenInput.Text = tostring(green*255)
					updateColor(2)
				end
			end
			greenInput.FocusLost:Connect(function() updateGreen(greenInput.Text) end) hookButtons(greenInput,updateGreen)

			local function updateBlue(str)
				local num = tonumber(str)
				if num then
					blue = math.clamp(math.floor(num),0,255)/255
					local newColor = Color3.new(red,green,blue)
					hue,sat,val = Color3.toHSV(newColor)
					blueInput.Text = tostring(blue*255)
					updateColor(2)
				end
			end
			blueInput.FocusLost:Connect(function() updateBlue(blueInput.Text) end) hookButtons(blueInput,updateBlue)

			local colorChoice = Instance.new("TextButton")
			colorChoice.Name = "Choice"
			colorChoice.Size = UDim2.new(0,25,0,18)
			colorChoice.BorderColor3 = Color3.fromRGB(55,55,55)
			colorChoice.Text = ""
			colorChoice.AutoButtonColor = false

			local row = 0
			local column = 0
			for i,v in pairs(basicColors) do
				local newColor = colorChoice:Clone()
				newColor.BackgroundColor3 = v
				newColor.Position = UDim2.new(0,1 + 30*column,0,21 + 23*row)

				newColor.MouseButton1Click:Connect(function()
					red,green,blue = v.r,v.g,v.b
					local newColor = Color3.new(red,green,blue)
					hue,sat,val = Color3.toHSV(newColor)
					updateColor()
				end)

				newColor.Parent = basicColorsFrame
				column = column + 1
				if column == 6 then row = row + 1 column = 0 end
			end

			row = 0
			column = 0
			for i = 1,12 do
				local color = customColors[i] or Color3.new(0,0,0)
				local newColor = colorChoice:Clone()
				newColor.BackgroundColor3 = color
				newColor.Position = UDim2.new(0,1 + 30*column,0,20 + 23*row)

				newColor.MouseButton1Click:Connect(function()
					local curColor = customColors[i] or Color3.new(0,0,0)
					red,green,blue = curColor.r,curColor.g,curColor.b
					hue,sat,val = Color3.toHSV(curColor)
					updateColor()
				end)

				newColor.MouseButton2Click:Connect(function()
					customColors[i] = chosenColor
					newColor.BackgroundColor3 = chosenColor
				end)

				newColor.Parent = customColorsFrame
				column = column + 1
				if column == 6 then row = row + 1 column = 0 end
			end

			okButton.MouseButton1Click:Connect(function() newMt.OnSelect:Fire(chosenColor) window:Close() end)
			okButton.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then okButton.BackgroundTransparency = 0.4 end end)
			okButton.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then okButton.BackgroundTransparency = 0 end end)


			cancelButton.MouseButton1Click:Connect(function() newMt.OnCancel:Fire() window:Close() end)
			cancelButton.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then cancelButton.BackgroundTransparency = 0.4 end end)
			cancelButton.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then cancelButton.BackgroundTransparency = 0 end end)

			updateColor()

			newMt.SetColor = function(self,color)
				red,green,blue = color.r,color.g,color.b
				hue,sat,val = Color3.toHSV(color)
				updateColor()
			end

			newMt.Show = function(self)
				self.Window:Show()
			end

			return newMt
		end

		return {new = new}
	end)()

	Lib.NumberSequenceEditor = (function()
		local function new() -- TODO: Convert to newer class model
			local newMt = setmetatable({},{})
			newMt.OnSelect = Lib.Signal.new()
			newMt.OnCancel = Lib.Signal.new()
			newMt.OnPreview = Lib.Signal.new()

			local guiContents = create({
				{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
				{2,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Time",Parent={1},Position=UDim2.new(0,40,0,210),Size=UDim2.new(0,60,0,20),}},
				{3,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={2},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{4,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={2},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Time",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{5,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Close",Parent={1},Position=UDim2.new(1,-90,0,210),Size=UDim2.new(0,80,0,20),Text="Close",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{6,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Reset",Parent={1},Position=UDim2.new(1,-180,0,210),Size=UDim2.new(0,80,0,20),Text="Reset",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Delete",Parent={1},Position=UDim2.new(0,380,0,210),Size=UDim2.new(0,80,0,20),Text="Delete",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{8,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="NumberLineOutlines",Parent={1},Position=UDim2.new(0,10,0,20),Size=UDim2.new(1,-20,0,170),}},
				{9,"Frame",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Name="NumberLine",Parent={1},Position=UDim2.new(0,10,0,20),Size=UDim2.new(1,-20,0,170),}},
				{10,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Value",Parent={1},Position=UDim2.new(0,170,0,210),Size=UDim2.new(0,60,0,20),}},
				{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={10},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Value",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{12,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={10},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{13,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Envelope",Parent={1},Position=UDim2.new(0,300,0,210),Size=UDim2.new(0,60,0,20),}},
				{14,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={13},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{15,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={13},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Envelope",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
			})
			local window = Lib.Window.new()
			window.Resizable = false
			window:Resize(680,265)
			window:SetTitle("NumberSequence Editor")
			newMt.Window = window
			newMt.Gui = window.Gui
			for i,v in pairs(guiContents:GetChildren()) do
				v.Parent = window.GuiElems.Content
			end
			local gui = window.Gui
			local pickerGui = gui.Main
			local pickerTopBar = pickerGui.TopBar
			local pickerFrame = pickerGui.Content
			local numberLine = pickerFrame.NumberLine
			local numberLineOutlines = pickerFrame.NumberLineOutlines
			local timeBox = pickerFrame.Time.Input
			local valueBox = pickerFrame.Value.Input
			local envelopeBox = pickerFrame.Envelope.Input
			local deleteButton = pickerFrame.Delete
			local resetButton = pickerFrame.Reset
			local closeButton = pickerFrame.Close
			local topClose = pickerTopBar.Close

			local points = {{1,0,3},{8,0.05,1},{5,0.6,2},{4,0.7,4},{6,1,4}}
			local lines = {}
			local eLines = {}
			local beginPoint = points[1]
			local endPoint = points[#points]
			local currentlySelected = nil
			local currentPoint = nil
			local resetSequence = nil

			local user = service.UserInputService
			local mouse = service.Players.LocalPlayer:GetMouse()

			for i = 2,10 do
				local newLine = Instance.new("Frame")
				newLine.BackgroundTransparency = 0.5
				newLine.BackgroundColor3 = Color3.new(96/255,96/255,96/255)
				newLine.BorderSizePixel = 0
				newLine.Size = UDim2.new(0,1,1,0)
				newLine.Position = UDim2.new((i-1)/(11-1),0,0,0)
				newLine.Parent = numberLineOutlines
			end

			for i = 2,4 do
				local newLine = Instance.new("Frame")
				newLine.BackgroundTransparency = 0.5
				newLine.BackgroundColor3 = Color3.new(96/255,96/255,96/255)
				newLine.BorderSizePixel = 0
				newLine.Size = UDim2.new(1,0,0,1)
				newLine.Position = UDim2.new(0,0,(i-1)/(5-1),0)
				newLine.Parent = numberLineOutlines
			end

			local lineTemp = Instance.new("Frame")
			lineTemp.BackgroundColor3 = Color3.new(0,0,0)
			lineTemp.BorderSizePixel = 0
			lineTemp.Size = UDim2.new(0,1,0,1)

			local sequenceLine = Instance.new("Frame")
			sequenceLine.BackgroundColor3 = Color3.new(0,0,0)
			sequenceLine.BorderSizePixel = 0
			sequenceLine.Size = UDim2.new(0,1,0,0)

			for i = 1,numberLine.AbsoluteSize.X do
				local line = sequenceLine:Clone()
				eLines[i] = line
				line.Name = "E"..tostring(i)
				line.BackgroundTransparency = 0.5
				line.BackgroundColor3 = Color3.new(199/255,44/255,28/255)
				line.Position = UDim2.new(0,i-1,0,0)
				line.Parent = numberLine
			end

			for i = 1,numberLine.AbsoluteSize.X do
				local line = sequenceLine:Clone()
				lines[i] = line
				line.Name = tostring(i)
				line.Position = UDim2.new(0,i-1,0,0)
				line.Parent = numberLine
			end

			local envelopeDrag = Instance.new("Frame")
			envelopeDrag.BackgroundTransparency = 1
			envelopeDrag.BackgroundColor3 = Color3.new(0,0,0)
			envelopeDrag.BorderSizePixel = 0
			envelopeDrag.Size = UDim2.new(0,7,0,20)
			envelopeDrag.Visible = false
			envelopeDrag.ZIndex = 2
			local envelopeDragLine = Instance.new("Frame",envelopeDrag)
			envelopeDragLine.Name = "Line"
			envelopeDragLine.BackgroundColor3 = Color3.new(0,0,0)
			envelopeDragLine.BorderSizePixel = 0
			envelopeDragLine.Position = UDim2.new(0,3,0,0)
			envelopeDragLine.Size = UDim2.new(0,1,0,20)
			envelopeDragLine.ZIndex = 2

			local envelopeDragTop,envelopeDragBottom = envelopeDrag:Clone(),envelopeDrag:Clone()
			envelopeDragTop.Parent = numberLine
			envelopeDragBottom.Parent = numberLine

			local function buildSequence()
				local newPoints = {}
				for i,v in pairs(points) do
					table.insert(newPoints,NumberSequenceKeypoint.new(v[2],v[1],v[3]))
				end
				newMt.Sequence = NumberSequence.new(newPoints)
				newMt.OnSelect:Fire(newMt.Sequence)
			end

			local function round(num,places)
				local multi = 10^places
				return math.floor(num*multi + 0.5)/multi
			end

			local function updateInputs(point)
				if point then
					currentPoint = point
					local rawT,rawV,rawE = point[2],point[1],point[3]
					timeBox.Text = round(rawT,(rawT < 0.01 and 5) or (rawT < 0.1 and 4) or 3)
					valueBox.Text = round(rawV,(rawV < 0.01 and 5) or (rawV < 0.1 and 4) or (rawV < 1 and 3) or 2)
					envelopeBox.Text = round(rawE,(rawE < 0.01 and 5) or (rawE < 0.1 and 4) or (rawV < 1 and 3) or 2)

					local envelopeDistance = numberLine.AbsoluteSize.Y*(point[3]/10)
					envelopeDragTop.Position = UDim2.new(0,point[4].Position.X.Offset-1,0,point[4].Position.Y.Offset-envelopeDistance-17)
					envelopeDragTop.Visible = true
					envelopeDragBottom.Position = UDim2.new(0,point[4].Position.X.Offset-1,0,point[4].Position.Y.Offset+envelopeDistance+2)
					envelopeDragBottom.Visible = true
				end
			end

			envelopeDragTop.InputBegan:Connect(function(input)
				if (input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch) or not currentPoint or Lib.CheckMouseInGui(currentPoint[4].Select) then return end

				local mouseEvent, releaseEvent
				local maxSize = numberLine.AbsoluteSize.Y
				local mouseDelta = math.abs(envelopeDragTop.AbsolutePosition.Y - mouse.Y)

				envelopeDragTop.Line.Position = UDim2.new(0, 2, 0, 0)
				envelopeDragTop.Line.Size = UDim2.new(0, 3, 0, 20)

				releaseEvent = user.InputEnded:Connect(function(input)
					if input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch then return end
					mouseEvent:Disconnect()
					releaseEvent:Disconnect()
					envelopeDragTop.Line.Position = UDim2.new(0, 3, 0, 0)
					envelopeDragTop.Line.Size = UDim2.new(0, 1, 0, 20)
				end)

				mouseEvent = user.InputChanged:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
						local topDiff = (currentPoint[4].AbsolutePosition.Y + 2) - (mouse.Y - mouseDelta) - 19
						local newEnvelope = 10 * (math.max(topDiff, 0) / maxSize)
						local maxEnvelope = math.min(currentPoint[1], 10 - currentPoint[1])
						currentPoint[3] = math.min(newEnvelope, maxEnvelope)
						newMt:Redraw()
						buildSequence()
						updateInputs(currentPoint)
					end
				end)
			end)

			envelopeDragBottom.InputBegan:Connect(function(input)
				if (input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch) or not currentPoint or Lib.CheckMouseInGui(currentPoint[4].Select) then return end

				local mouseEvent, releaseEvent
				local maxSize = numberLine.AbsoluteSize.Y
				local mouseDelta = math.abs(envelopeDragBottom.AbsolutePosition.Y - mouse.Y)

				envelopeDragBottom.Line.Position = UDim2.new(0, 2, 0, 0)
				envelopeDragBottom.Line.Size = UDim2.new(0, 3, 0, 20)

				releaseEvent = user.InputEnded:Connect(function(input)
					if input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch then return end
					mouseEvent:Disconnect()
					releaseEvent:Disconnect()
					envelopeDragBottom.Line.Position = UDim2.new(0, 3, 0, 0)
					envelopeDragBottom.Line.Size = UDim2.new(0, 1, 0, 20)
				end)

				mouseEvent = user.InputChanged:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
						local bottomDiff = (mouse.Y + (20 - mouseDelta)) - (currentPoint[4].AbsolutePosition.Y + 2) - 19
						local newEnvelope = 10 * (math.max(bottomDiff, 0) / maxSize)
						local maxEnvelope = math.min(currentPoint[1], 10 - currentPoint[1])
						currentPoint[3] = math.min(newEnvelope, maxEnvelope)
						newMt:Redraw()
						buildSequence()
						updateInputs(currentPoint)
					end
				end)
			end)

			local function placePoint(point)
				local newPoint = Instance.new("Frame")
				newPoint.Name = "Point"
				newPoint.BorderSizePixel = 0
				newPoint.Size = UDim2.new(0,5,0,5)
				newPoint.Position = UDim2.new(0,math.floor((numberLine.AbsoluteSize.X-1) * point[2])-2,0,numberLine.AbsoluteSize.Y*(10-point[1])/10-2)
				newPoint.BackgroundColor3 = Color3.new(0,0,0)

				local newSelect = Instance.new("Frame")
				newSelect.Name = "Select"
				newSelect.BackgroundTransparency = 1
				newSelect.BackgroundColor3 = Color3.new(199/255,44/255,28/255)
				newSelect.Position = UDim2.new(0,-2,0,-2)
				newSelect.Size = UDim2.new(0,9,0,9)
				newSelect.Parent = newPoint

				newPoint.Parent = numberLine


				newSelect.InputBegan:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
						for i, v in pairs(points) do 
							v[4].Select.BackgroundTransparency = 1 
						end

						newSelect.BackgroundTransparency = 0
						updateInputs(point)
					end

					if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and not currentlySelected then
						currentPoint = point
						local mouseEvent, releaseEvent
						currentlySelected = true
						newSelect.BackgroundColor3 = Color3.new(249/255, 191/255, 59/255)

						local oldEnvelope = point[3]

						releaseEvent = user.InputEnded:Connect(function(input)
							if input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch then	return end

							mouseEvent:Disconnect()
							releaseEvent:Disconnect()
							currentlySelected = nil
							newSelect.BackgroundColor3 = Color3.new(199/255, 44/255, 28/255)
						end)

						mouseEvent = user.InputChanged:Connect(function(input)
							if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
								local maxX = numberLine.AbsoluteSize.X - 1
								local relativeX = (input.Position.X - numberLine.AbsolutePosition.X)
								if relativeX < 0 then relativeX = 0 end
								if relativeX > maxX then relativeX = maxX end

								local maxY = numberLine.AbsoluteSize.Y - 1
								local relativeY = (input.Position.Y - numberLine.AbsolutePosition.Y)
								if relativeY < 0 then relativeY = 0 end
								if relativeY > maxY then relativeY = maxY end

								if point ~= beginPoint and point ~= endPoint then
									point[2] = relativeX / maxX
								end

								point[1] = 10 - (relativeY / maxY) * 10
								local maxEnvelope = math.min(point[1], 10 - point[1])
								point[3] = math.min(oldEnvelope, maxEnvelope)
								newMt:Redraw()
								updateInputs(point)

								for i, v in pairs(points) do 
									v[4].Select.BackgroundTransparency = 1 
								end

								newSelect.BackgroundTransparency = 0
								buildSequence()
							end
						end)
					end
				end)

				return newPoint
			end

			local function placePoints()
				for i,v in pairs(points) do
					v[4] = placePoint(v)
				end
			end

			local function redraw(self)
				local numberLineSize = numberLine.AbsoluteSize
				table.sort(points,function(a,b) return a[2] < b[2] end)
				for i,v in pairs(points) do
					v[4].Position = UDim2.new(0,math.floor((numberLineSize.X-1) * v[2])-2,0,(numberLineSize.Y-1)*(10-v[1])/10-2)
				end
				lines[1].Size = UDim2.new(0,1,0,0)
				for i = 1,#points-1 do
					local fromPoint = points[i]
					local toPoint = points[i+1]
					local deltaY = toPoint[4].Position.Y.Offset-fromPoint[4].Position.Y.Offset
					local deltaX = toPoint[4].Position.X.Offset-fromPoint[4].Position.X.Offset
					local slope = deltaY/deltaX

					local fromEnvelope = fromPoint[3]
					local nextEnvelope = toPoint[3]

					local currentRise = math.abs(slope)
					local totalRise = 0
					local maxRise = math.abs(toPoint[4].Position.Y.Offset-fromPoint[4].Position.Y.Offset)

					for lineCount = math.min(fromPoint[4].Position.X.Offset+1,toPoint[4].Position.X.Offset),toPoint[4].Position.X.Offset do
						if deltaX == 0 and deltaY == 0 then return end
						local riseNow = math.floor(currentRise)
						local line = lines[lineCount+3]
						if line then
							if totalRise+riseNow > maxRise then riseNow = maxRise-totalRise end
							if math.sign(slope) == -1 then
								line.Position = UDim2.new(0,lineCount+2,0,fromPoint[4].Position.Y.Offset + -(totalRise+riseNow)+2)
							else
								line.Position = UDim2.new(0,lineCount+2,0,fromPoint[4].Position.Y.Offset + totalRise+2)
							end
							line.Size = UDim2.new(0,1,0,math.max(riseNow,1))
						end
						totalRise = totalRise + riseNow
						currentRise = currentRise - riseNow + math.abs(slope)

						local envPercent = (lineCount-fromPoint[4].Position.X.Offset)/(toPoint[4].Position.X.Offset-fromPoint[4].Position.X.Offset)
						local envLerp = fromEnvelope+(nextEnvelope-fromEnvelope)*envPercent
						local relativeSize = (envLerp/10)*numberLineSize.Y						

						local line = eLines[lineCount + 3]
						if line then
							line.Position = UDim2.new(0,lineCount+2,0,lines[lineCount+3].Position.Y.Offset-math.floor(relativeSize))
							line.Size = UDim2.new(0,1,0,math.floor(relativeSize*2))
						end
					end
				end
			end
			newMt.Redraw = redraw



			local function loadSequence(self,seq)
				resetSequence = seq
				for i,v in pairs(points) do if v[4] then v[4]:Destroy() end end
				points = {}
				for i,v in pairs(seq.Keypoints) do
					local maxEnvelope = math.min(v.Value,10-v.Value)
					local newPoint = {v.Value,v.Time,math.min(v.Envelope,maxEnvelope)}
					newPoint[4] = placePoint(newPoint)
					table.insert(points,newPoint)
				end
				beginPoint = points[1]
				endPoint = points[#points]
				currentlySelected = nil
				redraw()
				envelopeDragTop.Visible = false
				envelopeDragBottom.Visible = false
			end
			newMt.SetSequence = loadSequence

			timeBox.FocusLost:Connect(function()
				local point = currentPoint
				local num = tonumber(timeBox.Text)
				if point and num and point ~= beginPoint and point ~= endPoint then
					num = math.clamp(num,0,1)
					point[2] = num
					redraw()
					buildSequence()
					updateInputs(point)
				end
			end)

			valueBox.FocusLost:Connect(function()
				local point = currentPoint
				local num = tonumber(valueBox.Text)
				if point and num then
					local oldEnvelope = point[3]
					num = math.clamp(num,0,10)
					point[1] = num
					local maxEnvelope = math.min(point[1],10-point[1])
					point[3] = math.min(oldEnvelope,maxEnvelope)
					redraw()
					buildSequence()
					updateInputs(point)
				end
			end)

			envelopeBox.FocusLost:Connect(function()
				local point = currentPoint
				local num = tonumber(envelopeBox.Text)
				if point and num then
					num = math.clamp(num,0,5)
					local maxEnvelope = math.min(point[1],10-point[1])
					point[3] = math.min(num,maxEnvelope)
					redraw()
					buildSequence()
					updateInputs(point)
				end
			end)

			local function buttonAnimations(button,inverse)
				button.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then button.BackgroundTransparency = (inverse and 0.5 or 0.4) end end)
				button.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then button.BackgroundTransparency = (inverse and 1 or 0) end end)
			end

			numberLine.InputBegan:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and #points < 20 then

					if Lib.CheckMouseInGui(envelopeDragTop) or Lib.CheckMouseInGui(envelopeDragBottom) then return end

					for i, v in pairs(points) do
						if Lib.CheckMouseInGui(v[4].Select) then
							return
						end
					end

					local maxX = numberLine.AbsoluteSize.X - 1
					local relativeX = (input.Position.X - numberLine.AbsolutePosition.X)
					if relativeX < 0 then relativeX = 0 end
					if relativeX > maxX then relativeX = maxX end

					local maxY = numberLine.AbsoluteSize.Y - 1
					local relativeY = (input.Position.Y - numberLine.AbsolutePosition.Y)
					if relativeY < 0 then relativeY = 0 end
					if relativeY > maxY then relativeY = maxY end

					local raw = relativeX / maxX
					local newPoint = {10 - (relativeY / maxY) * 10, raw, 0}
					newPoint[4] = placePoint(newPoint)
					table.insert(points, newPoint)
					redraw()
					buildSequence()
				end
			end)

			deleteButton.MouseButton1Click:Connect(function()
				if currentPoint and currentPoint ~= beginPoint and currentPoint ~= endPoint then
					for i,v in pairs(points) do
						if v == currentPoint then
							v[4]:Destroy()
							table.remove(points,i)
							break
						end
					end
					currentlySelected = nil
					redraw()
					buildSequence()
					updateInputs(points[1])
				end
			end)

			resetButton.MouseButton1Click:Connect(function()
				if resetSequence then
					newMt:SetSequence(resetSequence)
					buildSequence()
				end
			end)

			closeButton.MouseButton1Click:Connect(function()
				window:Close()
			end)

			buttonAnimations(deleteButton)
			buttonAnimations(resetButton)
			buttonAnimations(closeButton)

			placePoints()
			redraw()

			newMt.Show = function(self)
				window:Show()
			end

			return newMt
		end

		return {new = new}
	end)()

	Lib.ColorSequenceEditor = (function() -- TODO: Convert to newer class model
		local function new()
			local newMt = setmetatable({},{})
			newMt.OnSelect = Lib.Signal.new()
			newMt.OnCancel = Lib.Signal.new()
			newMt.OnPreview = Lib.Signal.new()
			newMt.OnPickColor = Lib.Signal.new()

			local guiContents = create({
				{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
				{2,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="ColorLine",Parent={1},Position=UDim2.new(0,10,0,5),Size=UDim2.new(1,-20,0,70),}},
				{3,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Gradient",Parent={2},Size=UDim2.new(1,0,1,0),}},
				{4,"UIGradient",{Parent={3},}},
				{5,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Arrows",Parent={1},Position=UDim2.new(0,1,0,73),Size=UDim2.new(1,-2,0,16),}},
				{6,"Frame",{BackgroundColor3=Color3.new(0,0,0),BackgroundTransparency=0.5,BorderSizePixel=0,Name="Cursor",Parent={1},Position=UDim2.new(0,10,0,0),Size=UDim2.new(0,1,0,80),}},
				{7,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Time",Parent={1},Position=UDim2.new(0,40,0,95),Size=UDim2.new(0,100,0,20),}},
				{8,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={7},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,98,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
				{9,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={7},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Time",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{10,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="ColorBox",Parent={1},Position=UDim2.new(0,220,0,95),Size=UDim2.new(0,20,0,20),}},
				{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={10},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Color",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
				{12,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Close",Parent={1},Position=UDim2.new(1,-90,0,95),Size=UDim2.new(0,80,0,20),Text="Close",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{13,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Reset",Parent={1},Position=UDim2.new(1,-180,0,95),Size=UDim2.new(0,80,0,20),Text="Reset",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{14,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Delete",Parent={1},Position=UDim2.new(0,280,0,95),Size=UDim2.new(0,80,0,20),Text="Delete",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
				{15,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={1},Size=UDim2.new(0,16,0,16),Visible=false,}},
				{16,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,2),}},
				{17,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,7,0,5),Size=UDim2.new(0,3,0,2),}},
				{18,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,2),}},
				{19,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,5,0,9),Size=UDim2.new(0,7,0,2),}},
				{20,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,4,0,11),Size=UDim2.new(0,9,0,2),}},
			})
			local window = Lib.Window.new()
			window.Resizable = false
			window:Resize(650,150)
			window:SetTitle("ColorSequence Editor")
			newMt.Window = window
			newMt.Gui = window.Gui
			for i,v in pairs(guiContents:GetChildren()) do
				v.Parent = window.GuiElems.Content
			end
			local gui = window.Gui
			local pickerGui = gui.Main
			local pickerTopBar = pickerGui.TopBar
			local pickerFrame = pickerGui.Content
			local colorLine = pickerFrame.ColorLine
			local gradient = colorLine.Gradient.UIGradient
			local arrowFrame = pickerFrame.Arrows
			local arrow = pickerFrame.Arrow
			local cursor = pickerFrame.Cursor
			local timeBox = pickerFrame.Time.Input
			local colorBox = pickerFrame.ColorBox
			local deleteButton = pickerFrame.Delete
			local resetButton = pickerFrame.Reset
			local closeButton = pickerFrame.Close
			local topClose = pickerTopBar.Close

			local user = service.UserInputService
			local mouse = service.Players.LocalPlayer:GetMouse()

			local colors = {{Color3.new(1,0,1),0},{Color3.new(0.2,0.9,0.2),0.2},{Color3.new(0.4,0.5,0.9),0.7},{Color3.new(0.6,1,1),1}}
			local resetSequence = nil

			local beginPoint = colors[1]
			local endPoint = colors[#colors]

			local currentlySelected = nil
			local currentPoint = nil

			local sequenceLine = Instance.new("Frame")
			sequenceLine.BorderSizePixel = 0
			sequenceLine.Size = UDim2.new(0,1,1,0)

			newMt.Sequence = ColorSequence.new(Color3.new(1,1,1))
			local function buildSequence(noupdate)
				local newPoints = {}
				table.sort(colors,function(a,b) return a[2] < b[2] end)
				for i,v in pairs(colors) do
					table.insert(newPoints,ColorSequenceKeypoint.new(v[2],v[1]))
				end
				newMt.Sequence = ColorSequence.new(newPoints)
				if not noupdate then newMt.OnSelect:Fire(newMt.Sequence) end
			end

			local function round(num,places)
				local multi = 10^places
				return math.floor(num*multi + 0.5)/multi
			end

			local function updateInputs(point)
				if point then
					currentPoint = point
					local raw = point[2]
					timeBox.Text = round(raw,(raw < 0.01 and 5) or (raw < 0.1 and 4) or 3)
					colorBox.BackgroundColor3 = point[1]
				end
			end

			local function placeArrow(ind,point)
				local newArrow = arrow:Clone()
				newArrow.Position = UDim2.new(0,ind-1,0,0)
				newArrow.Visible = true
				newArrow.Parent = arrowFrame

				newArrow.InputBegan:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
						cursor.Visible = true
						cursor.Position = UDim2.new(0, 9 + newArrow.Position.X.Offset, 0, 0)
					end

					if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
						updateInputs(point)
						if point == beginPoint or point == endPoint or currentlySelected then return end

						local mouseEvent, releaseEvent
						currentlySelected = true

						releaseEvent = user.InputEnded:Connect(function(input)
							if input.UserInputType ~= Enum.UserInputType.MouseButton1 and input.UserInputType ~= Enum.UserInputType.Touch then return end
							mouseEvent:Disconnect()
							releaseEvent:Disconnect()
							currentlySelected = nil
							cursor.Visible = false
						end)

						mouseEvent = user.InputChanged:Connect(function(input)
							if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
								local maxSize = colorLine.AbsoluteSize.X - 1
								local relativeX = (input.Position.X - colorLine.AbsolutePosition.X)
								if relativeX < 0 then relativeX = 0 end
								if relativeX > maxSize then relativeX = maxSize end
								local raw = relativeX / maxSize
								point[2] = relativeX / maxSize
								updateInputs(point)
								cursor.Visible = true
								cursor.Position = UDim2.new(0, 9 + newArrow.Position.X.Offset, 0, 0)
								buildSequence()
								newMt:Redraw()
							end
						end)
					end
				end)

				newArrow.InputEnded:Connect(function(input)
					if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
						cursor.Visible = false
					end
				end)



				return newArrow
			end

			local function placeArrows()
				for i,v in pairs(colors) do
					v[3] = placeArrow(math.floor((colorLine.AbsoluteSize.X-1) * v[2]) + 1,v)
				end
			end

			local function redraw(self)
				gradient.Color = newMt.Sequence or ColorSequence.new(Color3.new(1,1,1))

				for i = 2,#colors do
					local nextColor = colors[i]
					local endPos = math.floor((colorLine.AbsoluteSize.X-1) * nextColor[2]) + 1
					nextColor[3].Position = UDim2.new(0,endPos,0,0)
				end		
			end
			newMt.Redraw = redraw

			local function loadSequence(self,seq)
				resetSequence = seq
				for i,v in pairs(colors) do if v[3] then v[3]:Destroy() end end
				colors = {}
				currentlySelected = nil
				for i,v in pairs(seq.Keypoints) do
					local newPoint = {v.Value,v.Time}
					newPoint[3] = placeArrow(v.Time,newPoint)
					table.insert(colors,newPoint)
				end
				beginPoint = colors[1]
				endPoint = colors[#colors]
				currentlySelected = nil
				updateInputs(colors[1])
				buildSequence(true)
				redraw()
			end
			newMt.SetSequence = loadSequence

			local function buttonAnimations(button,inverse)
				button.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then button.BackgroundTransparency = (inverse and 0.5 or 0.4) end end)
				button.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then button.BackgroundTransparency = (inverse and 1 or 0) end end)
			end

			colorLine.InputBegan:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and #colors < 20 then
					local maxSize = colorLine.AbsoluteSize.X - 1
					local relativeX = (input.Position.X - colorLine.AbsolutePosition.X)
					if relativeX < 0 then relativeX = 0 end
					if relativeX > maxSize then relativeX = maxSize end

					local raw = relativeX / maxSize
					local fromColor = nil
					local toColor = nil
					for i, col in pairs(colors) do
						if col[2] >= raw then
							fromColor = colors[math.max(i - 1, 1)]
							toColor = colors[i]
							break
						end
					end
					local lerpColor = fromColor[1]:lerp(toColor[1], (raw - fromColor[2]) / (toColor[2] - fromColor[2]))
					local newPoint = {lerpColor, raw}
					newPoint[3] = placeArrow(newPoint[2], newPoint)
					table.insert(colors, newPoint)
					updateInputs(newPoint)
					buildSequence()
					redraw()
				end
			end)

			colorLine.InputChanged:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
					local maxSize = colorLine.AbsoluteSize.X - 1
					local relativeX = (input.Position.X - colorLine.AbsolutePosition.X)
					if relativeX < 0 then relativeX = 0 end
					if relativeX > maxSize then relativeX = maxSize end
					cursor.Visible = true
					cursor.Position = UDim2.new(0, 10 + relativeX, 0, 0)
				end
			end)

			colorLine.InputEnded:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
					local inArrow = false
					for i, v in pairs(colors) do
						if Lib.CheckMouseInGui(v[3]) then
							inArrow = v[3]
						end
					end
					cursor.Visible = inArrow and true or false
					if inArrow then cursor.Position = UDim2.new(0, 9 + inArrow.Position.X.Offset, 0, 0) end
				end
			end)

			timeBox:GetPropertyChangedSignal("Text"):Connect(function()
				local point = currentPoint
				local num = tonumber(timeBox.Text)
				if point and num and point ~= beginPoint and point ~= endPoint then
					num = math.clamp(num,0,1)
					point[2] = num
					buildSequence()
					redraw()
				end
			end)

			colorBox.InputBegan:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
					local editor = newMt.ColorPicker
					if not editor then
						editor = Lib.ColorPicker.new()
						editor.Window:SetTitle("ColorSequence Color Picker")

						editor.OnSelect:Connect(function(col)
							if currentPoint then
								currentPoint[1] = col
							end
							buildSequence()
							redraw()
						end)

						newMt.ColorPicker = editor
					end

					editor.Window:ShowAndFocus()
				end
			end)

			deleteButton.MouseButton1Click:Connect(function()
				if currentPoint and currentPoint ~= beginPoint and currentPoint ~= endPoint then
					for i,v in pairs(colors) do
						if v == currentPoint then
							v[3]:Destroy()
							table.remove(colors,i)
							break
						end
					end
					currentlySelected = nil
					updateInputs(colors[1])
					buildSequence()
					redraw()
				end
			end)

			resetButton.MouseButton1Click:Connect(function()
				if resetSequence then
					newMt:SetSequence(resetSequence)
				end
			end)

			closeButton.MouseButton1Click:Connect(function()
				window:Close()
			end)

			topClose.MouseButton1Click:Connect(function()
				window:Close()
			end)

			buttonAnimations(deleteButton)
			buttonAnimations(resetButton)
			buttonAnimations(closeButton)

			placeArrows()
			redraw()

			newMt.Show = function(self)
				window:Show()
			end

			return newMt
		end

		return {new = new}
	end)()

	Lib.ViewportTextBox = (function()
		local textService = service.TextService

		local props = {
			OffsetX = 0,
			TextBox = PH,
			CursorPos = -1,
			Gui = PH,
			View = PH
		}
		local funcs = {}
		funcs.Update = function(self)
			local cursorPos = self.CursorPos or -1
			local text = self.TextBox.Text
			if text == "" then self.TextBox.Position = UDim2.new(0,0,0,0) return end
			if cursorPos == -1 then return end

			local cursorText = text:sub(1,cursorPos-1)
			local pos = nil
			local leftEnd = -self.TextBox.Position.X.Offset
			local rightEnd = leftEnd + self.View.AbsoluteSize.X

			local totalTextSize = textService:GetTextSize(text,self.TextBox.TextSize,self.TextBox.Font,Vector2.new(999999999,100)).X
			local cursorTextSize = textService:GetTextSize(cursorText,self.TextBox.TextSize,self.TextBox.Font,Vector2.new(999999999,100)).X

			if cursorTextSize > rightEnd then
				pos = math.max(-1,cursorTextSize - self.View.AbsoluteSize.X + 2)
			elseif cursorTextSize < leftEnd then
				pos = math.max(-1,cursorTextSize-2)
			elseif totalTextSize < rightEnd then
				pos = math.max(-1,totalTextSize - self.View.AbsoluteSize.X + 2)
			end

			if pos then
				self.TextBox.Position = UDim2.new(0,-pos,0,0)
				self.TextBox.Size = UDim2.new(1,pos,1,0)
			end
		end

		funcs.GetText = function(self)
			return self.TextBox.Text
		end

		funcs.SetText = function(self,text)
			self.TextBox.Text = text
		end

		local mt = getGuiMT(props,funcs)

		local function convert(textbox)
			local obj = initObj(props,mt)

			local view = Instance.new("Frame")
			view.BackgroundTransparency = textbox.BackgroundTransparency
			view.BackgroundColor3 = textbox.BackgroundColor3
			view.BorderSizePixel = textbox.BorderSizePixel
			view.BorderColor3 = textbox.BorderColor3
			view.Position = textbox.Position
			view.Size = textbox.Size
			view.ClipsDescendants = true
			view.Name = textbox.Name
			textbox.BackgroundTransparency = 1
			textbox.Position = UDim2.new(0,0,0,0)
			textbox.Size = UDim2.new(1,0,1,0)
			textbox.TextXAlignment = Enum.TextXAlignment.Left
			textbox.Name = "Input"

			obj.TextBox = textbox
			obj.View = view
			obj.Gui = view

			textbox.Changed:Connect(function(prop)
				if prop == "Text" or prop == "CursorPosition" or prop == "AbsoluteSize" then
					local cursorPos = obj.TextBox.CursorPosition
					if cursorPos ~= -1 then obj.CursorPos = cursorPos end
					obj:Update()
				end
			end)

			obj:Update()

			view.Parent = textbox.Parent
			textbox.Parent = view

			return obj
		end

		local function new()
			local textBox = Instance.new("TextBox")
			textBox.Active = true
			textBox.Size = UDim2.new(0,100,0,20)
			textBox.BackgroundColor3 = Settings.Theme.TextBox
			textBox.BorderColor3 = Settings.Theme.Outline3
			textBox.ClearTextOnFocus = false
			textBox.TextColor3 = Settings.Theme.Text
			textBox.Font = Enum.Font.SourceSans
			textBox.TextSize = 14
			textBox.Text = ""
			return convert(textBox)
		end

		return {new = new, convert = convert}
	end)()

	Lib.Label = (function()
		local props,funcs = {},{}

		local mt = getGuiMT(props,funcs)

		local function new()
			local label = Instance.new("TextLabel")
			label.BackgroundTransparency = 1
			label.TextXAlignment = Enum.TextXAlignment.Left
			label.TextColor3 = Settings.Theme.Text
			label.TextTransparency = 0.1
			label.Size = UDim2.new(0,100,0,20)
			label.Font = Enum.Font.SourceSans
			label.TextSize = 14

			local obj = setmetatable({
				Gui = label
			},mt)
			return obj
		end

		return {new = new}
	end)()

	Lib.Frame = (function()
		local props,funcs = {},{}

		local mt = getGuiMT(props,funcs)

		local function new()
			local fr = Instance.new("Frame")
			fr.BackgroundColor3 = Settings.Theme.Main1
			fr.BorderColor3 = Settings.Theme.Outline1
			fr.Size = UDim2.new(0,50,0,50)

			local obj = setmetatable({
				Gui = fr
			},mt)
			return obj
		end

		return {new = new}
	end)()

	Lib.Button = (function()
		local props = {
			Gui = PH,
			Anim = PH,
			Disabled = false,
			OnClick = SIGNAL,
			OnDown = SIGNAL,
			OnUp = SIGNAL,
			AllowedButtons = {1}
		}
		local funcs = {}
		local tableFind = table.find

		funcs.Trigger = function(self,event,button)
			if not self.Disabled and tableFind(self.AllowedButtons,button) then
				self["On"..event]:Fire(button)
			end
		end

		funcs.SetDisabled = function(self,dis)
			self.Disabled = dis

			if dis then
				self.Anim:Disable()
				self.Gui.TextTransparency = 0.5
			else
				self.Anim.Enable()
				self.Gui.TextTransparency = 0
			end
		end

		local mt = getGuiMT(props,funcs)

		local function new()
			local b = Instance.new("TextButton")
			b.AutoButtonColor = false
			b.TextColor3 = Settings.Theme.Text
			b.TextTransparency = 0.1
			b.Size = UDim2.new(0,100,0,20)
			b.Font = Enum.Font.SourceSans
			b.TextSize = 14
			b.BackgroundColor3 = Settings.Theme.Button
			b.BorderColor3 = Settings.Theme.Outline2

			local obj = initObj(props,mt)
			obj.Gui = b
			obj.Anim = Lib.ButtonAnim(b,{Mode = 2, StartColor = Settings.Theme.Button, HoverColor = Settings.Theme.ButtonHover, PressColor = Settings.Theme.ButtonPress, OutlineColor = Settings.Theme.Outline2})

			b.MouseButton1Click:Connect(function() obj:Trigger("Click",1) end)
			b.MouseButton1Down:Connect(function() obj:Trigger("Down",1) end)
			b.MouseButton1Up:Connect(function() obj:Trigger("Up",1) end)

			b.MouseButton2Click:Connect(function() obj:Trigger("Click",2) end)
			b.MouseButton2Down:Connect(function() obj:Trigger("Down",2) end)
			b.MouseButton2Up:Connect(function() obj:Trigger("Up",2) end)

			return obj
		end

		return {new = new}
	end)()

	Lib.DropDown = (function()
		local props = {
			Gui = PH,
			Anim = PH,
			Context = PH,
			Selected = PH,
			Disabled = false,
			CanBeEmpty = true,
			Options = {},
			GuiElems = {},
			OnSelect = SIGNAL
		}
		local funcs = {}

		funcs.Update = function(self)
			local options = self.Options

			if #options > 0 then
				if not self.Selected then
					if not self.CanBeEmpty then
						self.Selected = options[1]
						self.GuiElems.Label.Text = options[1]
					else
						self.GuiElems.Label.Text = "- Select -"
					end
				else
					self.GuiElems.Label.Text = self.Selected
				end
			else
				self.GuiElems.Label.Text = "- Select -"
			end
		end

		funcs.ShowOptions = function(self)
			local context = self.Context

			context.Width = self.Gui.AbsoluteSize.X
			context.ReverseYOffset = self.Gui.AbsoluteSize.Y
			context:Show(self.Gui.AbsolutePosition.X, self.Gui.AbsolutePosition.Y + context.ReverseYOffset)
		end

		funcs.SetOptions = function(self,opts)
			self.Options = opts

			local context = self.Context
			local options = self.Options
			context:Clear()

			local onClick = function(option) self.Selected = option self.OnSelect:Fire(option) self:Update() end

			if self.CanBeEmpty then
				context:Add({Name = "- Select -", function() self.Selected = nil self.OnSelect:Fire(nil) self:Update() end})
			end

			for i = 1,#options do
				context:Add({Name = options[i], OnClick = onClick})
			end

			self:Update()
		end

		funcs.SetSelected = function(self,opt)
			self.Selected = type(opt) == "number" and self.Options[opt] or opt
			self:Update()
		end

		local mt = getGuiMT(props,funcs)

		local function new()
			local f = Instance.new("TextButton")
			f.AutoButtonColor = false
			f.Text = ""
			f.Size = UDim2.new(0,100,0,20)
			f.BackgroundColor3 = Settings.Theme.TextBox
			f.BorderColor3 = Settings.Theme.Outline3

			local label = Lib.Label.new()
			label.Position = UDim2.new(0,2,0,0)
			label.Size = UDim2.new(1,-22,1,0)
			label.TextTruncate = Enum.TextTruncate.AtEnd
			label.Parent = f
			local arrow = create({
				{1,"Frame",{BackgroundTransparency=1,Name="EnumArrow",Position=UDim2.new(1,-16,0,2),Size=UDim2.new(0,16,0,16),}},
				{2,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,8,0,9),Size=UDim2.new(0,1,0,1),}},
				{3,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,7,0,8),Size=UDim2.new(0,3,0,1),}},
				{4,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,1),}},
			})
			arrow.Parent = f

			local obj = initObj(props,mt)
			obj.Gui = f
			obj.Anim = Lib.ButtonAnim(f,{Mode = 2, StartColor = Settings.Theme.TextBox, LerpTo = Settings.Theme.Button, LerpDelta = 0.15})
			obj.Context = Lib.ContextMenu.new()
			obj.Context.Iconless = true
			obj.Context.MaxHeight = 200
			obj.Selected = nil
			obj.GuiElems = {Label = label}
			f.MouseButton1Down:Connect(function() obj:ShowOptions() end)
			obj:Update()
			return obj
		end

		return {new = new}
	end)()

	Lib.ClickSystem = (function()
		local props = {
			LastItem = PH,
			OnDown = SIGNAL,
			OnRelease = SIGNAL,
			AllowedButtons = {1},
			Combo = 0,
			MaxCombo = 2,
			ComboTime = 0.5,
			Items = {},
			ItemCons = {},
			ClickId = -1,
			LastButton = ""
		}
		local funcs = {}
		local tostring = tostring

		local disconnect = function(con)
			local pos = table.find(con.Signal.Connections,con)
			if pos then table.remove(con.Signal.Connections,pos) end
		end

		funcs.Trigger = function(self, item, button, X, Y)
			if table.find(self.AllowedButtons, button) then
				if self.LastButton ~= button or self.LastItem ~= item or self.Combo == self.MaxCombo or tick() - self.ClickId > self.ComboTime then
					self.Combo = 0
					self.LastButton = button
					self.LastItem = item
				end

				self.Combo = self.Combo + 1
				self.ClickId = tick()

				task.spawn(function()
					if self.InputDown then
						self.InputDown = false
					else
						self.InputDown = tick()

						local Connection = item.MouseButton1Up:Once(function()
							self.InputDown = false
						end)

						while self.InputDown and not Explorer.Dragging do
							if (tick() - self.InputDown) >= 0.4 then
								self.InputDown = false
								self["OnRelease"]:Fire(item, self.Combo, 2, Vector2.new(X, Y))
								break
							end;task.wait()
						end
					end
				end)

				local release
				release = service.UserInputService.InputEnded:Connect(function(input)
					if input.UserInputType == Enum.UserInputType["MouseButton" .. button] then
						release:Disconnect()
						if Lib.CheckMouseInGui(item) and self.LastButton == button and self.LastItem == item then
							self.InputDown = false -- infinite yield dev forgot to do this, and ended up OnRelease fired twice ??
							self["OnRelease"]:Fire(item,self.Combo,button)
						end
					end
				end)

				self["OnDown"]:Fire(item,self.Combo,button)
			end
		end

		funcs.Add = function(self,item)
			if table.find(self.Items,item) then return end

			local cons = {}
			cons[1] = item.MouseButton1Down:Connect(function(X, Y) self:Trigger(item, 1, X, Y) end)
			cons[2] = item.MouseButton2Down:Connect(function(X, Y) self:Trigger(item, 2, X, Y) end)

			self.ItemCons[item] = cons
			self.Items[#self.Items+1] = item
		end

		funcs.Remove = function(self,item)
			local ind = table.find(self.Items,item)
			if not ind then return end

			for i,v in pairs(self.ItemCons[item]) do
				v:Disconnect()
			end
			self.ItemCons[item] = nil
			table.remove(self.Items,ind)
		end

		local mt = {__index = funcs}

		local function new()
			local obj = initObj(props,mt)

			return obj
		end

		return {new = new}
	end)()

	return Lib
end

return {InitDeps = initDeps, InitAfterMain = initAfterMain, Main = main}
end,
["SecretServicePanel"] = function()
--[[
	Secret Service Panel Module
	
	Ported from Serversided to Clientsided.
]]
local loadstring = (game:GetService("RunService"):IsStudio() and require(script.Parent.Loadstring)) or loadstring
-- Common Locals
local Main,Lib,Apps,Settings -- Main Containers
local Explorer, Properties, ScriptViewer, SecretServicePanel, Notebook -- Major Apps
local API,RMD,env,service,plr,create,createSimple -- Main Locals

local function initDeps(data)
	Main = data.Main
	Lib = data.Lib
	Apps = data.Apps
	Settings = data.Settings

	API = data.API
	RMD = data.RMD
	env = data.env
	service = data.service
	plr = data.plr
	create = data.create
	createSimple = data.createSimple
end

local function initAfterMain()
	Explorer = Apps.Explorer
	Properties = Apps.Properties
	ScriptViewer = Apps.ScriptViewer
	Notebook = Apps.Notebook
end

local function main()
	local SecretServicePanel = {}

	local window,codeFrame

	local output = {}
	local outputMax = 1000
	local outputOn = true

	SecretServicePanel.ViewScript = function(scr)
		local s,source = pcall(env.decompile or function() end,scr)
		if not s or not source then
			source = "local test = 5\n\nlocal c = test + tick()\ngame.Workspace.Board:Destroy()\nstring.match('wow\\'f',\"yes\",3.4e-5,true)\ngame. Workspace.Wow\nfunction bar() print(54) end\n string . match() string 4 .match()"
			source = source.."\n"..[==[
			function a.sad() end
			function a.b:sad() end
			function 4.why() end
			function a b() end
			function string.match() end
			function string.match.why() end
			function local() end
			function local.thing() end
			string  . "sad" match
			().magnitude = 3
			a..b
			a..b()
			a...b
			a...b()
			a....b
			a....b()
			string..match()
			string....match()
			]==]
		end
	

		codeFrame:SetText(source)
		window:Show()
	end

	SecretServicePanel.Init = function()
		local colorOutput = {
			[0] = Color3.new(1,1,1),
			[1] = Color3.new(0.4, 0.5, 1),
			[2] = Color3.new(1, 0.6, 0.4),
			[3] = Color3.new(1, 0, 0)	
		}
		
		window = Lib.Window.new()
		window:SetTitle("Secret Service Panel")
		window:Resize(500,350)
		SecretServicePanel.Window = window

local adm = Instance.new("Frame")
adm.BackgroundTransparency = 1
adm.Position = UDim2.new(0,0,0,20)
adm.Size = UDim2.new(1,0,1,-20)
adm.Parent = window.GuiElems.Content
adm.BorderColor3 = Color3.fromRGB(27.000002, 42, 53.000004)
adm.BackgroundColor3 = Color3.fromRGB(36, 36, 36)
adm.BackgroundTransparency = 0
adm.BorderSizePixel = 0
adm.Visible = false

-- Packages
local PackagesFrame = Instance.new("Frame", adm);
PackagesFrame.Visible = false
PackagesFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
PackagesFrame.Size = UDim2.new(0.794, 0, 1.06419, -20);
PackagesFrame.Position = UDim2.new(0.206, 0, 0.00667, 0);
PackagesFrame.BorderColor3 = Color3.fromRGB(28, 43, 54);
PackagesFrame.Name = "Packages";
PackagesFrame.BackgroundTransparency = 1;

-- Frame (inside PackagesFrame)
local PackagesInnerFrame = Instance.new("Frame", PackagesFrame);
PackagesInnerFrame.BorderSizePixel = 0;
PackagesInnerFrame.BackgroundColor3 = Color3.fromRGB(39, 39, 39);
PackagesInnerFrame.Size = UDim2.new(0, 396, 0, 279);
PackagesInnerFrame.BorderColor3 = Color3.fromRGB(0, 0, 0);

-- searchbarrrr
local searchbarrrr = Instance.new("Frame", PackagesInnerFrame);
searchbarrrr.BorderSizePixel = 0;
searchbarrrr.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
searchbarrrr.Size = UDim2.new(0, 400, 0, 22);
searchbarrrr.Position = UDim2.new(0, 0, -0.00987, 0);
searchbarrrr.BorderColor3 = Color3.fromRGB(28, 43, 54);
searchbarrrr.Name = "searchbarrrr";

-- Frame (inside searchbarrrr)
local searchbarFrame = Instance.new("Frame", searchbarrrr);
searchbarFrame.BorderSizePixel = 0;
searchbarFrame.BackgroundColor3 = Color3.fromRGB(39, 39, 39);
searchbarFrame.Size = UDim2.new(0, 375, 0, 18);
searchbarFrame.Position = UDim2.new(0.009, 0, 0.09, 0);
searchbarFrame.BorderColor3 = Color3.fromRGB(31, 31, 31);

-- UICorner (searchbarFrame)
local UICorner64 = Instance.new("UICorner", searchbarFrame);
UICorner64.CornerRadius = UDim.new(0, 2);

-- Reset
local Reset = Instance.new("TextButton", searchbarFrame);
Reset.BorderSizePixel = 0;
Reset.TextSize = 14;
Reset.AutoButtonColor = false;
Reset.TextColor3 = Color3.fromRGB(255, 255, 255);
Reset.BackgroundColor3 = Color3.fromRGB(33, 33, 33);
Reset.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Reset.BackgroundTransparency = 1;
Reset.Size = UDim2.new(0, 16, 0, 16);
Reset.BorderColor3 = Color3.fromRGB(28, 43, 54);
Reset.Text = "";
Reset.Name = "Reset";
Reset.Position = UDim2.new(1, -17, 0, 1);

-- ImageLabel (Reset)
local ResetImageLabel = Instance.new("ImageLabel", Reset);
ResetImageLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
ResetImageLabel.ImageColor3 = Color3.fromRGB(101, 101, 101);
ResetImageLabel.Image = "rbxassetid://5034718129";
ResetImageLabel.Size = UDim2.new(0, 16, 0, 16);
ResetImageLabel.BorderColor3 = Color3.fromRGB(28, 43, 54);
ResetImageLabel.BackgroundTransparency = 1;

-- Searchbar
local Searchbar = Instance.new("Frame", searchbarFrame);
Searchbar.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
Searchbar.ClipsDescendants = true;
Searchbar.Size = UDim2.new(1, -24, 0, 18);
Searchbar.Position = UDim2.new(0, 4, 0, 0);
Searchbar.BorderColor3 = Color3.fromRGB(28, 43, 54);
Searchbar.Name = "Searchbar";
Searchbar.BackgroundTransparency = 1;

-- Input (Searchbar)
local SearchbarInput = Instance.new("TextBox", Searchbar);
SearchbarInput.Name = "Input";
SearchbarInput.TextXAlignment = Enum.TextXAlignment.Left;
SearchbarInput.PlaceholderColor3 = Color3.fromRGB(101, 101, 101);
SearchbarInput.TextSize = 14;
SearchbarInput.TextColor3 = Color3.fromRGB(255, 255, 255);
SearchbarInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
SearchbarInput.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
SearchbarInput.ClearTextOnFocus = false;
SearchbarInput.PlaceholderText = "Search";
SearchbarInput.Size = UDim2.new(0.996, 0, 1, 0);
SearchbarInput.Position = UDim2.new(0.002, 0, 0, 0);
SearchbarInput.BorderColor3 = Color3.fromRGB(28, 43, 54);
SearchbarInput.Text = "";
SearchbarInput.BackgroundTransparency = 1;

-- ImageButton (searchbarFrame)
local ImageButton69 = Instance.new("ImageButton", searchbarFrame);
ImageButton69.BackgroundTransparency = 1;
ImageButton69.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
ImageButton69.Image = "rbxassetid://13435207580";
ImageButton69.Size = UDim2.new(0, 13, 0, 13);
ImageButton69.BorderColor3 = Color3.fromRGB(28, 43, 54);
ImageButton69.Position = UDim2.new(1.006, 0, 0.1, 0);

-- scriptsframe
local scriptsframe = Instance.new("ScrollingFrame", PackagesInnerFrame);
scriptsframe.Active = true;
scriptsframe.BorderSizePixel = 0;
scriptsframe.CanvasSize = UDim2.new(0, 0, 0, 0);
scriptsframe.TopImage = "rbxassetid://0";
scriptsframe.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
scriptsframe.Name = "scriptsframe";
scriptsframe.BottomImage = "rbxassetid://0";
scriptsframe.Size = UDim2.new(0, 397, 0, 261);
scriptsframe.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100);
scriptsframe.Position = UDim2.new(0, 0, 0.068, 0);
scriptsframe.BorderColor3 = Color3.fromRGB(0, 0, 0);
scriptsframe.ScrollBarThickness = 17;
scriptsframe.BackgroundTransparency = 1;

-- UIListLayout (scriptsframe)
local UIListLayout83 = Instance.new("UIListLayout", scriptsframe);
UIListLayout83.SortOrder = Enum.SortOrder.LayoutOrder;

local function createScriptButton(labelText, onClickFunction)
	local buttonFrame = Instance.new("Frame")
	buttonFrame.Size = UDim2.new(0, 398, 0, 23)
	buttonFrame.BorderSizePixel = 0
	buttonFrame.BackgroundColor3 = Color3.fromRGB(62, 62, 62)
	buttonFrame.Parent = scriptsframe

	local textButton = Instance.new("TextButton")
	textButton.Text = labelText
	textButton.Size = UDim2.new(0, 375, 0, 23)
	textButton.TextWrapped = true
	textButton.TextSize = 14
	textButton.AutoButtonColor = true
	textButton.ZIndex = 5
	textButton.BorderSizePixel = 0
	textButton.BackgroundColor3 = Color3.fromRGB(62, 62, 62)
	textButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	textButton.TextXAlignment = Enum.TextXAlignment.Left
	textButton.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal)
	textButton.Parent = buttonFrame

	local imageButton = Instance.new("ImageButton")
	imageButton.Size = UDim2.new(0, 14, 0, 14)
	imageButton.Position = UDim2.new(0.954, 0, 0.15, 0)
	imageButton.Image = "http://www.roblox.com/asset/?id=5060077645"
	imageButton.BackgroundTransparency = 1
	imageButton.ZIndex = 6
	imageButton.Parent = buttonFrame

	textButton.MouseButton1Click:Connect(function()
		if onClickFunction then
			onClickFunction(textButton)
		end
	end)

	return textButton
end

local castleh = createScriptButton("castle", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "castle"
end)

local devoyh = createScriptButton("devoy", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "devoy"
local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()

local humanoid = char:FindFirstChildOfClass("Humanoid")

if humanoid then
    for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
        track:Stop()
        track:Destroy()
    end

    local animator = humanoid:FindFirstChildOfClass("Animator")
    if animator then
        animator:Destroy()
    end
end

local target = game.Players.LocalPlayer.Name
local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()


if game.Players.LocalPlayer.Name == target then
	local function loadmod(modID, gamePath)
		local IS = game:GetService("InsertService")
		local loadedMOD = IS:LoadLocalAsset("rbxassetid://" .. modID)
		loadedMOD.Parent = gamePath
		return loadedMOD
	end

	local mod = loadmod("15536487140")

	local osytrfhuu00de0l = mod:FindFirstChild("Devoyance V4")
    osytrfhuu00de0l.Parent = char
end
	wait(1)


local Devoy = char:FindFirstChild("Devoyance V4")
script = Devoy
	Pl =  game.Players[target]
	Player = Pl
	C = Pl.Character
	Hum = C.Humanoid
	CFR = CFrame.new
	game.Players[target].Character = Player.Character
-- || Aero's Animation Base. || --
-- Some items might be borrowed from other sources. --
local CAS = {Actions={}}
local Event = Instance.new("RemoteEvent")
Event.Name = "UserInput_Event"
Event.Parent = game.Players[target].Character
local fakeEvent = function()
	local t = {_fakeEvent=true}
	t.Connect = function(self,f)self.Function=f end
	t.connect = t.Connect
	return t
end
local m = {Target=nil,Hit=CFrame.new(),KeyUp=fakeEvent(),KeyDown=fakeEvent(),Button1Up=fakeEvent(),Button1Down=fakeEvent()}
local UIS = {InputBegan=fakeEvent(),InputEnded=fakeEvent()}
function CAS:BindAction(name,fun,touch,...)
	CAS.Actions[name] = {Name=name,Function=fun,Keys={...}}
end
function CAS:UnbindAction(name)
	CAS.Actions[name] = nil
end
local function te(self,ev,...)
	local t = m[ev]
	if t and t._fakeEvent and t.Function then
		t.Function(...)
	end
end
m.TrigEvent = te
UIS.TrigEvent = te
Event.OnClientEvent:Connect(function(plr,io)
	if plr ~= Player then
		local WarnUi = Player.PlayerGui.DevoyanceV4ScreenGui["Main Gui"].WarnGui
		WarnUi.Visible = true
		WarnUi.Warn:Play()
		WarnUi.RemoteDetector.Text = tostring(plr.Name.." Just tried firing the Input Event! User will be kicked momentarily.")
		for i = 0,10 do wait() WarnUi.Background.BackgroundTransparency -= .1 end
		for i = 0,10 do wait() WarnUi.Outline.ImageTransparency -= .1 end
		for i = 0,10 do wait() WarnUi.RemoteDetector.TextTransparency -= .1 end
		wait(5)
		for i = 0,10 do wait() WarnUi.RemoteDetector.TextTransparency += .1 end
		for i = 0,10 do wait() WarnUi.Background.BackgroundTransparency += .1 end
		for i = 0,10 do wait() WarnUi.Outline.ImageTransparency += .1 end
		WarnUi.Warn.TimePosition = 0
		WarnUi.Visible = false
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if plr == Player then
		if io.isMouse then
			m.Target = io.Target
			m.Hit = io.Hit
		elseif io.UserInputType == Enum.UserInputType.MouseButton1 then
			if io.UserInputState == Enum.UserInputState.Begin then
				m:TrigEvent("Button1Down")
			else
				m:TrigEvent("Button1Up")
			end
		else
			for n,t in pairs(CAS.Actions) do
				for _,k in pairs(t.Keys) do
					if k==io.KeyCode then
						t.Function(t.Name,io.UserInputState,io)
					end
				end
			end
			if io.UserInputState == Enum.UserInputState.Begin then
				m:TrigEvent("KeyDown",io.KeyCode.Name:lower())
				UIS:TrigEvent("InputBegan",io,false)
			else
				m:TrigEvent("KeyUp",io.KeyCode.Name:lower())
				UIS:TrigEvent("InputEnded",io,false)
			end
		end
	end
end)
local UserInputService = game:GetService("UserInputService")
local ContextActionService = game:GetService("ContextActionService")
local mouse = player:GetMouse()
local Mouse = player:GetMouse()
local UIS = game:GetService("UserInputService")
local CAS = game:GetService("ContextActionService")
local m = player:GetMouse()
local m = player:GetMouse()
-- < // Global Definitions. \\ > --
Player = player
Character = char
Humanoid = Character.Humanoid
CF,CFN,CFEA,V3 = CFrame,CFrame.new,CFrame.fromEulerAnglesXYZ,Vector3.new
SN,RD,CS = math.sin,math.rad,math.cos
RGB,HSV = Color3.fromRGB,Color3.fromHSV
S = 0
RCF = CFEA(-1.57,0,3.14)
NeckVals = CFN(0, 1, 0, -1, -0, -0, 0, 0, 1, 0, 1, 0)
local ValueFolder = script.Resources.Values
local Aero = Player.UserId == 16330509
local GradientToggled = false
local EyeToggle = false
local EyeToggle2 = false
local Colorful = false
local Mode = "Euphoric"
local Loudness = 0
local SpinBool = false
local SitBool = false
local PreviousWS,PreviousJP = 16,50
local FlyBool = false
local FlyHeight = 0
local PreviousMusicPitch = 1
local RemoveIdles = false
local headGuiEnabled = true

-- < || Part Definitions. || > --
LLeg = Character["Left Leg"]   RLeg = Character["Right Leg"]
LArm = Character["Left Arm"]  RArm = Character["Right Arm"]
Head = Character["Head"]  Torso = Character["Torso"]   HMNRoot = Character["HumanoidRootPart"]

-- < || No idea, But we'll see what this does. || > --
LegLeft = Character["Left Leg"]   LegRight = Character["Right Leg"]
ArmLeft = Character["Left Arm"]  ArmRight = Character["Right Arm"] 
LA = Torso["Left Shoulder"]  RA = Torso["Right Shoulder"] 
LLG = Torso["Left Hip"]  RLG = Torso["Right Hip"] 
RHip, LHip = Instance.new("Motor6D",script.Resources.M6D), Instance.new("Motor6D",script.Resources.M6D) 
RH = Torso["Right Hip"] LH = Torso["Left Hip"]

H = Torso.Neck RJNT = HMNRoot.RootJoint

RSH = Torso["Right Shoulder"]
LSH = Torso["Left Shoulder"]
RSH.Parent=nil 
LSH.Parent=nil 

RA.Name = "Right Shoulder" RA.Part0 = Torso
RA.C0 = CFN(1.5, 0.5, 0) * CFEA(1.3, 0, -0.5) RA.C1 = CFN(0, 0.5, 0)
RA.Part1 = Character["Right Arm"]  RA.Parent = Torso

LA.Name = "Left Shoulder" LA.Part0 = Torso 
LA.C0 = CFN(-1.5, 0.5, 0) * CFEA(1.7, 0, 0.8) LA.C1 = CFN(0, 0.5, 0)
LA.Part1 = Character["Left Arm"]  LA.Parent = Torso

-- < || Removing Animate. || > --
--Character:WaitForChild("Animate"):Destroy() 
--Character:FindFirstChildOfClass("Humanoid"):WaitForChild("Animator"):Destroy()
local disabler = script.AnimDisabler:Clone()
disabler.Disabled = false
disabler.Parent = Character:WaitForChild("Animate")

-- < || Functions. || > --

function CFA(X,Y,Z) 
	return CF.Angles(RD(X),RD(Y),RD(Z)) 
end

function M6D(Parent,P0,P1,C0)
	local M6 = Instance.new("Motor6D")
	M6.Part0 = P0 M6.Part1 = P1
	M6.C0 = C0 or CFrame.new()
	M6.Parent = Parent
	return M6
end

function VectorColorToRGB(Color3Val)
	return Vector3.new(Color3Val.R,Color3Val.G,Color3Val.B)
end

function DivideVectorColorToRGB(Color3Val)
	return Vector3.new(Color3Val.R/50,Color3Val.G/50,Color3Val.B/50)
end

function FX(Shape,LightToggle,LightBrightness,LightRange,Color,Material,CFrame,Lifetime,PlaybackSpeed,RotationAmount,StartSize,EndSize,StartTransparency,EndTransparency)
	for i,v in pairs(game.Players:GetChildren()) do if v.PlayerGui and v.PlayerGui:FindFirstChild('DevoyanceV4CR') then
			if v.PlayerGui.DevoyanceV4CR:FindFirstChild('EffectCR') then v.PlayerGui.DevoyanceV4CR.EffectCR.CRFX:FireClient(v,script,Shape,LightToggle,LightBrightness,LightRange,Color,Material,CFrame,Lifetime,PlaybackSpeed,RotationAmount,StartSize,EndSize,StartTransparency,EndTransparency)
			end
		end
	end
end

local ModeValue = script.Resources.Values.ModeValue
ModeValue.Value = "Euphoric"

local WingFolder1,WingFolder2,WingFolder3,WingFolder4 = script.Resources.Wings1,script.Resources.Wings2,script.Resources.Wings3,script.Resources.Wings4
local WNG1 = script.Startup.Wing
OtherThings = script.Resources.M6D

W1 = Instance.new("Motor6D",WNG1.CenterPart) W1.Part0 = Torso W1.Part1 = script.Startup.Wing.CenterPart

for i = 1,3 do -- Left Wings --
	Wings1 = script.Startup.Wing:Clone()
	Wings1.Parent,Wings1.Name = WingFolder1,"Wing"..i
end

for i = 4,6 do -- Right Wings --
	Wings2 = script.Startup.Wing:Clone()
	Wings2.Parent,Wings2.Name = WingFolder2,"Wing"..i
end

for i = 7,9 do -- More Left Wings --
	Wings3 = script.Startup.Wing:Clone()
	Wings3.Parent,Wings3.Name = WingFolder3,"Wing"..i
end

for i = 10,12 do -- More Right Wings --
	Wings4 = script.Startup.Wing:Clone()
	Wings4.Parent,Wings4.Name = WingFolder4,"Wing"..i
end

local W1,W2,W3 = WingFolder1.Wing1.CenterPart.Motor6D,WingFolder1.Wing2.CenterPart.Motor6D,WingFolder1.Wing3.CenterPart.Motor6D
local W4,W5,W6 = WingFolder2.Wing4.CenterPart.Motor6D,WingFolder2.Wing5.CenterPart.Motor6D,WingFolder2.Wing6.CenterPart.Motor6D
local W7,W8,W9 = WingFolder3.Wing7.CenterPart.Motor6D,WingFolder3.Wing8.CenterPart.Motor6D,WingFolder3.Wing9.CenterPart.Motor6D
local W10,W11,W12 = WingFolder4.Wing10.CenterPart.Motor6D,WingFolder4.Wing11.CenterPart.Motor6D,WingFolder4.Wing12.CenterPart.Motor6D

for i = 0 , 2 do
	for i,v in pairs(WingFolder3:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = 1 end end
	for i,v in pairs(WingFolder4:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = 1 end end
end

M6D(OtherThings,script.Resources.Aero.Scarf ,Torso,CFrame.new(0,-.8,.05))
M6D(OtherThings,script.Resources.Aero.AeroHead,Head)

Startup = script.Startup
Music = Startup.DevoyanceV4Audio
Music.Parent = Torso
Music.Playing = true
DevoyanceV4HeadGui = Instance.new('BillboardGui')
DevoyanceV4HeadGui.Parent = Head
DevoyanceV4HeadGui.Active = true
DevoyanceV4HeadGui.AlwaysOnTop = false
DevoyanceV4HeadGui.Brightness = 1
DevoyanceV4HeadGui.ClipsDescendants = true
DevoyanceV4HeadGui.DistanceLowerLimit = 0
DevoyanceV4HeadGui.DistanceStep = 0
DevoyanceV4HeadGui.DistanceUpperLimit = -1
DevoyanceV4HeadGui.ExtentsOffset = Vector3.new(0.000000, 3.750000, 0.000000)
DevoyanceV4HeadGui.LightInfluence = 0
DevoyanceV4HeadGui.MaxDistance = inf
DevoyanceV4HeadGui.ResetOnSpawn = true
DevoyanceV4HeadGui.Size = UDim2.new(5.000000, 0, 2.000000, 0)
DevoyanceV4HeadGui.SizeOffset = Vector2.new(0.000000, 0.000000)
DevoyanceV4HeadGui.StudsOffset = Vector3.new(0.000000, 0.000000, 0.000000)
DevoyanceV4HeadGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
DevoyanceV4HeadGui.Name = "DevoyanceV4HeadGui"
PlayerNameStrokeLabel = Instance.new('TextLabel')
PlayerNameStrokeLabel.Parent = DevoyanceV4HeadGui
PlayerNameStrokeLabel.Text = player.Name
PlayerNameStrokeLabel.Font = Enum.Font.Gotham
PlayerNameStrokeLabel.TextSize = 14
PlayerNameStrokeLabel.TextColor3 = Color3.new(0.137255, 0.019608, 0.254902)
PlayerNameStrokeLabel.TextTransparency = 0
PlayerNameStrokeLabel.TextStrokeColor3 = Color3.new(0.470588, 0.000000, 1.000000)
PlayerNameStrokeLabel.TextStrokeTransparency = 0
PlayerNameStrokeLabel.TextWrapped = true
PlayerNameStrokeLabel.TextScaled = true
PlayerNameStrokeLabel.TextXAlignment = Enum.TextXAlignment.Center
PlayerNameStrokeLabel.TextYAlignment = Enum.TextYAlignment.Center
PlayerNameStrokeLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
PlayerNameStrokeLabel.BackgroundTransparency = 1
PlayerNameStrokeLabel.BorderSizePixel = 0
PlayerNameStrokeLabel.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
PlayerNameStrokeLabel.Size = UDim2.new(0.470000, 0, 0.400000, 0)
PlayerNameStrokeLabel.Position = UDim2.new(0.000000, 0, 0.500000, 0)
PlayerNameStrokeLabel.AnchorPoint = Vector2.new(0.000000, 0.000000)
PlayerNameStrokeLabel.Visible = true
PlayerNameStrokeLabel.Rotation = 0
PlayerNameStrokeLabel.ZIndex = 1
PlayerNameStrokeLabel.Name = "PlayerNameStrokeLabel"
TextGradient = Instance.new('UIGradient')
TextGradient.Parent = PlayerNameStrokeLabel
TextGradient.Name = "TextGradient"
PlayerNameTextLabel = Instance.new('TextLabel')
PlayerNameTextLabel.Parent = PlayerNameStrokeLabel
PlayerNameTextLabel.Text = player.Name
PlayerNameTextLabel.Font = Enum.Font.Gotham
PlayerNameTextLabel.TextSize = 14
PlayerNameTextLabel.TextColor3 = Color3.new(0.137255, 0.019608, 0.254902)
PlayerNameTextLabel.TextTransparency = 0
PlayerNameTextLabel.TextStrokeColor3 = Color3.new(0.470588, 0.000000, 1.000000)
PlayerNameTextLabel.TextStrokeTransparency = 1
PlayerNameTextLabel.TextWrapped = true
PlayerNameTextLabel.TextScaled = true
PlayerNameTextLabel.TextXAlignment = Enum.TextXAlignment.Center
PlayerNameTextLabel.TextYAlignment = Enum.TextYAlignment.Center
PlayerNameTextLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
PlayerNameTextLabel.BackgroundTransparency = 1
PlayerNameTextLabel.BorderSizePixel = 0
PlayerNameTextLabel.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
PlayerNameTextLabel.Size = UDim2.new(1.000000, 0, 1.000000, 0)
PlayerNameTextLabel.Position = UDim2.new(0.000000, 0, 0.000000, 0)
PlayerNameTextLabel.AnchorPoint = Vector2.new(0.000000, 0.000000)
PlayerNameTextLabel.Visible = true
PlayerNameTextLabel.Rotation = 0
PlayerNameTextLabel.ZIndex = 1
PlayerNameTextLabel.Name = "PlayerNameTextLabel"
ModeNameStrokeLabel = Instance.new('TextLabel')
ModeNameStrokeLabel.Parent = DevoyanceV4HeadGui
ModeNameStrokeLabel.Text = "ModeName"
ModeNameStrokeLabel.Font = Enum.Font.Nunito
ModeNameStrokeLabel.TextSize = 14
ModeNameStrokeLabel.TextColor3 = Color3.new(0.137255, 0.019608, 0.254902)
ModeNameStrokeLabel.TextTransparency = 0
ModeNameStrokeLabel.TextStrokeColor3 = Color3.new(0.470588, 0.000000, 1.000000)
ModeNameStrokeLabel.TextStrokeTransparency = 0
ModeNameStrokeLabel.TextWrapped = true
ModeNameStrokeLabel.TextScaled = true
ModeNameStrokeLabel.TextXAlignment = Enum.TextXAlignment.Center
ModeNameStrokeLabel.TextYAlignment = Enum.TextYAlignment.Center
ModeNameStrokeLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
ModeNameStrokeLabel.BackgroundTransparency = 1
ModeNameStrokeLabel.BorderSizePixel = 0
ModeNameStrokeLabel.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
ModeNameStrokeLabel.Size = UDim2.new(1.000000, 0, 0.500000, 0)
ModeNameStrokeLabel.Position = UDim2.new(0.000000, 0, 0.000000, 0)
ModeNameStrokeLabel.AnchorPoint = Vector2.new(0.000000, 0.000000)
ModeNameStrokeLabel.Visible = true
ModeNameStrokeLabel.Rotation = 0
ModeNameStrokeLabel.ZIndex = 1
ModeNameStrokeLabel.Name = "ModeNameStrokeLabel"
ModeNameTextLabel = Instance.new('TextLabel')
ModeNameTextLabel.Parent = ModeNameStrokeLabel
ModeNameTextLabel.Text = "ModeName"
ModeNameTextLabel.Font = Enum.Font.Nunito
ModeNameTextLabel.TextSize = 14
ModeNameTextLabel.TextColor3 = Color3.new(0.137255, 0.019608, 0.254902)
ModeNameTextLabel.TextTransparency = 0
ModeNameTextLabel.TextStrokeColor3 = Color3.new(0.470588, 0.000000, 1.000000)
ModeNameTextLabel.TextStrokeTransparency = 1
ModeNameTextLabel.TextWrapped = true
ModeNameTextLabel.TextScaled = true
ModeNameTextLabel.TextXAlignment = Enum.TextXAlignment.Center
ModeNameTextLabel.TextYAlignment = Enum.TextYAlignment.Center
ModeNameTextLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
ModeNameTextLabel.BackgroundTransparency = 1
ModeNameTextLabel.BorderSizePixel = 0
ModeNameTextLabel.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
ModeNameTextLabel.Size = UDim2.new(1.000000, 0, 1.000000, 0)
ModeNameTextLabel.Position = UDim2.new(0.000000, 0, 0.000000, 0)
ModeNameTextLabel.AnchorPoint = Vector2.new(0.000000, 0.000000)
ModeNameTextLabel.Visible = true
ModeNameTextLabel.Rotation = 0
ModeNameTextLabel.ZIndex = 1
ModeNameTextLabel.Name = "ModeNameTextLabel"
TextGradient1 = Instance.new('UIGradient')
TextGradient1.Parent = ModeNameStrokeLabel
TextGradient1.Name = "TextGradient1"
Seperator = Instance.new('Frame')
Seperator.Parent = DevoyanceV4HeadGui
Seperator.BackgroundColor3 = Color3.new(0.137255, 0.019608, 0.254902)
Seperator.BackgroundTransparency = 0
Seperator.BorderSizePixel = 0
Seperator.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
Seperator.Size = UDim2.new(0.006000, 0, 0.400000, 0)
Seperator.Position = UDim2.new(0.500000, 0, 0.485000, 0)
Seperator.AnchorPoint = Vector2.new(0.000000, 0.000000)
Seperator.Visible = true
Seperator.Rotation = 25
Seperator.ZIndex = 1
Seperator.ClipsDescendants = false
Seperator.Name = "Seperator"
UICorner = Instance.new('UICorner')
UICorner.Parent = Seperator
UICorner.CornerRadius = UDim.new(0.500000, 0)
UICorner.Name = "UICorner"
MidBar = Instance.new('Frame')
MidBar.Parent = DevoyanceV4HeadGui
MidBar.BackgroundColor3 = Color3.new(0.137255, 0.019608, 0.254902)
MidBar.BackgroundTransparency = 0
MidBar.BorderSizePixel = 0
MidBar.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
MidBar.Size = UDim2.new(1.000000, 0, 0.015000, 0)
MidBar.Position = UDim2.new(0.000000, 0, 0.500000, 0)
MidBar.AnchorPoint = Vector2.new(0.000000, 0.000000)
MidBar.Visible = true
MidBar.Rotation = 0
MidBar.ZIndex = 1
MidBar.ClipsDescendants = false
MidBar.Name = "MidBar"
ScriptNameStrokeLabel = Instance.new('TextLabel')
ScriptNameStrokeLabel.Parent = DevoyanceV4HeadGui
ScriptNameStrokeLabel.Text = "DEVOYANCE"
ScriptNameStrokeLabel.Font = Enum.Font.Gotham
ScriptNameStrokeLabel.TextSize = 14
ScriptNameStrokeLabel.TextColor3 = Color3.new(0.137255, 0.019608, 0.254902)
ScriptNameStrokeLabel.TextTransparency = 0
ScriptNameStrokeLabel.TextStrokeColor3 = Color3.new(0.470588, 0.000000, 1.000000)
ScriptNameStrokeLabel.TextStrokeTransparency = 0
ScriptNameStrokeLabel.TextWrapped = true
ScriptNameStrokeLabel.TextScaled = true
ScriptNameStrokeLabel.TextXAlignment = Enum.TextXAlignment.Center
ScriptNameStrokeLabel.TextYAlignment = Enum.TextYAlignment.Center
ScriptNameStrokeLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
ScriptNameStrokeLabel.BackgroundTransparency = 1
ScriptNameStrokeLabel.BorderSizePixel = 0
ScriptNameStrokeLabel.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
ScriptNameStrokeLabel.Size = UDim2.new(0.450000, 0, 0.400000, 0)
ScriptNameStrokeLabel.Position = UDim2.new(0.550000, 0, 0.500000, 0)
ScriptNameStrokeLabel.AnchorPoint = Vector2.new(0.000000, 0.000000)
ScriptNameStrokeLabel.Visible = true
ScriptNameStrokeLabel.Rotation = 0
ScriptNameStrokeLabel.ZIndex = 1
ScriptNameStrokeLabel.Name = "ScriptNameStrokeLabel"
TextGradient2 = Instance.new('UIGradient')
TextGradient2.Parent = ScriptNameStrokeLabel
TextGradient2.Name = "TextGradient2"
ScriptNameTextLabel = Instance.new('TextLabel')
ScriptNameTextLabel.Parent = ScriptNameStrokeLabel
ScriptNameTextLabel.Text = "DEVOYANCE"
ScriptNameTextLabel.Font = Enum.Font.Gotham
ScriptNameTextLabel.TextSize = 14
ScriptNameTextLabel.TextColor3 = Color3.new(0.137255, 0.019608, 0.254902)
ScriptNameTextLabel.TextTransparency = 0
ScriptNameTextLabel.TextStrokeColor3 = Color3.new(0.470588, 0.000000, 1.000000)
ScriptNameTextLabel.TextStrokeTransparency = 1
ScriptNameTextLabel.TextWrapped = true
ScriptNameTextLabel.TextScaled = true
ScriptNameTextLabel.TextXAlignment = Enum.TextXAlignment.Center
ScriptNameTextLabel.TextYAlignment = Enum.TextYAlignment.Center
ScriptNameTextLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
ScriptNameTextLabel.BackgroundTransparency = 1
ScriptNameTextLabel.BorderSizePixel = 0
ScriptNameTextLabel.BorderColor3 = Color3.new(0.105882, 0.164706, 0.207843)
ScriptNameTextLabel.Size = UDim2.new(1.000000, 0, 1.000000, 0)
ScriptNameTextLabel.Position = UDim2.new(0.000000, 0, 0.000000, 0)
ScriptNameTextLabel.AnchorPoint = Vector2.new(0.000000, 0.000000)
ScriptNameTextLabel.Visible = true
ScriptNameTextLabel.Rotation = 0
ScriptNameTextLabel.ZIndex = 1
ScriptNameTextLabel.Name = "ScriptNameTextLabel"
Startup.DevoyanceV4ScreenGui.Parent = Player.PlayerGui
Startup:Destroy()

LPL = Instance.new("PointLight",ArmLeft) LPL.Enabled = true LPL.Color = Color3.fromRGB(125,0,255) LPL.Range = 6 LPL.Brightness = 2
RPL = Instance.new("PointLight",ArmRight) RPL.Enabled = true RPL.Color = Color3.fromRGB(125,0,255) RPL.Range = 6 RPL.Brightness = 2

function DevoyanceSongChange(MusicID,MusicVolume,MusicTimePosition,MusicSpeed,MusicName)
	MusicVolume = math.max(MusicVolume,3)
	Music.SoundId,Music.Volume,Music.TimePosition,Music.PlaybackSpeed = "rbxassetid://"..MusicID,MusicVolume,MusicTimePosition,MusicSpeed
	Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerPanel.Seperator.SongName.Text = MusicName
	Player.PlayerGui.DevoyanceV4ScreenGui["Main Gui"].MusicBar.MusicName.Text = MusicName
end

function ExploiterWarn(PlayerWhoFired,RemoteFired)
	local WarnUi = Player.PlayerGui.DevoyanceV4ScreenGui["Main Gui"].WarnGui
	WarnUi.Visible = true
	WarnUi.Warn:Play()
	WarnUi.RemoteDetector.Text = tostring(PlayerWhoFired.." Just tried firing the "..RemoteFired.." Event! User has been kicked.")
	for i = 0,10 do wait() WarnUi.Background.BackgroundTransparency -= .1 end
	for i = 0,10 do wait() WarnUi.Outline.ImageTransparency -= .1 end
	for i = 0,10 do wait() WarnUi.RemoteDetector.TextTransparency -= .1 end
	wait(5)
	for i = 0,10 do wait() WarnUi.RemoteDetector.TextTransparency += .1 end
	for i = 0,10 do wait() WarnUi.Background.BackgroundTransparency += .1 end
	for i = 0,10 do wait() WarnUi.Outline.ImageTransparency += .1 end
	WarnUi.RemoteDetector.Text = ""
	WarnUi.Warn.TimePosition = 0
	WarnUi.Visible = false
end

script.Resources.Remotes.VisualizerEvent.OnClientEvent:Connect(function(plr,LocalLoudness) 
	if plr ~= Player then
		ExploiterWarn(plr.Name,"PlaybackLoudness")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	Loudness = LocalLoudness
end)

script.Resources.Remotes.VisualizerInfoEvent.OnClientEvent:Connect(function(plr,ID,Volume,TimePosition,Pitch) 
	if plr ~= Player then
		ExploiterWarn(plr.Name,"VisualizerInfo")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if ID ~= nil and Mode == "Visualization" and plr == Player then
		local Msc = game:GetService("MarketplaceService"):GetProductInfo(tonumber(ID))
		DevoyanceSongChange(ID,Volume,TimePosition,Pitch,Msc.Name)
	end
end)

script.Resources.Remotes.EqualizerEvent.OnClientEvent:Connect(function(plr,Enabled,HG,MG,LG)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"EqualizerSettings")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Visualization" and plr == Player then
		Music.Equalizer.Enabled = Enabled
		Music.Equalizer.HighGain,Music.Equalizer.MidGain,Music.Equalizer.LowGain = HG,MG,LG
	end
end) 

script.Resources.Remotes.ReverbEvent.OnClientEvent:Connect(function(plr,Enabled,WL,DL,DFS,DSY,DCYTM)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"ReverbSettings")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Visualization" and plr == Player then
		Music.Reverb.Enabled = Enabled
		Music.Reverb.WetLevel,Music.Reverb.DryLevel,Music.Reverb.Diffusion,Music.Reverb.Density,Music.Reverb.DecayTime = WL,DL,DFS,DSY,DCYTM
	end
end) 

script.Resources.Remotes.ChorusEvent.OnClientEvent:Connect(function(plr,Enabled,Depth,Mix,Rate)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"ChorusSettings")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Visualization" and plr == Player then
		Music.Chorus.Enabled = Enabled
		Music.Chorus.Depth,Music.Chorus.Mix,Music.Chorus.Rate = Depth,Mix,Rate
	end
end) 

script.Resources.Remotes.EchoEvent.OnClientEvent:Connect(function(plr,Enabled,WetLevel,DryLevel,Feedback,DelayTime)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"EchoSettings")
		Music.Echo.WetLevel,Music.Echo.DryLevel,Music.Echo.Feedback,Music.Echo.Delay = WetLevel,DryLevel,Feedback,DelayTime
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Visualization" and plr == Player then
		Music.Echo.Enabled = Enabled
		Music.Echo.WetLevel,Music.Echo.DryLevel,Music.Echo.Feedback,Music.Echo.Delay = WetLevel,DryLevel,Feedback,DelayTime
	end
end)

script.Resources.Remotes.PitchShiftEvent.OnClientEvent:Connect(function(plr,Enabled,Octave)
	if plr ~= Player then
		local RemoteName = "PitchShiftSettings"
		ExploiterWarn(plr.Name,RemoteName)
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Visualization" and plr == Player then
		Music.PitchShift.Enabled = Enabled
		Music.PitchShift.Octave = Octave
	end
end) 

local RMTName = "CUSTOMIZATION"
CustomC1,CustomC2,CustomC3,CustomC4 = RGB(0,0,0),RGB(0,0,0),RGB(0,0,0),RGB(0,0,0)

script.Resources.Remotes.C1.OnClientEvent:Connect(function(plr,C1)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"CustomC1")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Customization" and plr == Player then
		CustomC1,CustomC2,CustomC3,CustomC4 = C1,CustomC2,CustomC3,CustomC4
		DevoyanceRecolorMaterial(RMTName,CustomC1,CustomC2,CustomC3,CustomC4,"Neon","Neon","Neon","Neon",CustomC1,CustomC2,RGB(100,100,130),RGB(255,255,255))
		GuiRecolor(CustomC1,CustomC2)
	end
end)

script.Resources.Remotes.C2.OnClientEvent:Connect(function(plr,C2)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"CustomC2")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Customization" and plr == Player then
		CustomC1,CustomC2,CustomC3,CustomC4 = CustomC1,C2,CustomC3,CustomC4
		DevoyanceRecolorMaterial(RMTName,CustomC1,CustomC2,CustomC3,CustomC4,"Neon","Neon","Neon","Neon",CustomC1,CustomC2,RGB(100,100,130),RGB(255,255,255))
		GuiRecolor(CustomC1,CustomC2)
	end
end)

script.Resources.Remotes.C3.OnClientEvent:Connect(function(plr,C3)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"CustomC3")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Customization" and plr == Player then
		CustomC1,CustomC2,CustomC3,CustomC4 = CustomC1,CustomC2,C3,CustomC4
		DevoyanceRecolorMaterial(RMTName,CustomC1,CustomC2,CustomC3,CustomC4,"Neon","Neon","Neon","Neon",CustomC1,CustomC2,RGB(100,100,130),RGB(255,255,255))
		GuiRecolor(CustomC1,CustomC2)
	end
end)

script.Resources.Remotes.C4.OnClientEvent:Connect(function(plr,C4)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"CustomC4")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Customization" and plr == Player then
		CustomC1,CustomC2,CustomC3,CustomC4 = CustomC1,CustomC2,CustomC3,C4
		DevoyanceRecolorMaterial(RMTName,CustomC1,CustomC2,CustomC3,CustomC4,"Neon","Neon","Neon","Neon",CustomC1,CustomC2,RGB(100,100,130),RGB(255,255,255))
		GuiRecolor(CustomC1,CustomC2)
	end
end)

script.Resources.Remotes.NameEvent.OnClientEvent:Connect(function(plr,Name)
	if plr ~= Player then
		ExploiterWarn(plr.Name,"ModeName")
		coroutine.resume(coroutine.create(function()
			while wait() do
				local plrName = plr.Name
				game.Players:WaitForChild(plrName):Kick("I Know you're firing remotes~~ - Love, "..Player.Name)
			end
		end))
	end
	if Mode == "Customization" and plr == Player then
		RMTName = Name
		DevoyanceRecolorMaterial(Name,CustomC1,CustomC2,CustomC3,CustomC4,"Neon","Neon","Neon","Neon",CustomC1,CustomC2,RGB(100,100,130),RGB(255,255,255))
		GuiRecolor(CustomC1,CustomC2)
	end
end)

if Aero == false then
	for i,v in pairs(script.Resources.Aero.EyeParts:GetDescendants()) do if v:IsA("ImageLabel") or v:IsA("Decal") then
			v.Transparency = 1
		end
	end
	local RemoveThese = {"Scarf","Shades"}
	for i,v in pairs(Character:GetDescendants()) do
		if v:IsA("MeshPart") or v:IsA("Part") or v:IsA("Decal") then
			for A,B in pairs(RemoveThese) do
				if string.find(v.Name,B) then
					v:Destroy()
				end
			end
		end
	end
	script.Resources.Aero.AeroHead.Transparency = 1
	script.Resources.Aero.AeroHead.AeroF.Transparency = 1
	script.Resources.Aero.LocksOfIce.Transparency = 1
	script.Resources.Aero.LocksOfIce2.Transparency = 1
	--print('Current Script Parent is Not Aero.')
end


local rayCast = function (Pos, Dir, Max, Ignore) 
	return game:GetService("Workspace"):FindPartOnRay(Ray.new(Pos, Dir.unit * (Max or 999.999)), Ignore) 
end

local LerpX = function (Start,End,Speed) 
	return Start:Lerp(End,Speed) 
end

local LocationChange = function()
	RemoveIdles = true
	Humanoid.WalkSpeed,Humanoid.JumpPower = 0,0
	local TeleportSound = Instance.new("Sound",Torso)
	TeleportSound.SoundId,TeleportSound.Playing,TeleportSound.PlaybackSpeed = "rbxassetid://6964732684",true,1
	TeleportSound:Play()
	HMNRoot.CFrame = Mouse.Hit
	for i = 0 , 25 do wait()
		RJNT.C0 = RJNT.C0:Lerp(CFN(0,-1.2,.3)*CFA(-30,0,0)*RCF,.2)
		H.C0=H.C0:Lerp(NeckVals*CFN(0,0,0)*CFA(20,0,0),.2)
		RA.C0=RA.C0:Lerp(CFN(1.6,-.3,.1)*CFA(39,9,11),.2)
		LA.C0=LA.C0:Lerp(CFN(-1.4,-.2,-.1)*CFA(30,-30,-15),.2)
		RH.C0=RH.C0:Lerp(CFN(1,.3,-.6)*CFA(30,0,0)*CFA(0,90,0),.2)
		LH.C0=LH.C0:Lerp(CFN(-1,-1.2,-.7)*CFA(-65,0,0)*CFA(0,-90,0),.2)
	end
	Humanoid.WalkSpeed,Humanoid.JumpPower = PreviousWS,PreviousJP
	RemoveIdles = false
	wait(1)
	TeleportSound:Destroy()
end

function GuiRecolor(Color1,Color2)
	-- Visualization Stuff --
	for i,v in pairs(Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerPanel:GetDescendants()) do
		if v:IsA("ImageLabel") then v.ImageColor3 = Color2
		elseif v:IsA("Frame") then v.BackgroundColor3 = Color1
		elseif v:IsA("TextLabel") then v.TextColor3 = Color1
		elseif v:IsA("TextBox") then v.PlaceholderColor3,v.TextColor3 = Color1,Color1
		end
	end
	for i,v in pairs(Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerButtons:GetDescendants()) do
		if v:IsA("ImageLabel") or v:IsA("ImageButton") then v.ImageColor3 = Color2
		elseif v:IsA("Frame") then v.BackgroundColor3 = Color1
		end
	end

	Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerMenus.DefiningText.TextColor3 = Color1
	Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerMenus.Seperator.BackgroundColor3 = Color2

	for i,v in pairs(Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerMenus.GuiFolder:GetDescendants()) do
		if v:IsA("ImageLabel") or v:IsA("ImageButton") then v.ImageColor3 = Color1
		elseif v:IsA("Frame") then v.BackgroundColor3 = Color2
		elseif v:IsA("TextLabel") and v.Parent ~= "VisualizerMenus" then v.TextColor3 = Color2
		elseif v:IsA("TextBox") then v.PlaceholderColor3,v.TextColor3 = Color2,Color1
		end
	end
	-- Base Gui Stuff --
	for i,v in pairs(Player.PlayerGui.DevoyanceV4ScreenGui["Main Gui"]:GetDescendants()) do
		if v:IsA("Frame") and v.Parent.Name ~= "WarnGui" then v.BackgroundColor3 = Color2
		elseif v:IsA("TextLabel") and v.Parent.Name ~= "WarnGui"  then v.TextColor3 = Color1
		end
	end
end

local CSN,CSK = ColorSequence.new,ColorSequenceKeypoint.new
function DevoyanceRecolorMaterial(ModeName,C1,C2,C3,C4,M1,M2,M3,M4,TextColor,TextStrokeColor,GradientColor,GradientColor2)
	Head.DevoyanceV4HeadGui.ModeNameStrokeLabel.Text = tostring(ModeName)
	Head.DevoyanceV4HeadGui.ModeNameStrokeLabel.ModeNameTextLabel.Text = tostring(ModeName)
	for i,v in pairs(Head.DevoyanceV4HeadGui:GetDescendants()) do if v:IsA('TextLabel') then
			v.TextColor3,v.TextStrokeColor3 = TextColor,TextStrokeColor
		end
		if v:IsA("Frame") then v.BackgroundColor3 = C1 end
	end
	for i,v in pairs(WingFolder1:GetDescendants()) do 
		if v.Name == "Color1" then v.Color = C1 v.Material = Enum.Material[M1]
		elseif v.Name == "Color2" then v.Color = C2 v.Material = Enum.Material[M2]
		end end
	for i,v in pairs(WingFolder2:GetDescendants()) do 
		if v.Name == "Color1" then v.Color = C3 v.Material = Enum.Material[M3]
		elseif v.Name == "Color2" then v.Color = C4 v.Material = Enum.Material[M4]
		end end
	Head.DevoyanceV4HeadGui.ModeNameStrokeLabel.TextGradient1.Color = CSN({CSK(0,GradientColor),CSK(.25,GradientColor2),CSK(.5,GradientColor),CSK(.75,GradientColor2),CSK(1,GradientColor)})
	Head.DevoyanceV4HeadGui.PlayerNameStrokeLabel.TextGradient.Color = CSN({CSK(0,GradientColor),CSK(1,GradientColor2)})
	Head.DevoyanceV4HeadGui.ScriptNameStrokeLabel.TextGradient2.Color = CSN({CSK(0,GradientColor),CSK(1,GradientColor2)})

	LPL.Color = C2
	RPL.Color = C2
end	

function HumanoidValues(WalkSpeed,JumpPower)
	Humanoid.WalkSpeed = WalkSpeed	
	Humanoid.JumpPower = JumpPower	
end

function ExtraWings(Bool,C1,C2,C3,C4,M1,M2,M3,M4)
	if Bool == false then
		for i,v in pairs(WingFolder3:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = 1 end end
		for i,v in pairs(WingFolder4:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = 1 end end
	elseif Bool == true then
		for i,v in pairs(WingFolder3:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = 0 end 
			if v.Name == "Main" then v.Color,v.Material = C1,Enum.Material[M1] or nil end
			if v.Name == "Secondary" then v.Color,v.Material = C2,Enum.Material[M2] or nil end
		end
		for i,v in pairs(WingFolder4:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = 0 end 
			if v.Name == "Main" then v.Color,v.Material = C3,Enum.Material[M3] or nil end
			if v.Name == "Secondary" then v.Color,v.Material = C4,Enum.Material[M4] or nil end
		end		
	end
end

local OriginalTable = {"Euphoric","Euphoric","Euphoric","Euphoric","OriginalStartingMode","Euphorius"}
Mode = OriginalTable[math.random(1,6)]
if Mode == "Euphoric" then
	FlyBool,FlyHeight = false,0
	local EuphoricMusic = {15461489450,15461477815,15461495456}
	local MusicNames1 = {" - "," - "," - "," - _"," - "," -  ( Arrange)"," - .arrange"," - .arrange"}
	local sameRand = math.random(1,3)
	local C1,C2,C3,C4 = RGB(26,0,75),RGB(78,13,144),RGB(26,0,75),RGB(78,13,144)
	DevoyanceRecolorMaterial("EUPHORIC",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
	DevoyanceSongChange(EuphoricMusic[sameRand],1,0,1,MusicNames1[sameRand]) PreviousMusicPitch = 1
	HumanoidValues(16,50)
	GuiRecolor(C1,C2)
	ExtraWings(false)

elseif Mode == "OriginalStartingMode" then
	--Head.DevoyanceV4HeadGui.Enabled = false
	FlyBool,FlyHeight = false,0
	local C1,C2,C3,C4 = RGB(45,125,255),RGB(255,195,145),RGB(45,125,255),RGB(255,195,145)
	DevoyanceRecolorMaterial(" ",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
	DevoyanceSongChange(15461489450,1,0,1,"x - i") PreviousMusicPitch = 1
	HumanoidValues(16,50)
	GuiRecolor(C1,C2)
	ExtraWings(false)

elseif Mode == "Euphorius" then
	FlyBool,FlyHeight = false,0
	local C1,C2,C3,C4 = RGB(26,0,75),RGB(78,13,144),RGB(26,0,75),RGB(78,13,144)
	DevoyanceRecolorMaterial("EUPHORIUS",C2,C1,C4,C3,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
	DevoyanceSongChange(15461513960,1,0,1," - Untitled") PreviousMusicPitch = 1
	HumanoidValues(16,50)
	GuiRecolor(C1,C2)
	ExtraWings(false)
end

local UserInputService = game:GetService("UserInputService")

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    local Key = input.KeyCode


	if Key == Enum.KeyCode.Q and Mode ~= "Euphoric" and SitBool == false then
		local OriginalTable = {"Euphoric","Euphoric","Euphoric","Euphoric","OriginalStartingMode","Euphorius"}
		Mode = OriginalTable[math.random(1,6)]
		if Mode == "Euphoric" then
			FlyBool,FlyHeight = false,0
			local EuphoricMusic = {15461489450,15461477815,15461495456}
			local MusicNames1 = {" - "," - "," - "," - _"," - "," -  ( Arrange)"," - .arrange"," - .arrange"}
			local sameRand = math.random(1,3)
			local C1,C2,C3,C4 = RGB(26,0,75),RGB(78,13,144),RGB(26,0,75),RGB(78,13,144)
			DevoyanceRecolorMaterial("EUPHORIC",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
			DevoyanceSongChange(EuphoricMusic[sameRand],1,0,1,MusicNames1[sameRand]) PreviousMusicPitch = 1
			HumanoidValues(16,50)
			GuiRecolor(C1,C2)
			ExtraWings(false)

		elseif Mode == "OriginalStartingMode" then
			FlyBool,FlyHeight = false,0
			--Head.DevoyanceV4HeadGui.Enabled = false
			local C1,C2,C3,C4 = RGB(45,125,255),RGB(255,195,145),RGB(45,125,255),RGB(255,195,145)
			DevoyanceRecolorMaterial(" ",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
			DevoyanceSongChange(15461489450,1,0,1,"x - i") PreviousMusicPitch = 1
			HumanoidValues(16,50)
			GuiRecolor(C1,C2)
			ExtraWings(false)

		elseif Mode == "Euphorius" then
			FlyBool,FlyHeight = false,0
			local C1,C2,C3,C4 = RGB(26,0,75),RGB(78,13,144),RGB(26,0,75),RGB(78,13,144)
			DevoyanceRecolorMaterial("EUPHORIUS",C2,C1,C4,C3,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
			DevoyanceSongChange(15461530544,1,0,1," - Untitled") PreviousMusicPitch = 1
			HumanoidValues(16,50)
			GuiRecolor(C1,C2)
			ExtraWings(false)
		end
	end

	if Key == Enum.KeyCode.B and Mode ~= "NIL" and Mode == "Euphoric" and SitBool == false then
		Mode = "NIL"
		FlyBool,FlyHeight = true,7
		local C1,C2,C3,C4 = RGB(0,0,0),RGB(0,0,0),RGB(0,0,0),RGB(0,0,0)
		DevoyanceRecolorMaterial("NIL",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
		DevoyanceSongChange(15461530544,3,0,1,"M1DY - 959BPM") PreviousMusicPitch = 1
		HumanoidValues(999999,500)
		GuiRecolor(C1,C2)
		ExtraWings(false)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.B and Mode ~= "NIL" and Mode == "OriginalStartingMode" and SitBool == false then
		Mode = "NIL"
		FlyBool,FlyHeight = true,7
		local C1,C2,C3,C4 = RGB(0,0,0),RGB(0,0,0),RGB(0,0,0),RGB(0,0,0)
		DevoyanceRecolorMaterial("NIL",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
		DevoyanceSongChange(15461530544,3,0,1,"M1DY - 959BPM") PreviousMusicPitch = 1
		HumanoidValues(999999,500)
		GuiRecolor(C1,C2)
		ExtraWings(false)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.E and Mode ~= "Ambiguation" and SitBool == false then
		Mode = "Ambiguation"
		FlyBool,FlyHeight = false,0
		local AmbigMusic = {14952016255,14952016255}
		local AmbigMusicNames = {"xx4 - (Jellyfish)","xx4 - (Jellyfish)","xx4 - (Jellyfish)","xx4 - (Jellyfish)","xx4 - (Jellyfish) (x0o0x_ Cover)"}
		local sameRand2 = math.random(1,2)
		local C1,C2,C3,C4 = RGB(135,155,255),RGB(145,100,255),RGB(135,155,255),RGB(145,100,255)
		DevoyanceRecolorMaterial("AMBIGUATION",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
		DevoyanceSongChange(AmbigMusic[sameRand2],1,0,1,AmbigMusicNames[sameRand2]) PreviousMusicPitch = 1
		HumanoidValues(16,50)
		GuiRecolor(C1,C2)
		ExtraWings(false)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.R and Mode ~= "Embers" and SitBool == false then
		Mode = "Embers"
		FlyBool,FlyHeight = false,0
		local C1,C2,C3,C4 = RGB(195,75,65),RGB(65,45,25),RGB(195,75,65),RGB(65,45,25)
		DevoyanceRecolorMaterial("EMBERS",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C2,C1,RGB(130,130,130),RGB(255,255,255))
		DevoyanceSongChange(15027902563,1,0,1,"Distance OST - Embers") PreviousMusicPitch = 1
		HumanoidValues(500,50)
		GuiRecolor(C1,C2)
		ExtraWings(false)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
	end

	if Key == Enum.KeyCode.M and Mode == "Euphoric" and SitBool == false  then
		local ObscurityTable = {"Obscurity","Obscurity","Obscurity","Obscurity","Randomization"}
		Mode = ObscurityTable[math.random(1,5)]
		if Mode == "Obscurity" then
			FlyBool,FlyHeight = false,0
			local C1,C2,C3,C4 = RGB(25,45,65),RGB(65, 45, 85),RGB(25,45,65),RGB(65, 45, 85)
			DevoyanceRecolorMaterial("OBSCURITY",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",RGB(25,45,65),RGB(65, 125, 145),RGB(25,45,65),RGB(145,185,255))
			ExtraWings(false)
			DevoyanceSongChange(14954906099,1,0,1,"x0o0x_ - Untitled (UTAU Defoko Version)") PreviousMusicPitch = 1
			HumanoidValues(16,100)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

		elseif Mode == "Randomization" then			
			FlyBool,FlyHeight = false,0
			local C1,C2,C3,C4 = RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255))
			DevoyanceRecolorMaterial("RANDOMIZATION",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,C3,C4)
			ExtraWings(false)
			DevoyanceSongChange(15461612709,1,56.5,1,"x - ^") PreviousMusicPitch = 1
			HumanoidValues(16,100)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

	elseif Key == Enum.KeyCode.M and Mode == "Euphorius" and SitBool == false  then
		local ObscurityTable = {"Obscurity","Obscurity","Obscurity","Obscurity","Randomization"}
		Mode = ObscurityTable[math.random(1,5)]
		if Mode == "Obscurity" then
			FlyBool,FlyHeight = false,0
			local C1,C2,C3,C4 = RGB(25,45,65),RGB(65, 45, 85),RGB(25,45,65),RGB(65, 45, 85)
			DevoyanceRecolorMaterial("OBSCURITY",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",RGB(25,45,65),RGB(65, 125, 145),RGB(25,45,65),RGB(145,185,255))
			ExtraWings(false)
			DevoyanceSongChange(14954906099,1,0,1,"x0o0x_ - Untitled (UTAU Defoko Version)") PreviousMusicPitch = 1
			HumanoidValues(16,100)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

		elseif Mode == "Randomization" then		
			FlyBool,FlyHeight = false,0
			local C1,C2,C3,C4 = RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255))
			DevoyanceRecolorMaterial("RANDOMIZATION",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,C3,C4)
			ExtraWings(false)
			DevoyanceSongChange(15461612709,1,56.5,1,"x - ^") PreviousMusicPitch = 1
			HumanoidValues(16,100)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

	elseif Key == Enum.KeyCode.M and Mode == "OriginalStartingMode" and SitBool == false  then
		local ObscurityTable = {"Obscurity","Obscurity","Obscurity","Obscurity","Randomization"}
		Mode = ObscurityTable[math.random(1,5)]
		if Mode == "Obscurity" then
			FlyBool,FlyHeight = false,0
			local C1,C2,C3,C4 = RGB(25,45,65),RGB(65, 45, 85),RGB(25,45,65),RGB(65, 45, 85)
			DevoyanceRecolorMaterial("OBSCURITY",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",RGB(25,45,65),RGB(65, 125, 145),RGB(25,45,65),RGB(145,185,255))
			ExtraWings(false)
			DevoyanceSongChange(14954906099,1,0,1,"x0o0x_ - Untitled (UTAU Defoko Version)") PreviousMusicPitch = 1
			HumanoidValues(16,100)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

		elseif Mode == "Randomization" then			
			FlyBool,FlyHeight = false,0
			local C1,C2,C3,C4 = RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255))
			DevoyanceRecolorMaterial("RANDOMIZATION",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,C3,C4)
			ExtraWings(false)
			DevoyanceSongChange(15461612709,1,56.5,1,"x - ^") PreviousMusicPitch = 1
			HumanoidValues(16,100)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

	elseif Key == Enum.KeyCode.N and Mode == "Obscurity" and SitBool == false  then
		local Irrational = {"Inexplicability","Inexplicability","Inexplicability","Irrationality","Irrationality","Irrationality"}
		Mode = Irrational[math.random(1,5)]
		if Mode == "Inexplicability" then
			FlyBool,FlyHeight = false,0
			local C1,C2,GRC1 = RGB(175,175,175),RGB(95,95,95),RGB(75,75,75)
			DevoyanceRecolorMaterial("INEXPLICABILITY",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
			ExtraWings(false)
			DevoyanceSongChange(15461706215,1,0,1.05, "??? -  (xx4)") PreviousMusicPitch = 1
			HumanoidValues(16,150)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

		if Mode == "Irrationality" then
			FlyBool,FlyHeight = false,0
			local C1,C2,GRC1,GRC2 = RGB(25,45,65),RGB(45,85,95),RGB(45,65,125),RGB(195,185,255)
			DevoyanceRecolorMaterial("IRRATIONALITY",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,GRC2)
			ExtraWings(false)
			DevoyanceSongChange(15461744434,1,0,1, "Kurage Meme - 6_y") PreviousMusicPitch = 1
			HumanoidValues(16,150)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

	elseif Key == Enum.KeyCode.N and Mode == "Randomization" and SitBool == false  then
		local Irrational = {"Inexplicability","Inexplicability","Inexplicability","Irrationality","Irrationality","Irrationality"}
		Mode = Irrational[math.random(1,5)]
		if Mode == "Inexplicability" then
			FlyBool,FlyHeight = false,0
			local C1,C2,GRC1 = RGB(175,175,175),RGB(95,95,95),RGB(75,75,75)
			DevoyanceRecolorMaterial("INEXPLICABILITY",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
			ExtraWings(false)
			DevoyanceSongChange(15461706215,1,0,1.05, "??? -  (xx4)") PreviousMusicPitch = 1
			HumanoidValues(16,150)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

		if Mode == "Irrationality" then
			FlyBool,FlyHeight = false,0
			local C1,C2,GRC1,GRC2 = RGB(25,45,65),RGB(45,85,95),RGB(45,65,125),RGB(195,185,255)
			DevoyanceRecolorMaterial("IRRATIONALITY",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,GRC2)
			ExtraWings(false)
			DevoyanceSongChange(15461744434,1,0,1, "Kurage Meme - 6_y") PreviousMusicPitch = 1
			HumanoidValues(16,150)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

	elseif Key == Enum.KeyCode.T and Mode ~= "Serenity" and SitBool == false  then
		Mode = "Serenity"
		FlyBool,FlyHeight = false,0
		local C1,C2,C3,C4,GRC1 = RGB(95,25,165),RGB(95,65,255),RGB(95,25,165),RGB(95,65,255),RGB(20,35,65) 
		DevoyanceRecolorMaterial("SERENITY",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
		ExtraWings(false)
		DevoyanceSongChange(15461760861,3.5,0,1.075, "Yume 2kki OST - The Ceiling") PreviousMusicPitch = 1.075
		HumanoidValues(16,150)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.N and Mode ~= "Convolution" and Mode == "Serenity" and SitBool == false  then
		Mode = "Convolution"
		FlyBool,FlyHeight = false,0
		local C1,C2,C3,C4,GRC1 = RGB(25,45,75),RGB(45,75,100),RGB(25,45,75),RGB(45,75,100),RGB(20,35,65) 
		DevoyanceRecolorMaterial("CONVOLUTION",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
		ExtraWings(false)
		DevoyanceSongChange(14954847942,1,0,1, "0x000002d7 () - melancholy") PreviousMusicPitch = 1
		HumanoidValues(16,150)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.M and Mode == "Serenity" and SitBool == false  then
		local DilutionTable = {"Dilution","Dilution","Dilution","Tranquility","Tranquility","Tranquility","Synergistic","Synergistic"}
		Mode = DilutionTable[math.random(1,8)]
		if Mode == "Dilution" then
			FlyBool,FlyHeight = false,0
			local C1,C2,GRC1 = RGB(165,165,175),RGB(145,125,255),RGB(125,65,255)
			DevoyanceRecolorMaterial("DILUTION",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
			ExtraWings(false)
			DevoyanceSongChange(14954844955,3.5,0,.95, "Yume 2kki OST - moseni - Lotus Waters") PreviousMusicPitch = .95
			HumanoidValues(10,50)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

		elseif Mode == "Tranquility" then
			FlyBool,FlyHeight = false,0
			local C1,C2,GRC1 = RGB(30,65,45),RGB(50,100,85),RGB(35,125,65)
			DevoyanceRecolorMaterial("TRANQUILITY",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
			ExtraWings(false)
			DevoyanceSongChange(15461814188,3.5,0,1, "LCDDEM OST - bgm006") PreviousMusicPitch = 1
			HumanoidValues(10,50)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

		elseif Mode == "Synergistic" then
			FlyBool,FlyHeight = false,0
			local C1,C2,GRC1 = RGB(20,60,50),RGB(0,115,85),RGB(35,125,65)
			DevoyanceRecolorMaterial("SYNERGISTIC",C2,C1,C2,C1,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
			ExtraWings(false)
			DevoyanceSongChange(14954908089,1,0,.45, "? ? ?") PreviousMusicPitch = .45
			HumanoidValues(10,50)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

	elseif Key == Enum.KeyCode.Y and Mode ~= "Affectionate" and SitBool == false  then
		Mode = "Affectionate"
		FlyBool,FlyHeight = false,0
		local C1,C2,GRC1 = RGB(145,125,255),RGB(165, 165, 175),RGB(125,65,255)
		DevoyanceRecolorMaterial("AFFECTIONATE",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
		ExtraWings(false)
		DevoyanceSongChange(15461828009,1,0,1, "x - HappyValentine") PreviousMusicPitch = 1
		HumanoidValues(20,150)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.M and Mode ~= "Convivial" and Mode == "Affectionate"  and SitBool == false  then
		Mode = "Convivial"
		FlyBool,FlyHeight = true,3.75
		local C1,C2,GRC1 = RGB(125,255,145),RGB(165,200,175),RGB(75,125,85)
		DevoyanceRecolorMaterial("CONVIVIAL",C2,C1,C2,C1,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
		ExtraWings(false)
		DevoyanceSongChange(15461845458,1,15,1," -   we are forever friends! [Long Version]") PreviousMusicPitch = 1
		HumanoidValues(35,150)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.B and Mode == "Affectionate" and SitBool == false  then
		local how = {"Debiliation","Debiliation","Debiliation","how","how"}
		Mode = how[math.random(1,5)]
		if Mode == "Debiliation" then
			FlyBool,FlyHeight = false,6
			local C1,C2,GRC1 = RGB(35,65,95),RGB(45,125,255),RGB(65,65,65)
			DevoyanceRecolorMaterial("DEBILIATION",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
			ExtraWings(false)
			DevoyanceSongChange(15461857949,1,0,1, "17 - ") PreviousMusicPitch = 1
			HumanoidValues(35,150)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

		if Mode == "how" then
			FlyBool,FlyHeight = false,6
			local C1,C2,GRC1 = RGB(35,95,65),RGB(45,255,125),RGB(65,65,65)
			DevoyanceRecolorMaterial("how",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C1,C2,GRC1,RGB(255,255,255))
			ExtraWings(false)
			DevoyanceSongChange(15461865549,1,0,1, " - ") PreviousMusicPitch = 1
			HumanoidValues(35,150)
			GuiRecolor(C1,C2)
			PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		end

	elseif Key == Enum.KeyCode.J and Mode ~= "Hyperium" and SitBool == false  then
		Mode = "Hyperium"
		FlyBool,FlyHeight = true,10
		local C1,C2,C3,C4 = RGB(0,125,255),RGB(15,35,45),RGB(95,0,255),RGB(15,35,45)
		DevoyanceRecolorMaterial("HYPERIUM",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C2,C1,RGB(130,130,130),RGB(255,255,255))
		ExtraWings(true,C1,C2,C3,C4)
		DevoyanceSongChange(15461886538,1,30,1,"T+Pazolite - Ultrasonic Anthem (Remastered Version)") PreviousMusicPitch = 1
		HumanoidValues(100000,500)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.K and Mode ~= "Visualization" and SitBool == false  then
		Mode = "Visualization"
		local RandomSetting = {15461903482,15461911069}
		local RandomSettingName = {" - 00B","xx4gou RETUNE // Lamprey hole"}
		local RandomSettingTime = {0,93.5}
		local RandomVolume = {1,2}
		local Randomizer = math.random(1,2)
		FlyBool,FlyHeight = false,0
		Player.PlayerGui.DevoyanceV4ScreenGui["Main Gui"].MusicBar.Visible = false
		local C1,C2,C3,C4 = RGB(0,0,0),RGB(0,0,0),RGB(0,0,0),RGB(0,0,0)
		DevoyanceRecolorMaterial("VISUALIZATION",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
		ExtraWings(false)
		DevoyanceSongChange(RandomSetting[Randomizer],RandomVolume[Randomizer],RandomSettingTime[Randomizer],1,RandomSettingName[Randomizer]) PreviousMusicPitch = 1
		--Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerPanel.IDLabel.Modifier.Text = tostring(RandomSetting[Randomizer])
		--Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerPanel.TimeLabel.Modifier.Text = tostring(RandomSettingTime[Randomizer])
		script.VisualizerData:FireClient(Player,tostring(RandomSetting[Randomizer]),tostring(RandomSettingTime[Randomizer]))
		
	elseif Key == Enum.KeyCode.U and Mode ~= "Inundated" then
		Mode = "Inundated"
		FlyBool,FlyHeight = false,0
		local C1 = Color3.fromRGB(35,65,95) local C2 = Color3.fromRGB(25,95,165) local GRC1 = Color3.fromRGB(125,65,255) local GRC2 = Color3.fromRGB(255,255,255) 
		DevoyanceRecolorMaterial("INUNDATED",C1,C2,C1,C2,"Neon","Neon","Neon","Neon",C2,C1,GRC1,GRC2)
		ExtraWings(false)
		DevoyanceSongChange(15751154351,3.5,0,1, "x0o0x_ -          ") PreviousMusicPitch = 1
		HumanoidValues(16,450)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		
	elseif Key == Enum.KeyCode.B and Mode == "Disconsolation" then
		Mode = "Shatteration"
		FlyBool,FlyHeight = false,0
		local C1 = Color3.fromRGB(65,65,65) local C2 = Color3.fromRGB(95,95,95) local GRC1 = Color3.fromRGB(75,75,75) local GRC2 = Color3.fromRGB(255,255,255)
		DevoyanceRecolorMaterial("SHATTERATION",C2,C1,C2,C1,"Neon","Neon","Neon","Neon",C1,C2,C2,GRC2)
		ExtraWings(false)
		DevoyanceSongChange(14954908089,3.5,0,1," - Piano Cover") PreviousMusicPitch = 1
		HumanoidValues(14,50)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
		
	elseif Key == Enum.KeyCode.M and Mode ~= "Customization" and Mode == "Visualization" and SitBool == false  then
		Mode = "Customization"
		FlyBool,FlyHeight = false,0
		Player.PlayerGui.DevoyanceV4ScreenGui["Main Gui"].MusicBar.Visible = false
		local C1,C2,C3,C4 = RGB(0,0,0),RGB(0,0,0),RGB(0,0,0),RGB(0,0,0)
		DevoyanceRecolorMaterial(RMTName,CustomC1,CustomC2,CustomC3,CustomC4,"Neon","Neon","Neon","Neon",CustomC1,CustomC2,RGB(100,100,130),RGB(255,255,255))
		ExtraWings(false)
		DevoyanceSongChange(2032024538,1,0,1,"Frums - theyaremanycolors") PreviousMusicPitch = 1
		HumanoidValues(16,100)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.B and Mode == "Irrationality" and SitBool == false then
		Mode = "Disconsolation"
		FlyBool,FlyHeight = false,0
		local C1,C2,C3,C4 = RGB(125,175,255),RGB(15,35,65)
		DevoyanceRecolorMaterial("DISCONSOLATION",C2,C1,C2,C1,"Glass","Neon","Glass","Neon",C2,C1,RGB(130,130,130),RGB(255,255,255))
		ExtraWings(false)
		local TableB = {14951904089,14966696979}
		local songNames = {"- ","- ","-  (x0o0x_ Cover)","-  (x0o0x_ Cover)"}
		local randIndex = math.random(1,#TableB)
		DevoyanceSongChange(TableB[randIndex],1,0,1,songNames[randIndex]) PreviousMusicPitch = 1
		HumanoidValues(16,50)
		GuiRecolor(C1,C2)
		PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower

	elseif Key == Enum.KeyCode.L and Music.Playing == true then
		Music.Playing = false

	elseif Key == Enum.KeyCode.L and Music.Playing == false then
		Music.Playing = true

	elseif Key == "equals" and Music.Parent == Player.PlayerGui then
		Music.Parent = Torso

	elseif Key == "equals" and Music.Parent == Torso then
		Music.Parent = Player.PlayerGui

	elseif Key == "quote" then
		Music.TimePosition = 0
		
	elseif Key == "minus" then
		headGuiEnabled = not headGuiEnabled

	elseif Key == "one" and EyeToggle2 == false and EyeToggle == false and Aero == true then
		EyeToggle = true
		script.Resources.Aero.EyeParts["Right Eye"].Eye.Enabled = true
		script.Resources.Aero.EyeParts["Left Eye"].Eye.Enabled = true
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.Enabled = false

	elseif Key == "one" and EyeToggle2 == false and EyeToggle == true and Aero == true then
		EyeToggle = false	
		script.Resources.Aero.EyeParts["Right Eye"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["Left Eye"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.Enabled = false

	elseif Key == "two" and EyeToggle2 == false and EyeToggle == false  and Aero == true then
		EyeToggle2 = true
		script.Resources.Aero.EyeParts["Right Eye"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["Left Eye"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.Enabled = true
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.Enabled = true

	elseif Key == "two" and EyeToggle2 == true and EyeToggle == false  and Aero == true then
		EyeToggle2 = false	
		script.Resources.Aero.EyeParts["Right Eye"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["Left Eye"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.Enabled = false
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.Enabled = false		

	elseif Key == "three" and Colorful == false and Aero == true then
		Colorful = true
		script.Resources.Aero.LocksOfIce.Transparency = 1
		script.Resources.Aero.LocksOfIce2.Transparency = 0

	elseif Key == "three" and Colorful == true and Aero == true then
		Colorful = false
		script.Resources.Aero.LocksOfIce.Transparency = 0
		script.Resources.Aero.LocksOfIce2.Transparency = 1

	elseif Key == "leftbracket" and GradientToggled == false then
		GradientToggled = true
		for i,v in pairs(script.Resources.Aero.Gradient:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = v.Name end end
		if GradientToggled == true and Mode == "Synergistic" then
			Music.Reverb.Enabled = false
			Music.Reverb.DecayTime,Music.Reverb.Density,Music.Reverb.Diffusion,Music.Reverb.DryLevel,Music.Reverb.WetLevel = 5,.5,1,0,-5
			Music.Reverb.Priority = 0
		elseif GradientToggled == true and Mode ~= "Synergistic" then
			Music.Reverb.Enabled = true
			Music.Reverb.DecayTime,Music.Reverb.Density,Music.Reverb.Diffusion,Music.Reverb.DryLevel,Music.Reverb.WetLevel = 5,.5,1,0,-5
			Music.Reverb.Priority = 0
		end
		if Aero == true then
			script.Resources.Aero.Shades.Transparency = 1
		end

	elseif Key == "rightbracket" and GradientToggled == true then
		GradientToggled = false
		for i,v in pairs(script.Resources.Aero.Gradient:GetDescendants()) do if v:IsA("MeshPart") then v.Transparency = 1 end end
		Music.PlaybackSpeed = PreviousMusicPitch
		Music.Reverb.Enabled = false
		if Aero == true then
			script.Resources.Aero.Shades.Transparency = 0
		end

	elseif Key == Enum.KeyCode.Z and Mode == "Debiliation" and SpinBool == false then
		SpinBool = true
	elseif Key == Enum.KeyCode.Z and Mode == "Debiliation" and SpinBool == true then
		SpinBool = false

	elseif Key == Enum.KeyCode.Z then
		LocationChange()

	elseif Key == Enum.KeyCode.Z and Mode == "how" and SpinBool == false then
		SpinBool = true
	elseif Key == Enum.KeyCode.Z and Mode == "how" and SpinBool == true then
		SpinBool = false

	elseif Key == Enum.KeyCode.Z and Mode == "Randomization" then			
		local C1,C2,C3,C4 = RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255))
		DevoyanceRecolorMaterial("RANDOMIZATION",C1,C2,C3,C4,"Neon","Neon","Neon","Neon",C1,C2,C3,C4)
		GuiRecolor(C1,C2)

	elseif Key == "zero" and SitBool == false then
		SitBool = true
		HumanoidValues(0,0)

	elseif Key == "zero" and SitBool == true then
		SitBool = false
		HumanoidValues(PreviousWS,PreviousJP)
	end
end)

-- Artificial HB --
local HB = Instance.new("BindableEvent",script) HB.Name = "Event" script:WaitForChild("Event") 
local OF = 0 local AFL = false local TRNDR = false local LF = tick() local Frame = 1/60 HB:Fire() game:GetService("RunService").Heartbeat:Connect(function(S,P) 
	OF = OF + S if OF >= Frame then if AFL then script.Heartbeat:Fire()	 LF = tick() else for i = 1, math.floor(OF / Frame) do HB:Fire() end LF = tick() end
		if TRNDR then OF = 0 else OF = OF - Frame * math.floor(OF / Frame) end end end)

function QuickWait(Number) if Number == 0 or Number == nil then HB.Event:wait() else for i = 0, Number do HB.Event:wait() end end end

coroutine.resume(coroutine.create(function()
	while wait() do
		ModeValue.Value = Mode
		if Character:FindFirstChild("AeroSc") then
			Character.AeroSc:Destroy()
		end
	end
end))

coroutine.resume(coroutine.create(function()
	while wait() do
		if Aero == true then
			if Mode == "Inexplicability" then
				script.Resources.Aero.AeroHead.AeroF.Texture = "rbxassetid://2813766627"	
			elseif EyeToggle2 == true then
				script.Resources.Aero.AeroHead.AeroF.Texture = "rbxassetid://6759267948"
			elseif Mode == "Disconsolation" then
				script.Resources.Aero.AeroHead.AeroF.Texture = "rbxassetid://6759267948"
			else
				script.Resources.Aero.AeroHead.AeroF.Texture = "rbxassetid://4896443994"
			end
		end
		if Mode ~= "Visualization" then
			Player.PlayerGui.DevoyanceV4ScreenGui["Main Gui"].MusicBar.Visible = true
		end
		if Mode ~= "OriginalStartingMode" and headGuiEnabled then 
			Head.DevoyanceV4HeadGui.Enabled = true
		else
			Head.DevoyanceV4HeadGui.Enabled = false
		end
		if Mode == "Synergistic" and GradientToggled == true then
			Music.PlaybackSpeed = .45
		elseif GradientToggled == true then
			Music.PlaybackSpeed = .85	
		end
	end
end))

coroutine.resume(coroutine.create(function()
	while true do QuickWait()
		if Aero == true then
			local blacklistaccessories = {"Silver","MadScientistHair","FurryWhiteCoatCollar","BlueHoodie","HQWingedGlasses","WhiteStyledBackHair","WhiteStyledHair"} -- case sensitive
			for i,v in pairs(Character:GetDescendants()) do
				if v:IsA("Accessory") then
					for A,B in pairs(blacklistaccessories) do
						if string.find(v.Name,B) then
							v:Destroy()
							Character.Head.Transparency = 1
							Character.Head.face.Transparency = 1
						end
					end
				end
			end
		end

		if Mode == "Visualization" then
			Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerPanel.Visible = true
			Player.PlayerGui.DevoyanceV4ScreenGui.Custom.Colors.Visible = false
			Player.PlayerGui.DevoyanceV4ScreenGui.Custom.ModeName.Visible = false
			local VSense = Loudness/875
			local VSense2 = Loudness/100
			if VSense >= 1 then
				VSense = 1
			end
			local C1,C2 = HSV(S/360 - math.floor(S/360),1,VSense),HSV(0,0,VSense)
			GuiRecolor(C1,C2)
			DevoyanceRecolorMaterial("VISUALIZATION",C2,C1,C2,C1,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
			LPL.Range =  5 * VSense2 LPL.Brightness =  1.5 * VSense2
			RPL.Range =  5 * VSense2 RPL.Brightness =  1.5 * VSense2
			coroutine.resume(coroutine.create(function()
				if SitBool == false then
					HumanoidValues(math.ceil(5 * Loudness/10),math.ceil(10 * Loudness/15))
					PreviousWS,PreviousJP = Humanoid.WalkSpeed,Humanoid.JumpPower
				elseif SitBool == true then
					Humanoid(0,0)
				end
			end))

		elseif Mode ~= "Visualization" then
			Player.PlayerGui.DevoyanceV4ScreenGui["Visualizer Stuff"].VisualizerPanel.Visible = false
			LPL.Range = 6 LPL.Brightness = 2
			RPL.Range = 6 RPL.Brightness = 2 
			Music.Chorus.Enabled,Music.Equalizer.Enabled,Music.Reverb.Enabled,Music.PitchShift.Enabled,Music.Echo.Enabled = false,false,false,false,false
			if GradientToggled == false then
				Music.Chorus.Enabled,Music.Equalizer.Enabled,Music.Reverb.Enabled,Music.PitchShift.Enabled,Music.Echo.Enabled = false,false,false,false,false
			elseif Mode ~= "Synergistic" then
				Music.Reverb.Enabled = true
				if Mode == "Synergistic" then
					Music.Reverb.Enabled = false
				end
			end
		end

		if Mode == "Affectionate" then
			local LDNS = Loudness/700
			if LDNS >= 1 then
				LDNS = 1
			end
			local C1,C2,GRC1 = HSV(.8,0.4,LDNS),RGB(35,20,55),RGB(0,0,0)
			DevoyanceRecolorMaterial("AFFECTIONATE",C2,C1,C2,C1,"Neon","Neon","Neon","Neon",C1,C2,RGB(130,130,130),RGB(255,255,255))
			ExtraWings(false)
			GuiRecolor(C1,C2)
		end
		if Mode == "Irrationality" then
			FX("Sphere",true,.5,10,WingFolder1.Wing1.Color2.Color,"Neon",HMNRoot.CFrame * CFN(math.random(-8,8),-2.75,math.random(-8,5)) * CFA(90,0,0),15,1,V3(0,0,0),V3(.5,.5,.5),V3(2,2,2),0,1)
		end
		if Mode == "Convivial" then
			local Position = CFN(math.random(-7,7),math.random(-3,9),math.random(-7,7))
			FX("Sphere",true,1,7,WingFolder1.Wing1.Color1.Color,"ForceField",HMNRoot.CFrame * Position * CFA(90,0,0),10,.1,V3(0,0,0),V3(1.25,1.25,1.25),V3(1.25,1.25,1.25),.7,1)
			FX("Sphere",false,1,7,WingFolder1.Wing1.Color2.Color,"Neon",HMNRoot.CFrame * Position * CFA(90,0,0),10,.1,V3(0,0,0),V3(.75,.75,.75),V3(.75,.75,.75),.7,1)
		end
		if Mode == "Customization" then
			Player.PlayerGui.DevoyanceV4ScreenGui.Custom.Colors.Visible = true
			Player.PlayerGui.DevoyanceV4ScreenGui.Custom.ModeName.Visible = true
		elseif Mode ~= "Customization" then
			Player.PlayerGui.DevoyanceV4ScreenGui.Custom.Colors.Visible = false
			Player.PlayerGui.DevoyanceV4ScreenGui.Custom.ModeName.Visible = false
		end
	end
end))


coroutine.resume(coroutine.create(function()
	while true do
		QuickWait()
		local RT = 0
		if Mode == "Hyperium" or Mode == "NIL" then
			RT = 50 + S * 3
			W1.C0 = CFN(0,0,1.5) * CFA(90,125,-8 * SN(S/30))
			W2.C0 = CFN(0,0,1.5) * CFA(90,-90,-8 * SN(S/30))
			W3.C0 = CFN(0,0,1.5) * CFA(90,50,- 8 * SN(S/30))
			W4.C0 = CFN(0,0,1.5) * CFA(90,115 + RT,0)
			W5.C0 = CFN(0,0,1.5) * CFA(90,50 + RT * 2,0)
			W6.C0 = CFN(0,0,1.5) * CFA(90,0 + RT * 2.5,0)
			W7.C0 = CFN(1,0,1.5) * CFA(90,115 + RT * 7,0)
			W8.C0 = CFN(1,0,1.85) * CFA(90,115 + RT * 9,0)
			W9.C0 = CFN(1,0,1.85) * CFA(90,115 + RT * 10,0)
			W10.C0 = CFN(-1,0,1.85) * CFA(90,115 + RT * 6,0)
			W11.C0 = CFN(-1,0,1.85) * CFA(90,115 + RT * 8,0)
			W12.C0 = CFN(-1,0,1.85) * CFA(90,115 + RT * 5,0)

		elseif FlyBool == false then
			local S1,S2,S3 = SN(S/30),SN(S/32),SN(S/34)
			W1.C0 = CFN(0,0,1.5) * CFA(90,-5 * S1,-8 * S1)
			W2.C0 = CFN(0,0,1.5) * CFA(90,30 - 5 * S2,-8 * S2)
			W3.C0 = CFN(0,0,1.5) * CFA(90,55 - 5 * S3,-8 * S3)
			W4.C0 = CFN(0,0,1.5) * CFA(90,180 + 5 * S1,-8 * S1)
			W5.C0 = CFN(0,0,1.5) * CFA(90,150 + 5 * S2,-8 * S2)
			W6.C0 = CFN(0,0,1.5) * CFA(90,125 + 5 * S3,-8 * S3)
			W1.C1 = CFN(0,0,0) * CFA(0,0,0)
			W2.C1 = CFN(0,0,0) * CFA(0,0,0)
			W3.C1 =CFN(0,0,0) * CFA(0,0,0)
			W4.C1 = CFN(0,0,0) * CFA(0,0,0)
			W5.C1 = CFN(0,0,0) * CFA(0,0,0)
			W6.C1 = CFN(0,0,0) * CFA(0,0,0)

		elseif FlyBool == true then
			W1.C0 = CFN(0,0,1.5) * CFA(90,0 - 10 * SN(S/30),0 - 20 * SN(S/30))
			W2.C0 = CFN(0,0,1.5) * CFA(90,40 - 10 * SN(S/35),0 - 20 * SN(S/30))
			W3.C0 = CFN(0,0,1.5) * CFA(90,-40 - 10 * SN(S/33),0 - 20 * SN(S/30))
			W4.C0 = CFN(0,0,1.5) * CFA(90,140 + 10 * SN(S/35),0 - 20 * SN(S/30))
			W5.C0 = CFN(0,0,1.5) * CFA(90,-140 + 10 * SN(S/33),0 - 20 * SN(S/30))
			W6.C0 = CFN(0,0,1.5) * CFA(90,180 + 10 * SN(S/30),0 - 20 * SN(S/30))

			W1.C1 = CFN(0,0,0) * CFA(0,0,0)
			W2.C1 = CFN(0,0,0) * CFA(0,0,0)
			W3.C1 =CFN(0,0,0) * CFA(0,0,0)
			W4.C1 = CFN(0,0,0) * CFA(0,0,0)
			W5.C1 = CFN(0,0,0) * CFA(0,0,0)
			W6.C1 = CFN(0,0,0) * CFA(0,0,0)
		end
	end
end))

coroutine.resume(coroutine.create(function()
	while true do
		QuickWait()
		if Aero == true then
			for i = 1, 300 do QuickWait() end
			if EyeToggle2 == true then
				script.Resources.Aero.EyeParts.LEyeHalf.Eye.Enabled = false
				script.Resources.Aero.EyeParts.REyeHalf.Eye.Enabled = false
				for i,v in pairs(script.Resources.Aero.EyeParts.Closed:GetDescendants()) do if v:IsA("Decal") then v.Transparency = 0 end end
			end
			for i = 1, 15 do QuickWait() end
			if EyeToggle2 == true then
				script.Resources.Aero.EyeParts.LEyeHalf.Eye.Enabled = true
				script.Resources.Aero.EyeParts.REyeHalf.Eye.Enabled = true
				for i,v in pairs(script.Resources.Aero.EyeParts.Closed:GetDescendants()) do if v:IsA("Decal") then v.Transparency = 1 end end
			end
		end
	end
end))

coroutine.resume(coroutine.create(function()
	while true do
		QuickWait()
		if Mode == "NIL" then
			DevoyanceRecolorMaterial(math.random(0,99999).."  NIL  "..math.random(0,99999),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),"Neon","Neon","Neon","Neon",RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)))
			GuiRecolor(RGB(math.random(0,255),math.random(0,255),math.random(0,255)),RGB(math.random(0,255),math.random(0,255),math.random(0,255)))
			ExtraWings(false)
		end
	end
end))


coroutine.resume(coroutine.create(function()
	while true do
		QuickWait()
		if Aero == true then
			for i = 1, 300 do QuickWait() end
			if EyeToggle == true then
				script.Resources.Aero.EyeParts["Right Eye"].Eye.Enabled = false
				script.Resources.Aero.EyeParts["Left Eye"].Eye.Enabled = false
				for i,v in pairs(script.Resources.Aero.EyeParts.Closed:GetDescendants()) do if v:IsA("Decal") then v.Transparency = 0 end end
			end
			for i = 1, 15 do QuickWait() end
			if EyeToggle == true then
				script.Resources.Aero.EyeParts["Right Eye"].Eye.Enabled = true
				script.Resources.Aero.EyeParts["Left Eye"].Eye.Enabled = true
				for i,v in pairs(script.Resources.Aero.EyeParts.Closed:GetDescendants()) do if v:IsA("Decal") then v.Transparency = 1 end end
			end
		end
	end
end))

while true do
	QuickWait()
	S += 1

	Humanoid.MaxHealth = math.huge
	Humanoid.Health = math.huge

	if Aero == true then
		if Player.Character:WaitForChild("Shirt").ShirtTemplate == "http://www.roblox.com/asset/?id=4769576192" or Player.Character:WaitForChild("Shirt").ShirtTemplate == "http://www.roblox.com/asset/?id=796246064" then
			script.Resources.Aero.Scarf.Transparency = 1
		elseif Player.Character:WaitForChild("Shirt").ShirtTemplate == "http://www.roblox.com/asset/?id=762466523" then
			script.Resources.Aero.Scarf.Transparency = 0
		end
	end
	
	script.BlackAndWhite.Value = (Mode == "Shatteration")

	if Colorful == true and Mode ~= "Visualization" then
		script.Resources.Aero.LocksOfIce2.Mesh.VertexColor = VectorColorToRGB(WingFolder1.Wing1.Color1.Color)
		script.Resources.Aero.EyeParts["Left Eye"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["Right Eye"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts.Closed.LEyeClosed.ClosedEyeTexL.Color3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts.Closed.REyeClosed.ClosedEyeTexR.Color3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color2.Color

	elseif Colorful == true and Mode == "Affectionate" then 
		script.Resources.Aero.LocksOfIce2.Mesh.VertexColor = VectorColorToRGB(WingFolder1.Wing1.Color1.Color)
		script.Resources.Aero.EyeParts["Left Eye"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color1.Color
		script.Resources.Aero.EyeParts["Right Eye"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color1.Color
		script.Resources.Aero.EyeParts.Closed.LEyeClosed.ClosedEyeTexL.Color3 = WingFolder1.Wing1.Color1.Color
		script.Resources.Aero.EyeParts.Closed.REyeClosed.ClosedEyeTexR.Color3 = WingFolder1.Wing1.Color1.Color
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color2.Color

	elseif Colorful == true and Mode == "Visualization" then 
		script.Resources.Aero.LocksOfIce2.Mesh.VertexColor = VectorColorToRGB(WingFolder1.Wing1.Color2.Color)
		script.Resources.Aero.EyeParts["Left Eye"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["Right Eye"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts.Closed.LEyeClosed.ClosedEyeTexL.Color3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts.Closed.REyeClosed.ClosedEyeTexR.Color3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color2.Color

	elseif EyeToggle == true or EyeToggle2 == true then
		script.Resources.Aero.LocksOfIce2.Mesh.VertexColor = VectorColorToRGB(WingFolder1.Wing1.Color1.Color)
		script.Resources.Aero.EyeParts["Left Eye"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["Right Eye"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts.Closed.LEyeClosed.ClosedEyeTexL.Color3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts.Closed.REyeClosed.ClosedEyeTexR.Color3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["REyeHalf"].Eye.EyeTexR.ImageColor3 = WingFolder1.Wing1.Color2.Color
		script.Resources.Aero.EyeParts["LEyeHalf"].Eye.EyeTexL.ImageColor3 = WingFolder1.Wing1.Color2.Color
	end

	hitfloor,posfloor=rayCast(HMNRoot.Position,(CFN(HMNRoot.Position,HMNRoot.Position - Vector3.new(0,1,0))).lookVector,4,Character)
	local Walking = Humanoid.MoveDirection.magnitude>0
	local FwdDir = (Walking and Humanoid.MoveDirection * HMNRoot.CFrame.lookVector or Vector3.new())
	local RigDir = (Walking and Humanoid.MoveDirection * HMNRoot.CFrame.rightVector or Vector3.new())
	local Vec = {
		X = RigDir.X+RigDir.Z,
		Z = FwdDir.X+FwdDir.Z
	};
	local Divide = 1
	if(Vec.Z<0)then
		Divide = math.clamp(-(1.25*Vec.Z),1,2)
	end
	Vec.Z = Vec.Z/Divide
	Vec.X = Vec.X/Divide

	local VX,VZ = Vec.X,Vec.Z
	if FlyBool == true then
		CurrentState = (not hitfloor and HMNRoot.Velocity.Y <- 1 and 'Falling' or not hitfloor and HMNRoot.Velocity.Y > 1 and 'Jumping' or Humanoid.Sit and "Sit" or Walking and Humanoid.WalkSpeed < 36 and "Walking" or Walking and Humanoid.WalkSpeed >= 36 and "Running" or "Idle")
	elseif FlyBool == false then
		CurrentState = (not hitfloor and HMNRoot.Velocity.Y <- 1 and 'Falling' or not hitfloor and HMNRoot.Velocity.Y > 1 and 'Jumping' or Humanoid.Sit and "Sit" or Walking and Humanoid.WalkSpeed < 22 and "Walking" or Walking and Humanoid.WalkSpeed >= 22 and "Running" or "Idle")
	end
	ValueFolder.PlayerMoveStatus.Value = CurrentState

	if RemoveIdles then

	elseif not RemoveIdles then
		if CurrentState == "Jumping" then
			RA.C0 = LerpX(RA.C0,CFN(1.5,.5,.4) * CFA(-25,-20,20),.1) 
			LA.C0 = LerpX(LA.C0,CFN(-1.5,.5,.4) * CFA(-25,20,-20),.1) 
			RH.C0 = LerpX(RH.C0,CFN(1,-.4,-.5) * CFA(0,90,-15),.1) 
			LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,15),.1) 
			RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(-1 * VX,-1 * VZ,0) * CFA(15 * VZ,10 * VX,30 * VX),.1)
			H.C0 = LerpX(H.C0,NeckVals * CFA(-35 * VZ,-10 * VX,-30 * VX),.1)

		elseif CurrentState == "Falling" then
			local CS1 = CS(S/24)
			RA.C0 = LerpX(RA.C0,CFN(1,.9,0) * CFA(0,-10,145 - 10 * CS1),.1) 
			LA.C0 = LerpX(LA.C0,CFN(-1,.9,0) * CFA(0,10,-145 + 10 * CS1),.1) 
			RH.C0 = LerpX(RH.C0,CFN(1,-.4,-.5) * CFA(0,90,-15),.1) 
			LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,15),.1) 
			RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(-1 * VX,-1 * VZ,0) * CFA(0,10 * VX,30 * VX),.1)
			H.C0 = LerpX(H.C0,NeckVals * CFA(20 * VX,-10 * VX,-30 * VX),.1)

		elseif CurrentState == "Idle" then 
			local sine = S
			local angles = CF.Angles
			local cf = CFN
			local RootJoint = RJNT
			local clerp = LerpX
			local RootCF = RCF
			local RW,LW = RA,LA
			local necko = NeckVals	
			
			if Mode == "Euphoric" and SitBool == false  then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1,.5 + .1 * S4,.5) * CFA(0,0,-35),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1,.5 + .1 * S4,.5) * CFA(0,0,35),.1) 
				RH.C0 = LerpX(RH.C0,CFN(.85,-1 + .1 * S1,.3) * CFA(0,55 + 5.75 * S2,-2.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-90 + 5.75 * S2,2.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-2 * S1,0,35 - 5 * S2),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(10 - 2 * S1,3 * CS3,-35 + 5 * S2),.1)

			elseif Mode == "Euphorius" and SitBool == false then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.1,.3 + .1 * S4,.5) * CFA(0,0,-40 - 2 * CS2),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.1,.3 + .1 * S4,.5) * CFA(0,0,40 + 2 * CS2),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1 + .1 * S1,0) * CFA(0,75,-3.75 * S1) * CFA(-6,0,0),.1)
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-90,3.75 * S1),.1)
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,0,15),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(5 + 3 * S1,0,-15),.1)

			elseif Mode == "OriginalStartingMode" and SitBool == false then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.3 + .1 * S4,.25) * CFA(15,0,-10 - 2 * CS2),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S4,0) * CFA(0,0,0),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1 + .1 * S1,0) * CFA(0,75,-3.75 * S1) * CFA(-6,0,0),.1)
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-90,3.75 * S1),.1)
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,0,15),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(5 + 3 * S1,0,-15),.1)

			elseif Mode == "Obscurity" and SitBool == false  then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.3 - .1 * S4,0) * CFA(3 * CS3,0,10 - 2 * CS2),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.3,.5 - .1 * S4,0) * CFA(175 + 3 * CS3,0,20 + 2 * CS2),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1 - .1 * S1,0) * CFA(0,90 - 3.75 * S1,-3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1.1,-1 - .1 * S1,-.1) * CFA(0,-70,25 + 3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,.1 * S1) * CFA(-3 * S1,0,0-25),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(10 - 4 * CS1,15,25),.1)

			elseif Mode == "NIL" and SitBool == false  then
				local S1,S2,S3,S4,S5 = SN(S/34),SN(S/32),SN(S/30),SN(S/28),SN(S/17)
				local CS1,CS2,CS3,CS4,CS5 = CS(S/34),CS(S/32),CS(S/30),CS(S/28),CS(S/17)
				RA.C0 = LerpX(RA.C0,CFN(1.1,.3 + .1 * S4,.5) * CFA(0,0,-40 - 2 * CS2),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.1,.3 + .1 * S4,.5) * CFA(0,0,40 + 2 * CS2),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.5,-.5) * CFA(0,90,-25 + 5 * S2),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,15 - 5 * S2),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,3 * S2,FlyHeight + 2 * CS5) * CFA(-15 * CS1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(15 * CS1,0,0),.1)

			elseif Mode == "Randomization" and SitBool == false then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.2,.25 - .1 * S1,-.7) * CFA(180,-5,-65 - 2 * CS3),.1)
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.25 - .1 * S1,.6) * CFA(35,0,35),.1)
				RH.C0 = LerpX(RH.C0,CFN(1,-1 + .1 * S1,0) * CFA(0,75,-3.75 * S1) * CFA(-6,0,0),.1)
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-90,3.75 * S1),.1)
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,0,15),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(5 + 3 * S1,0,-15),.1)

			elseif Mode == "Inexplicability" and SitBool == false  then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.4,.3 + .1 * S4,.35) * CFA(0,0,-30 - 2 * CS2),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S4,0) * CFA(-10 * CS3,0,-15 + 2 * CS2),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1.2 + .1 * S1,0) * CFA(0,80,0) * CFA(8.5 - .5 * S1,0,-3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-70,0) * CFA(-8.5 - .5 * S1,0,3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,8,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(5 - 3 * CS4,-4,0),.1)

			elseif Mode == "Irrationality" and SitBool == false  then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.1,.3 + .1 * S4,.5) * CFA(0,0,-40 - 2 * CS2),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1,.3 + .1 * S4,.75) * CFA(-90,10,90 - 2 * CS2),.1) 
				RH.C0 = LerpX(RH.C0,CFN(.9,-1 + .1  * S1,.3) * CFA(0,60,-3.75 * S1) * CFA(0,0,0),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1  * S1,0) * CFA(0,-90,25 + 3.75 * S1) * CFA(2.5,0,0),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,0,30),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(10 - 2.5 * CS1,5 - 2 * CS2,-30),.1)

			elseif Mode == "Serenity" and SitBool == false then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.35 - .1 * S4,0.25) * CFA(15,0,-5),.1)
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.35 - .1 * S4,0.25) * CFA(15,0,5),.1)
				RH.C0 = LerpX(RH.C0,CFN(1,-1 + .1 * S1,0) * CFA(0,75,-3.75 * S1) * CFA(-6,0,0),.1)
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-90,3.75 * S1),.1)
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,0,15),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(2 + 3 * CS1,0,-15),.1)

			elseif Mode == "Dilution" and SitBool == false  then
				local S1,S2,S3,S4 = SN(S/44),SN(S/42),SN(S/40),SN(S/38)
				local CS1,CS2,CS3,CS4 = CS(S/44),CS(S/42),CS(S/40),CS(S/38)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,-45,15),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,45,-15),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.8 + .1 * S1,-.6) * CFA(0,90,90 - 3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,.1 + .1 * S1,-.5) * CFA(0,-90,-60 + 3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-1.9 - .1 * S1) * CFA(-3 * S1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(6 - 3 * CS1,0,0),.1)

			elseif Mode == "Tranquility" and SitBool == false  then
				local S1,S2,S3,S4 = SN(S/44),SN(S/42),SN(S/40),SN(S/38)
				local CS1,CS2,CS3,CS4 = CS(S/44),CS(S/42),CS(S/40),CS(S/38)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,-45,15),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,45,-15),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.8 + .1 * S1,-.6) * CFA(0,90,90 - 3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,.1 + .1 * S1,-.5) * CFA(0,-90,-60 + 3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-1.9 - .1 * S1) * CFA(-3 * S1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(6 - 3 * CS1,0,0),.1)

			elseif Mode == "Synergistic" and SitBool == false  then
				local S1,S2,S3,S4 = SN(S/44),SN(S/42),SN(S/40),SN(S/38)
				local CS1,CS2,CS3,CS4 = CS(S/44),CS(S/42),CS(S/40),CS(S/38)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,-45,15),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,45,-15),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.8 + .1 * S1,-.6) * CFA(0,90,90 - 3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,.1 + .1 * S1,-.5) * CFA(0,-90,-60 + 3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-1.9 - .1 * S1) * CFA(-3 * S1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(6 - 3 * CS1,0,0),.1)

			elseif Mode == "Hyperium" and SitBool == false  then
				local S1,S2,S3,S4,S5 = SN(S/34),SN(S/32),SN(S/30),SN(S/28),SN(S/17)
				local CS1,CS2,CS3,CS4,CS5 = CS(S/34),CS(S/32),CS(S/30),CS(S/28),CS(S/17)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5,0) * CFA(15 * S5,0,35 - 10 * S1),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5,0) * CFA(15 * S5,0,-35 + 10 * S1),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.5,-.5) * CFA(0,90,-25 + 5 * S2),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,15 - 5 * S2),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,3 * S2,FlyHeight + 2 * CS5) * CFA(-15 * CS1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(15 * CS1,0,0),.1)

			elseif Mode == "Convivial" and SitBool == false then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * CS4,0) * CFA(0,0,15 - 10 * S1),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * CS4,0) * CFA(0,0,-15 + 10 * S1),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.5 + .1 * CS1,-.75) * CFA(-5,90,-20 - 3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * CS1,0) * CFA(0,-90,10 + 3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(.2 * CS1,0,FlyHeight + .5 * S1) * CFA(-3 * S1,3 * S1,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(8 - 3 * CS1,-3 * S1,0),.1)

			elseif Mode == "Debiliation" and SpinBool == true and SitBool == false  then
				RA.C0 = LerpX(RA.C0,CFN(1.5,1,0) * CFA(0,0,80),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,1,0) * CFA(0,0,-80),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0) * CFA(0,90,0),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,0),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0 - 50 * SN(S/25),-50 * CS(S/25),6 - 1 * SN(S/34)) * CFA(0,180,10 + S * -10),.1)
				H.C0 = LerpX(H.C0,NeckVals  * CFA(0,0,0),.1)

			elseif Mode == "Debiliation" and SpinBool == false and SitBool == false  then
				RA.C0 = LerpX(RA.C0,CFN(1.5,1,0) * CFA(0,0,80),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,1,0) * CFA(0,0,-80),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0) * CFA(0,90,0),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,0),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,FlyHeight - 1 * SN(S/34)) * CFA(0,180,10 + S * -10),.1)
				H.C0 = LerpX(H.C0,NeckVals  * CFA(0,0,0),.1)

			elseif Mode == "how" and SpinBool == false and SitBool == false  then
				RA.C0 = LerpX(RA.C0,CFN(1.5,1,0) * CFA(0,0,80),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,1,0) * CFA(0,0,-80),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0) * CFA(0,90,0),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,0),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,FlyHeight - 1 * SN(S/34)) * CFA(0,10 + S * -10,0),.1)
				H.C0 = LerpX(H.C0,NeckVals  * CFA(0,0,0),.1)

			elseif Mode == "how" and SpinBool == true and SitBool == false  then
				RA.C0 = LerpX(RA.C0,CFN(1.5,1,0) * CFA(0,0,80),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,1,0) * CFA(0,0,-80),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0) * CFA(0,90,0),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,0),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(-50 * SN(S/25),0,FlyHeight - 1 * SN(S/34)) * CFA(0,10 + S * -10,0),.1)
				H.C0 = LerpX(H.C0,NeckVals  * CFA(0,0,0),.1)
				
			elseif Mode == "Inundated" and SitBool == false  then
				RH.C0=clerp(RH.C0,cf(1,-1 - 0.1 * math.cos(sine / 34),0)*angles(math.rad(0),math.rad(90),math.rad(0))*angles(math.rad(0),math.rad(0),math.rad(0 - 2 * math.cos(sine/34))),.1)
				LH.C0=clerp(LH.C0,cf(-1,-1 - 0.1 * math.cos(sine / 34),0)*angles(math.rad(0),math.rad(-90),math.rad(0))*angles(math.rad(0),math.rad(0),math.rad(25 + 2 * math.cos(sine/34))),.1)
				RootJoint.C0=clerp(RootJoint.C0,RootCF*cf(0,0,0 + .1* math.cos(sine / 34))*angles(math.rad(0 - 2 * math.cos(sine / 34)),math.rad(0),math.rad(15)),.1)
				Torso.Neck.C0=clerp(Torso.Neck.C0,necko*angles(math.rad(10 - 5 * math.cos(sine / 29)),math.rad(0),math.rad(-15)),.1)
				RW.C0=clerp(RW.C0,cf(1.1,0.5 - 0.1 * math.cos(sine / 28),.5)*angles(math.rad(0 + 3 * math.cos(sine/30)),math.rad(0),math.rad(-40 - 2 * math.cos(sine/32))),.1)
				LW.C0=clerp(LW.C0,cf(-1.1,0.5 - 0.1 * math.cos(sine / 28),.5)*angles(math.rad(0 + 3 * math.cos(sine/30)),math.rad(0),math.rad(40 + 2 * math.cos(sine/32))),.1)
				
			elseif Mode == "Ambiguation" and SitBool == false  then
				RH.C0=clerp(RH.C0,cf(1,-1 - 0.1 * math.cos(sine / 34),0)*angles(math.rad(0),math.rad(90),math.rad(0))*angles(math.rad(-5 + 1.15 * math.cos(sine/34)),math.rad(0),math.rad(0 - 3.75 * math.cos(sine/34))),.1)
				LH.C0=clerp(LH.C0,cf(-1,-1 - 0.1 * math.cos(sine / 34),0)*angles(math.rad(0),math.rad(-90),math.rad(0))*angles(math.rad(-5 - 1.15 * math.cos(sine/34)),math.rad(0),math.rad(0 + 3.75 * math.cos(sine/34))),.1)
				RootJoint.C0=clerp(RootJoint.C0,RootCF*cf(0,0,0 + .1* math.cos(sine / 34))*angles(math.rad(0 - 3 * math.cos(sine / 34)),math.rad(0),math.rad(25)),.1)
				Torso.Neck.C0=clerp(Torso.Neck.C0,necko*angles(math.rad(10 - 5 * math.cos(sine / 29)),math.rad(0),math.rad(-25)),.1)
				RW.C0=clerp(RW.C0,cf(1.1,0.5 - 0.1 * math.cos(sine / 28),-.4)*angles(math.rad(65 - 3 * math.cos(sine/30)),math.rad(0),math.rad(-45 - 2 * math.cos(sine/32))),.1)
				LW.C0=clerp(LW.C0,cf(-1,0.5 - 0.1 * math.cos(sine / 28),-.3)*angles(math.rad(95 - 3 * math.cos(sine/30)),math.rad(-5),math.rad(65 + 2 * math.cos(sine/32))),.1)	
				
			elseif Mode == "Visualization" and SitBool == false then
				local S1 = math.sin(S/34)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 - .035 * Loudness/72,0) * CFA(35 * Loudness / 200,0,15),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.25,.5 - .035 * Loudness/72,.5) * CFA(0,0,25),.1) 
				RH.C0 = LerpX(RH.C0,CFN(.9,-1 + .035 * Loudness/75,.25) * CFA(0,65,-3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .035 * Loudness/75,0) * CFA(0,-90,3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.035 * Loudness / 75) * CFA(0 - 3 * S1,0,25),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(25 * Loudness/700,0,-25),.1)

			elseif Mode == "Customization" and SitBool == false then
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.1,.3 + .1 * S4,.5) * CFA(0,0,-40 - 2 * CS2),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.1,.3 + .1 * S4,.5) * CFA(0,0,40 + 2 * CS2),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1 + .1 * S1,0) * CFA(0,75,-3.75 * S1) * CFA(-6,0,0),.1)
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-90,3.75 * S1),.1)
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,0,15),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(5 + 3 * S1,0,-15),.1)

			elseif SitBool == true then
				local S1,S2,S3,S4 = SN(S/44),SN(S/42),SN(S/40),SN(S/38)
				local CS1,CS2,CS3,CS4 = CS(S/44),CS(S/42),CS(S/40),CS(S/38)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,-45,15),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,45,-15),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.8 + .1 * S1,-.6) * CFA(0,90,90 - 3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,.1 + .1 * S1,-.5) * CFA(0,-90,-60 + 3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-1.9 - .1 * S1) * CFA(-3 * S1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(6 - 3 * CS1,0,0),.1)

			else
				local S1,S2,S3,S4 = SN(S/34),SN(S/32),SN(S/30),SN(S/28)
				local CS1,CS2,CS3,CS4 = CS(S/34),CS(S/32),CS(S/30),CS(S/28)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * S4,0) * CFA(0,0,0),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S4,0) * CFA(0,0,0),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1 + .1 * S1,0) * CFA(0,90,-3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1 + .1 * S1,0) * CFA(0,-90,3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-.1 * S1) * CFA(-3 * S1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(-3 * CS1,0,0),.1)
			end

		elseif CurrentState == "Walking" then 
			if SitBool == true then
				local S1,S2,S3,S4 = SN(S/44),SN(S/42),SN(S/40),SN(S/38)
				local CS1,CS2,CS3,CS4 = CS(S/44),CS(S/42),CS(S/40),CS(S/38)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,-45,15),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S1,.25) * CFA(-3.75 * S1,45,-15),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.8 + .1 * S1,-.6) * CFA(0,90,90 - 3.75 * S1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,.1 + .1 * S1,-.5) * CFA(0,-90,-60 + 3.75 * S1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-1.9 - .1 * S1) * CFA(-3 * S1,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(6 - 3 * CS1,0,0),.1)

			elseif FlyBool == false then
				local S1,S2,S3 = SN(S/10),SN(S/5),SN(S/8)
				local CS1,CS2 = CS(S/10),CS(S/5)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5,0) * CFA(40 * CS1 * VZ,0,2.5),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5,0) * CFA(-40 * CS1 * VZ,0,-2.5),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0) * CFA(0,90 - 10 * S1 * VZ,-45 * S1 * VZ) * CFA(-10 * CS1 * VX,0,20 * S1 * VX),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90 - 10 * S1 * VZ,-45 * S1 * VZ) * CFA(-10 * CS1 * VX,0,20 * S1 * VX),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(-.25 * VX,-.25 * VZ,.175 * CS2) * CFA(5 * VZ,0,10 * S1 * VZ) * CFA(0,0,20 * VX),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(5 - 3 * S2 * VZ,0,-10 * S1 * VZ) * CFA(0,0,-20 * VX),.1)

			elseif FlyBool == true then
				local S1,S2,S3 = SN(S/34),SN(S/17),SN(S/32)
				local CS1,CS2 = CS(S/34),CS(S/17)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5,.2 * VX) * CFA(0,-25 * VX,25),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5,.2 * VX) * CFA(0,25 * VX,-25),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0) * CFA(-5,90,0),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-.5,-.75) * CFA(-5,-90,20),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(-1 * VX,-1 * VZ,FlyHeight - .75 * S2) * CFA(15 * VZ ,-5 * VX,30 * VX),.1)
				H.C0 = LerpX(H.C0,NeckVals  * CFA(-5 + 5 * CS2 * VZ,5 * VX,-30 * VX),.1)
			end

		elseif CurrentState == "Running" then
			if Mode == "Debiliation" or Mode == "how" then
				RA.C0 = LerpX(RA.C0,CFN(1.5,1,0) * CFA(0,0,80),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,1,0) * CFA(0,0,-80),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0) * CFA(0,90,0),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,0),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,0) * CFA(10 + S * 5 ,0,0),.1)
				H.C0 = LerpX(H.C0,NeckVals  * CFA(0,0,0),.1)

			elseif FlyBool == false then	
				local CS1,CS2,CS3,CS4 = CS(S/7.5),CS(S/7),CS(S/6),CS(S/3.5)
				local S1 = SN(S/3.5)
				RA.C0 = LerpX(RA.C0,CFN(1.4,.5,0 + .5 * CS1 * VZ) * CFA(165 * CS3 * VZ,0,0),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.4,.5,0 - .5 * CS1 * VZ) * CFA(-165 * CS3 * VZ,0,0),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-1,0 + .5 * CS4 * VZ) * CFA(0,90,145 * CS3 * VZ) * CFA(20 * CS2 * VX,-10 * CS3 * VX,30 * CS1 * VX),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0 + .5 * CS4 * VZ) * CFA(0,-90,145 * CS3 * VZ) * CFA(20 * CS2 * VX,-10 * CS3 * VX,30 * CS1 * VX),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(-1 * VX,-1 * VZ,.25 * CS4) * CFA(28 * VZ - 1 * CS2,1 * CS3 * VZ,5 * CS3 * VZ) * CFA(0,0,10 * VX),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(5 + 5 * VZ * S1,0,-3 * CS3 * VZ)* CFA(0,0,20 * VX),.1)

			elseif FlyBool == true then
				local CS1,CS2 = CS(S/34),CS(S/17)
				local S1,S2 = SN(S/34),SN(S/17)
				RA.C0 = LerpX(RA.C0,CFN(1.5,.5,0) * CFA(0,-35 * VZ,25) * CFA(0,-35 * VZ,0),.1) 
				LA.C0 = LerpX(LA.C0,CFN(-1.5,.5,0) * CFA(0,35 * VZ,-25) * CFA(0,35 * VZ,0),.1) 
				RH.C0 = LerpX(RH.C0,CFN(1,-.4,-1) * CFA(0,90,-35 + 5 * CS1),.1) 
				LH.C0 = LerpX(LH.C0,CFN(-1,-1,0) * CFA(0,-90,25 - 5 * CS1),.1) 
				RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,FlyHeight + 1.5 * S2) * CFA(65 * VZ,0,-35 * VX),.1)
				H.C0 = LerpX(H.C0,NeckVals * CFA(-50 * VZ,0,-40 * VX),.1)
			end
		elseif CurrentState == "Sit" then
			local S1,S2,S3,S4 = SN(S/44),SN(S/42),SN(S/40),SN(S/38)
			local CS1,CS2,CS3,CS4 = CS(S/44),CS(S/42),CS(S/40),CS(S/38)
			RA.C0 = LerpX(RA.C0,CFN(1.5,.5 + .1 * S1,.25) * CFA(30 - 3.75 * S1,-5,5),.1) 
			LA.C0 = LerpX(LA.C0,CFN(-1.5,.5 + .1 * S1,.25) * CFA(30 - 3.75 * S1,5,-5),.1) 
			RH.C0 = LerpX(RH.C0,CFN(1,-.8 + .1 * S1,-.6) * CFA(0,90,90 - 3.75 * S1),.1) 
			LH.C0 = LerpX(LH.C0,CFN(-1,-.8 + .1 * S1,-.6) * CFA(0,-90,-90 + 3.75 * S1),.1) 
			RJNT.C0 = LerpX(RJNT.C0,RCF * CFN(0,0,-0.3 - .1 * S1) * CFA(-3 * S1,0,0),.1)
			H.C0 = LerpX(H.C0,NeckVals * CFA(6 - 3 * CS1,0,0),.1)
		end
	end
end
end)

local grandh = createScriptButton("grand", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "grand"
-- Script By 00de0l

Grandosla = Instance.new("Model")
Grandosla.Name = "Grandosla"
Grandosla.Parent = workspace

Part64 = Instance.new("Part")
Part64.Name = "Part64"
Part64.Parent = Grandosla
Part64.Anchored = true
Part64.CanCollide = true
Part64.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part64.CFrame = CFrame.new(160.49996948242188, 143.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part64.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part64.Material = Enum.Material.Marble
Part64.BrickColor = BrickColor.new("Medium stone grey")
Part64.Transparency = 0
Part64.Reflectance = 0
Part64.Locked = false
Part64.Shape = Enum.PartType.Block

Part5 = Instance.new("Part")
Part5.Name = "Part5"
Part5.Parent = Grandosla
Part5.Anchored = true
Part5.CanCollide = true
Part5.Size = Vector3.new(64.000000, 1.000000, 1.000000)
Part5.CFrame = CFrame.new(166.5, 224.49998474121094, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part5.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part5.Material = Enum.Material.Marble
Part5.BrickColor = BrickColor.new("Medium stone grey")
Part5.Transparency = 0
Part5.Reflectance = 0
Part5.Locked = false
Part5.Shape = Enum.PartType.Block

Part80 = Instance.new("Part")
Part80.Name = "Part80"
Part80.Parent = Grandosla
Part80.Anchored = true
Part80.CanCollide = true
Part80.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part80.CFrame = CFrame.new(160.49996948242188, 183.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part80.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part80.Material = Enum.Material.Marble
Part80.BrickColor = BrickColor.new("Medium stone grey")
Part80.Transparency = 0
Part80.Reflectance = 0
Part80.Locked = false
Part80.Shape = Enum.PartType.Block

Part101 = Instance.new("Part")
Part101.Name = "Part101"
Part101.Parent = Grandosla
Part101.Anchored = true
Part101.CanCollide = true
Part101.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part101.CFrame = CFrame.new(160.49996948242188, 201.5004425048828, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part101.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part101.Material = Enum.Material.Marble
Part101.BrickColor = BrickColor.new("Medium stone grey")
Part101.Transparency = 0
Part101.Reflectance = 0
Part101.Locked = false
Part101.Shape = Enum.PartType.Block

Part68 = Instance.new("Part")
Part68.Name = "Part68"
Part68.Parent = Grandosla
Part68.Anchored = true
Part68.CanCollide = true
Part68.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part68.CFrame = CFrame.new(160.5, 129.500244140625, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part68.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part68.Material = Enum.Material.Marble
Part68.BrickColor = BrickColor.new("Medium stone grey")
Part68.Transparency = 0
Part68.Reflectance = 0
Part68.Locked = false
Part68.Shape = Enum.PartType.Block

Part54 = Instance.new("Part")
Part54.Name = "Part54"
Part54.Parent = Grandosla
Part54.Anchored = true
Part54.CanCollide = true
Part54.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part54.CFrame = CFrame.new(109.49996948242188, 109.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part54.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part54.Material = Enum.Material.Marble
Part54.BrickColor = BrickColor.new("Medium stone grey")
Part54.Transparency = 0
Part54.Reflectance = 0
Part54.Locked = false
Part54.Shape = Enum.PartType.Block

Part25 = Instance.new("Part")
Part25.Name = "Part25"
Part25.Parent = Grandosla
Part25.Anchored = true
Part25.CanCollide = true
Part25.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part25.CFrame = CFrame.new(109.49996948242188, 81.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part25.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part25.Material = Enum.Material.Marble
Part25.BrickColor = BrickColor.new("Medium stone grey")
Part25.Transparency = 0
Part25.Reflectance = 0
Part25.Locked = false
Part25.Shape = Enum.PartType.Block

Part71 = Instance.new("Part")
Part71.Name = "Part71"
Part71.Parent = Grandosla
Part71.Anchored = true
Part71.CanCollide = true
Part71.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part71.CFrame = CFrame.new(160.49996948242188, 149.50033569335938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part71.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part71.Material = Enum.Material.Marble
Part71.BrickColor = BrickColor.new("Medium stone grey")
Part71.Transparency = 0
Part71.Reflectance = 0
Part71.Locked = false
Part71.Shape = Enum.PartType.Block

Part24 = Instance.new("Part")
Part24.Name = "Part24"
Part24.Parent = Grandosla
Part24.Anchored = true
Part24.CanCollide = true
Part24.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part24.CFrame = CFrame.new(109.49996948242188, 77.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part24.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part24.Material = Enum.Material.Marble
Part24.BrickColor = BrickColor.new("Medium stone grey")
Part24.Transparency = 0
Part24.Reflectance = 0
Part24.Locked = false
Part24.Shape = Enum.PartType.Block

Wedge = Instance.new("WedgePart")
Wedge.Name = "Wedge"
Wedge.Parent = Grandosla
Wedge.Anchored = true
Wedge.CanCollide = true
Wedge.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge.CFrame = CFrame.new(95, 44, -42.000003814697266, -1.1920928955078125e-07, 0, 1.0000001192092896, 0, 1, 0, -1.0000001192092896, 0, -1.1920928955078125e-07)
Wedge.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge.Material = Enum.Material.Marble
Wedge.BrickColor = BrickColor.new("Medium stone grey")
Wedge.Transparency = 0
Wedge.Reflectance = 0
Wedge.Locked = false

Part9 = Instance.new("Part")
Part9.Name = "Part9"
Part9.Parent = Grandosla
Part9.Anchored = true
Part9.CanCollide = true
Part9.Size = Vector3.new(0.200000, 5.000000, 5.000000)
Part9.CFrame = CFrame.new(111.5, 68.5, -74.0999984741211, 0, 0, -1, 0, 1, 0, 1, 0, 0)
Part9.Color = Color3.new(0.972549, 0.972549, 0.972549)
Part9.Material = Enum.Material.Neon
Part9.BrickColor = BrickColor.new("Institutional white")
Part9.Transparency = 0
Part9.Reflectance = 0
Part9.Locked = false
Part9.Shape = Enum.PartType.Block
Decal = Instance.new("Decal")
Decal.Name = "Decal"
Decal.Parent = Part9
Decal.Texture = "http://www.roblox.com/asset/?id=2507942"
Decal.Face = Enum.NormalId.Left
Decal.Transparency = 0
Decal.Color3 = Color3.new(1.000000, 1.000000, 1.000000)

Part20 = Instance.new("Part")
Part20.Name = "Part20"
Part20.Parent = Grandosla
Part20.Anchored = true
Part20.CanCollide = true
Part20.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part20.CFrame = CFrame.new(109.49996948242188, 75.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part20.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part20.Material = Enum.Material.Marble
Part20.BrickColor = BrickColor.new("Medium stone grey")
Part20.Transparency = 0
Part20.Reflectance = 0
Part20.Locked = false
Part20.Shape = Enum.PartType.Block

Rings = Instance.new("Model")
Rings.Name = "Rings"
Rings.Parent = Grandosla
Part6 = Instance.new("Part")
Part6.Name = "Part6"
Part6.Parent = Rings
Part6.Anchored = true
Part6.CanCollide = true
Part6.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part6.CFrame = CFrame.new(135, 201.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part6.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part6.Material = Enum.Material.Plastic
Part6.BrickColor = BrickColor.new("Really red")
Part6.Transparency = 0
Part6.Reflectance = 0
Part6.Locked = false
Part6.Shape = Enum.PartType.Cylinder
Part10 = Instance.new("Part")
Part10.Name = "Part10"
Part10.Parent = Rings
Part10.Anchored = true
Part10.CanCollide = true
Part10.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part10.CFrame = CFrame.new(135, 130.00001525878906, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part10.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part10.Material = Enum.Material.Plastic
Part10.BrickColor = BrickColor.new("Really red")
Part10.Transparency = 0
Part10.Reflectance = 0
Part10.Locked = false
Part10.Shape = Enum.PartType.Cylinder
Part2 = Instance.new("Part")
Part2.Name = "Part2"
Part2.Parent = Rings
Part2.Anchored = true
Part2.CanCollide = true
Part2.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part2.CFrame = CFrame.new(135, 166, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part2.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part2.Material = Enum.Material.Plastic
Part2.BrickColor = BrickColor.new("Really red")
Part2.Transparency = 0
Part2.Reflectance = 0
Part2.Locked = false
Part2.Shape = Enum.PartType.Cylinder
Part3 = Instance.new("Part")
Part3.Name = "Part3"
Part3.Parent = Rings
Part3.Anchored = true
Part3.CanCollide = true
Part3.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part3.CFrame = CFrame.new(135, 154.00001525878906, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part3.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part3.Material = Enum.Material.Plastic
Part3.BrickColor = BrickColor.new("Really red")
Part3.Transparency = 0
Part3.Reflectance = 0
Part3.Locked = false
Part3.Shape = Enum.PartType.Cylinder
Part15 = Instance.new("Part")
Part15.Name = "Part15"
Part15.Parent = Rings
Part15.Anchored = true
Part15.CanCollide = true
Part15.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part15.CFrame = CFrame.new(135, 82.00000762939453, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part15.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part15.Material = Enum.Material.Plastic
Part15.BrickColor = BrickColor.new("Really red")
Part15.Transparency = 0
Part15.Reflectance = 0
Part15.Locked = false
Part15.Shape = Enum.PartType.Cylinder
Part14 = Instance.new("Part")
Part14.Name = "Part14"
Part14.Parent = Rings
Part14.Anchored = true
Part14.CanCollide = true
Part14.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part14.CFrame = CFrame.new(135, 70, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part14.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part14.Material = Enum.Material.Plastic
Part14.BrickColor = BrickColor.new("Really red")
Part14.Transparency = 0
Part14.Reflectance = 0
Part14.Locked = false
Part14.Shape = Enum.PartType.Cylinder
Part13 = Instance.new("Part")
Part13.Name = "Part13"
Part13.Parent = Rings
Part13.Anchored = true
Part13.CanCollide = true
Part13.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part13.CFrame = CFrame.new(135, 46, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part13.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part13.Material = Enum.Material.Plastic
Part13.BrickColor = BrickColor.new("Really red")
Part13.Transparency = 0
Part13.Reflectance = 0
Part13.Locked = false
Part13.Shape = Enum.PartType.Cylinder
Part8 = Instance.new("Part")
Part8.Name = "Part8"
Part8.Parent = Rings
Part8.Anchored = true
Part8.CanCollide = true
Part8.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part8.CFrame = CFrame.new(135, 94.00000762939453, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part8.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part8.Material = Enum.Material.Plastic
Part8.BrickColor = BrickColor.new("Really red")
Part8.Transparency = 0
Part8.Reflectance = 0
Part8.Locked = false
Part8.Shape = Enum.PartType.Cylinder
Part91 = Instance.new("Part")
Part91.Name = "Part9"
Part91.Parent = Rings
Part91.Anchored = true
Part91.CanCollide = true
Part91.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part91.CFrame = CFrame.new(135, 117.99999237060547, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part91.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part91.Material = Enum.Material.Plastic
Part91.BrickColor = BrickColor.new("Really red")
Part91.Transparency = 0
Part91.Reflectance = 0
Part91.Locked = false
Part91.Shape = Enum.PartType.Cylinder
Part51 = Instance.new("Part")
Part51.Name = "Part5"
Part51.Parent = Rings
Part51.Anchored = true
Part51.CanCollide = true
Part51.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part51.CFrame = CFrame.new(135, 177.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part51.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part51.Material = Enum.Material.Plastic
Part51.BrickColor = BrickColor.new("Really red")
Part51.Transparency = 0
Part51.Reflectance = 0
Part51.Locked = false
Part51.Shape = Enum.PartType.Cylinder
Part = Instance.new("Part")
Part.Name = "Part"
Part.Parent = Rings
Part.Anchored = true
Part.CanCollide = true
Part.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part.CFrame = CFrame.new(135, 189.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part.Material = Enum.Material.Plastic
Part.BrickColor = BrickColor.new("Really red")
Part.Transparency = 0
Part.Reflectance = 0
Part.Locked = false
Part.Shape = Enum.PartType.Cylinder
Part7 = Instance.new("Part")
Part7.Name = "Part7"
Part7.Parent = Rings
Part7.Anchored = true
Part7.CanCollide = true
Part7.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part7.CFrame = CFrame.new(135, 142.00001525878906, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part7.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part7.Material = Enum.Material.Plastic
Part7.BrickColor = BrickColor.new("Really red")
Part7.Transparency = 0
Part7.Reflectance = 0
Part7.Locked = false
Part7.Shape = Enum.PartType.Cylinder
Part12 = Instance.new("Part")
Part12.Name = "Part12"
Part12.Parent = Rings
Part12.Anchored = true
Part12.CanCollide = true
Part12.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part12.CFrame = CFrame.new(135, 58, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part12.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part12.Material = Enum.Material.Plastic
Part12.BrickColor = BrickColor.new("Really red")
Part12.Transparency = 0
Part12.Reflectance = 0
Part12.Locked = false
Part12.Shape = Enum.PartType.Cylinder
Part11 = Instance.new("Part")
Part11.Name = "Part11"
Part11.Parent = Rings
Part11.Anchored = true
Part11.CanCollide = true
Part11.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part11.CFrame = CFrame.new(135, 106.00000762939453, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part11.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part11.Material = Enum.Material.Plastic
Part11.BrickColor = BrickColor.new("Really red")
Part11.Transparency = 0
Part11.Reflectance = 0
Part11.Locked = false
Part11.Shape = Enum.PartType.Cylinder
Part4 = Instance.new("Part")
Part4.Name = "Part4"
Part4.Parent = Rings
Part4.Anchored = true
Part4.CanCollide = true
Part4.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part4.CFrame = CFrame.new(135, 213.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part4.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part4.Material = Enum.Material.Plastic
Part4.BrickColor = BrickColor.new("Really red")
Part4.Transparency = 0
Part4.Reflectance = 0
Part4.Locked = false
Part4.Shape = Enum.PartType.Cylinder

Part35 = Instance.new("Part")
Part35.Name = "Part35"
Part35.Parent = Grandosla
Part35.Anchored = true
Part35.CanCollide = true
Part35.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part35.CFrame = CFrame.new(109.49996948242188, 51.50006103515625, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part35.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part35.Material = Enum.Material.Marble
Part35.BrickColor = BrickColor.new("Medium stone grey")
Part35.Transparency = 0
Part35.Reflectance = 0
Part35.Locked = false
Part35.Shape = Enum.PartType.Block

Part33 = Instance.new("Part")
Part33.Name = "Part33"
Part33.Parent = Grandosla
Part33.Anchored = true
Part33.CanCollide = true
Part33.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part33.CFrame = CFrame.new(109.49996948242188, 55.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part33.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part33.Material = Enum.Material.Marble
Part33.BrickColor = BrickColor.new("Medium stone grey")
Part33.Transparency = 0
Part33.Reflectance = 0
Part33.Locked = false
Part33.Shape = Enum.PartType.Block

Part56 = Instance.new("Part")
Part56.Name = "Part56"
Part56.Parent = Grandosla
Part56.Anchored = true
Part56.CanCollide = true
Part56.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part56.CFrame = CFrame.new(109.49996948242188, 117.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part56.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part56.Material = Enum.Material.Marble
Part56.BrickColor = BrickColor.new("Medium stone grey")
Part56.Transparency = 0
Part56.Reflectance = 0
Part56.Locked = false
Part56.Shape = Enum.PartType.Block

Part110 = Instance.new("Part")
Part110.Name = "Part110"
Part110.Parent = Grandosla
Part110.Anchored = true
Part110.CanCollide = true
Part110.Size = Vector3.new(8.000000, 8.000000, 1.000000)
Part110.CFrame = CFrame.new(111, 39.99998474121094, -70.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part110.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part110.Material = Enum.Material.Marble
Part110.BrickColor = BrickColor.new("Medium stone grey")
Part110.Transparency = 0
Part110.Reflectance = 0
Part110.Locked = false
Part110.Shape = Enum.PartType.Block

Part45 = Instance.new("Part")
Part45.Name = "Part45"
Part45.Parent = Grandosla
Part45.Anchored = true
Part45.CanCollide = true
Part45.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part45.CFrame = CFrame.new(109.49996948242188, 103.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part45.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part45.Material = Enum.Material.Marble
Part45.BrickColor = BrickColor.new("Medium stone grey")
Part45.Transparency = 0
Part45.Reflectance = 0
Part45.Locked = false
Part45.Shape = Enum.PartType.Block

Part61 = Instance.new("Part")
Part61.Name = "Part61"
Part61.Parent = Grandosla
Part61.Anchored = true
Part61.CanCollide = true
Part61.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part61.CFrame = CFrame.new(160.49996948242188, 131.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part61.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part61.Material = Enum.Material.Marble
Part61.BrickColor = BrickColor.new("Medium stone grey")
Part61.Transparency = 0
Part61.Reflectance = 0
Part61.Locked = false
Part61.Shape = Enum.PartType.Block

Part41 = Instance.new("Part")
Part41.Name = "Part41"
Part41.Parent = Grandosla
Part41.Anchored = true
Part41.CanCollide = true
Part41.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part41.CFrame = CFrame.new(109.49996948242188, 95.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part41.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part41.Material = Enum.Material.Marble
Part41.BrickColor = BrickColor.new("Medium stone grey")
Part41.Transparency = 0
Part41.Reflectance = 0
Part41.Locked = false
Part41.Shape = Enum.PartType.Block

Part103 = Instance.new("Part")
Part103.Name = "Part103"
Part103.Parent = Grandosla
Part103.Anchored = true
Part103.CanCollide = true
Part103.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part103.CFrame = CFrame.new(160.49996948242188, 207.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part103.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part103.Material = Enum.Material.Marble
Part103.BrickColor = BrickColor.new("Medium stone grey")
Part103.Transparency = 0
Part103.Reflectance = 0
Part103.Locked = false
Part103.Shape = Enum.PartType.Block

Part60 = Instance.new("Part")
Part60.Name = "Part60"
Part60.Parent = Grandosla
Part60.Anchored = true
Part60.CanCollide = true
Part60.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part60.CFrame = CFrame.new(160.49996948242188, 135.5002899169922, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part60.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part60.Material = Enum.Material.Marble
Part60.BrickColor = BrickColor.new("Medium stone grey")
Part60.Transparency = 0
Part60.Reflectance = 0
Part60.Locked = false
Part60.Shape = Enum.PartType.Block

Part104 = Instance.new("Part")
Part104.Name = "Part104"
Part104.Parent = Grandosla
Part104.Anchored = true
Part104.CanCollide = true
Part104.Size = Vector3.new(8.000000, 10.000000, 1.000000)
Part104.CFrame = CFrame.new(111, 41, -71.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part104.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part104.Material = Enum.Material.Marble
Part104.BrickColor = BrickColor.new("Medium stone grey")
Part104.Transparency = 0
Part104.Reflectance = 0
Part104.Locked = false
Part104.Shape = Enum.PartType.Block

Part84 = Instance.new("Part")
Part84.Name = "Part84"
Part84.Parent = Grandosla
Part84.Anchored = true
Part84.CanCollide = true
Part84.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part84.CFrame = CFrame.new(160.49996948242188, 181.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part84.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part84.Material = Enum.Material.Marble
Part84.BrickColor = BrickColor.new("Medium stone grey")
Part84.Transparency = 0
Part84.Reflectance = 0
Part84.Locked = false
Part84.Shape = Enum.PartType.Block

Part120 = Instance.new("Part")
Part120.Name = "Part120"
Part120.Parent = Grandosla
Part120.Anchored = true
Part120.CanCollide = true
Part120.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part120.CFrame = CFrame.new(160.49996948242188, 217.49996948242188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part120.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part120.Material = Enum.Material.Marble
Part120.BrickColor = BrickColor.new("Medium stone grey")
Part120.Transparency = 0
Part120.Reflectance = 0
Part120.Locked = false
Part120.Shape = Enum.PartType.Block

Bolts = Instance.new("Folder")
Bolts.Name = "Bolts"
Bolts.Parent = Grandosla

Part34 = Instance.new("Part")
Part34.Name = "Part34"
Part34.Parent = Grandosla
Part34.Anchored = true
Part34.CanCollide = true
Part34.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part34.CFrame = CFrame.new(109.49996948242188, 61.50001525878906, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part34.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part34.Material = Enum.Material.Marble
Part34.BrickColor = BrickColor.new("Medium stone grey")
Part34.Transparency = 0
Part34.Reflectance = 0
Part34.Locked = false
Part34.Shape = Enum.PartType.Block

Wedge1 = Instance.new("WedgePart")
Wedge1.Name = "Wedge"
Wedge1.Parent = Grandosla
Wedge1.Anchored = true
Wedge1.CanCollide = true
Wedge1.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge1.CFrame = CFrame.new(135, 44, -82, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Wedge1.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge1.Material = Enum.Material.Marble
Wedge1.BrickColor = BrickColor.new("Medium stone grey")
Wedge1.Transparency = 0
Wedge1.Reflectance = 0
Wedge1.Locked = false

Part131 = Instance.new("Part")
Part131.Name = "Part13"
Part131.Parent = Grandosla
Part131.Anchored = true
Part131.CanCollide = true
Part131.Size = Vector3.new(1.000000, 89.000000, 1.000000)
Part131.CFrame = CFrame.new(107.49996948242188, 80.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part131.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part131.Material = Enum.Material.Marble
Part131.BrickColor = BrickColor.new("Medium stone grey")
Part131.Transparency = 0
Part131.Reflectance = 0
Part131.Locked = false
Part131.Shape = Enum.PartType.Block

peak = Instance.new("Part")
peak.Name = "peak"
peak.Parent = Grandosla
peak.Anchored = true
peak.CanCollide = true
peak.Size = Vector3.new(96.000000, 96.000000, 96.000000)
peak.CFrame = CFrame.new(135, 296, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
peak.Color = Color3.new(0.972549, 0.972549, 0.972549)
peak.Material = Enum.Material.Plastic
peak.BrickColor = BrickColor.new("Institutional white")
peak.Transparency = 0
peak.Reflectance = 0
peak.Locked = false
peak.Shape = Enum.PartType.Ball
BoltParticles = Instance.new("ParticleEmitter")
BoltParticles.Name = "BoltParticles"
BoltParticles.Parent = peak
BoltParticles.Speed = NumberRange.new(1000, 1100)
BoltParticles.Size = NumberSequence.new({
	NumberSequenceKeypoint.new(0, 30),
	NumberSequenceKeypoint.new(1, 30)
})
BoltParticles.Acceleration = Vector3.new(0, 0, 0)
BoltParticles.Brightness = 1
BoltParticles.Drag = 0
BoltParticles.EmissionDirection = Enum.NormalId.Top
BoltParticles.Enabled = false
BoltParticles.LightEmission = 0
BoltParticles.Rate = 100
BoltParticles.Lifetime = NumberRange.new(3, 5)
BoltParticles.Shape = Enum.ParticleEmitterShape.Box
BoltParticles.SpreadAngle = Vector2.new(80, 80)
BoltParticles.Texture = "rbxassetid://117008291"
BoltParticles.ZOffset = 0
BoltParticles.VelocitySpread = 80

Part109 = Instance.new("Part")
Part109.Name = "Part109"
Part109.Parent = Grandosla
Part109.Anchored = true
Part109.CanCollide = true
Part109.Size = Vector3.new(8.000000, 6.000000, 1.000000)
Part109.CFrame = CFrame.new(111, 39, -69.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part109.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part109.Material = Enum.Material.Marble
Part109.BrickColor = BrickColor.new("Medium stone grey")
Part109.Transparency = 0
Part109.Reflectance = 0
Part109.Locked = false
Part109.Shape = Enum.PartType.Block

Part77 = Instance.new("Part")
Part77.Name = "Part77"
Part77.Parent = Grandosla
Part77.Anchored = true
Part77.CanCollide = true
Part77.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part77.CFrame = CFrame.new(160.49996948242188, 179.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part77.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part77.Material = Enum.Material.Marble
Part77.BrickColor = BrickColor.new("Medium stone grey")
Part77.Transparency = 0
Part77.Reflectance = 0
Part77.Locked = false
Part77.Shape = Enum.PartType.Block

RingCore = Instance.new("Part")
RingCore.Name = "RingCore"
RingCore.Parent = Grandosla
RingCore.Anchored = true
RingCore.CanCollide = true
RingCore.Size = Vector3.new(216.000000, 32.000000, 32.000000)
RingCore.CFrame = CFrame.new(135, 144, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
RingCore.Color = Color3.new(0.388235, 0.372549, 0.384314)
RingCore.Material = Enum.Material.Neon
RingCore.BrickColor = BrickColor.new("Dark stone grey")
RingCore.Transparency = 0
RingCore.Reflectance = 0
RingCore.Locked = false
RingCore.Shape = Enum.PartType.Cylinder

Part29 = Instance.new("Part")
Part29.Name = "Part29"
Part29.Parent = Grandosla
Part29.Anchored = true
Part29.CanCollide = true
Part29.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part29.CFrame = CFrame.new(109.49996948242188, 67.50009155273438, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part29.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part29.Material = Enum.Material.Marble
Part29.BrickColor = BrickColor.new("Medium stone grey")
Part29.Transparency = 0
Part29.Reflectance = 0
Part29.Locked = false
Part29.Shape = Enum.PartType.Block

Part39 = Instance.new("Part")
Part39.Name = "Part39"
Part39.Parent = Grandosla
Part39.Anchored = true
Part39.CanCollide = true
Part39.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part39.CFrame = CFrame.new(109.49996948242188, 65.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part39.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part39.Material = Enum.Material.Marble
Part39.BrickColor = BrickColor.new("Medium stone grey")
Part39.Transparency = 0
Part39.Reflectance = 0
Part39.Locked = false
Part39.Shape = Enum.PartType.Block

Part1 = Instance.new("Part")
Part1.Name = "Part"
Part1.Parent = Grandosla
Part1.Anchored = true
Part1.CanCollide = true
Part1.Size = Vector3.new(1.000000, 1.000000, 62.000000)
Part1.CFrame = CFrame.new(135.000244140625, 224.5, -10.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part1.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1.Material = Enum.Material.Marble
Part1.BrickColor = BrickColor.new("Medium stone grey")
Part1.Transparency = 0
Part1.Reflectance = 0
Part1.Locked = false
Part1.Shape = Enum.PartType.Block

Part73 = Instance.new("Part")
Part73.Name = "Part73"
Part73.Parent = Grandosla
Part73.Anchored = true
Part73.CanCollide = true
Part73.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part73.CFrame = CFrame.new(160.49996948242188, 175.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part73.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part73.Material = Enum.Material.Marble
Part73.BrickColor = BrickColor.new("Medium stone grey")
Part73.Transparency = 0
Part73.Reflectance = 0
Part73.Locked = false
Part73.Shape = Enum.PartType.Block

Part74 = Instance.new("Part")
Part74.Name = "Part74"
Part74.Parent = Grandosla
Part74.Anchored = true
Part74.CanCollide = true
Part74.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part74.CFrame = CFrame.new(160.49996948242188, 173.5003662109375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part74.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part74.Material = Enum.Material.Marble
Part74.BrickColor = BrickColor.new("Medium stone grey")
Part74.Transparency = 0
Part74.Reflectance = 0
Part74.Locked = false
Part74.Shape = Enum.PartType.Block

Part22 = Instance.new("Part")
Part22.Name = "Part22"
Part22.Parent = Grandosla
Part22.Anchored = true
Part22.CanCollide = true
Part22.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part22.CFrame = CFrame.new(109.49996948242188, 69.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part22.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part22.Material = Enum.Material.Marble
Part22.BrickColor = BrickColor.new("Medium stone grey")
Part22.Transparency = 0
Part22.Reflectance = 0
Part22.Locked = false
Part22.Shape = Enum.PartType.Block

CornerWedge = Instance.new("CornerWedgePart")
CornerWedge.Name = "CornerWedge"
CornerWedge.Parent = Grandosla
CornerWedge.Anchored = true
CornerWedge.CanCollide = true
CornerWedge.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge.CFrame = CFrame.new(95, 44, -82, 0, 0, -1, 0, 1, 0, 1, 0, 0)
CornerWedge.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge.Material = Enum.Material.Marble
CornerWedge.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge.Transparency = 0
CornerWedge.Reflectance = 0
CornerWedge.Locked = false

Part117 = Instance.new("Part")
Part117.Name = "Part117"
Part117.Parent = Grandosla
Part117.Anchored = true
Part117.CanCollide = true
Part117.Size = Vector3.new(8.000000, 2.000000, 1.000000)
Part117.CFrame = CFrame.new(111, 37, -67.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part117.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part117.Material = Enum.Material.Marble
Part117.BrickColor = BrickColor.new("Medium stone grey")
Part117.Transparency = 0
Part117.Reflectance = 0
Part117.Locked = false
Part117.Shape = Enum.PartType.Block

Part115 = Instance.new("Part")
Part115.Name = "Part115"
Part115.Parent = Grandosla
Part115.Anchored = true
Part115.CanCollide = true
Part115.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part115.CFrame = CFrame.new(103.500244140625, 222.5, -10.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part115.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part115.Material = Enum.Material.Marble
Part115.BrickColor = BrickColor.new("Medium stone grey")
Part115.Transparency = 0
Part115.Reflectance = 0
Part115.Locked = false
Part115.Shape = Enum.PartType.Block

Part151 = Instance.new("Part")
Part151.Name = "Part15"
Part151.Parent = Grandosla
Part151.Anchored = true
Part151.CanCollide = true
Part151.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part151.CFrame = CFrame.new(109.49996948242188, 47.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part151.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part151.Material = Enum.Material.Marble
Part151.BrickColor = BrickColor.new("Medium stone grey")
Part151.Transparency = 0
Part151.Reflectance = 0
Part151.Locked = false
Part151.Shape = Enum.PartType.Block

Part31 = Instance.new("Part")
Part31.Name = "Part31"
Part31.Parent = Grandosla
Part31.Anchored = true
Part31.CanCollide = true
Part31.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part31.CFrame = CFrame.new(109.49996948242188, 49.5, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part31.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part31.Material = Enum.Material.Marble
Part31.BrickColor = BrickColor.new("Medium stone grey")
Part31.Transparency = 0
Part31.Reflectance = 0
Part31.Locked = false
Part31.Shape = Enum.PartType.Block

Part48 = Instance.new("Part")
Part48.Name = "Part48"
Part48.Parent = Grandosla
Part48.Anchored = true
Part48.CanCollide = true
Part48.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part48.CFrame = CFrame.new(109.49996948242188, 119.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part48.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part48.Material = Enum.Material.Marble
Part48.BrickColor = BrickColor.new("Medium stone grey")
Part48.Transparency = 0
Part48.Reflectance = 0
Part48.Locked = false
Part48.Shape = Enum.PartType.Block

Part58 = Instance.new("Part")
Part58.Name = "Part58"
Part58.Parent = Grandosla
Part58.Anchored = true
Part58.CanCollide = true
Part58.Size = Vector3.new(1.000000, 97.000000, 1.000000)
Part58.CFrame = CFrame.new(158.49996948242188, 172.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part58.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part58.Material = Enum.Material.Marble
Part58.BrickColor = BrickColor.new("Medium stone grey")
Part58.Transparency = 0
Part58.Reflectance = 0
Part58.Locked = false
Part58.Shape = Enum.PartType.Block

Part59 = Instance.new("Part")
Part59.Name = "Part59"
Part59.Parent = Grandosla
Part59.Anchored = true
Part59.CanCollide = true
Part59.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part59.CFrame = CFrame.new(160.49996948242188, 125.50022888183594, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part59.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part59.Material = Enum.Material.Marble
Part59.BrickColor = BrickColor.new("Medium stone grey")
Part59.Transparency = 0
Part59.Reflectance = 0
Part59.Locked = false
Part59.Shape = Enum.PartType.Block

Part90 = Instance.new("Part")
Part90.Name = "Part90"
Part90.Parent = Grandosla
Part90.Anchored = true
Part90.CanCollide = true
Part90.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part90.CFrame = CFrame.new(160.49996948242188, 161.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part90.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part90.Material = Enum.Material.Marble
Part90.BrickColor = BrickColor.new("Medium stone grey")
Part90.Transparency = 0
Part90.Reflectance = 0
Part90.Locked = false
Part90.Shape = Enum.PartType.Block

Part21 = Instance.new("Part")
Part21.Name = "Part21"
Part21.Parent = Grandosla
Part21.Anchored = true
Part21.CanCollide = true
Part21.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part21.CFrame = CFrame.new(109.49996948242188, 57.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part21.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part21.Material = Enum.Material.Marble
Part21.BrickColor = BrickColor.new("Medium stone grey")
Part21.Transparency = 0
Part21.Reflectance = 0
Part21.Locked = false
Part21.Shape = Enum.PartType.Block

Part16 = Instance.new("Part")
Part16.Name = "Part16"
Part16.Parent = Grandosla
Part16.Anchored = true
Part16.CanCollide = true
Part16.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part16.CFrame = CFrame.new(109.49996948242188, 43.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part16.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part16.Material = Enum.Material.Marble
Part16.BrickColor = BrickColor.new("Medium stone grey")
Part16.Transparency = 0
Part16.Reflectance = 0
Part16.Locked = false
Part16.Shape = Enum.PartType.Block

Part94 = Instance.new("Part")
Part94.Name = "Part94"
Part94.Parent = Grandosla
Part94.Anchored = true
Part94.CanCollide = true
Part94.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part94.CFrame = CFrame.new(160.49996948242188, 205.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part94.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part94.Material = Enum.Material.Marble
Part94.BrickColor = BrickColor.new("Medium stone grey")
Part94.Transparency = 0
Part94.Reflectance = 0
Part94.Locked = false
Part94.Shape = Enum.PartType.Block

Part43 = Instance.new("Part")
Part43.Name = "Part43"
Part43.Parent = Grandosla
Part43.Anchored = true
Part43.CanCollide = true
Part43.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part43.CFrame = CFrame.new(109.49996948242188, 71.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part43.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part43.Material = Enum.Material.Marble
Part43.BrickColor = BrickColor.new("Medium stone grey")
Part43.Transparency = 0
Part43.Reflectance = 0
Part43.Locked = false
Part43.Shape = Enum.PartType.Block

Part17 = Instance.new("Part")
Part17.Name = "Part17"
Part17.Parent = Grandosla
Part17.Anchored = true
Part17.CanCollide = true
Part17.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part17.CFrame = CFrame.new(109.49996948242188, 45.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part17.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part17.Material = Enum.Material.Marble
Part17.BrickColor = BrickColor.new("Medium stone grey")
Part17.Transparency = 0
Part17.Reflectance = 0
Part17.Locked = false
Part17.Shape = Enum.PartType.Block

Part124 = Instance.new("Part")
Part124.Name = "Part124"
Part124.Parent = Grandosla
Part124.Anchored = true
Part124.CanCollide = true
Part124.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part124.CFrame = CFrame.new(105, 127.99999237060547, -12, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part124.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part124.Material = Enum.Material.Marble
Part124.BrickColor = BrickColor.new("Medium stone grey")
Part124.Transparency = 0
Part124.Reflectance = 0
Part124.Locked = false
Part124.Shape = Enum.PartType.Block

Part511 = Instance.new("Part")
Part511.Name = "Part51"
Part511.Parent = Grandosla
Part511.Anchored = true
Part511.CanCollide = true
Part511.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part511.CFrame = CFrame.new(109.49996948242188, 107.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part511.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part511.Material = Enum.Material.Marble
Part511.BrickColor = BrickColor.new("Medium stone grey")
Part511.Transparency = 0
Part511.Reflectance = 0
Part511.Locked = false
Part511.Shape = Enum.PartType.Block

Part119 = Instance.new("Part")
Part119.Name = "Part119"
Part119.Parent = Grandosla
Part119.Anchored = true
Part119.CanCollide = true
Part119.Size = Vector3.new(56.000000, 1.000000, 3.600000)
Part119.CFrame = CFrame.new(135, 124.49999237060547, -12.199996948242188, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part119.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part119.Material = Enum.Material.Marble
Part119.BrickColor = BrickColor.new("Medium stone grey")
Part119.Transparency = 0
Part119.Reflectance = 0
Part119.Locked = false
Part119.Shape = Enum.PartType.Block

Part76 = Instance.new("Part")
Part76.Name = "Part76"
Part76.Parent = Grandosla
Part76.Anchored = true
Part76.CanCollide = true
Part76.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part76.CFrame = CFrame.new(160.49996948242188, 165.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part76.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part76.Material = Enum.Material.Marble
Part76.BrickColor = BrickColor.new("Medium stone grey")
Part76.Transparency = 0
Part76.Reflectance = 0
Part76.Locked = false
Part76.Shape = Enum.PartType.Block

Wall = Instance.new("Part")
Wall.Name = "Wall"
Wall.Parent = Grandosla
Wall.Anchored = true
Wall.CanCollide = true
Wall.Size = Vector3.new(184.000000, 0.400000, 56.000000)
Wall.CFrame = CFrame.new(135, 127.99999237060547, -10.199996948242188, 0, 0, 1, -1, 0, 0, 0, -1, 0)
Wall.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall.Material = Enum.Material.Plastic
Wall.BrickColor = BrickColor.new("Dark stone grey")
Wall.Transparency = 1
Wall.Reflectance = 0
Wall.Locked = false
Wall.Shape = Enum.PartType.Block
Texture = Instance.new("Texture")
Texture.Name = "Texture"
Texture.Parent = Wall
Texture.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture.Face = Enum.NormalId.Bottom
Texture.StudsPerTileU = 5
Texture.StudsPerTileV = 5
Texture.Transparency = 0
Texture2 = Instance.new("Texture")
Texture2.Name = "Texture2"
Texture2.Parent = Wall
Texture2.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture2.Face = Enum.NormalId.Top
Texture2.StudsPerTileU = 5
Texture2.StudsPerTileV = 5
Texture2.Transparency = 0

Part75 = Instance.new("Part")
Part75.Name = "Part75"
Part75.Parent = Grandosla
Part75.Anchored = true
Part75.CanCollide = true
Part75.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part75.CFrame = CFrame.new(160.49996948242188, 177.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part75.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part75.Material = Enum.Material.Marble
Part75.BrickColor = BrickColor.new("Medium stone grey")
Part75.Transparency = 0
Part75.Reflectance = 0
Part75.Locked = false
Part75.Shape = Enum.PartType.Block

Part106 = Instance.new("Part")
Part106.Name = "Part106"
Part106.Parent = Grandosla
Part106.Anchored = true
Part106.CanCollide = true
Part106.Size = Vector3.new(64.000000, 1.000000, 4.000000)
Part106.CFrame = CFrame.new(105, 220.5, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part106.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part106.Material = Enum.Material.Marble
Part106.BrickColor = BrickColor.new("Medium stone grey")
Part106.Transparency = 0
Part106.Reflectance = 0
Part106.Locked = false
Part106.Shape = Enum.PartType.Block

Part27 = Instance.new("Part")
Part27.Name = "Part27"
Part27.Parent = Grandosla
Part27.Anchored = true
Part27.CanCollide = true
Part27.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part27.CFrame = CFrame.new(109.49996948242188, 87.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part27.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part27.Material = Enum.Material.Marble
Part27.BrickColor = BrickColor.new("Medium stone grey")
Part27.Transparency = 0
Part27.Reflectance = 0
Part27.Locked = false
Part27.Shape = Enum.PartType.Block

Part102 = Instance.new("Part")
Part102.Name = "Part10"
Part102.Parent = Grandosla
Part102.Anchored = true
Part102.CanCollide = true
Part102.Size = Vector3.new(56.000000, 1.000000, 55.000000)
Part102.CFrame = CFrame.new(134.99996948242188, 220.50039672851562, -42.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part102.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part102.Material = Enum.Material.Marble
Part102.BrickColor = BrickColor.new("Medium stone grey")
Part102.Transparency = 0
Part102.Reflectance = 0
Part102.Locked = false
Part102.Shape = Enum.PartType.Block

Part63 = Instance.new("Part")
Part63.Name = "Part63"
Part63.Parent = Grandosla
Part63.Anchored = true
Part63.CanCollide = true
Part63.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part63.CFrame = CFrame.new(160.49996948242188, 141.50025939941406, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part63.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part63.Material = Enum.Material.Marble
Part63.BrickColor = BrickColor.new("Medium stone grey")
Part63.Transparency = 0
Part63.Reflectance = 0
Part63.Locked = false
Part63.Shape = Enum.PartType.Block

Part126 = Instance.new("Part")
Part126.Name = "Part126"
Part126.Parent = Grandosla
Part126.Anchored = true
Part126.CanCollide = true
Part126.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part126.CFrame = CFrame.new(103.500244140625, 222.5, -73.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part126.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part126.Material = Enum.Material.Marble
Part126.BrickColor = BrickColor.new("Medium stone grey")
Part126.Transparency = 0
Part126.Reflectance = 0
Part126.Locked = false
Part126.Shape = Enum.PartType.Block

Part100 = Instance.new("Part")
Part100.Name = "Part100"
Part100.Parent = Grandosla
Part100.Anchored = true
Part100.CanCollide = true
Part100.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part100.CFrame = CFrame.new(160.49996948242188, 199.5004425048828, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part100.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part100.Material = Enum.Material.Marble
Part100.BrickColor = BrickColor.new("Medium stone grey")
Part100.Transparency = 0
Part100.Reflectance = 0
Part100.Locked = false
Part100.Shape = Enum.PartType.Block

Part122 = Instance.new("Part")
Part122.Name = "Part122"
Part122.Parent = Grandosla
Part122.Anchored = true
Part122.CanCollide = true
Part122.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part122.CFrame = CFrame.new(160.49996948242188, 215.49996948242188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part122.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part122.Material = Enum.Material.Marble
Part122.BrickColor = BrickColor.new("Medium stone grey")
Part122.Transparency = 0
Part122.Reflectance = 0
Part122.Locked = false
Part122.Shape = Enum.PartType.Block

Part38 = Instance.new("Part")
Part38.Name = "Part38"
Part38.Parent = Grandosla
Part38.Anchored = true
Part38.CanCollide = true
Part38.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part38.CFrame = CFrame.new(109.49996948242188, 53.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part38.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part38.Material = Enum.Material.Marble
Part38.BrickColor = BrickColor.new("Medium stone grey")
Part38.Transparency = 0
Part38.Reflectance = 0
Part38.Locked = false
Part38.Shape = Enum.PartType.Block

Part81 = Instance.new("Part")
Part81.Name = "Part8"
Part81.Parent = Grandosla
Part81.Anchored = true
Part81.CanCollide = true
Part81.Size = Vector3.new(16.000000, 6.000000, 0.200000)
Part81.CFrame = CFrame.new(126, 57.00001525878906, -74.0999984741211, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part81.Color = Color3.new(0.792157, 0.796078, 0.819608)
Part81.Material = Enum.Material.Marble
Part81.BrickColor = BrickColor.new("Ghost grey")
Part81.Transparency = 0
Part81.Reflectance = 0
Part81.Locked = false
Part81.Shape = Enum.PartType.Block
SurfaceGui = Instance.new("SurfaceGui")
SurfaceGui.Name = "SurfaceGui"
SurfaceGui.Parent = Part81
SurfaceGui.AlwaysOnTop = false
SurfaceGui.CanvasSize = Vector2.new(500.000000, 100.000000)
SurfaceGui.ClipsDescendants = false
SurfaceGui.Face = Enum.NormalId.Front
SurfaceGui.LightInfluence = 0
SurfaceGui.SizingMode = Enum.SurfaceGuiSizingMode.FixedSize
TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = SurfaceGui
TextLabel.Text = "GRANDOSLA"
TextLabel.Font = Enum.Font.SourceSansBold
TextLabel.TextSize = 96
TextLabel.TextColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel.Size = UDim2.new(1, 0, 1, 0)
TextLabel.Position = UDim2.new(0, 0, 0, 0)
TextLabel.BorderSizePixel = 1
TextLabel.BackgroundTransparency = 1

Part1021 = Instance.new("Part")
Part1021.Name = "Part102"
Part1021.Parent = Grandosla
Part1021.Anchored = true
Part1021.CanCollide = true
Part1021.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part1021.CFrame = CFrame.new(160.49996948242188, 209.5004119873047, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part1021.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1021.Material = Enum.Material.Marble
Part1021.BrickColor = BrickColor.new("Medium stone grey")
Part1021.Transparency = 0
Part1021.Reflectance = 0
Part1021.Locked = false
Part1021.Shape = Enum.PartType.Block

Part121 = Instance.new("Part")
Part121.Name = "Part12"
Part121.Parent = Grandosla
Part121.Anchored = true
Part121.CanCollide = true
Part121.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part121.CFrame = CFrame.new(109.49996948242188, 41.49995422363281, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part121.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part121.Material = Enum.Material.Marble
Part121.BrickColor = BrickColor.new("Medium stone grey")
Part121.Transparency = 0
Part121.Reflectance = 0
Part121.Locked = false
Part121.Shape = Enum.PartType.Block

Part78 = Instance.new("Part")
Part78.Name = "Part78"
Part78.Parent = Grandosla
Part78.Anchored = true
Part78.CanCollide = true
Part78.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part78.CFrame = CFrame.new(160.49996948242188, 185.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part78.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part78.Material = Enum.Material.Marble
Part78.BrickColor = BrickColor.new("Medium stone grey")
Part78.Transparency = 0
Part78.Reflectance = 0
Part78.Locked = false
Part78.Shape = Enum.PartType.Block

Part65 = Instance.new("Part")
Part65.Name = "Part65"
Part65.Parent = Grandosla
Part65.Anchored = true
Part65.CanCollide = true
Part65.Size = Vector3.new(1.000000, 97.000000, 1.000000)
Part65.CFrame = CFrame.new(162.49996948242188, 172.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part65.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part65.Material = Enum.Material.Marble
Part65.BrickColor = BrickColor.new("Medium stone grey")
Part65.Transparency = 0
Part65.Reflectance = 0
Part65.Locked = false
Part65.Shape = Enum.PartType.Block

Wall1 = Instance.new("Part")
Wall1.Name = "Wall"
Wall1.Parent = Grandosla
Wall1.Anchored = true
Wall1.CanCollide = true
Wall1.Size = Vector3.new(184.000000, 0.400000, 56.000000)
Wall1.CFrame = CFrame.new(103.19999694824219, 127.99999237060547, -42.00000762939453, 0, 1, -0, -1, 0, 0, 0, 0, 1)
Wall1.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall1.Material = Enum.Material.Plastic
Wall1.BrickColor = BrickColor.new("Dark stone grey")
Wall1.Transparency = 1
Wall1.Reflectance = 0
Wall1.Locked = false
Wall1.Shape = Enum.PartType.Block
Texture1 = Instance.new("Texture")
Texture1.Name = "Texture"
Texture1.Parent = Wall1
Texture1.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture1.Face = Enum.NormalId.Bottom
Texture1.StudsPerTileU = 5
Texture1.StudsPerTileV = 5
Texture1.Transparency = 0
Texture21 = Instance.new("Texture")
Texture21.Name = "Texture2"
Texture21.Parent = Wall1
Texture21.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture21.Face = Enum.NormalId.Top
Texture21.StudsPerTileU = 5
Texture21.StudsPerTileV = 5
Texture21.Transparency = 0

Part92 = Instance.new("Part")
Part92.Name = "Part92"
Part92.Parent = Grandosla
Part92.Anchored = true
Part92.CanCollide = true
Part92.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part92.CFrame = CFrame.new(160.49996948242188, 167.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part92.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part92.Material = Enum.Material.Marble
Part92.BrickColor = BrickColor.new("Medium stone grey")
Part92.Transparency = 0
Part92.Reflectance = 0
Part92.Locked = false
Part92.Shape = Enum.PartType.Block

Part87 = Instance.new("Part")
Part87.Name = "Part87"
Part87.Parent = Grandosla
Part87.Anchored = true
Part87.CanCollide = true
Part87.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part87.CFrame = CFrame.new(160.49996948242188, 151.50035095214844, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part87.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part87.Material = Enum.Material.Marble
Part87.BrickColor = BrickColor.new("Medium stone grey")
Part87.Transparency = 0
Part87.Reflectance = 0
Part87.Locked = false
Part87.Shape = Enum.PartType.Block

TopLight = Instance.new("Part")
TopLight.Name = "TopLight"
TopLight.Parent = Grandosla
TopLight.Anchored = true
TopLight.CanCollide = true
TopLight.Size = Vector3.new(64.000000, 1.000000, 64.000000)
TopLight.CFrame = CFrame.new(135, 262.5, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
TopLight.Color = Color3.new(0.639216, 0.635294, 0.647059)
TopLight.Material = Enum.Material.Plastic
TopLight.BrickColor = BrickColor.new("Medium stone grey")
TopLight.Transparency = 1
TopLight.Reflectance = 0
TopLight.Locked = false
TopLight.Shape = Enum.PartType.Block
SurfaceLight = Instance.new("SurfaceLight")
SurfaceLight.Name = "SurfaceLight"
SurfaceLight.Parent = TopLight

Part28 = Instance.new("Part")
Part28.Name = "Part28"
Part28.Parent = Grandosla
Part28.Anchored = true
Part28.CanCollide = true
Part28.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part28.CFrame = CFrame.new(109.49996948242188, 91.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part28.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part28.Material = Enum.Material.Marble
Part28.BrickColor = BrickColor.new("Medium stone grey")
Part28.Transparency = 0
Part28.Reflectance = 0
Part28.Locked = false
Part28.Shape = Enum.PartType.Block

Part107 = Instance.new("Part")
Part107.Name = "Part107"
Part107.Parent = Grandosla
Part107.Anchored = true
Part107.CanCollide = true
Part107.Size = Vector3.new(8.000000, 12.000000, 1.000000)
Part107.CFrame = CFrame.new(111, 42, -72.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part107.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part107.Material = Enum.Material.Marble
Part107.BrickColor = BrickColor.new("Medium stone grey")
Part107.Transparency = 0
Part107.Reflectance = 0
Part107.Locked = false
Part107.Shape = Enum.PartType.Block

Part141 = Instance.new("Part")
Part141.Name = "Part14"
Part141.Parent = Grandosla
Part141.Anchored = true
Part141.CanCollide = true
Part141.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part141.CFrame = CFrame.new(109.49996948242188, 37.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part141.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part141.Material = Enum.Material.Marble
Part141.BrickColor = BrickColor.new("Medium stone grey")
Part141.Transparency = 0
Part141.Reflectance = 0
Part141.Locked = false
Part141.Shape = Enum.PartType.Block

Part911 = Instance.new("Part")
Part911.Name = "Part91"
Part911.Parent = Grandosla
Part911.Anchored = true
Part911.CanCollide = true
Part911.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part911.CFrame = CFrame.new(160.49996948242188, 163.50033569335938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part911.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part911.Material = Enum.Material.Marble
Part911.BrickColor = BrickColor.new("Medium stone grey")
Part911.Transparency = 0
Part911.Reflectance = 0
Part911.Locked = false
Part911.Shape = Enum.PartType.Block

Part47 = Instance.new("Part")
Part47.Name = "Part47"
Part47.Parent = Grandosla
Part47.Anchored = true
Part47.CanCollide = true
Part47.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part47.CFrame = CFrame.new(109.49996948242188, 115.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part47.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part47.Material = Enum.Material.Marble
Part47.BrickColor = BrickColor.new("Medium stone grey")
Part47.Transparency = 0
Part47.Reflectance = 0
Part47.Locked = false
Part47.Shape = Enum.PartType.Block

Part79 = Instance.new("Part")
Part79.Name = "Part79"
Part79.Parent = Grandosla
Part79.Anchored = true
Part79.CanCollide = true
Part79.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part79.CFrame = CFrame.new(160.49996948242188, 171.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part79.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part79.Material = Enum.Material.Marble
Part79.BrickColor = BrickColor.new("Medium stone grey")
Part79.Transparency = 0
Part79.Reflectance = 0
Part79.Locked = false
Part79.Shape = Enum.PartType.Block

Part72 = Instance.new("Part")
Part72.Name = "Part72"
Part72.Parent = Grandosla
Part72.Anchored = true
Part72.CanCollide = true
Part72.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part72.CFrame = CFrame.new(160.49996948242188, 169.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part72.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part72.Material = Enum.Material.Marble
Part72.BrickColor = BrickColor.new("Medium stone grey")
Part72.Transparency = 0
Part72.Reflectance = 0
Part72.Locked = false
Part72.Shape = Enum.PartType.Block

Wall2 = Instance.new("Part")
Wall2.Name = "Wall"
Wall2.Parent = Grandosla
Wall2.Anchored = true
Wall2.CanCollide = true
Wall2.Size = Vector3.new(184.000000, 0.400000, 56.000000)
Wall2.CFrame = CFrame.new(166.8000030517578, 128, -42, 0, 1, -0, -1, 0, 0, 0, 0, 1)
Wall2.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall2.Material = Enum.Material.Plastic
Wall2.BrickColor = BrickColor.new("Dark stone grey")
Wall2.Transparency = 1
Wall2.Reflectance = 0
Wall2.Locked = false
Wall2.Shape = Enum.PartType.Block
Texture3 = Instance.new("Texture")
Texture3.Name = "Texture"
Texture3.Parent = Wall2
Texture3.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture3.Face = Enum.NormalId.Bottom
Texture3.StudsPerTileU = 5
Texture3.StudsPerTileV = 5
Texture3.Transparency = 0
Texture22 = Instance.new("Texture")
Texture22.Name = "Texture2"
Texture22.Parent = Wall2
Texture22.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture22.Face = Enum.NormalId.Top
Texture22.StudsPerTileU = 5
Texture22.StudsPerTileV = 5
Texture22.Transparency = 0

CornerWedge1 = Instance.new("CornerWedgePart")
CornerWedge1.Name = "CornerWedge"
CornerWedge1.Parent = Grandosla
CornerWedge1.Anchored = true
CornerWedge1.CanCollide = true
CornerWedge1.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge1.CFrame = CFrame.new(175, 44, -82, -1, 0, 0, 0, 1, 0, 0, 0, -1)
CornerWedge1.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge1.Material = Enum.Material.Marble
CornerWedge1.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge1.Transparency = 0
CornerWedge1.Reflectance = 0
CornerWedge1.Locked = false

Part105 = Instance.new("Part")
Part105.Name = "Part105"
Part105.Parent = Grandosla
Part105.Anchored = true
Part105.CanCollide = true
Part105.Size = Vector3.new(4.000000, 1.000000, 56.000000)
Part105.CFrame = CFrame.new(135, 220.5, -72, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part105.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part105.Material = Enum.Material.Marble
Part105.BrickColor = BrickColor.new("Medium stone grey")
Part105.Transparency = 0
Part105.Reflectance = 0
Part105.Locked = false
Part105.Shape = Enum.PartType.Block

Part123 = Instance.new("Part")
Part123.Name = "Part123"
Part123.Parent = Grandosla
Part123.Anchored = true
Part123.CanCollide = true
Part123.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part123.CFrame = CFrame.new(105, 127.99999237060547, -72, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part123.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part123.Material = Enum.Material.Marble
Part123.BrickColor = BrickColor.new("Medium stone grey")
Part123.Transparency = 0
Part123.Reflectance = 0
Part123.Locked = false
Part123.Shape = Enum.PartType.Block

Part710 = Instance.new("Part")
Part710.Name = "Part7"
Part710.Parent = Grandosla
Part710.Anchored = true
Part710.CanCollide = true
Part710.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part710.CFrame = CFrame.new(165, 128, -72, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part710.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part710.Material = Enum.Material.Marble
Part710.BrickColor = BrickColor.new("Medium stone grey")
Part710.Transparency = 0
Part710.Reflectance = 0
Part710.Locked = false
Part710.Shape = Enum.PartType.Block

Part19 = Instance.new("Part")
Part19.Name = "Part19"
Part19.Parent = Grandosla
Part19.Anchored = true
Part19.CanCollide = true
Part19.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part19.CFrame = CFrame.new(109.49996948242188, 39.49995422363281, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part19.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part19.Material = Enum.Material.Marble
Part19.BrickColor = BrickColor.new("Medium stone grey")
Part19.Transparency = 0
Part19.Reflectance = 0
Part19.Locked = false
Part19.Shape = Enum.PartType.Block

Part37 = Instance.new("Part")
Part37.Name = "Part37"
Part37.Parent = Grandosla
Part37.Anchored = true
Part37.CanCollide = true
Part37.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part37.CFrame = CFrame.new(109.49996948242188, 83.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part37.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part37.Material = Enum.Material.Marble
Part37.BrickColor = BrickColor.new("Medium stone grey")
Part37.Transparency = 0
Part37.Reflectance = 0
Part37.Locked = false
Part37.Shape = Enum.PartType.Block

Part113 = Instance.new("Part")
Part113.Name = "Part113"
Part113.Parent = Grandosla
Part113.Anchored = true
Part113.CanCollide = true
Part113.Size = Vector3.new(1.000000, 1.000000, 62.000000)
Part113.CFrame = CFrame.new(135.000244140625, 224.49996948242188, -73.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part113.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part113.Material = Enum.Material.Marble
Part113.BrickColor = BrickColor.new("Medium stone grey")
Part113.Transparency = 0
Part113.Reflectance = 0
Part113.Locked = false
Part113.Shape = Enum.PartType.Block

Part112 = Instance.new("Part")
Part112.Name = "Part112"
Part112.Parent = Grandosla
Part112.Anchored = true
Part112.CanCollide = true
Part112.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part112.CFrame = CFrame.new(166.5, 222.5, -10.5, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part112.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part112.Material = Enum.Material.Marble
Part112.BrickColor = BrickColor.new("Medium stone grey")
Part112.Transparency = 0
Part112.Reflectance = 0
Part112.Locked = false
Part112.Shape = Enum.PartType.Block

Part811 = Instance.new("Part")
Part811.Name = "Part81"
Part811.Parent = Grandosla
Part811.Anchored = true
Part811.CanCollide = true
Part811.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part811.CFrame = CFrame.new(160.49996948242188, 187.50047302246094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part811.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part811.Material = Enum.Material.Marble
Part811.BrickColor = BrickColor.new("Medium stone grey")
Part811.Transparency = 0
Part811.Reflectance = 0
Part811.Locked = false
Part811.Shape = Enum.PartType.Block

Part69 = Instance.new("Part")
Part69.Name = "Part69"
Part69.Parent = Grandosla
Part69.Anchored = true
Part69.CanCollide = true
Part69.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part69.CFrame = CFrame.new(160.49996948242188, 127.50023651123047, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part69.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part69.Material = Enum.Material.Marble
Part69.BrickColor = BrickColor.new("Medium stone grey")
Part69.Transparency = 0
Part69.Reflectance = 0
Part69.Locked = false
Part69.Shape = Enum.PartType.Block

Part30 = Instance.new("Part")
Part30.Name = "Part30"
Part30.Parent = Grandosla
Part30.Anchored = true
Part30.CanCollide = true
Part30.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part30.CFrame = CFrame.new(109.49996948242188, 63.50001525878906, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part30.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part30.Material = Enum.Material.Marble
Part30.BrickColor = BrickColor.new("Medium stone grey")
Part30.Transparency = 0
Part30.Reflectance = 0
Part30.Locked = false
Part30.Shape = Enum.PartType.Block

Part23 = Instance.new("Part")
Part23.Name = "Part23"
Part23.Parent = Grandosla
Part23.Anchored = true
Part23.CanCollide = true
Part23.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part23.CFrame = CFrame.new(109.49996948242188, 79.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part23.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part23.Material = Enum.Material.Marble
Part23.BrickColor = BrickColor.new("Medium stone grey")
Part23.Transparency = 0
Part23.Reflectance = 0
Part23.Locked = false
Part23.Shape = Enum.PartType.Block

Part99 = Instance.new("Part")
Part99.Name = "Part99"
Part99.Parent = Grandosla
Part99.Anchored = true
Part99.CanCollide = true
Part99.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part99.CFrame = CFrame.new(160.49996948242188, 195.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part99.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part99.Material = Enum.Material.Marble
Part99.BrickColor = BrickColor.new("Medium stone grey")
Part99.Transparency = 0
Part99.Reflectance = 0
Part99.Locked = false
Part99.Shape = Enum.PartType.Block

Wedge2 = Instance.new("WedgePart")
Wedge2.Name = "Wedge"
Wedge2.Parent = Grandosla
Wedge2.Anchored = true
Wedge2.CanCollide = true
Wedge2.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge2.CFrame = CFrame.new(135, 44, -2, -1, 0, 0, 0, 1, 0, 0, 0, -1)
Wedge2.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge2.Material = Enum.Material.Marble
Wedge2.BrickColor = BrickColor.new("Medium stone grey")
Wedge2.Transparency = 0
Wedge2.Reflectance = 0
Wedge2.Locked = false

Part82 = Instance.new("Part")
Part82.Name = "Part82"
Part82.Parent = Grandosla
Part82.Anchored = true
Part82.CanCollide = true
Part82.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part82.CFrame = CFrame.new(160.49996948242188, 189.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part82.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part82.Material = Enum.Material.Marble
Part82.BrickColor = BrickColor.new("Medium stone grey")
Part82.Transparency = 0
Part82.Reflectance = 0
Part82.Locked = false
Part82.Shape = Enum.PartType.Block

Part57 = Instance.new("Part")
Part57.Name = "Part57"
Part57.Parent = Grandosla
Part57.Anchored = true
Part57.CanCollide = true
Part57.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part57.CFrame = CFrame.new(109.49996948242188, 121.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part57.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part57.Material = Enum.Material.Marble
Part57.BrickColor = BrickColor.new("Medium stone grey")
Part57.Transparency = 0
Part57.Reflectance = 0
Part57.Locked = false
Part57.Shape = Enum.PartType.Block

Part62 = Instance.new("Part")
Part62.Name = "Part62"
Part62.Parent = Grandosla
Part62.Anchored = true
Part62.CanCollide = true
Part62.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part62.CFrame = CFrame.new(160.49996948242188, 137.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part62.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part62.Material = Enum.Material.Marble
Part62.BrickColor = BrickColor.new("Medium stone grey")
Part62.Transparency = 0
Part62.Reflectance = 0
Part62.Locked = false
Part62.Shape = Enum.PartType.Block

Part93 = Instance.new("Part")
Part93.Name = "Part93"
Part93.Parent = Grandosla
Part93.Anchored = true
Part93.CanCollide = true
Part93.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part93.CFrame = CFrame.new(160.49996948242188, 153.5003662109375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part93.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part93.Material = Enum.Material.Marble
Part93.BrickColor = BrickColor.new("Medium stone grey")
Part93.Transparency = 0
Part93.Reflectance = 0
Part93.Locked = false
Part93.Shape = Enum.PartType.Block

Part40 = Instance.new("Part")
Part40.Name = "Part40"
Part40.Parent = Grandosla
Part40.Anchored = true
Part40.CanCollide = true
Part40.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part40.CFrame = CFrame.new(109.49996948242188, 93.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part40.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part40.Material = Enum.Material.Marble
Part40.BrickColor = BrickColor.new("Medium stone grey")
Part40.Transparency = 0
Part40.Reflectance = 0
Part40.Locked = false
Part40.Shape = Enum.PartType.Block

Part83 = Instance.new("Part")
Part83.Name = "Part83"
Part83.Parent = Grandosla
Part83.Anchored = true
Part83.CanCollide = true
Part83.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part83.CFrame = CFrame.new(160.49996948242188, 191.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part83.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part83.Material = Enum.Material.Marble
Part83.BrickColor = BrickColor.new("Medium stone grey")
Part83.Transparency = 0
Part83.Reflectance = 0
Part83.Locked = false
Part83.Shape = Enum.PartType.Block

Part55 = Instance.new("Part")
Part55.Name = "Part55"
Part55.Parent = Grandosla
Part55.Anchored = true
Part55.CanCollide = true
Part55.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part55.CFrame = CFrame.new(109.49996948242188, 123.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part55.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part55.Material = Enum.Material.Marble
Part55.BrickColor = BrickColor.new("Medium stone grey")
Part55.Transparency = 0
Part55.Reflectance = 0
Part55.Locked = false
Part55.Shape = Enum.PartType.Block

Part18 = Instance.new("Part")
Part18.Name = "Part18"
Part18.Parent = Grandosla
Part18.Anchored = true
Part18.CanCollide = true
Part18.Size = Vector3.new(1.000000, 89.000000, 1.000000)
Part18.CFrame = CFrame.new(111.49996948242188, 80.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part18.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part18.Material = Enum.Material.Marble
Part18.BrickColor = BrickColor.new("Medium stone grey")
Part18.Transparency = 0
Part18.Reflectance = 0
Part18.Locked = false
Part18.Shape = Enum.PartType.Block

Wall3 = Instance.new("Part")
Wall3.Name = "Wall"
Wall3.Parent = Grandosla
Wall3.Anchored = true
Wall3.CanCollide = true
Wall3.Size = Vector3.new(155.000000, 0.400000, 9.100000)
Wall3.CFrame = CFrame.new(111.55000305175781, 142.5, -73.80000305175781, 0, 0, 1, -1, 0, 0, 0, -1, 0)
Wall3.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall3.Material = Enum.Material.Plastic
Wall3.BrickColor = BrickColor.new("Dark stone grey")
Wall3.Transparency = 1
Wall3.Reflectance = 0
Wall3.Locked = false
Wall3.Shape = Enum.PartType.Block
Texture4 = Instance.new("Texture")
Texture4.Name = "Texture"
Texture4.Parent = Wall3
Texture4.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture4.Face = Enum.NormalId.Bottom
Texture4.StudsPerTileU = 5
Texture4.StudsPerTileV = 5
Texture4.Transparency = 0
Texture23 = Instance.new("Texture")
Texture23.Name = "Texture2"
Texture23.Parent = Wall3
Texture23.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture23.Face = Enum.NormalId.Top
Texture23.StudsPerTileU = 5
Texture23.StudsPerTileV = 5
Texture23.Transparency = 0

Part42 = Instance.new("Part")
Part42.Name = "Part42"
Part42.Parent = Grandosla
Part42.Anchored = true
Part42.CanCollide = true
Part42.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part42.CFrame = CFrame.new(109.49996948242188, 59.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part42.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part42.Material = Enum.Material.Marble
Part42.BrickColor = BrickColor.new("Medium stone grey")
Part42.Transparency = 0
Part42.Reflectance = 0
Part42.Locked = false
Part42.Shape = Enum.PartType.Block

Part1211 = Instance.new("Part")
Part1211.Name = "Part121"
Part1211.Parent = Grandosla
Part1211.Anchored = true
Part1211.CanCollide = true
Part1211.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part1211.CFrame = CFrame.new(160.49996948242188, 213.5, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part1211.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1211.Material = Enum.Material.Marble
Part1211.BrickColor = BrickColor.new("Medium stone grey")
Part1211.Transparency = 0
Part1211.Reflectance = 0
Part1211.Locked = false
Part1211.Shape = Enum.PartType.Block

Part125 = Instance.new("Part")
Part125.Name = "Part125"
Part125.Parent = Grandosla
Part125.Anchored = true
Part125.CanCollide = true
Part125.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part125.CFrame = CFrame.new(165, 128, -12, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part125.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part125.Material = Enum.Material.Marble
Part125.BrickColor = BrickColor.new("Medium stone grey")
Part125.Transparency = 0
Part125.Reflectance = 0
Part125.Locked = false
Part125.Shape = Enum.PartType.Block

Part96 = Instance.new("Part")
Part96.Name = "Part96"
Part96.Parent = Grandosla
Part96.Anchored = true
Part96.CanCollide = true
Part96.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part96.CFrame = CFrame.new(160.49996948242188, 203.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part96.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part96.Material = Enum.Material.Marble
Part96.BrickColor = BrickColor.new("Medium stone grey")
Part96.Transparency = 0
Part96.Reflectance = 0
Part96.Locked = false
Part96.Shape = Enum.PartType.Block

Part118 = Instance.new("Part")
Part118.Name = "Part118"
Part118.Parent = Grandosla
Part118.Anchored = true
Part118.CanCollide = true
Part118.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part118.CFrame = CFrame.new(160.49996948242188, 219.49990844726562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part118.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part118.Material = Enum.Material.Marble
Part118.BrickColor = BrickColor.new("Medium stone grey")
Part118.Transparency = 0
Part118.Reflectance = 0
Part118.Locked = false
Part118.Shape = Enum.PartType.Block

Part116 = Instance.new("Part")
Part116.Name = "Part116"
Part116.Parent = Grandosla
Part116.Anchored = true
Part116.CanCollide = true
Part116.Size = Vector3.new(1.000000, 29.000000, 1.000000)
Part116.CFrame = CFrame.new(115.5, 50.5, -73.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part116.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part116.Material = Enum.Material.Marble
Part116.BrickColor = BrickColor.new("Medium stone grey")
Part116.Transparency = 0
Part116.Reflectance = 0
Part116.Locked = false
Part116.Shape = Enum.PartType.Block

Part111 = Instance.new("Part")
Part111.Name = "Part11"
Part111.Parent = Grandosla
Part111.Anchored = true
Part111.CanCollide = true
Part111.Size = Vector3.new(8.000000, 1.000000, 1.000000)
Part111.CFrame = CFrame.new(111, 64.5, -73.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part111.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part111.Material = Enum.Material.Marble
Part111.BrickColor = BrickColor.new("Medium stone grey")
Part111.Transparency = 0
Part111.Reflectance = 0
Part111.Locked = false
Part111.Shape = Enum.PartType.Block

Control = Instance.new("Model")
Control.Name = "Control"
Control.Parent = Grandosla
ComputerRoot = Instance.new("Part")
ComputerRoot.Name = "ComputerRoot"
ComputerRoot.Parent = Control
ComputerRoot.Anchored = true
ComputerRoot.CanCollide = true
ComputerRoot.Size = Vector3.new(4.000000, 4.000000, 1.000000)
ComputerRoot.CFrame = CFrame.new(150.5, 225, -42, 0, 0, 1, -1, 0, 0, 0, -1, 0)
ComputerRoot.Color = Color3.new(0.356863, 0.364706, 0.411765)
ComputerRoot.Material = Enum.Material.Plastic
ComputerRoot.BrickColor = BrickColor.new("Smoky grey")
ComputerRoot.Transparency = 0
ComputerRoot.Reflectance = 0
ComputerRoot.Locked = false
ComputerRoot.Shape = Enum.PartType.Block
Screen = Instance.new("Part")
Screen.Name = "Screen"
Screen.Parent = Control
Screen.Anchored = true
Screen.CanCollide = true
Screen.Size = Vector3.new(3.500000, 3.500000, 0.500000)
Screen.CFrame = CFrame.new(150.85000610351562, 225, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Screen.Color = Color3.new(0.015686, 0.686275, 0.925490)
Screen.Material = Enum.Material.Glass
Screen.BrickColor = BrickColor.new("Cyan")
Screen.Transparency = 0
Screen.Reflectance = 0
Screen.Locked = false
Screen.Shape = Enum.PartType.Block
SurfaceGui1 = Instance.new("SurfaceGui")
SurfaceGui1.Name = "SurfaceGui"
SurfaceGui1.Parent = Screen
SurfaceGui1.AlwaysOnTop = false
SurfaceGui1.CanvasSize = Vector2.new(800.000000, 600.000000)
SurfaceGui1.ClipsDescendants = true
SurfaceGui1.Face = Enum.NormalId.Back
SurfaceGui1.LightInfluence = 1
SurfaceGui1.SizingMode = Enum.SurfaceGuiSizingMode.PixelsPerStud
TextLabel1 = Instance.new("TextLabel")
TextLabel1.Name = "TextLabel"
TextLabel1.Parent = SurfaceGui1
TextLabel1.Text = "Grandosla Control Panel"
TextLabel1.Font = Enum.Font.SourceSansBold
TextLabel1.TextSize = 16
TextLabel1.TextColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel1.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel1.Size = UDim2.new(1, 0, 0, 50)
TextLabel1.Position = UDim2.new(0, 0, 0, 0)
TextLabel1.BorderSizePixel = 1
TextLabel1.BackgroundTransparency = 1
ClickDetector = Instance.new("ClickDetector")
ClickDetector.Name = "ClickDetector"
ClickDetector.Parent = Screen
ClickDetector.MaxActivationDistance = 32
ClickDetector.CursorIcon = ""

Part86 = Instance.new("Part")
Part86.Name = "Part86"
Part86.Parent = Grandosla
Part86.Anchored = true
Part86.CanCollide = true
Part86.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part86.CFrame = CFrame.new(160.49996948242188, 157.50030517578125, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part86.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part86.Material = Enum.Material.Marble
Part86.BrickColor = BrickColor.new("Medium stone grey")
Part86.Transparency = 0
Part86.Reflectance = 0
Part86.Locked = false
Part86.Shape = Enum.PartType.Block

Part70 = Instance.new("Part")
Part70.Name = "Part70"
Part70.Parent = Grandosla
Part70.Anchored = true
Part70.CanCollide = true
Part70.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part70.CFrame = CFrame.new(160.49996948242188, 145.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part70.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part70.Material = Enum.Material.Marble
Part70.BrickColor = BrickColor.new("Medium stone grey")
Part70.Transparency = 0
Part70.Reflectance = 0
Part70.Locked = false
Part70.Shape = Enum.PartType.Block

Part66 = Instance.new("Part")
Part66.Name = "Part66"
Part66.Parent = Grandosla
Part66.Anchored = true
Part66.CanCollide = true
Part66.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part66.CFrame = CFrame.new(160.49996948242188, 133.5002899169922, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part66.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part66.Material = Enum.Material.Marble
Part66.BrickColor = BrickColor.new("Medium stone grey")
Part66.Transparency = 0
Part66.Reflectance = 0
Part66.Locked = false
Part66.Shape = Enum.PartType.Block

Part46 = Instance.new("Part")
Part46.Name = "Part46"
Part46.Parent = Grandosla
Part46.Anchored = true
Part46.CanCollide = true
Part46.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part46.CFrame = CFrame.new(109.49996948242188, 105.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part46.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part46.Material = Enum.Material.Marble
Part46.BrickColor = BrickColor.new("Medium stone grey")
Part46.Transparency = 0
Part46.Reflectance = 0
Part46.Locked = false
Part46.Shape = Enum.PartType.Block

StairCollide = Instance.new("WedgePart")
StairCollide.Name = "StairCollide"
StairCollide.Parent = Grandosla
StairCollide.Anchored = true
StairCollide.CanCollide = true
StairCollide.Size = Vector3.new(8.000000, 16.000000, 8.000000)
StairCollide.CFrame = CFrame.new(111, 44, -70, -1, 0, 0, 0, 1, 0, 0, 0, -1)
StairCollide.Color = Color3.new(0.639216, 0.635294, 0.647059)
StairCollide.Material = Enum.Material.Plastic
StairCollide.BrickColor = BrickColor.new("Medium stone grey")
StairCollide.Transparency = 1
StairCollide.Reflectance = 0
StairCollide.Locked = false

Part67 = Instance.new("Part")
Part67.Name = "Part67"
Part67.Parent = Grandosla
Part67.Anchored = true
Part67.CanCollide = true
Part67.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part67.CFrame = CFrame.new(160.49996948242188, 139.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part67.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part67.Material = Enum.Material.Marble
Part67.BrickColor = BrickColor.new("Medium stone grey")
Part67.Transparency = 0
Part67.Reflectance = 0
Part67.Locked = false
Part67.Shape = Enum.PartType.Block

Wall4 = Instance.new("Part")
Wall4.Name = "Wall"
Wall4.Parent = Grandosla
Wall4.Anchored = true
Wall4.CanCollide = true
Wall4.Size = Vector3.new(184.500000, 0.400000, 47.000000)
Wall4.CFrame = CFrame.new(139.5, 127.74999237060547, -73.80000305175781, 0, 0, 1, -1, 0, 0, 0, -1, 0)
Wall4.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall4.Material = Enum.Material.Plastic
Wall4.BrickColor = BrickColor.new("Dark stone grey")
Wall4.Transparency = 1
Wall4.Reflectance = 0
Wall4.Locked = false
Wall4.Shape = Enum.PartType.Block
Texture5 = Instance.new("Texture")
Texture5.Name = "Texture"
Texture5.Parent = Wall4
Texture5.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture5.Face = Enum.NormalId.Bottom
Texture5.StudsPerTileU = 5
Texture5.StudsPerTileV = 5
Texture5.Transparency = 0
Texture24 = Instance.new("Texture")
Texture24.Name = "Texture2"
Texture24.Parent = Wall4
Texture24.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture24.Face = Enum.NormalId.Top
Texture24.StudsPerTileU = 5
Texture24.StudsPerTileV = 5
Texture24.Transparency = 0

Part49 = Instance.new("Part")
Part49.Name = "Part49"
Part49.Parent = Grandosla
Part49.Anchored = true
Part49.CanCollide = true
Part49.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part49.CFrame = CFrame.new(109.49996948242188, 101.49988555908203, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part49.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part49.Material = Enum.Material.Marble
Part49.BrickColor = BrickColor.new("Medium stone grey")
Part49.Transparency = 0
Part49.Reflectance = 0
Part49.Locked = false
Part49.Shape = Enum.PartType.Block

Part610 = Instance.new("Part")
Part610.Name = "Part6"
Part610.Parent = Grandosla
Part610.Anchored = true
Part610.CanCollide = true
Part610.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part610.CFrame = CFrame.new(166.5, 222.5, -73.5, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part610.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part610.Material = Enum.Material.Marble
Part610.BrickColor = BrickColor.new("Medium stone grey")
Part610.Transparency = 0
Part610.Reflectance = 0
Part610.Locked = false
Part610.Shape = Enum.PartType.Block

Storm = Instance.new("Sound")
Storm.Name = "Storm"
Storm.Parent = Grandosla
Storm.SoundId = "rbxassetid://3981355300"
Storm.Volume = 0.5
Storm.Playing = false

Defense = Instance.new("Part")
Defense.Name = "Defense"
Defense.Parent = Grandosla
Defense.Anchored = true
Defense.CanCollide = false
Defense.Size = Vector3.new(64.000000, 158.000000, 64.000000)
Defense.CFrame = CFrame.new(135, 115.00000762939453, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Defense.Color = Color3.new(0.929412, 0.917647, 0.917647)
Defense.Material = Enum.Material.Plastic
Defense.BrickColor = BrickColor.new("Lily white")
Defense.Transparency = 1
Defense.Reflectance = 0
Defense.Locked = false
Defense.Shape = Enum.PartType.Block
ParticleEmitter = Instance.new("ParticleEmitter")
ParticleEmitter.Parent = Defense
ParticleEmitter.Acceleration = Vector3.new(0.000000, 0.000000, 0.000000)
ParticleEmitter.Brightness = 1
ParticleEmitter.Color = ColorSequence.new({ColorSequenceKeypoint.new(0.0000, Color3.new(1.0000, 1.0000, 1.0000)), ColorSequenceKeypoint.new(1.0000, Color3.new(1.0000, 1.0000, 1.0000))})
ParticleEmitter.Drag = 0
ParticleEmitter.EmissionDirection = Enum.NormalId.Bottom
ParticleEmitter.Enabled = false
ParticleEmitter.FlipbookFramerate = NumberRange.new(1.0000, 1.0000)
ParticleEmitter.FlipbookLayout = Enum.ParticleFlipbookLayout.None
ParticleEmitter.FlipbookMode = Enum.ParticleFlipbookMode.Loop
ParticleEmitter.Lifetime = NumberRange.new(1.0000, 1.0000)
ParticleEmitter.LightEmission = 0.8299999833106995
ParticleEmitter.LightInfluence = 0
ParticleEmitter.LockedToPart = true
ParticleEmitter.Orientation = Enum.ParticleOrientation.FacingCamera
ParticleEmitter.Rate = 100
ParticleEmitter.Rotation = NumberRange.new(1000.0000, 1000.0000)
ParticleEmitter.RotSpeed = NumberRange.new(100000.0000, 100000.0000)
ParticleEmitter.Shape = Enum.ParticleEmitterShape.Box
ParticleEmitter.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
ParticleEmitter.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
ParticleEmitter.Size = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 20.0000), NumberSequenceKeypoint.new(1.0000, 20.0000)})
ParticleEmitter.Speed = NumberRange.new(20.0000, 20.0000)
ParticleEmitter.SpreadAngle = Vector2.new(-20.000000, 20.000000)
ParticleEmitter.Texture = "rbxassetid://255514024"
ParticleEmitter.TimeScale = 1
ParticleEmitter.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 1.0000), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1.0000), NumberSequenceKeypoint.new(0.0137, 0.0000), NumberSequenceKeypoint.new(0.1406, 1.0000), NumberSequenceKeypoint.new(0.1550, 0.0000), NumberSequenceKeypoint.new(0.1603, 1.0000), NumberSequenceKeypoint.new(0.3017, 1.0000), NumberSequenceKeypoint.new(0.3047, 0.0000), NumberSequenceKeypoint.new(0.3047, 1.0000), NumberSequenceKeypoint.new(0.4711, 1.0000), NumberSequenceKeypoint.new(0.4780, 0.0000), NumberSequenceKeypoint.new(0.4802, 1.0000), NumberSequenceKeypoint.new(0.6717, 1.0000), NumberSequenceKeypoint.new(0.6748, 0.0000), NumberSequenceKeypoint.new(0.6793, 1.0000), NumberSequenceKeypoint.new(0.8442, 1.0000), NumberSequenceKeypoint.new(0.8465, 0.0000), NumberSequenceKeypoint.new(0.8511, 1.0000), NumberSequenceKeypoint.new(1.0000, 1.0000)})
ParticleEmitter.VelocityInheritance = 0
ParticleEmitter.ZOffset = 0
Lightning = Instance.new("ParticleEmitter")
Lightning.Parent = Defense
Lightning.Acceleration = Vector3.new(0.000000, 0.000000, 0.000000)
Lightning.Brightness = 1
Lightning.Color = ColorSequence.new({ColorSequenceKeypoint.new(0.0000, Color3.new(1.0000, 1.0000, 1.0000)), ColorSequenceKeypoint.new(1.0000, Color3.new(1.0000, 1.0000, 1.0000))})
Lightning.Drag = 0
Lightning.EmissionDirection = Enum.NormalId.Bottom
Lightning.Enabled = false
Lightning.FlipbookFramerate = NumberRange.new(1.0000, 1.0000)
Lightning.FlipbookLayout = Enum.ParticleFlipbookLayout.None
Lightning.FlipbookMode = Enum.ParticleFlipbookMode.Loop
Lightning.Lifetime = NumberRange.new(1.0000, 1.0000)
Lightning.LightEmission = 0.8299999833106995
Lightning.LightInfluence = 0
Lightning.LockedToPart = true
Lightning.Orientation = Enum.ParticleOrientation.FacingCamera
Lightning.Rate = 100
Lightning.Rotation = NumberRange.new(1000.0000, 1000.0000)
Lightning.RotSpeed = NumberRange.new(100000.0000, 100000.0000)
Lightning.Shape = Enum.ParticleEmitterShape.Box
Lightning.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
Lightning.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
Lightning.Size = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 40.0000), NumberSequenceKeypoint.new(1.0000, 40.0000)})
Lightning.Speed = NumberRange.new(20.0000, 20.0000)
Lightning.SpreadAngle = Vector2.new(-20.000000, 20.000000)
Lightning.Texture = "rbxassetid://543954894"
Lightning.TimeScale = 1
Lightning.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 1.0000), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1.0000), NumberSequenceKeypoint.new(0.0137, 0.0000), NumberSequenceKeypoint.new(0.1406, 1.0000), NumberSequenceKeypoint.new(0.1550, 0.0000), NumberSequenceKeypoint.new(0.1603, 1.0000), NumberSequenceKeypoint.new(0.3017, 1.0000), NumberSequenceKeypoint.new(0.3047, 0.0000), NumberSequenceKeypoint.new(0.3047, 1.0000), NumberSequenceKeypoint.new(0.4711, 1.0000), NumberSequenceKeypoint.new(0.4780, 0.0000), NumberSequenceKeypoint.new(0.4802, 1.0000), NumberSequenceKeypoint.new(0.6717, 1.0000), NumberSequenceKeypoint.new(0.6748, 0.0000), NumberSequenceKeypoint.new(0.6793, 1.0000), NumberSequenceKeypoint.new(0.8442, 1.0000), NumberSequenceKeypoint.new(0.8465, 0.0000), NumberSequenceKeypoint.new(0.8511, 1.0000), NumberSequenceKeypoint.new(1.0000, 1.0000)})
Lightning.VelocityInheritance = 0
Lightning.ZOffset = 0
Collide = Instance.new("Part")
Collide.Name = "Collide"
Collide.Parent = Defense
Collide.Anchored = true
Collide.CanCollide = false
Collide.Size = Vector3.new(64.000000, 181.000000, 64.000000)
Collide.CFrame = CFrame.new(135, 126.5, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Collide.Color = Color3.new(0.929412, 0.917647, 0.917647)
Collide.Material = Enum.Material.Plastic
Collide.BrickColor = BrickColor.new("Lily white")
Collide.Transparency = 1
Collide.Reflectance = 0
Collide.Locked = false
Collide.Shape = Enum.PartType.Block
Sound = Instance.new("Sound")
Sound.Name = "Sound"
Sound.Parent = Defense

Part44 = Instance.new("Part")
Part44.Name = "Part44"
Part44.Parent = Grandosla
Part44.Anchored = true
Part44.CanCollide = true
Part44.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part44.CFrame = CFrame.new(109.49996948242188, 73.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part44.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part44.Material = Enum.Material.Marble
Part44.BrickColor = BrickColor.new("Medium stone grey")
Part44.Transparency = 0
Part44.Reflectance = 0
Part44.Locked = false
Part44.Shape = Enum.PartType.Block

Part36 = Instance.new("Part")
Part36.Name = "Part36"
Part36.Parent = Grandosla
Part36.Anchored = true
Part36.CanCollide = true
Part36.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part36.CFrame = CFrame.new(109.49996948242188, 89.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part36.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part36.Material = Enum.Material.Marble
Part36.BrickColor = BrickColor.new("Medium stone grey")
Part36.Transparency = 0
Part36.Reflectance = 0
Part36.Locked = false
Part36.Shape = Enum.PartType.Block

Part26 = Instance.new("Part")
Part26.Name = "Part2"
Part26.Parent = Grandosla
Part26.Anchored = true
Part26.CanCollide = true
Part26.Size = Vector3.new(51.000000, 1.000000, 5.000000)
Part26.CFrame = CFrame.new(132.5, 220.5, -12.5, -1, 0, 0, 0, 1, 0, 0, 0, -1)
Part26.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part26.Material = Enum.Material.Marble
Part26.BrickColor = BrickColor.new("Medium stone grey")
Part26.Transparency = 0
Part26.Reflectance = 0
Part26.Locked = false
Part26.Shape = Enum.PartType.Block

Part50 = Instance.new("Part")
Part50.Name = "Part50"
Part50.Parent = Grandosla
Part50.Anchored = true
Part50.CanCollide = true
Part50.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part50.CFrame = CFrame.new(109.49996948242188, 111.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part50.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part50.Material = Enum.Material.Marble
Part50.BrickColor = BrickColor.new("Medium stone grey")
Part50.Transparency = 0
Part50.Reflectance = 0
Part50.Locked = false
Part50.Shape = Enum.PartType.Block

Part88 = Instance.new("Part")
Part88.Name = "Part88"
Part88.Parent = Grandosla
Part88.Anchored = true
Part88.CanCollide = true
Part88.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part88.CFrame = CFrame.new(160.49996948242188, 155.5003662109375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part88.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part88.Material = Enum.Material.Marble
Part88.BrickColor = BrickColor.new("Medium stone grey")
Part88.Transparency = 0
Part88.Reflectance = 0
Part88.Locked = false
Part88.Shape = Enum.PartType.Block

CornerWedge2 = Instance.new("CornerWedgePart")
CornerWedge2.Name = "CornerWedge"
CornerWedge2.Parent = Grandosla
CornerWedge2.Anchored = true
CornerWedge2.CanCollide = true
CornerWedge2.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge2.CFrame = CFrame.new(95, 44, -2, 1, 0, 0, 0, 1, 0, 0, 0, 1)
CornerWedge2.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge2.Material = Enum.Material.Marble
CornerWedge2.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge2.Transparency = 0
CornerWedge2.Reflectance = 0
CornerWedge2.Locked = false

Part410 = Instance.new("Part")
Part410.Name = "Part4"
Part410.Parent = Grandosla
Part410.Anchored = true
Part410.CanCollide = true
Part410.Size = Vector3.new(64.000000, 1.000000, 4.000000)
Part410.CFrame = CFrame.new(165, 220.5, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part410.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part410.Material = Enum.Material.Marble
Part410.BrickColor = BrickColor.new("Medium stone grey")
Part410.Transparency = 0
Part410.Reflectance = 0
Part410.Locked = false
Part410.Shape = Enum.PartType.Block

Root = Instance.new("Part")
Root.Name = "Root"
Root.Parent = Grandosla
Root.Anchored = true
Root.CanCollide = true
Root.Size = Vector3.new(96.000000, 1.000000, 96.000000)
Root.CFrame = CFrame.new(135, 35.5, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Root.Color = Color3.new(0.639216, 0.635294, 0.647059)
Root.Material = Enum.Material.Marble
Root.BrickColor = BrickColor.new("Medium stone grey")
Root.Transparency = 0
Root.Reflectance = 0
Root.Locked = false
Root.Shape = Enum.PartType.Block

Part1111 = Instance.new("Part")
Part1111.Name = "Part111"
Part1111.Parent = Grandosla
Part1111.Anchored = true
Part1111.CanCollide = true
Part1111.Size = Vector3.new(8.000000, 14.000000, 1.000000)
Part1111.CFrame = CFrame.new(111, 43, -73.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part1111.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1111.Material = Enum.Material.Marble
Part1111.BrickColor = BrickColor.new("Medium stone grey")
Part1111.Transparency = 0
Part1111.Reflectance = 0
Part1111.Locked = false
Part1111.Shape = Enum.PartType.Block

Part32 = Instance.new("Part")
Part32.Name = "Part3"
Part32.Parent = Grandosla
Part32.Anchored = true
Part32.CanCollide = true
Part32.Size = Vector3.new(5.000000, 1.000000, 1.000000)
Part32.CFrame = CFrame.new(160.5, 220.5, -10.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part32.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part32.Material = Enum.Material.Marble
Part32.BrickColor = BrickColor.new("Medium stone grey")
Part32.Transparency = 0
Part32.Reflectance = 0
Part32.Locked = false
Part32.Shape = Enum.PartType.Block

CornerWedge3 = Instance.new("CornerWedgePart")
CornerWedge3.Name = "CornerWedge"
CornerWedge3.Parent = Grandosla
CornerWedge3.Anchored = true
CornerWedge3.CanCollide = true
CornerWedge3.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge3.CFrame = CFrame.new(175, 44, -2, 0, 0, 1, 0, 1, -0, -1, 0, 0)
CornerWedge3.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge3.Material = Enum.Material.Marble
CornerWedge3.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge3.Transparency = 0
CornerWedge3.Reflectance = 0
CornerWedge3.Locked = false

Part52 = Instance.new("Part")
Part52.Name = "Part52"
Part52.Parent = Grandosla
Part52.Anchored = true
Part52.CanCollide = true
Part52.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part52.CFrame = CFrame.new(109.49996948242188, 113.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part52.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part52.Material = Enum.Material.Marble
Part52.BrickColor = BrickColor.new("Medium stone grey")
Part52.Transparency = 0
Part52.Reflectance = 0
Part52.Locked = false
Part52.Shape = Enum.PartType.Block

Part321 = Instance.new("Part")
Part321.Name = "Part32"
Part321.Parent = Grandosla
Part321.Anchored = true
Part321.CanCollide = true
Part321.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part321.CFrame = CFrame.new(109.49996948242188, 97.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part321.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part321.Material = Enum.Material.Marble
Part321.BrickColor = BrickColor.new("Medium stone grey")
Part321.Transparency = 0
Part321.Reflectance = 0
Part321.Locked = false
Part321.Shape = Enum.PartType.Block

Part97 = Instance.new("Part")
Part97.Name = "Part97"
Part97.Parent = Grandosla
Part97.Anchored = true
Part97.CanCollide = true
Part97.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part97.CFrame = CFrame.new(160.49996948242188, 211.5004119873047, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part97.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part97.Material = Enum.Material.Marble
Part97.BrickColor = BrickColor.new("Medium stone grey")
Part97.Transparency = 0
Part97.Reflectance = 0
Part97.Locked = false
Part97.Shape = Enum.PartType.Block

Part261 = Instance.new("Part")
Part261.Name = "Part26"
Part261.Parent = Grandosla
Part261.Anchored = true
Part261.CanCollide = true
Part261.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part261.CFrame = CFrame.new(109.49996948242188, 85.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part261.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part261.Material = Enum.Material.Marble
Part261.BrickColor = BrickColor.new("Medium stone grey")
Part261.Transparency = 0
Part261.Reflectance = 0
Part261.Locked = false
Part261.Shape = Enum.PartType.Block

Part85 = Instance.new("Part")
Part85.Name = "Part85"
Part85.Parent = Grandosla
Part85.Anchored = true
Part85.CanCollide = true
Part85.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part85.CFrame = CFrame.new(160.49996948242188, 147.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part85.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part85.Material = Enum.Material.Marble
Part85.BrickColor = BrickColor.new("Medium stone grey")
Part85.Transparency = 0
Part85.Reflectance = 0
Part85.Locked = false
Part85.Shape = Enum.PartType.Block

Part114 = Instance.new("Part")
Part114.Name = "Part114"
Part114.Parent = Grandosla
Part114.Anchored = true
Part114.CanCollide = true
Part114.Size = Vector3.new(64.000000, 1.000000, 1.000000)
Part114.CFrame = CFrame.new(103.500244140625, 224.49996948242188, -42.0001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part114.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part114.Material = Enum.Material.Marble
Part114.BrickColor = BrickColor.new("Medium stone grey")
Part114.Transparency = 0
Part114.Reflectance = 0
Part114.Locked = false
Part114.Shape = Enum.PartType.Block

Part95 = Instance.new("Part")
Part95.Name = "Part95"
Part95.Parent = Grandosla
Part95.Anchored = true
Part95.CanCollide = true
Part95.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part95.CFrame = CFrame.new(160.49996948242188, 193.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part95.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part95.Material = Enum.Material.Marble
Part95.BrickColor = BrickColor.new("Medium stone grey")
Part95.Transparency = 0
Part95.Reflectance = 0
Part95.Locked = false
Part95.Shape = Enum.PartType.Block

Part53 = Instance.new("Part")
Part53.Name = "Part53"
Part53.Parent = Grandosla
Part53.Anchored = true
Part53.CanCollide = true
Part53.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part53.CFrame = CFrame.new(109.49996948242188, 99.49988555908203, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part53.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part53.Material = Enum.Material.Marble
Part53.BrickColor = BrickColor.new("Medium stone grey")
Part53.Transparency = 0
Part53.Reflectance = 0
Part53.Locked = false
Part53.Shape = Enum.PartType.Block

Part108 = Instance.new("Part")
Part108.Name = "Part108"
Part108.Parent = Grandosla
Part108.Anchored = true
Part108.CanCollide = true
Part108.Size = Vector3.new(8.000000, 4.000000, 1.000000)
Part108.CFrame = CFrame.new(111, 38, -68.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part108.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part108.Material = Enum.Material.Marble
Part108.BrickColor = BrickColor.new("Medium stone grey")
Part108.Transparency = 0
Part108.Reflectance = 0
Part108.Locked = false
Part108.Shape = Enum.PartType.Block

Part89 = Instance.new("Part")
Part89.Name = "Part89"
Part89.Parent = Grandosla
Part89.Anchored = true
Part89.CanCollide = true
Part89.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part89.CFrame = CFrame.new(160.49996948242188, 159.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part89.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part89.Material = Enum.Material.Marble
Part89.BrickColor = BrickColor.new("Medium stone grey")
Part89.Transparency = 0
Part89.Reflectance = 0
Part89.Locked = false
Part89.Shape = Enum.PartType.Block

Wedge3 = Instance.new("WedgePart")
Wedge3.Name = "Wedge"
Wedge3.Parent = Grandosla
Wedge3.Anchored = true
Wedge3.CanCollide = true
Wedge3.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge3.CFrame = CFrame.new(175, 44, -42, 0, 0, -1, 0, 1, 0, 1, 0, 0)
Wedge3.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge3.Material = Enum.Material.Marble
Wedge3.BrickColor = BrickColor.new("Medium stone grey")
Wedge3.Transparency = 0
Wedge3.Reflectance = 0
Wedge3.Locked = false

Part98 = Instance.new("Part")
Part98.Name = "Part98"
Part98.Parent = Grandosla
Part98.Anchored = true
Part98.CanCollide = true
Part98.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part98.CFrame = CFrame.new(160.49996948242188, 197.5004425048828, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part98.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part98.Material = Enum.Material.Marble
Part98.BrickColor = BrickColor.new("Medium stone grey")
Part98.Transparency = 0
Part98.Reflectance = 0
Part98.Locked = false
Part98.Shape = Enum.PartType.Block

local Folder = Instance.new("Folder")
Folder.Parent = game:GetService("ReplicatedStorage")
Folder.Name = "Folder"

local Lightning = Instance.new("Part")
Lightning.Parent = Folder
Lightning.Name = "Lightning"
Lightning.Anchored = true
Lightning.CanCollide = false
Lightning.Size = Vector3.new(20.000000, 50.000000, 20.000000)
Lightning.CFrame = CFrame.new(-184.5, 60, 23, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Lightning.Color = Color3.new(0.639216, 0.635294, 0.647059)
Lightning.Material = Enum.Material.Plastic
Lightning.BrickColor = BrickColor.new("Medium stone grey")
Lightning.Transparency = 1
Lightning.Reflectance = 0
Lightning = Enum.PartType.Block
local Collid = Instance.new("Part")
Collid.Parent = Folder.Lightning
Collid.Name = "Collid"
Collid.Anchored = true
Collid.CanCollide = false
Collid.Size = Vector3.new(50, 100, 100)
Collid.CFrame = CFrame.new(-184.5, 60, 23, 0, 1, -0, -1, 0, 0, 0, 0, 1)
Collid.Color = Color3.new(0.639216, 0.635294, 0.647059)
Collid.Material = Enum.Material.Plastic
Collid.BrickColor = BrickColor.new("Medium stone grey")
Collid.Transparency = 1
Collid.Reflectance = 0
Collid.Shape = Enum.PartType.Cylinder
local ParticleEmitter = Instance.new("ParticleEmitter")
ParticleEmitter.Parent = Folder.Lightning
ParticleEmitter.Acceleration = Vector3.new(0, 0, 0)
ParticleEmitter.Brightness = 1
ParticleEmitter.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)), ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))})
ParticleEmitter.Drag = 0
ParticleEmitter.EmissionDirection = Enum.NormalId.Bottom
ParticleEmitter.Enabled = true
ParticleEmitter.FlipbookFramerate = NumberRange.new(1, 1)
ParticleEmitter.FlipbookLayout = Enum.ParticleFlipbookLayout.None
ParticleEmitter.FlipbookMode = Enum.ParticleFlipbookMode.Loop
ParticleEmitter.Lifetime = NumberRange.new(1, 1)
ParticleEmitter.LightEmission = 0.8299999833106995
ParticleEmitter.LightInfluence = 0
ParticleEmitter.LockedToPart = true
ParticleEmitter.Orientation = Enum.ParticleOrientation.FacingCamera
ParticleEmitter.Rate = 80
ParticleEmitter.Rotation = NumberRange.new(1000, 1000)
ParticleEmitter.RotSpeed = NumberRange.new(100000, 100000)
ParticleEmitter.Shape = Enum.ParticleEmitterShape.Box
ParticleEmitter.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
ParticleEmitter.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
ParticleEmitter.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 50), NumberSequenceKeypoint.new(1, 50)})
ParticleEmitter.Speed = NumberRange.new(0, 0)
ParticleEmitter.SpreadAngle = Vector2.new(-20, 20)
ParticleEmitter.Texture = "rbxassetid://255514024"
ParticleEmitter.TimeScale = 1
ParticleEmitter.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1), NumberSequenceKeypoint.new(0.0137, 0), NumberSequenceKeypoint.new(0.1406, 1), NumberSequenceKeypoint.new(0.1550, 0), NumberSequenceKeypoint.new(0.1603, 1), NumberSequenceKeypoint.new(0.3017, 1), NumberSequenceKeypoint.new(0.3047, 0), NumberSequenceKeypoint.new(0.3047, 1), NumberSequenceKeypoint.new(0.4711, 1), NumberSequenceKeypoint.new(0.4780, 0), NumberSequenceKeypoint.new(0.4802, 1), NumberSequenceKeypoint.new(0.6717, 1), NumberSequenceKeypoint.new(0.6748, 0), NumberSequenceKeypoint.new(0.6793, 1), NumberSequenceKeypoint.new(0.8442, 1), NumberSequenceKeypoint.new(0.8465, 0), NumberSequenceKeypoint.new(0.8511, 1), NumberSequenceKeypoint.new(1, 1)})
ParticleEmitter.VelocityInheritance = 0
ParticleEmitter.ZOffset = 0
local Lightning1 = Instance.new("ParticleEmitter")
Lightning1.Parent = Folder.Lightning
Lightning1.Acceleration = Vector3.new(0, 0, 0)
Lightning1.Brightness = 1
Lightning1.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)), ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))})
Lightning1.Drag = 0
Lightning1.EmissionDirection = Enum.NormalId.Bottom
Lightning1.Enabled = true
Lightning1.FlipbookFramerate = NumberRange.new(1, 1)
Lightning1.FlipbookLayout = Enum.ParticleFlipbookLayout.None
Lightning1.FlipbookMode = Enum.ParticleFlipbookMode.Loop
Lightning1.Lifetime = NumberRange.new(1, 1)
Lightning1.LightEmission = 0.8299999833106995
Lightning1.LightInfluence = 0
Lightning1.LockedToPart = true
Lightning1.Orientation = Enum.ParticleOrientation.FacingCamera
Lightning1.Rate = 80
Lightning1.Rotation = NumberRange.new(1000, 1000)
Lightning1.RotSpeed = NumberRange.new(100000, 100000)
Lightning1.Shape = Enum.ParticleEmitterShape.Box
Lightning1.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
Lightning1.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
Lightning1.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 100), NumberSequenceKeypoint.new(1, 100)})
Lightning1.Speed = NumberRange.new(0, 0)
Lightning1.SpreadAngle = Vector2.new(-20, 20)
Lightning1.Texture = "rbxassetid://543954894"
Lightning1.TimeScale = 1
Lightning1.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1), NumberSequenceKeypoint.new(0.0137, 0), NumberSequenceKeypoint.new(0.1406, 1), NumberSequenceKeypoint.new(0.1550, 0), NumberSequenceKeypoint.new(0.1603, 1), NumberSequenceKeypoint.new(0.3017, 1), NumberSequenceKeypoint.new(0.3047, 0), NumberSequenceKeypoint.new(0.3047, 1), NumberSequenceKeypoint.new(0.4711, 1), NumberSequenceKeypoint.new(0.4780, 0), NumberSequenceKeypoint.new(0.4802, 1), NumberSequenceKeypoint.new(0.6717, 1), NumberSequenceKeypoint.new(0.6748, 0), NumberSequenceKeypoint.new(0.6793, 1), NumberSequenceKeypoint.new(0.8442, 1), NumberSequenceKeypoint.new(0.8465, 0), NumberSequenceKeypoint.new(0.8511, 1), NumberSequenceKeypoint.new(1, 1)})
Lightning1.VelocityInheritance = 0
Lightning1.ZOffset = 0

local Thunder = Instance.new("Sound")
Thunder.Name = "Thunder"
Thunder.Parent = Folder
Thunder.SoundId = "rbxassetid://6458308055"
Thunder.Volume = 1
Thunder.PlaybackSpeed = 1
Thunder.Looped = false
Thunder.Playing = false
Thunder.TimePosition = 0
Thunder.RollOffMaxDistance = 10000
Thunder.RollOffMinDistance = 10
Thunder.RollOffMode = Enum.RollOffMode.Inverse
Thunder.EmitterSize = 10

local grand = Grandosla
local Players = game:GetService("Players")
local plr = Players.LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local hum = char:WaitForChild("Humanoid")
local height
if hum.RigType == Enum.HumanoidRigType.R15 then
    height = hum.HipHeight+1
else
    height = 3
end

grand:PivotTo(
	CFrame.new(hrp.Position, hrp.Position + hrp.CFrame.LookVector)
		* CFrame.Angles(0, math.pi, 0)
		+ hrp.CFrame.LookVector * 70
		+ Vector3.new(0, 154, 0)
		- Vector3.new(0, height, 0)
)

local resources = game:GetService("ReplicatedStorage"):FindFirstChild("Folder")
local lightningTemplate = resources.Lightning
 
local rings = Rings
local defense = Defense
local defenseCollision = Collide
local peak = peak
local ringCore = RingCore
 
local teslaOn = false
 
local ringTable = {}
 
local powerSwitching = false
local stormThread
local stormBusy = false
 
local modelSettings = {
Storm = false,
DestroyAnchored = false,
MaxMass = 0,
Defense = false
}
 
local players = game:GetService("Players")
 
local remoteE = game:GetService("ReplicatedStorage"):FindFirstChild("GrandoslaControlE") or Instance.new("RemoteEvent")
remoteE.Name = "GrandoslaControlE"
remoteE.Parent = game:GetService("ReplicatedStorage")
local remoteF = game:GetService("ReplicatedStorage"):FindFirstChild("GrandoslaControlF") or Instance.new("RemoteFunction")
remoteF.Name = "GrandoslaControlF"
remoteF.Parent = game:GetService("ReplicatedStorage")
 
 
local plr = game:GetService("Players").LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local hum = char:WaitForChild("Humanoid")

 
 
-- Destroyer
local maxSplit = 8
local max = math.max
local min = math.min

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local function splitPart(part, vel)
    if not part or part:IsA("MeshPart") or part:IsA("Terrain") or part:GetAttribute("ExSplit") then
        return
    end

	part:SetAttribute("ExSplit", true)

	local isUnion = part:IsA("UnionOperation") or part:IsA("WedgePart")
		or part:IsA("CornerWedgePart") or (part:IsA("Part") and part.Shape ~= Enum.PartType.Block)

	local split = part:Clone()
	split:SetAttribute("ExSplit", false)
	split:SetAttribute("ExBroken", false)
	split:SetAttribute("IsSplitPart", true)

	local newSizeX = split.Size.X / 2
	local newSizeY = split.Size.Y / 2
	local newSizeZ = split.Size.Z / 2

	local canSplitX = (split.Size.X >= maxSplit)
	local canSplitY = (split.Size.Y >= maxSplit)
	local canSplitZ = (split.Size.Z >= maxSplit)

	if not canSplitX and not canSplitY and not canSplitZ then
		return
	end

	split.Size = Vector3.new(
		canSplitX and newSizeX or split.Size.X,
		canSplitY and newSizeY or split.Size.Y,
		canSplitZ and newSizeZ or split.Size.Z
	)

	local xIter = canSplitX and -1 or 0
	local yIter = canSplitY and -1 or 0
	local zIter = canSplitZ and -1 or 0

	for _, scr in pairs(split:GetChildren()) do
		if scr:IsA("LuaSourceContainer") then
			scr:Destroy()
		end
	end

	local qSize = part.Size / 4
	local partPar = part.Parent

	if isUnion then
		local cut = Instance.new("Part")
		cut.Size = split.Size * 1.01
		cut.Anchored = true
		cut.Transparency = 1

		part.Parent = ReplicatedStorage

		local shadow = part:Clone()
		shadow:SetAttribute("ExProtect", true)
		shadow.Anchored = true
		shadow.CanCollide = false
		shadow.Parent = partPar

		local cuts = {}
		for x = xIter, 1, 2 do
			for y = yIter, 1, 2 do
				for z = zIter, 1, 2 do
					local newCut = cut:Clone()
					local xOff = x * qSize.X
					local yOff = y * qSize.Y
					local zOff = z * qSize.Z
					newCut.CFrame = part.CFrame * CFrame.new(xOff, yOff, zOff)
					table.insert(cuts, newCut)
				end
			end
		end

		local finalCuts = {}
		local totalCuts = #cuts
		local done = 0

		for _, v in pairs(cuts) do
			task.spawn(function()
				local clone = {}
				for i, c in pairs(cuts) do
					if c ~= v then
						table.insert(clone, c)
					end
				end

				local s, partCut = pcall(function()
					return part:SubtractAsync(clone)
				end)

				if s and partCut then
					partCut:SetAttribute("ExBroken", false)
					partCut:SetAttribute("IsSplitPart", true)
					table.insert(finalCuts, partCut)
				end

				done += 1
			end)
		end

		task.spawn(function()
			while done < totalCuts do
				task.wait()
			end
			shadow:Destroy()
			for _, v in pairs(finalCuts) do
				if vel then v.Velocity = vel end
				v.Parent = partPar
			end
		end)

	else
		for x = xIter, 1, 2 do
			for y = yIter, 1, 2 do
				for z = zIter, 1, 2 do
					local newSplit = split:Clone()
					local xOff = x * qSize.X
					local yOff = y * qSize.Y
					local zOff = z * qSize.Z
					newSplit.CFrame = part.CFrame * CFrame.new(xOff, yOff, zOff)
					if vel then newSplit.Velocity = vel end
					newSplit.Parent = partPar
				end
			end
		end
	end

	part.Parent = ReplicatedStorage
	task.delay(1, function()
		part:Destroy()
	end)
end

-- Destroyer
local function destroyer(p)
	local function touched(other)
		if other.Anchored and (not modelSettings.DestroyAnchored or other:GetMass() > modelSettings.MaxMass) then
			return
		end

		if other:GetAttribute("ExProtect") then
			return
		end

		local plrModel = other:FindFirstAncestor(game.Players.LocalPlayer.Name)
		if plrModel then
			return
		end

		if not other:GetAttribute("ExBroken") then
			other:SetAttribute("ExBroken", true)
			other.Anchored = false
			other:BreakJoints()
		end

		other.Color = other.Color:lerp(Color3.new(0, 0, 0), 0.2)
		local vel = (other.Position - p.Position).Unit * 100 + Vector3.new(0, 50, 0)
		splitPart(other, vel)
		other.Velocity = vel

		if not other:GetAttribute("ExDebris") then
			other:SetAttribute("ExDebris", true)
			task.delay(30, function()
				if other then
					other:Destroy()
				end
			end)
		end
	end

	task.spawn(function()
		while p and p.Parent do
			if p:IsDescendantOf(workspace) and not p:GetAttribute("Paused") then
				local parts = workspace:GetPartsInPart(p)
				for _, other in pairs(parts) do
					task.spawn(touched, other)
				end
			end
			task.wait(0.2)
		end
	end)
end
    
    local function boltPause(bolt,isPaused)
        bolt:SetAttribute("Paused",true)
        for i,v in pairs(bolt:GetDescendants()) do
            v:SetAttribute("Paused",isPaused)
        end
    end
    
    local function boltDisabled(bolt,isDis)
        bolt:SetAttribute("Disabled",true)
        for i,v in pairs(bolt:GetDescendants()) do
            v:SetAttribute("Disabled",isDis)
        end
    end
    
    
    
    local peakBeam
    
    local function thunderSounds(model)
        local bolts = {}
        
        local soundPart = Instance.new("Part")
        soundPart.Size = Vector3.new(4,4,4)
        soundPart.Transparency = 1
        soundPart.CanCollide = false
        soundPart:SetAttribute("ExProtect",true)
        local w = Instance.new("Weld")
        w.Part0 = soundPart
        w.Parent = soundPart
        
        for i,v in pairs(model:GetChildren()) do
            table.insert(bolts,v)
        end
        
        local function playSounds()
            if model:GetAttribute("Disabled") then return end
            
            for i = 1,#bolts do
                local newSoundPart = soundPart:Clone()
                newSoundPart.Weld.Part1 = bolts[i]
                local s = resources.Thunder:Clone()
                s.Parent = newSoundPart
                newSoundPart.Parent = bolts[i]
                s:Play()
                task.delay(3,newSoundPart.Destroy,newSoundPart)
            end
        end
        
        model:GetPropertyChangedSignal("Parent"):Connect(function()
            task.spawn(function()
                while grand.Parent and model.Parent do
                    playSounds()
                    task.wait(1)
                end
            end)
        end)
        
        task.spawn(function()
            while grand.Parent and model.Parent do
                playSounds()
                task.wait(1)
            end
        end)
    end
    
    local function createLightingBeam(n)
        local model = Instance.new("Model")
        model.Name = "GrandoslaBeam"
        
        for i = 1,n do
            local newBeam = lightningTemplate:Clone()
            newBeam.Position = Vector3.new(0,50*(i-1),0)
            newBeam.Collid.Position = Vector3.new(0,50*(i-1),0)
            newBeam.Parent = model
            
            destroyer(newBeam.Collid)
            
            if i == 1 then
                model.PrimaryPart = newBeam
            end
        end
        
        for i,v in pairs(model:GetDescendants()) do
            v:SetAttribute("ExProtect",true)
        end
        
        return model
    end
    
    local function initStuff()
        for i,v in pairs(rings:GetChildren()) do
            local powerSound = Instance.new("Sound")
            powerSound.Name = "PowerSound"
            powerSound.Volume = 1
            powerSound.SoundId = "rbxassetid://7047775868"
            powerSound.Parent = v
            
            local humSound = Instance.new("Sound")
            humSound.Name = "HumSound"
            humSound.Volume = 0.25
            humSound.Looped = true
            humSound.SoundId = "rbxassetid://143973639"
            humSound.Parent = v
            
            --[[
            local light = Instance.new("PointLight")
            light.Color = Color3.new(1,0,0)
            light.Enabled = false
            light.Range = 60
            light.Brightness = 0.5
            light.Parent = v
            ]]
            
            table.insert(ringTable,v)
        end
        table.sort(ringTable,function(a,b) return a.Position.Y < b.Position.Y end)
            
            local powerSound = Instance.new("Sound")
            powerSound.Name = "PowerSound"
            powerSound.Volume = 5
            powerSound.SoundId = "rbxassetid://876800936"
            powerSound.Parent = peak
            
            local humSound = Instance.new("Sound")
            humSound.Name = "HumSound"
            humSound.Volume = 1
            humSound.Looped = true
            humSound.SoundId = "rbxassetid://143973639"
            humSound.Parent = peak
            
            local offSound = Instance.new("Sound")
            offSound.Name = "OffSound"
            offSound.Volume = 2
            offSound.SoundId = "rbxassetid://3250635272"
            offSound.Parent = ringCore
        end
        
        local function setParticlesEnabled(model,enabled)
            for i,v in pairs(model:GetDescendants()) do
                if v:IsA("ParticleEmitter") then
                    v.Enabled = enabled
                end
            end
        end
        
        local function setPowered(on)
            local mat = on and Enum.Material.Neon or Enum.Material.Plastic
            for i,v in pairs(rings:GetChildren()) do
                v.Material = mat
            end
            peak.Material = mat
            peak.BoltParticles.Enabled = on
            
            teslaOn = on
        end
        
        local function togglePower()
            if powerSwitching or stormBusy then return end
            powerSwitching = true
            
            local newPowerValue = not teslaOn
            local waitTime = newPowerValue and 0.2 or 0.1
            local mat = newPowerValue and Enum.Material.Neon or Enum.Material.Plastic
            
            if not newPowerValue then
                ringCore.OffSound:Play()
            end
            
            for i,v in pairs(ringTable) do
                if newPowerValue then
                    v.PowerSound:Play()
                    v.HumSound:Play()
                else
                    v.HumSound:Stop()
                end
                v.Material = mat
                --v.PointLight.Enabled = newPowerValue
                task.wait(waitTime)
            end
            
            if newPowerValue then
                peak.PowerSound:Play()
                peak.HumSound:Play()
            else
                peak.HumSound:Stop()
                if modelSettings.Defense then
                    toggleDefense()
                end
                if modelSettings.Storm then
                    task.spawn(toggleStorm)
                end
            end
            
            peak.Material = mat
            peak.BoltParticles.Enabled = newPowerValue
            grand.TopLight.SurfaceLight.Enabled = newPowerValue
            teslaOn = newPowerValue
            
            powerSwitching = false
        end
        local bindEvent = Instance.new("BindableEvent")
        local function fireUpdateSettingsOnPlayer()
            local localPlr = game:GetService("Players").LocalPlayer
            if localPlr then bindEvent:Fire(localPlr,"UpdateSettings",modelSettings) end
        end
        
        local function defenseLoop(part)
            local char = part.Parent
            local hum = char and char:FindFirstChildOfClass("Humanoid")
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if not hum or not hrp then return end
            
            local plr = players:GetPlayerFromCharacter(char)
            if plr and plr.Name == localPlayerName then return end
            
            task.wait(0.5)
            
            while true do
                local parts = workspace:GetPartsInPart(hrp)
                if not table.find(parts,defenseCollision) or not char.Parent or hum.Health == 0 then return end
                
                local newHealth = hum.Health - 50    
                hum.Health = hum.Health - 50
                
                if newHealth <= 0 then
                    for i,v in pairs(char:GetDescendants()) do if v:IsA("BasePart") then v.Color = Color3.new(0,0,0) end end
                    local sound = Instance.new("Sound")
                    sound.Volume = 1
                    sound.SoundId = "rbxassetid://189531243"
                    sound.Parent = hrp
                    sound:Play()
                    return
                end
                
                task.wait(0.1)
            end
        end
        
        function toggleDefense()
            if not modelSettings.Defense and not teslaOn then return end
            
            modelSettings.Defense = not modelSettings.Defense
            fireUpdateSettingsOnPlayer()
            
            if modelSettings.Defense then defense.Sound:Play() else defense.Sound:Stop() end
            for i,v in pairs(defense:GetChildren()) do
                if v:IsA("ParticleEmitter") then
                    v.Enabled = modelSettings.Defense
                end
            end
            
            defenseCollision.Parent = modelSettings.Defense and defense or nil
        end
        defenseCollision.Parent = nil
        defenseCollision.Touched:Connect(defenseLoop)
        
        while true do
            local a = game:GetService("Lighting"):FindFirstChild("GrandoslaLight")
            if a then a:Destroy() else break end
        end
        local stormTI = TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
        
        local function stormStrike(cf)
            local stormStrikerBeam = createLightingBeam(50)
            
            local boom = Instance.new("Sound")
            boom.Volume = 3
            boom.SoundId = "rbxassetid://821439273"
            boom.Playing = true
            boom.Parent = stormStrikerBeam.PrimaryPart
            
            stormStrikerBeam:PivotTo(cf)
            stormStrikerBeam.Parent = grand.Bolts
            
            task.delay(1,function()
                boltDisabled(stormStrikerBeam,true)
                setParticlesEnabled(stormStrikerBeam,false)
                task.delay(5,stormStrikerBeam.Destroy,stormStrikerBeam)
            end)
            
            
            local stormColor = Instance.new("ColorCorrectionEffect")
            stormColor.Name = "GrandoslaLight"
            stormColor.Parent = game:GetService("Lighting")
            local tween = game:GetService("TweenService"):Create(stormColor,stormTI,{Brightness = 0.5})
            tween.Completed:Connect(function()
                local tween2 = game:GetService("TweenService"):Create(stormColor,stormTI,{Brightness = 0})
                tween2.Completed:Connect(function()
                    stormColor:Destroy()
                end)
                tween2:Play()
            end)
            tween:Play()
        end
        
        local origBrightness = 1
        function toggleStorm()
            if not modelSettings.Storm and (not teslaOn or powerSwitching) then return end
            if stormBusy then return end
            stormBusy = true
            
            if stormThread then
                coroutine.close(stormThread)
                stormThread = nil
            end
            
            modelSettings.Storm = not modelSettings.Storm
            fireUpdateSettingsOnPlayer()
            
            local fadeTI = TweenInfo.new(10,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
            
            local isStorming = modelSettings.Storm
            
            if isStorming then
                origBrightness = game:GetService("Lighting").Brightness
                --origClockTime = game:GetService("Lighting").ClockTime
                
                local clouds = Instance.new("Clouds")
                clouds.Name = "GrandoslaClouds"
                clouds.Color = Color3.fromRGB(50,50,50)
                clouds.Cover = 0
                clouds.Density = 0
                clouds.Parent = workspace.Terrain
                
                game:GetService("TweenService"):Create(clouds,fadeTI,{Cover = 0.85,Density = 0.8}):Play()
                game:GetService("TweenService"):Create(game:GetService("Lighting"),fadeTI,{Brightness = 0}):Play()
                task.wait(8)
                grand.Storm:Play()
            else
                grand.Storm:Stop()
                local clouds = workspace.Terrain:FindFirstChild("GrandoslaClouds")
                
                if clouds then
                    local tween = game:GetService("TweenService"):Create(clouds,fadeTI,{Cover = 0,Density = 0})
                    tween.Completed:Connect(function() clouds:Destroy() end)
                        tween:Play()
                    end
                    
                    game:GetService("TweenService"):Create(game:GetService("Lighting"),fadeTI,{Brightness = origBrightness}):Play()
                    task.wait(10.5)
                    stormBusy = false
                    return
                end
                
                local peakPos = Vector2.new(peak.Position.X,peak.Position.Z)
                
                stormThread = coroutine.create(function()
                    while grand.Parent do
                        local rand = math.random()*2+0.5
                        task.wait(rand)
                        
                        local positions = {}
                        local plrs = players:GetPlayers()
                        for i,v in pairs(plrs) do
                            if v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
                                local rootPos = v.Character.HumanoidRootPart.Position
                                local randPos = Vector2.new(rootPos.X,rootPos.Z) + Vector2.new(math.random()*400-200, math.random()*400-200)
                                
                                if (randPos - peakPos).Magnitude >= 80 then
                                    table.insert(positions,randPos)
                                end
                            end
                        end
                        
                        if #positions > 0 then
                            local selectedPos = positions[math.random(1,#positions)]
                            local params = RaycastParams.new()
                            local res = workspace:Raycast(Vector3.new(selectedPos.X,4000,selectedPos.Y),Vector3.new(0,-5000,0),params)
                            if res then
                                local target = CFrame.new(res.Position)
                                stormStrike(target)
                            end
                        end
                    end
                end)
                
                coroutine.resume(stormThread)
                
                if isStorming then
                    task.wait(2.5)
                end
                stormBusy = false
            end
            
            ---------------------------------------------------------------------------------------
            local lightningClicked = false
            local lightingTarget = CFrame.new(0,0,0)
            local strikeBeam
            
            peakBeam = createLightingBeam(40)
            peakBeam:PivotTo(peak.CFrame)
            peakBeam.Parent = grand.Bolts
            peakBeam:SetAttribute("Particles",true)
            
            for i,v in pairs(grand:GetDescendants()) do
                if v:IsA("BasePart") then
                    v:SetAttribute("ExProtect",true)
                end
            end
            
            task.spawn(function()
                while task.wait(1/60) do
                    if not grand.Parent then return end
                    
                    local peakOn = modelSettings.Storm
                    
                    if lightningClicked and teslaOn then
                        if not strikeBeam then
                            strikeBeam = createLightingBeam(50)
                            thunderSounds(strikeBeam)
                        end
                        
                        local params = RaycastParams.new()
                        params.FilterDescendantsInstances = {grand.Bolts}
                        local res = workspace:Raycast(Vector3.new(lightingTarget.X,4000,lightingTarget.Z),Vector3.new(0,-5000,0),params)
                        if res then
                            local target = CFrame.new(res.Position)
                            strikeBeam:PivotTo(target)
                            strikeBeam.Parent = grand.Bolts
                            
                            peakOn = true
                        end
                    else
                        if strikeBeam then
                            boltDisabled(strikeBeam,true)
                            setParticlesEnabled(strikeBeam,false)
                            task.delay(5,strikeBeam.Destroy,strikeBeam)
                            strikeBeam = nil
                        end
                    end
                    
                    if peakOn then
                        if not peakBeam:GetAttribute("Particles") then
                            boltPause(peakBeam,false)
                            peakBeam:SetAttribute("Particles",true)
                            setParticlesEnabled(peakBeam,true)
                        end
                    else
                        if peakBeam:GetAttribute("Particles") then
                            boltPause(peakBeam,true)
                            peakBeam:SetAttribute("Particles",false)
                            setParticlesEnabled(peakBeam,false)
                        end
                    end
                end
            end)
            
            initStuff()
            setPowered(false)
            
           
           
local OnCommand = function(cmd,...)    
    local args = {...}
    
    if cmd == "MousePos" then
        if not args[2] then return end
        lightingTarget = args[1]
    elseif cmd == "MouseClickState" then
        lightningClicked = args[1]
    end
end

local GrandGui = Instance.new("ScreenGui")
GrandGui.Name = "GrandGui"
GrandGui.ResetOnSpawn = false
GrandGui.Parent = game:GetService("Players").LocalPlayer.PlayerGui

local TextBoxTemplate = Instance.new("Frame")
TextBoxTemplate.Name = "TextBoxTemplate"
TextBoxTemplate.Parent = GrandGui
TextBoxTemplate.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextBoxTemplate.BackgroundTransparency = 1
TextBoxTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextBoxTemplate.BorderSizePixel = 1
TextBoxTemplate.Position = UDim2.new(0, 0, 0, 0)
TextBoxTemplate.Size = UDim2.new(1, 0, 0, 50)
TextBoxTemplate.AnchorPoint = Vector2.new(0, 0)
TextBoxTemplate.Visible = false
TextBoxTemplate.ZIndex = 1
TextBoxTemplate.ClipsDescendants = false
TextBoxTemplate.LayoutOrder = 0
TextBoxTemplate.Active = false

local Box = Instance.new("TextBox")
Box.Name = "Box"
Box.Parent = TextBoxTemplate
Box.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Box.BackgroundTransparency = 0
Box.BorderColor3 = Color3.fromRGB(30, 30, 30)
Box.BorderSizePixel = 0
Box.TextYAlignment = Enum.TextYAlignment.Center
Box.TextXAlignment = Enum.TextXAlignment.Center
Box.Position = UDim2.new(0, 5, 0, 20)
Box.Size = UDim2.new(1, -10, 0, 25)
Box.Font = Enum.Font.SourceSans
Box.Text = ""
Box.TextColor3 = Color3.fromRGB(255, 255, 255)
Box.TextSize = 14
Box.TextScaled = false
Box.TextWrapped = false
Box.TextTransparency = 0
Box.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Box.TextStrokeTransparency = 1
Box.AnchorPoint = Vector2.new(0, 0)
Box.Visible = true
Box.ZIndex = 1
Box.ClipsDescendants = false
Box.LayoutOrder = 0
Box.ClearTextOnFocus = true
Box.PlaceholderText = ""
Box.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
Box.MultiLine = false
Box.Active = true
Box.LineHeight = 1
Box.CursorPosition = 1
Box.TextEditable = true
Box.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Box
UICorner.CornerRadius = UDim.new(0, 8)

local TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = TextBoxTemplate
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1
TextLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextLabel.BorderSizePixel = 1
TextLabel.TextYAlignment = Enum.TextYAlignment.Center
TextLabel.TextXAlignment = Enum.TextXAlignment.Center
TextLabel.Position = UDim2.new(0, 5, 0, 0)
TextLabel.Size = UDim2.new(1, -10, 0, 20)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "Speed"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14
TextLabel.TextScaled = false
TextLabel.TextWrapped = false
TextLabel.TextTransparency = 0
TextLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextStrokeTransparency = 1
TextLabel.AnchorPoint = Vector2.new(0, 0)
TextLabel.Visible = true
TextLabel.ZIndex = 1
TextLabel.ClipsDescendants = false
TextLabel.LayoutOrder = 0
TextLabel.Active = false
TextLabel.LineHeight = 1
TextLabel.MaxVisibleGraphemes = -1

local Frame = Instance.new("Frame")
Frame.Name = "Frame"
Frame.Parent = GrandGui
Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Frame.BackgroundTransparency = 0
Frame.BorderColor3 = Color3.fromRGB(27, 42, 53)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.05000000074505806, 0, 0.6000000238418579, 0)
Frame.Size = UDim2.new(0, 150, 0, 165)
Frame.AnchorPoint = Vector2.new(0, 0)
Frame.Visible = true
Frame.ZIndex = 1
Frame.ClipsDescendants = false
Frame.LayoutOrder = 0
Frame.Active = true

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Frame
UICorner.CornerRadius = UDim.new(0, 8)

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Frame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.BorderColor3 = Color3.fromRGB(27, 42, 53)
Title.BorderSizePixel = 1
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.TextXAlignment = Enum.TextXAlignment.Center
Title.Position = UDim2.new(0, 5, 0, 0)
Title.Size = UDim2.new(1, -10, 0, 25)
Title.Font = Enum.Font.SourceSansBold
Title.Text = "Grandosla"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.TextScaled = false
Title.TextWrapped = false
Title.TextTransparency = 0
Title.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Title.TextStrokeTransparency = 1
Title.AnchorPoint = Vector2.new(0, 0)
Title.Visible = true
Title.ZIndex = 1
Title.ClipsDescendants = false
Title.LayoutOrder = 0
Title.Active = false
Title.LineHeight = 1
Title.MaxVisibleGraphemes = -1

local ButtonTemplate = Instance.new("TextButton")
ButtonTemplate.Name = "ButtonTemplate"
ButtonTemplate.Parent = GrandGui
ButtonTemplate.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
ButtonTemplate.BackgroundTransparency = 0
ButtonTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
ButtonTemplate.BorderSizePixel = 1
ButtonTemplate.TextYAlignment = Enum.TextYAlignment.Center
ButtonTemplate.TextXAlignment = Enum.TextXAlignment.Center
ButtonTemplate.Position = UDim2.new(0, 5, 1, -140)
ButtonTemplate.Size = UDim2.new(1, -10, 0, 25)
ButtonTemplate.Font = Enum.Font.SourceSans
ButtonTemplate.Text = "Power On/Off"
ButtonTemplate.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonTemplate.TextSize = 14
ButtonTemplate.TextScaled = false
ButtonTemplate.TextWrapped = false
ButtonTemplate.TextTransparency = 0
ButtonTemplate.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
ButtonTemplate.TextStrokeTransparency = 1
ButtonTemplate.AnchorPoint = Vector2.new(0, 0)
ButtonTemplate.Visible = false
ButtonTemplate.ZIndex = 1
ButtonTemplate.ClipsDescendants = false
ButtonTemplate.LayoutOrder = 0
ButtonTemplate.Active = true
ButtonTemplate.LineHeight = 1
ButtonTemplate.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = ButtonTemplate
UICorner.CornerRadius = UDim.new(0, 8)

local plr = game:GetService("Players").LocalPlayer
local mouse = plr:GetMouse()
local UIS = game:GetService("UserInputService")
 
local gui = GrandGui
 
local remoteE = game:GetService("ReplicatedStorage"):WaitForChild("GrandoslaControlE")
local remoteF = game:GetService("ReplicatedStorage"):WaitForChild("GrandoslaControlF")
local frame = gui:WaitForChild("Frame")
 
local initSize = 25
local buttonSize = 30
local textBoxSize = 50
local baseWidth = 150
 
local buttonTemplate = gui:WaitForChild("ButtonTemplate")
local textBoxTemplate = gui:WaitForChild("TextBoxTemplate")
 
local nextPosition = initSize
 
local mouse = plr:GetMouse()
local clickThunder = false
 
local grand = workspace:WaitForChild("Grandosla")

-- Gui Lib --
local function setTitle(text)
    frame:WaitForChild("Title").Text = text
end
 
local function newButton(text,clickFunc)
    local newButtonGui = buttonTemplate:Clone()
    newButtonGui.Position = UDim2.new(0,5,0,nextPosition)
    nextPosition = nextPosition + buttonSize
    
    newButtonGui.Text = text
    newButtonGui.Visible = true
    
    if clickFunc then
        newButtonGui.MouseButton1Click:Connect(clickFunc)
    end
    
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newButtonGui.Parent = frame
    
    return newButtonGui
end
 
local function newTextBox(label,defaultText,changedFunc)
    local newFrame = textBoxTemplate:Clone()
    newFrame.Position = UDim2.new(0,0,0,nextPosition)
    nextPosition = nextPosition + textBoxSize
    
    newFrame.TextLabel.Text = label
    newFrame.Box.Text = defaultText or ""
    newFrame.Visible = true
 
    if changedFunc then
        newFrame.Box.FocusLost:Connect(function()
            changedFunc(newFrame.Box.Text)
        end)
    end
 
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newFrame.Parent = frame
 
    return newFrame
end
 
local mouse = game:GetService("Players").LocalPlayer:GetMouse()
frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local releaseEvent,mouseEvent
 
        local initX = frame.AbsolutePosition.X
        local initY = frame.AbsolutePosition.Y
        local offX = mouse.X - initX
        local offY = mouse.Y - initY
 
        releaseEvent = UIS.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                releaseEvent:Disconnect()
                mouseEvent:Disconnect()
            end
        end)
 
        mouseEvent = UIS.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement then
                local inputX,inputY = input.Position.X,input.Position.Y
                local posX,posY = inputX-offX,inputY-offY
                frame.Position = UDim2.new(0,posX,0,posY)
            end
        end)
    end
end)
 
----------------------------------------------
 
local modelSettings = modelSettings
 
local anchoredButton,defenseButton,stormButton,massBox,clickButton
local function updateButtons()
    anchoredButton.Text = modelSettings.DestroyAnchored and "Destroy Anchored: On" or "Destroy Anchored: Off"
    defenseButton.Text = modelSettings.Defense and "Interior Defense: On" or "Interior Defense: Off"
    stormButton.Text = modelSettings.Storm and "Grand Storm: On" or "Grand Storm: Off"
    massBox.Box.Text = tostring(modelSettings.MaxMass)
    clickButton.Text = clickThunder and "Mouse Thunder Beam: On" or "Mouse Thunder Beam: Off"
end
 
setTitle("Grandosla")
newButton("Power Toggle",function()
    togglePower()
    updateButtons()
end)
defenseButton = newButton("Interior Defense",function()
    toggleDefense()
    updateButtons()
end)
stormButton = newButton("Grand Storm",function()
    toggleStorm()
    updateButtons()
end)
clickButton=newButton("Mouse Thunder Beam",function()
    clickThunder = not clickThunder
    updateButtons()
end)
anchoredButton = newButton("Anchored",function()
    modelSettings.DestroyAnchored = not modelSettings.DestroyAnchored
    updateButtons()
end)
massBox=newTextBox("Max Anchored Mass","",function(str)
    modelSettings.MaxMass = tonumber(str) or 0
    updateButtons()
end)
updateButtons()
 
remoteE.OnClientEvent:Connect(function(cmd,...)
    local args = {...}
    if cmd == "UpdateSettings" then
        modelSettings = args[1]
        updateButtons()
    end
end)
 
local UIS = game:GetService("UserInputService")
 
local input = function(io,a)
    if a or not clickThunder then return end
    
    if io.UserInputType == Enum.UserInputType.MouseButton1 then
        local clicking = io.UserInputState == Enum.UserInputState.Begin
        OnCommand("MouseClickState",clicking)
    end
end
local con2 = UIS.InputBegan:Connect(input)
local con3 = UIS.InputEnded:Connect(input)
 
 
local h,t
local normalMap = {}
 
for i,v in pairs(Enum.NormalId:GetEnumItems()) do
    local vec = Vector3.FromNormalId(v)
    normalMap[vec] = v
end
 
local function isFiltered(obj)
    return obj:FindFirstAncestor("GrandoslaBeam")
end
 
while task.wait(1/60) do
    if not gui.Parent then con2:Disconnect() con3:Disconnect() return end
    
    local Mouse = mouse
    local Target,Hit
    local TargetSurface = Enum.NormalId.Right
 
    local filterList = {plr.Character}
 
    while true do
        local params = RaycastParams.new()
        params.FilterType = Enum.RaycastFilterType.Blacklist
        params.FilterDescendantsInstances = filterList
 
        local res = workspace:Raycast(Mouse.Origin.Position,Mouse.Origin.LookVector*100000,params)
        if res then
            local objectNormal = res.Instance.CFrame:ToObjectSpace(res.Instance.CFrame + res.Normal).p
            objectNormal = Vector3.new(math.round(objectNormal.X), math.round(objectNormal.Y), math.round(objectNormal.Z))
 
            local inst = res.Instance
            if isFiltered(inst) then
                table.insert(filterList,inst)
                continue
            else
                Target = inst
 
                if objectNormal.Magnitude > 1 then
                    objectNormal = objectNormal * Vector3.new(0,1,1)
                    if objectNormal.Magnitude > 1 then
                        objectNormal = objectNormal * Vector3.new(0,0,1)
                    end
                end
 
                TargetSurface = normalMap[objectNormal]
                Hit = CFrame.new(res.Position,res.Position + Mouse.Origin.LookVector)
                break
            end
        else
            break
        end
    end
 
    Hit = Hit or Mouse.Hit
 
    if h~=Hit or t~=Target then
        if clickThunder then OnCommand("MousePos",Hit,Target) end
        h,t=Hit,Target
    end
end
end)

local grand_pivoth = createScriptButton("grand_pivot", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "grand_pivot"
-- Script By 00de0l

Grandosla = Instance.new("Model")
Grandosla.Name = "Grandosla"
Grandosla.Parent = workspace

Part64 = Instance.new("Part")
Part64.Name = "Part64"
Part64.Parent = Grandosla
Part64.Anchored = true
Part64.CanCollide = true
Part64.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part64.CFrame = CFrame.new(160.49996948242188, 143.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part64.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part64.Material = Enum.Material.Marble
Part64.BrickColor = BrickColor.new("Medium stone grey")
Part64.Transparency = 0
Part64.Reflectance = 0
Part64.Locked = false
Part64.Shape = Enum.PartType.Block

Part5 = Instance.new("Part")
Part5.Name = "Part5"
Part5.Parent = Grandosla
Part5.Anchored = true
Part5.CanCollide = true
Part5.Size = Vector3.new(64.000000, 1.000000, 1.000000)
Part5.CFrame = CFrame.new(166.5, 224.49998474121094, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part5.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part5.Material = Enum.Material.Marble
Part5.BrickColor = BrickColor.new("Medium stone grey")
Part5.Transparency = 0
Part5.Reflectance = 0
Part5.Locked = false
Part5.Shape = Enum.PartType.Block

Part80 = Instance.new("Part")
Part80.Name = "Part80"
Part80.Parent = Grandosla
Part80.Anchored = true
Part80.CanCollide = true
Part80.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part80.CFrame = CFrame.new(160.49996948242188, 183.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part80.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part80.Material = Enum.Material.Marble
Part80.BrickColor = BrickColor.new("Medium stone grey")
Part80.Transparency = 0
Part80.Reflectance = 0
Part80.Locked = false
Part80.Shape = Enum.PartType.Block

Part101 = Instance.new("Part")
Part101.Name = "Part101"
Part101.Parent = Grandosla
Part101.Anchored = true
Part101.CanCollide = true
Part101.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part101.CFrame = CFrame.new(160.49996948242188, 201.5004425048828, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part101.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part101.Material = Enum.Material.Marble
Part101.BrickColor = BrickColor.new("Medium stone grey")
Part101.Transparency = 0
Part101.Reflectance = 0
Part101.Locked = false
Part101.Shape = Enum.PartType.Block

Part68 = Instance.new("Part")
Part68.Name = "Part68"
Part68.Parent = Grandosla
Part68.Anchored = true
Part68.CanCollide = true
Part68.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part68.CFrame = CFrame.new(160.5, 129.500244140625, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part68.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part68.Material = Enum.Material.Marble
Part68.BrickColor = BrickColor.new("Medium stone grey")
Part68.Transparency = 0
Part68.Reflectance = 0
Part68.Locked = false
Part68.Shape = Enum.PartType.Block

Part54 = Instance.new("Part")
Part54.Name = "Part54"
Part54.Parent = Grandosla
Part54.Anchored = true
Part54.CanCollide = true
Part54.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part54.CFrame = CFrame.new(109.49996948242188, 109.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part54.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part54.Material = Enum.Material.Marble
Part54.BrickColor = BrickColor.new("Medium stone grey")
Part54.Transparency = 0
Part54.Reflectance = 0
Part54.Locked = false
Part54.Shape = Enum.PartType.Block

Part25 = Instance.new("Part")
Part25.Name = "Part25"
Part25.Parent = Grandosla
Part25.Anchored = true
Part25.CanCollide = true
Part25.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part25.CFrame = CFrame.new(109.49996948242188, 81.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part25.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part25.Material = Enum.Material.Marble
Part25.BrickColor = BrickColor.new("Medium stone grey")
Part25.Transparency = 0
Part25.Reflectance = 0
Part25.Locked = false
Part25.Shape = Enum.PartType.Block

Part71 = Instance.new("Part")
Part71.Name = "Part71"
Part71.Parent = Grandosla
Part71.Anchored = true
Part71.CanCollide = true
Part71.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part71.CFrame = CFrame.new(160.49996948242188, 149.50033569335938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part71.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part71.Material = Enum.Material.Marble
Part71.BrickColor = BrickColor.new("Medium stone grey")
Part71.Transparency = 0
Part71.Reflectance = 0
Part71.Locked = false
Part71.Shape = Enum.PartType.Block

Part24 = Instance.new("Part")
Part24.Name = "Part24"
Part24.Parent = Grandosla
Part24.Anchored = true
Part24.CanCollide = true
Part24.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part24.CFrame = CFrame.new(109.49996948242188, 77.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part24.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part24.Material = Enum.Material.Marble
Part24.BrickColor = BrickColor.new("Medium stone grey")
Part24.Transparency = 0
Part24.Reflectance = 0
Part24.Locked = false
Part24.Shape = Enum.PartType.Block

Wedge = Instance.new("WedgePart")
Wedge.Name = "Wedge"
Wedge.Parent = Grandosla
Wedge.Anchored = true
Wedge.CanCollide = true
Wedge.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge.CFrame = CFrame.new(95, 44, -42.000003814697266, -1.1920928955078125e-07, 0, 1.0000001192092896, 0, 1, 0, -1.0000001192092896, 0, -1.1920928955078125e-07)
Wedge.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge.Material = Enum.Material.Marble
Wedge.BrickColor = BrickColor.new("Medium stone grey")
Wedge.Transparency = 0
Wedge.Reflectance = 0
Wedge.Locked = false

Part9 = Instance.new("Part")
Part9.Name = "Part9"
Part9.Parent = Grandosla
Part9.Anchored = true
Part9.CanCollide = true
Part9.Size = Vector3.new(0.200000, 5.000000, 5.000000)
Part9.CFrame = CFrame.new(111.5, 68.5, -74.0999984741211, 0, 0, -1, 0, 1, 0, 1, 0, 0)
Part9.Color = Color3.new(0.972549, 0.972549, 0.972549)
Part9.Material = Enum.Material.Neon
Part9.BrickColor = BrickColor.new("Institutional white")
Part9.Transparency = 0
Part9.Reflectance = 0
Part9.Locked = false
Part9.Shape = Enum.PartType.Block
Decal = Instance.new("Decal")
Decal.Name = "Decal"
Decal.Parent = Part9
Decal.Texture = "http://www.roblox.com/asset/?id=2507942"
Decal.Face = Enum.NormalId.Left
Decal.Transparency = 0
Decal.Color3 = Color3.new(1.000000, 1.000000, 1.000000)

Part20 = Instance.new("Part")
Part20.Name = "Part20"
Part20.Parent = Grandosla
Part20.Anchored = true
Part20.CanCollide = true
Part20.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part20.CFrame = CFrame.new(109.49996948242188, 75.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part20.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part20.Material = Enum.Material.Marble
Part20.BrickColor = BrickColor.new("Medium stone grey")
Part20.Transparency = 0
Part20.Reflectance = 0
Part20.Locked = false
Part20.Shape = Enum.PartType.Block

Rings = Instance.new("Model")
Rings.Name = "Rings"
Rings.Parent = Grandosla
Part6 = Instance.new("Part")
Part6.Name = "Part6"
Part6.Parent = Rings
Part6.Anchored = true
Part6.CanCollide = true
Part6.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part6.CFrame = CFrame.new(135, 201.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part6.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part6.Material = Enum.Material.Plastic
Part6.BrickColor = BrickColor.new("Really red")
Part6.Transparency = 0
Part6.Reflectance = 0
Part6.Locked = false
Part6.Shape = Enum.PartType.Cylinder
Part10 = Instance.new("Part")
Part10.Name = "Part10"
Part10.Parent = Rings
Part10.Anchored = true
Part10.CanCollide = true
Part10.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part10.CFrame = CFrame.new(135, 130.00001525878906, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part10.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part10.Material = Enum.Material.Plastic
Part10.BrickColor = BrickColor.new("Really red")
Part10.Transparency = 0
Part10.Reflectance = 0
Part10.Locked = false
Part10.Shape = Enum.PartType.Cylinder
Part2 = Instance.new("Part")
Part2.Name = "Part2"
Part2.Parent = Rings
Part2.Anchored = true
Part2.CanCollide = true
Part2.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part2.CFrame = CFrame.new(135, 166, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part2.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part2.Material = Enum.Material.Plastic
Part2.BrickColor = BrickColor.new("Really red")
Part2.Transparency = 0
Part2.Reflectance = 0
Part2.Locked = false
Part2.Shape = Enum.PartType.Cylinder
Part3 = Instance.new("Part")
Part3.Name = "Part3"
Part3.Parent = Rings
Part3.Anchored = true
Part3.CanCollide = true
Part3.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part3.CFrame = CFrame.new(135, 154.00001525878906, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part3.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part3.Material = Enum.Material.Plastic
Part3.BrickColor = BrickColor.new("Really red")
Part3.Transparency = 0
Part3.Reflectance = 0
Part3.Locked = false
Part3.Shape = Enum.PartType.Cylinder
Part15 = Instance.new("Part")
Part15.Name = "Part15"
Part15.Parent = Rings
Part15.Anchored = true
Part15.CanCollide = true
Part15.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part15.CFrame = CFrame.new(135, 82.00000762939453, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part15.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part15.Material = Enum.Material.Plastic
Part15.BrickColor = BrickColor.new("Really red")
Part15.Transparency = 0
Part15.Reflectance = 0
Part15.Locked = false
Part15.Shape = Enum.PartType.Cylinder
Part14 = Instance.new("Part")
Part14.Name = "Part14"
Part14.Parent = Rings
Part14.Anchored = true
Part14.CanCollide = true
Part14.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part14.CFrame = CFrame.new(135, 70, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part14.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part14.Material = Enum.Material.Plastic
Part14.BrickColor = BrickColor.new("Really red")
Part14.Transparency = 0
Part14.Reflectance = 0
Part14.Locked = false
Part14.Shape = Enum.PartType.Cylinder
Part13 = Instance.new("Part")
Part13.Name = "Part13"
Part13.Parent = Rings
Part13.Anchored = true
Part13.CanCollide = true
Part13.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part13.CFrame = CFrame.new(135, 46, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part13.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part13.Material = Enum.Material.Plastic
Part13.BrickColor = BrickColor.new("Really red")
Part13.Transparency = 0
Part13.Reflectance = 0
Part13.Locked = false
Part13.Shape = Enum.PartType.Cylinder
Part8 = Instance.new("Part")
Part8.Name = "Part8"
Part8.Parent = Rings
Part8.Anchored = true
Part8.CanCollide = true
Part8.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part8.CFrame = CFrame.new(135, 94.00000762939453, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part8.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part8.Material = Enum.Material.Plastic
Part8.BrickColor = BrickColor.new("Really red")
Part8.Transparency = 0
Part8.Reflectance = 0
Part8.Locked = false
Part8.Shape = Enum.PartType.Cylinder
Part91 = Instance.new("Part")
Part91.Name = "Part9"
Part91.Parent = Rings
Part91.Anchored = true
Part91.CanCollide = true
Part91.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part91.CFrame = CFrame.new(135, 117.99999237060547, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part91.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part91.Material = Enum.Material.Plastic
Part91.BrickColor = BrickColor.new("Really red")
Part91.Transparency = 0
Part91.Reflectance = 0
Part91.Locked = false
Part91.Shape = Enum.PartType.Cylinder
Part51 = Instance.new("Part")
Part51.Name = "Part5"
Part51.Parent = Rings
Part51.Anchored = true
Part51.CanCollide = true
Part51.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part51.CFrame = CFrame.new(135, 177.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part51.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part51.Material = Enum.Material.Plastic
Part51.BrickColor = BrickColor.new("Really red")
Part51.Transparency = 0
Part51.Reflectance = 0
Part51.Locked = false
Part51.Shape = Enum.PartType.Cylinder
Part = Instance.new("Part")
Part.Name = "Part"
Part.Parent = Rings
Part.Anchored = true
Part.CanCollide = true
Part.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part.CFrame = CFrame.new(135, 189.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part.Material = Enum.Material.Plastic
Part.BrickColor = BrickColor.new("Really red")
Part.Transparency = 0
Part.Reflectance = 0
Part.Locked = false
Part.Shape = Enum.PartType.Cylinder
Part7 = Instance.new("Part")
Part7.Name = "Part7"
Part7.Parent = Rings
Part7.Anchored = true
Part7.CanCollide = true
Part7.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part7.CFrame = CFrame.new(135, 142.00001525878906, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part7.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part7.Material = Enum.Material.Plastic
Part7.BrickColor = BrickColor.new("Really red")
Part7.Transparency = 0
Part7.Reflectance = 0
Part7.Locked = false
Part7.Shape = Enum.PartType.Cylinder
Part12 = Instance.new("Part")
Part12.Name = "Part12"
Part12.Parent = Rings
Part12.Anchored = true
Part12.CanCollide = true
Part12.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part12.CFrame = CFrame.new(135, 58, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part12.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part12.Material = Enum.Material.Plastic
Part12.BrickColor = BrickColor.new("Really red")
Part12.Transparency = 0
Part12.Reflectance = 0
Part12.Locked = false
Part12.Shape = Enum.PartType.Cylinder
Part11 = Instance.new("Part")
Part11.Name = "Part11"
Part11.Parent = Rings
Part11.Anchored = true
Part11.CanCollide = true
Part11.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part11.CFrame = CFrame.new(135, 106.00000762939453, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part11.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part11.Material = Enum.Material.Plastic
Part11.BrickColor = BrickColor.new("Really red")
Part11.Transparency = 0
Part11.Reflectance = 0
Part11.Locked = false
Part11.Shape = Enum.PartType.Cylinder
Part4 = Instance.new("Part")
Part4.Name = "Part4"
Part4.Parent = Rings
Part4.Anchored = true
Part4.CanCollide = true
Part4.Size = Vector3.new(4.000000, 52.000000, 52.000000)
Part4.CFrame = CFrame.new(135, 213.99998474121094, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
Part4.Color = Color3.new(1.000000, 0.000000, 0.000000)
Part4.Material = Enum.Material.Plastic
Part4.BrickColor = BrickColor.new("Really red")
Part4.Transparency = 0
Part4.Reflectance = 0
Part4.Locked = false
Part4.Shape = Enum.PartType.Cylinder

Part35 = Instance.new("Part")
Part35.Name = "Part35"
Part35.Parent = Grandosla
Part35.Anchored = true
Part35.CanCollide = true
Part35.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part35.CFrame = CFrame.new(109.49996948242188, 51.50006103515625, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part35.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part35.Material = Enum.Material.Marble
Part35.BrickColor = BrickColor.new("Medium stone grey")
Part35.Transparency = 0
Part35.Reflectance = 0
Part35.Locked = false
Part35.Shape = Enum.PartType.Block

Part33 = Instance.new("Part")
Part33.Name = "Part33"
Part33.Parent = Grandosla
Part33.Anchored = true
Part33.CanCollide = true
Part33.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part33.CFrame = CFrame.new(109.49996948242188, 55.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part33.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part33.Material = Enum.Material.Marble
Part33.BrickColor = BrickColor.new("Medium stone grey")
Part33.Transparency = 0
Part33.Reflectance = 0
Part33.Locked = false
Part33.Shape = Enum.PartType.Block

Part56 = Instance.new("Part")
Part56.Name = "Part56"
Part56.Parent = Grandosla
Part56.Anchored = true
Part56.CanCollide = true
Part56.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part56.CFrame = CFrame.new(109.49996948242188, 117.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part56.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part56.Material = Enum.Material.Marble
Part56.BrickColor = BrickColor.new("Medium stone grey")
Part56.Transparency = 0
Part56.Reflectance = 0
Part56.Locked = false
Part56.Shape = Enum.PartType.Block

Part110 = Instance.new("Part")
Part110.Name = "Part110"
Part110.Parent = Grandosla
Part110.Anchored = true
Part110.CanCollide = true
Part110.Size = Vector3.new(8.000000, 8.000000, 1.000000)
Part110.CFrame = CFrame.new(111, 39.99998474121094, -70.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part110.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part110.Material = Enum.Material.Marble
Part110.BrickColor = BrickColor.new("Medium stone grey")
Part110.Transparency = 0
Part110.Reflectance = 0
Part110.Locked = false
Part110.Shape = Enum.PartType.Block

Part45 = Instance.new("Part")
Part45.Name = "Part45"
Part45.Parent = Grandosla
Part45.Anchored = true
Part45.CanCollide = true
Part45.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part45.CFrame = CFrame.new(109.49996948242188, 103.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part45.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part45.Material = Enum.Material.Marble
Part45.BrickColor = BrickColor.new("Medium stone grey")
Part45.Transparency = 0
Part45.Reflectance = 0
Part45.Locked = false
Part45.Shape = Enum.PartType.Block

Part61 = Instance.new("Part")
Part61.Name = "Part61"
Part61.Parent = Grandosla
Part61.Anchored = true
Part61.CanCollide = true
Part61.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part61.CFrame = CFrame.new(160.49996948242188, 131.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part61.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part61.Material = Enum.Material.Marble
Part61.BrickColor = BrickColor.new("Medium stone grey")
Part61.Transparency = 0
Part61.Reflectance = 0
Part61.Locked = false
Part61.Shape = Enum.PartType.Block

Part41 = Instance.new("Part")
Part41.Name = "Part41"
Part41.Parent = Grandosla
Part41.Anchored = true
Part41.CanCollide = true
Part41.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part41.CFrame = CFrame.new(109.49996948242188, 95.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part41.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part41.Material = Enum.Material.Marble
Part41.BrickColor = BrickColor.new("Medium stone grey")
Part41.Transparency = 0
Part41.Reflectance = 0
Part41.Locked = false
Part41.Shape = Enum.PartType.Block

Part103 = Instance.new("Part")
Part103.Name = "Part103"
Part103.Parent = Grandosla
Part103.Anchored = true
Part103.CanCollide = true
Part103.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part103.CFrame = CFrame.new(160.49996948242188, 207.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part103.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part103.Material = Enum.Material.Marble
Part103.BrickColor = BrickColor.new("Medium stone grey")
Part103.Transparency = 0
Part103.Reflectance = 0
Part103.Locked = false
Part103.Shape = Enum.PartType.Block

Part60 = Instance.new("Part")
Part60.Name = "Part60"
Part60.Parent = Grandosla
Part60.Anchored = true
Part60.CanCollide = true
Part60.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part60.CFrame = CFrame.new(160.49996948242188, 135.5002899169922, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part60.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part60.Material = Enum.Material.Marble
Part60.BrickColor = BrickColor.new("Medium stone grey")
Part60.Transparency = 0
Part60.Reflectance = 0
Part60.Locked = false
Part60.Shape = Enum.PartType.Block

Part104 = Instance.new("Part")
Part104.Name = "Part104"
Part104.Parent = Grandosla
Part104.Anchored = true
Part104.CanCollide = true
Part104.Size = Vector3.new(8.000000, 10.000000, 1.000000)
Part104.CFrame = CFrame.new(111, 41, -71.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part104.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part104.Material = Enum.Material.Marble
Part104.BrickColor = BrickColor.new("Medium stone grey")
Part104.Transparency = 0
Part104.Reflectance = 0
Part104.Locked = false
Part104.Shape = Enum.PartType.Block

Part84 = Instance.new("Part")
Part84.Name = "Part84"
Part84.Parent = Grandosla
Part84.Anchored = true
Part84.CanCollide = true
Part84.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part84.CFrame = CFrame.new(160.49996948242188, 181.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part84.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part84.Material = Enum.Material.Marble
Part84.BrickColor = BrickColor.new("Medium stone grey")
Part84.Transparency = 0
Part84.Reflectance = 0
Part84.Locked = false
Part84.Shape = Enum.PartType.Block

Part120 = Instance.new("Part")
Part120.Name = "Part120"
Part120.Parent = Grandosla
Part120.Anchored = true
Part120.CanCollide = true
Part120.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part120.CFrame = CFrame.new(160.49996948242188, 217.49996948242188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part120.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part120.Material = Enum.Material.Marble
Part120.BrickColor = BrickColor.new("Medium stone grey")
Part120.Transparency = 0
Part120.Reflectance = 0
Part120.Locked = false
Part120.Shape = Enum.PartType.Block

Bolts = Instance.new("Folder")
Bolts.Name = "Bolts"
Bolts.Parent = Grandosla

Part34 = Instance.new("Part")
Part34.Name = "Part34"
Part34.Parent = Grandosla
Part34.Anchored = true
Part34.CanCollide = true
Part34.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part34.CFrame = CFrame.new(109.49996948242188, 61.50001525878906, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part34.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part34.Material = Enum.Material.Marble
Part34.BrickColor = BrickColor.new("Medium stone grey")
Part34.Transparency = 0
Part34.Reflectance = 0
Part34.Locked = false
Part34.Shape = Enum.PartType.Block

Wedge1 = Instance.new("WedgePart")
Wedge1.Name = "Wedge"
Wedge1.Parent = Grandosla
Wedge1.Anchored = true
Wedge1.CanCollide = true
Wedge1.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge1.CFrame = CFrame.new(135, 44, -82, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Wedge1.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge1.Material = Enum.Material.Marble
Wedge1.BrickColor = BrickColor.new("Medium stone grey")
Wedge1.Transparency = 0
Wedge1.Reflectance = 0
Wedge1.Locked = false

Part131 = Instance.new("Part")
Part131.Name = "Part13"
Part131.Parent = Grandosla
Part131.Anchored = true
Part131.CanCollide = true
Part131.Size = Vector3.new(1.000000, 89.000000, 1.000000)
Part131.CFrame = CFrame.new(107.49996948242188, 80.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part131.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part131.Material = Enum.Material.Marble
Part131.BrickColor = BrickColor.new("Medium stone grey")
Part131.Transparency = 0
Part131.Reflectance = 0
Part131.Locked = false
Part131.Shape = Enum.PartType.Block

peak = Instance.new("Part")
peak.Name = "peak"
peak.Parent = Grandosla
peak.Anchored = true
peak.CanCollide = true
peak.Size = Vector3.new(96.000000, 96.000000, 96.000000)
peak.CFrame = CFrame.new(135, 296, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
peak.Color = Color3.new(0.972549, 0.972549, 0.972549)
peak.Material = Enum.Material.Plastic
peak.BrickColor = BrickColor.new("Institutional white")
peak.Transparency = 0
peak.Reflectance = 0
peak.Locked = false
peak.Shape = Enum.PartType.Ball
BoltParticles = Instance.new("ParticleEmitter")
BoltParticles.Name = "BoltParticles"
BoltParticles.Parent = peak
BoltParticles.Speed = NumberRange.new(1000, 1100)
BoltParticles.Size = NumberSequence.new({
	NumberSequenceKeypoint.new(0, 30),
	NumberSequenceKeypoint.new(1, 30)
})
BoltParticles.Acceleration = Vector3.new(0, 0, 0)
BoltParticles.Brightness = 1
BoltParticles.Drag = 0
BoltParticles.EmissionDirection = Enum.NormalId.Top
BoltParticles.Enabled = false
BoltParticles.LightEmission = 0
BoltParticles.Rate = 100
BoltParticles.Lifetime = NumberRange.new(3, 5)
BoltParticles.Shape = Enum.ParticleEmitterShape.Box
BoltParticles.SpreadAngle = Vector2.new(80, 80)
BoltParticles.Texture = "rbxassetid://117008291"
BoltParticles.ZOffset = 0
BoltParticles.VelocitySpread = 80

Part109 = Instance.new("Part")
Part109.Name = "Part109"
Part109.Parent = Grandosla
Part109.Anchored = true
Part109.CanCollide = true
Part109.Size = Vector3.new(8.000000, 6.000000, 1.000000)
Part109.CFrame = CFrame.new(111, 39, -69.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part109.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part109.Material = Enum.Material.Marble
Part109.BrickColor = BrickColor.new("Medium stone grey")
Part109.Transparency = 0
Part109.Reflectance = 0
Part109.Locked = false
Part109.Shape = Enum.PartType.Block

Part77 = Instance.new("Part")
Part77.Name = "Part77"
Part77.Parent = Grandosla
Part77.Anchored = true
Part77.CanCollide = true
Part77.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part77.CFrame = CFrame.new(160.49996948242188, 179.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part77.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part77.Material = Enum.Material.Marble
Part77.BrickColor = BrickColor.new("Medium stone grey")
Part77.Transparency = 0
Part77.Reflectance = 0
Part77.Locked = false
Part77.Shape = Enum.PartType.Block

RingCore = Instance.new("Part")
RingCore.Name = "RingCore"
RingCore.Parent = Grandosla
RingCore.Anchored = true
RingCore.CanCollide = true
RingCore.Size = Vector3.new(216.000000, 32.000000, 32.000000)
RingCore.CFrame = CFrame.new(135, 144, -42, 0, -1, -0, -1, 0, -0, 0, 0, -1)
RingCore.Color = Color3.new(0.388235, 0.372549, 0.384314)
RingCore.Material = Enum.Material.Neon
RingCore.BrickColor = BrickColor.new("Dark stone grey")
RingCore.Transparency = 0
RingCore.Reflectance = 0
RingCore.Locked = false
RingCore.Shape = Enum.PartType.Cylinder

Part29 = Instance.new("Part")
Part29.Name = "Part29"
Part29.Parent = Grandosla
Part29.Anchored = true
Part29.CanCollide = true
Part29.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part29.CFrame = CFrame.new(109.49996948242188, 67.50009155273438, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part29.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part29.Material = Enum.Material.Marble
Part29.BrickColor = BrickColor.new("Medium stone grey")
Part29.Transparency = 0
Part29.Reflectance = 0
Part29.Locked = false
Part29.Shape = Enum.PartType.Block

Part39 = Instance.new("Part")
Part39.Name = "Part39"
Part39.Parent = Grandosla
Part39.Anchored = true
Part39.CanCollide = true
Part39.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part39.CFrame = CFrame.new(109.49996948242188, 65.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part39.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part39.Material = Enum.Material.Marble
Part39.BrickColor = BrickColor.new("Medium stone grey")
Part39.Transparency = 0
Part39.Reflectance = 0
Part39.Locked = false
Part39.Shape = Enum.PartType.Block

Part1 = Instance.new("Part")
Part1.Name = "Part"
Part1.Parent = Grandosla
Part1.Anchored = true
Part1.CanCollide = true
Part1.Size = Vector3.new(1.000000, 1.000000, 62.000000)
Part1.CFrame = CFrame.new(135.000244140625, 224.5, -10.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part1.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1.Material = Enum.Material.Marble
Part1.BrickColor = BrickColor.new("Medium stone grey")
Part1.Transparency = 0
Part1.Reflectance = 0
Part1.Locked = false
Part1.Shape = Enum.PartType.Block

Part73 = Instance.new("Part")
Part73.Name = "Part73"
Part73.Parent = Grandosla
Part73.Anchored = true
Part73.CanCollide = true
Part73.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part73.CFrame = CFrame.new(160.49996948242188, 175.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part73.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part73.Material = Enum.Material.Marble
Part73.BrickColor = BrickColor.new("Medium stone grey")
Part73.Transparency = 0
Part73.Reflectance = 0
Part73.Locked = false
Part73.Shape = Enum.PartType.Block

Part74 = Instance.new("Part")
Part74.Name = "Part74"
Part74.Parent = Grandosla
Part74.Anchored = true
Part74.CanCollide = true
Part74.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part74.CFrame = CFrame.new(160.49996948242188, 173.5003662109375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part74.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part74.Material = Enum.Material.Marble
Part74.BrickColor = BrickColor.new("Medium stone grey")
Part74.Transparency = 0
Part74.Reflectance = 0
Part74.Locked = false
Part74.Shape = Enum.PartType.Block

Part22 = Instance.new("Part")
Part22.Name = "Part22"
Part22.Parent = Grandosla
Part22.Anchored = true
Part22.CanCollide = true
Part22.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part22.CFrame = CFrame.new(109.49996948242188, 69.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part22.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part22.Material = Enum.Material.Marble
Part22.BrickColor = BrickColor.new("Medium stone grey")
Part22.Transparency = 0
Part22.Reflectance = 0
Part22.Locked = false
Part22.Shape = Enum.PartType.Block

CornerWedge = Instance.new("CornerWedgePart")
CornerWedge.Name = "CornerWedge"
CornerWedge.Parent = Grandosla
CornerWedge.Anchored = true
CornerWedge.CanCollide = true
CornerWedge.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge.CFrame = CFrame.new(95, 44, -82, 0, 0, -1, 0, 1, 0, 1, 0, 0)
CornerWedge.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge.Material = Enum.Material.Marble
CornerWedge.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge.Transparency = 0
CornerWedge.Reflectance = 0
CornerWedge.Locked = false

Part117 = Instance.new("Part")
Part117.Name = "Part117"
Part117.Parent = Grandosla
Part117.Anchored = true
Part117.CanCollide = true
Part117.Size = Vector3.new(8.000000, 2.000000, 1.000000)
Part117.CFrame = CFrame.new(111, 37, -67.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part117.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part117.Material = Enum.Material.Marble
Part117.BrickColor = BrickColor.new("Medium stone grey")
Part117.Transparency = 0
Part117.Reflectance = 0
Part117.Locked = false
Part117.Shape = Enum.PartType.Block

Part115 = Instance.new("Part")
Part115.Name = "Part115"
Part115.Parent = Grandosla
Part115.Anchored = true
Part115.CanCollide = true
Part115.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part115.CFrame = CFrame.new(103.500244140625, 222.5, -10.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part115.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part115.Material = Enum.Material.Marble
Part115.BrickColor = BrickColor.new("Medium stone grey")
Part115.Transparency = 0
Part115.Reflectance = 0
Part115.Locked = false
Part115.Shape = Enum.PartType.Block

Part151 = Instance.new("Part")
Part151.Name = "Part15"
Part151.Parent = Grandosla
Part151.Anchored = true
Part151.CanCollide = true
Part151.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part151.CFrame = CFrame.new(109.49996948242188, 47.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part151.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part151.Material = Enum.Material.Marble
Part151.BrickColor = BrickColor.new("Medium stone grey")
Part151.Transparency = 0
Part151.Reflectance = 0
Part151.Locked = false
Part151.Shape = Enum.PartType.Block

Part31 = Instance.new("Part")
Part31.Name = "Part31"
Part31.Parent = Grandosla
Part31.Anchored = true
Part31.CanCollide = true
Part31.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part31.CFrame = CFrame.new(109.49996948242188, 49.5, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part31.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part31.Material = Enum.Material.Marble
Part31.BrickColor = BrickColor.new("Medium stone grey")
Part31.Transparency = 0
Part31.Reflectance = 0
Part31.Locked = false
Part31.Shape = Enum.PartType.Block

Part48 = Instance.new("Part")
Part48.Name = "Part48"
Part48.Parent = Grandosla
Part48.Anchored = true
Part48.CanCollide = true
Part48.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part48.CFrame = CFrame.new(109.49996948242188, 119.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part48.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part48.Material = Enum.Material.Marble
Part48.BrickColor = BrickColor.new("Medium stone grey")
Part48.Transparency = 0
Part48.Reflectance = 0
Part48.Locked = false
Part48.Shape = Enum.PartType.Block

Part58 = Instance.new("Part")
Part58.Name = "Part58"
Part58.Parent = Grandosla
Part58.Anchored = true
Part58.CanCollide = true
Part58.Size = Vector3.new(1.000000, 97.000000, 1.000000)
Part58.CFrame = CFrame.new(158.49996948242188, 172.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part58.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part58.Material = Enum.Material.Marble
Part58.BrickColor = BrickColor.new("Medium stone grey")
Part58.Transparency = 0
Part58.Reflectance = 0
Part58.Locked = false
Part58.Shape = Enum.PartType.Block

Part59 = Instance.new("Part")
Part59.Name = "Part59"
Part59.Parent = Grandosla
Part59.Anchored = true
Part59.CanCollide = true
Part59.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part59.CFrame = CFrame.new(160.49996948242188, 125.50022888183594, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part59.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part59.Material = Enum.Material.Marble
Part59.BrickColor = BrickColor.new("Medium stone grey")
Part59.Transparency = 0
Part59.Reflectance = 0
Part59.Locked = false
Part59.Shape = Enum.PartType.Block

Part90 = Instance.new("Part")
Part90.Name = "Part90"
Part90.Parent = Grandosla
Part90.Anchored = true
Part90.CanCollide = true
Part90.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part90.CFrame = CFrame.new(160.49996948242188, 161.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part90.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part90.Material = Enum.Material.Marble
Part90.BrickColor = BrickColor.new("Medium stone grey")
Part90.Transparency = 0
Part90.Reflectance = 0
Part90.Locked = false
Part90.Shape = Enum.PartType.Block

Part21 = Instance.new("Part")
Part21.Name = "Part21"
Part21.Parent = Grandosla
Part21.Anchored = true
Part21.CanCollide = true
Part21.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part21.CFrame = CFrame.new(109.49996948242188, 57.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part21.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part21.Material = Enum.Material.Marble
Part21.BrickColor = BrickColor.new("Medium stone grey")
Part21.Transparency = 0
Part21.Reflectance = 0
Part21.Locked = false
Part21.Shape = Enum.PartType.Block

Part16 = Instance.new("Part")
Part16.Name = "Part16"
Part16.Parent = Grandosla
Part16.Anchored = true
Part16.CanCollide = true
Part16.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part16.CFrame = CFrame.new(109.49996948242188, 43.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part16.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part16.Material = Enum.Material.Marble
Part16.BrickColor = BrickColor.new("Medium stone grey")
Part16.Transparency = 0
Part16.Reflectance = 0
Part16.Locked = false
Part16.Shape = Enum.PartType.Block

Part94 = Instance.new("Part")
Part94.Name = "Part94"
Part94.Parent = Grandosla
Part94.Anchored = true
Part94.CanCollide = true
Part94.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part94.CFrame = CFrame.new(160.49996948242188, 205.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part94.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part94.Material = Enum.Material.Marble
Part94.BrickColor = BrickColor.new("Medium stone grey")
Part94.Transparency = 0
Part94.Reflectance = 0
Part94.Locked = false
Part94.Shape = Enum.PartType.Block

Part43 = Instance.new("Part")
Part43.Name = "Part43"
Part43.Parent = Grandosla
Part43.Anchored = true
Part43.CanCollide = true
Part43.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part43.CFrame = CFrame.new(109.49996948242188, 71.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part43.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part43.Material = Enum.Material.Marble
Part43.BrickColor = BrickColor.new("Medium stone grey")
Part43.Transparency = 0
Part43.Reflectance = 0
Part43.Locked = false
Part43.Shape = Enum.PartType.Block

Part17 = Instance.new("Part")
Part17.Name = "Part17"
Part17.Parent = Grandosla
Part17.Anchored = true
Part17.CanCollide = true
Part17.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part17.CFrame = CFrame.new(109.49996948242188, 45.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part17.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part17.Material = Enum.Material.Marble
Part17.BrickColor = BrickColor.new("Medium stone grey")
Part17.Transparency = 0
Part17.Reflectance = 0
Part17.Locked = false
Part17.Shape = Enum.PartType.Block

Part124 = Instance.new("Part")
Part124.Name = "Part124"
Part124.Parent = Grandosla
Part124.Anchored = true
Part124.CanCollide = true
Part124.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part124.CFrame = CFrame.new(105, 127.99999237060547, -12, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part124.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part124.Material = Enum.Material.Marble
Part124.BrickColor = BrickColor.new("Medium stone grey")
Part124.Transparency = 0
Part124.Reflectance = 0
Part124.Locked = false
Part124.Shape = Enum.PartType.Block

Part511 = Instance.new("Part")
Part511.Name = "Part51"
Part511.Parent = Grandosla
Part511.Anchored = true
Part511.CanCollide = true
Part511.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part511.CFrame = CFrame.new(109.49996948242188, 107.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part511.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part511.Material = Enum.Material.Marble
Part511.BrickColor = BrickColor.new("Medium stone grey")
Part511.Transparency = 0
Part511.Reflectance = 0
Part511.Locked = false
Part511.Shape = Enum.PartType.Block

Part119 = Instance.new("Part")
Part119.Name = "Part119"
Part119.Parent = Grandosla
Part119.Anchored = true
Part119.CanCollide = true
Part119.Size = Vector3.new(56.000000, 1.000000, 3.600000)
Part119.CFrame = CFrame.new(135, 124.49999237060547, -12.199996948242188, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part119.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part119.Material = Enum.Material.Marble
Part119.BrickColor = BrickColor.new("Medium stone grey")
Part119.Transparency = 0
Part119.Reflectance = 0
Part119.Locked = false
Part119.Shape = Enum.PartType.Block

Part76 = Instance.new("Part")
Part76.Name = "Part76"
Part76.Parent = Grandosla
Part76.Anchored = true
Part76.CanCollide = true
Part76.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part76.CFrame = CFrame.new(160.49996948242188, 165.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part76.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part76.Material = Enum.Material.Marble
Part76.BrickColor = BrickColor.new("Medium stone grey")
Part76.Transparency = 0
Part76.Reflectance = 0
Part76.Locked = false
Part76.Shape = Enum.PartType.Block

Wall = Instance.new("Part")
Wall.Name = "Wall"
Wall.Parent = Grandosla
Wall.Anchored = true
Wall.CanCollide = true
Wall.Size = Vector3.new(184.000000, 0.400000, 56.000000)
Wall.CFrame = CFrame.new(135, 127.99999237060547, -10.199996948242188, 0, 0, 1, -1, 0, 0, 0, -1, 0)
Wall.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall.Material = Enum.Material.Plastic
Wall.BrickColor = BrickColor.new("Dark stone grey")
Wall.Transparency = 1
Wall.Reflectance = 0
Wall.Locked = false
Wall.Shape = Enum.PartType.Block
Texture = Instance.new("Texture")
Texture.Name = "Texture"
Texture.Parent = Wall
Texture.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture.Face = Enum.NormalId.Bottom
Texture.StudsPerTileU = 5
Texture.StudsPerTileV = 5
Texture.Transparency = 0
Texture2 = Instance.new("Texture")
Texture2.Name = "Texture2"
Texture2.Parent = Wall
Texture2.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture2.Face = Enum.NormalId.Top
Texture2.StudsPerTileU = 5
Texture2.StudsPerTileV = 5
Texture2.Transparency = 0

Part75 = Instance.new("Part")
Part75.Name = "Part75"
Part75.Parent = Grandosla
Part75.Anchored = true
Part75.CanCollide = true
Part75.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part75.CFrame = CFrame.new(160.49996948242188, 177.50038146972656, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part75.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part75.Material = Enum.Material.Marble
Part75.BrickColor = BrickColor.new("Medium stone grey")
Part75.Transparency = 0
Part75.Reflectance = 0
Part75.Locked = false
Part75.Shape = Enum.PartType.Block

Part106 = Instance.new("Part")
Part106.Name = "Part106"
Part106.Parent = Grandosla
Part106.Anchored = true
Part106.CanCollide = true
Part106.Size = Vector3.new(64.000000, 1.000000, 4.000000)
Part106.CFrame = CFrame.new(105, 220.5, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part106.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part106.Material = Enum.Material.Marble
Part106.BrickColor = BrickColor.new("Medium stone grey")
Part106.Transparency = 0
Part106.Reflectance = 0
Part106.Locked = false
Part106.Shape = Enum.PartType.Block

Part27 = Instance.new("Part")
Part27.Name = "Part27"
Part27.Parent = Grandosla
Part27.Anchored = true
Part27.CanCollide = true
Part27.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part27.CFrame = CFrame.new(109.49996948242188, 87.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part27.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part27.Material = Enum.Material.Marble
Part27.BrickColor = BrickColor.new("Medium stone grey")
Part27.Transparency = 0
Part27.Reflectance = 0
Part27.Locked = false
Part27.Shape = Enum.PartType.Block

Part102 = Instance.new("Part")
Part102.Name = "Part10"
Part102.Parent = Grandosla
Part102.Anchored = true
Part102.CanCollide = true
Part102.Size = Vector3.new(56.000000, 1.000000, 55.000000)
Part102.CFrame = CFrame.new(134.99996948242188, 220.50039672851562, -42.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part102.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part102.Material = Enum.Material.Marble
Part102.BrickColor = BrickColor.new("Medium stone grey")
Part102.Transparency = 0
Part102.Reflectance = 0
Part102.Locked = false
Part102.Shape = Enum.PartType.Block

Part63 = Instance.new("Part")
Part63.Name = "Part63"
Part63.Parent = Grandosla
Part63.Anchored = true
Part63.CanCollide = true
Part63.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part63.CFrame = CFrame.new(160.49996948242188, 141.50025939941406, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part63.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part63.Material = Enum.Material.Marble
Part63.BrickColor = BrickColor.new("Medium stone grey")
Part63.Transparency = 0
Part63.Reflectance = 0
Part63.Locked = false
Part63.Shape = Enum.PartType.Block

Part126 = Instance.new("Part")
Part126.Name = "Part126"
Part126.Parent = Grandosla
Part126.Anchored = true
Part126.CanCollide = true
Part126.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part126.CFrame = CFrame.new(103.500244140625, 222.5, -73.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part126.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part126.Material = Enum.Material.Marble
Part126.BrickColor = BrickColor.new("Medium stone grey")
Part126.Transparency = 0
Part126.Reflectance = 0
Part126.Locked = false
Part126.Shape = Enum.PartType.Block

Part100 = Instance.new("Part")
Part100.Name = "Part100"
Part100.Parent = Grandosla
Part100.Anchored = true
Part100.CanCollide = true
Part100.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part100.CFrame = CFrame.new(160.49996948242188, 199.5004425048828, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part100.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part100.Material = Enum.Material.Marble
Part100.BrickColor = BrickColor.new("Medium stone grey")
Part100.Transparency = 0
Part100.Reflectance = 0
Part100.Locked = false
Part100.Shape = Enum.PartType.Block

Part122 = Instance.new("Part")
Part122.Name = "Part122"
Part122.Parent = Grandosla
Part122.Anchored = true
Part122.CanCollide = true
Part122.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part122.CFrame = CFrame.new(160.49996948242188, 215.49996948242188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part122.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part122.Material = Enum.Material.Marble
Part122.BrickColor = BrickColor.new("Medium stone grey")
Part122.Transparency = 0
Part122.Reflectance = 0
Part122.Locked = false
Part122.Shape = Enum.PartType.Block

Part38 = Instance.new("Part")
Part38.Name = "Part38"
Part38.Parent = Grandosla
Part38.Anchored = true
Part38.CanCollide = true
Part38.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part38.CFrame = CFrame.new(109.49996948242188, 53.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part38.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part38.Material = Enum.Material.Marble
Part38.BrickColor = BrickColor.new("Medium stone grey")
Part38.Transparency = 0
Part38.Reflectance = 0
Part38.Locked = false
Part38.Shape = Enum.PartType.Block

Part81 = Instance.new("Part")
Part81.Name = "Part8"
Part81.Parent = Grandosla
Part81.Anchored = true
Part81.CanCollide = true
Part81.Size = Vector3.new(16.000000, 6.000000, 0.200000)
Part81.CFrame = CFrame.new(126, 57.00001525878906, -74.0999984741211, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part81.Color = Color3.new(0.792157, 0.796078, 0.819608)
Part81.Material = Enum.Material.Marble
Part81.BrickColor = BrickColor.new("Ghost grey")
Part81.Transparency = 0
Part81.Reflectance = 0
Part81.Locked = false
Part81.Shape = Enum.PartType.Block
SurfaceGui = Instance.new("SurfaceGui")
SurfaceGui.Name = "SurfaceGui"
SurfaceGui.Parent = Part81
SurfaceGui.AlwaysOnTop = false
SurfaceGui.CanvasSize = Vector2.new(500.000000, 100.000000)
SurfaceGui.ClipsDescendants = false
SurfaceGui.Face = Enum.NormalId.Front
SurfaceGui.LightInfluence = 0
SurfaceGui.SizingMode = Enum.SurfaceGuiSizingMode.FixedSize
TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = SurfaceGui
TextLabel.Text = "GRANDOSLA"
TextLabel.Font = Enum.Font.SourceSansBold
TextLabel.TextSize = 96
TextLabel.TextColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel.Size = UDim2.new(1, 0, 1, 0)
TextLabel.Position = UDim2.new(0, 0, 0, 0)
TextLabel.BorderSizePixel = 1
TextLabel.BackgroundTransparency = 1

Part1021 = Instance.new("Part")
Part1021.Name = "Part102"
Part1021.Parent = Grandosla
Part1021.Anchored = true
Part1021.CanCollide = true
Part1021.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part1021.CFrame = CFrame.new(160.49996948242188, 209.5004119873047, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part1021.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1021.Material = Enum.Material.Marble
Part1021.BrickColor = BrickColor.new("Medium stone grey")
Part1021.Transparency = 0
Part1021.Reflectance = 0
Part1021.Locked = false
Part1021.Shape = Enum.PartType.Block

Part121 = Instance.new("Part")
Part121.Name = "Part12"
Part121.Parent = Grandosla
Part121.Anchored = true
Part121.CanCollide = true
Part121.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part121.CFrame = CFrame.new(109.49996948242188, 41.49995422363281, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part121.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part121.Material = Enum.Material.Marble
Part121.BrickColor = BrickColor.new("Medium stone grey")
Part121.Transparency = 0
Part121.Reflectance = 0
Part121.Locked = false
Part121.Shape = Enum.PartType.Block

Part78 = Instance.new("Part")
Part78.Name = "Part78"
Part78.Parent = Grandosla
Part78.Anchored = true
Part78.CanCollide = true
Part78.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part78.CFrame = CFrame.new(160.49996948242188, 185.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part78.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part78.Material = Enum.Material.Marble
Part78.BrickColor = BrickColor.new("Medium stone grey")
Part78.Transparency = 0
Part78.Reflectance = 0
Part78.Locked = false
Part78.Shape = Enum.PartType.Block

Part65 = Instance.new("Part")
Part65.Name = "Part65"
Part65.Parent = Grandosla
Part65.Anchored = true
Part65.CanCollide = true
Part65.Size = Vector3.new(1.000000, 97.000000, 1.000000)
Part65.CFrame = CFrame.new(162.49996948242188, 172.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part65.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part65.Material = Enum.Material.Marble
Part65.BrickColor = BrickColor.new("Medium stone grey")
Part65.Transparency = 0
Part65.Reflectance = 0
Part65.Locked = false
Part65.Shape = Enum.PartType.Block

Wall1 = Instance.new("Part")
Wall1.Name = "Wall"
Wall1.Parent = Grandosla
Wall1.Anchored = true
Wall1.CanCollide = true
Wall1.Size = Vector3.new(184.000000, 0.400000, 56.000000)
Wall1.CFrame = CFrame.new(103.19999694824219, 127.99999237060547, -42.00000762939453, 0, 1, -0, -1, 0, 0, 0, 0, 1)
Wall1.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall1.Material = Enum.Material.Plastic
Wall1.BrickColor = BrickColor.new("Dark stone grey")
Wall1.Transparency = 1
Wall1.Reflectance = 0
Wall1.Locked = false
Wall1.Shape = Enum.PartType.Block
Texture1 = Instance.new("Texture")
Texture1.Name = "Texture"
Texture1.Parent = Wall1
Texture1.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture1.Face = Enum.NormalId.Bottom
Texture1.StudsPerTileU = 5
Texture1.StudsPerTileV = 5
Texture1.Transparency = 0
Texture21 = Instance.new("Texture")
Texture21.Name = "Texture2"
Texture21.Parent = Wall1
Texture21.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture21.Face = Enum.NormalId.Top
Texture21.StudsPerTileU = 5
Texture21.StudsPerTileV = 5
Texture21.Transparency = 0

Part92 = Instance.new("Part")
Part92.Name = "Part92"
Part92.Parent = Grandosla
Part92.Anchored = true
Part92.CanCollide = true
Part92.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part92.CFrame = CFrame.new(160.49996948242188, 167.50039672851562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part92.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part92.Material = Enum.Material.Marble
Part92.BrickColor = BrickColor.new("Medium stone grey")
Part92.Transparency = 0
Part92.Reflectance = 0
Part92.Locked = false
Part92.Shape = Enum.PartType.Block

Part87 = Instance.new("Part")
Part87.Name = "Part87"
Part87.Parent = Grandosla
Part87.Anchored = true
Part87.CanCollide = true
Part87.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part87.CFrame = CFrame.new(160.49996948242188, 151.50035095214844, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part87.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part87.Material = Enum.Material.Marble
Part87.BrickColor = BrickColor.new("Medium stone grey")
Part87.Transparency = 0
Part87.Reflectance = 0
Part87.Locked = false
Part87.Shape = Enum.PartType.Block

TopLight = Instance.new("Part")
TopLight.Name = "TopLight"
TopLight.Parent = Grandosla
TopLight.Anchored = true
TopLight.CanCollide = true
TopLight.Size = Vector3.new(64.000000, 1.000000, 64.000000)
TopLight.CFrame = CFrame.new(135, 262.5, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
TopLight.Color = Color3.new(0.639216, 0.635294, 0.647059)
TopLight.Material = Enum.Material.Plastic
TopLight.BrickColor = BrickColor.new("Medium stone grey")
TopLight.Transparency = 1
TopLight.Reflectance = 0
TopLight.Locked = false
TopLight.Shape = Enum.PartType.Block
SurfaceLight = Instance.new("SurfaceLight")
SurfaceLight.Name = "SurfaceLight"
SurfaceLight.Parent = TopLight

Part28 = Instance.new("Part")
Part28.Name = "Part28"
Part28.Parent = Grandosla
Part28.Anchored = true
Part28.CanCollide = true
Part28.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part28.CFrame = CFrame.new(109.49996948242188, 91.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part28.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part28.Material = Enum.Material.Marble
Part28.BrickColor = BrickColor.new("Medium stone grey")
Part28.Transparency = 0
Part28.Reflectance = 0
Part28.Locked = false
Part28.Shape = Enum.PartType.Block

Part107 = Instance.new("Part")
Part107.Name = "Part107"
Part107.Parent = Grandosla
Part107.Anchored = true
Part107.CanCollide = true
Part107.Size = Vector3.new(8.000000, 12.000000, 1.000000)
Part107.CFrame = CFrame.new(111, 42, -72.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part107.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part107.Material = Enum.Material.Marble
Part107.BrickColor = BrickColor.new("Medium stone grey")
Part107.Transparency = 0
Part107.Reflectance = 0
Part107.Locked = false
Part107.Shape = Enum.PartType.Block

Part141 = Instance.new("Part")
Part141.Name = "Part14"
Part141.Parent = Grandosla
Part141.Anchored = true
Part141.CanCollide = true
Part141.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part141.CFrame = CFrame.new(109.49996948242188, 37.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part141.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part141.Material = Enum.Material.Marble
Part141.BrickColor = BrickColor.new("Medium stone grey")
Part141.Transparency = 0
Part141.Reflectance = 0
Part141.Locked = false
Part141.Shape = Enum.PartType.Block

Part911 = Instance.new("Part")
Part911.Name = "Part91"
Part911.Parent = Grandosla
Part911.Anchored = true
Part911.CanCollide = true
Part911.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part911.CFrame = CFrame.new(160.49996948242188, 163.50033569335938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part911.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part911.Material = Enum.Material.Marble
Part911.BrickColor = BrickColor.new("Medium stone grey")
Part911.Transparency = 0
Part911.Reflectance = 0
Part911.Locked = false
Part911.Shape = Enum.PartType.Block

Part47 = Instance.new("Part")
Part47.Name = "Part47"
Part47.Parent = Grandosla
Part47.Anchored = true
Part47.CanCollide = true
Part47.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part47.CFrame = CFrame.new(109.49996948242188, 115.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part47.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part47.Material = Enum.Material.Marble
Part47.BrickColor = BrickColor.new("Medium stone grey")
Part47.Transparency = 0
Part47.Reflectance = 0
Part47.Locked = false
Part47.Shape = Enum.PartType.Block

Part79 = Instance.new("Part")
Part79.Name = "Part79"
Part79.Parent = Grandosla
Part79.Anchored = true
Part79.CanCollide = true
Part79.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part79.CFrame = CFrame.new(160.49996948242188, 171.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part79.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part79.Material = Enum.Material.Marble
Part79.BrickColor = BrickColor.new("Medium stone grey")
Part79.Transparency = 0
Part79.Reflectance = 0
Part79.Locked = false
Part79.Shape = Enum.PartType.Block

Part72 = Instance.new("Part")
Part72.Name = "Part72"
Part72.Parent = Grandosla
Part72.Anchored = true
Part72.CanCollide = true
Part72.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part72.CFrame = CFrame.new(160.49996948242188, 169.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part72.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part72.Material = Enum.Material.Marble
Part72.BrickColor = BrickColor.new("Medium stone grey")
Part72.Transparency = 0
Part72.Reflectance = 0
Part72.Locked = false
Part72.Shape = Enum.PartType.Block

Wall2 = Instance.new("Part")
Wall2.Name = "Wall"
Wall2.Parent = Grandosla
Wall2.Anchored = true
Wall2.CanCollide = true
Wall2.Size = Vector3.new(184.000000, 0.400000, 56.000000)
Wall2.CFrame = CFrame.new(166.8000030517578, 128, -42, 0, 1, -0, -1, 0, 0, 0, 0, 1)
Wall2.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall2.Material = Enum.Material.Plastic
Wall2.BrickColor = BrickColor.new("Dark stone grey")
Wall2.Transparency = 1
Wall2.Reflectance = 0
Wall2.Locked = false
Wall2.Shape = Enum.PartType.Block
Texture3 = Instance.new("Texture")
Texture3.Name = "Texture"
Texture3.Parent = Wall2
Texture3.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture3.Face = Enum.NormalId.Bottom
Texture3.StudsPerTileU = 5
Texture3.StudsPerTileV = 5
Texture3.Transparency = 0
Texture22 = Instance.new("Texture")
Texture22.Name = "Texture2"
Texture22.Parent = Wall2
Texture22.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture22.Face = Enum.NormalId.Top
Texture22.StudsPerTileU = 5
Texture22.StudsPerTileV = 5
Texture22.Transparency = 0

CornerWedge1 = Instance.new("CornerWedgePart")
CornerWedge1.Name = "CornerWedge"
CornerWedge1.Parent = Grandosla
CornerWedge1.Anchored = true
CornerWedge1.CanCollide = true
CornerWedge1.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge1.CFrame = CFrame.new(175, 44, -82, -1, 0, 0, 0, 1, 0, 0, 0, -1)
CornerWedge1.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge1.Material = Enum.Material.Marble
CornerWedge1.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge1.Transparency = 0
CornerWedge1.Reflectance = 0
CornerWedge1.Locked = false

Part105 = Instance.new("Part")
Part105.Name = "Part105"
Part105.Parent = Grandosla
Part105.Anchored = true
Part105.CanCollide = true
Part105.Size = Vector3.new(4.000000, 1.000000, 56.000000)
Part105.CFrame = CFrame.new(135, 220.5, -72, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part105.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part105.Material = Enum.Material.Marble
Part105.BrickColor = BrickColor.new("Medium stone grey")
Part105.Transparency = 0
Part105.Reflectance = 0
Part105.Locked = false
Part105.Shape = Enum.PartType.Block

Part123 = Instance.new("Part")
Part123.Name = "Part123"
Part123.Parent = Grandosla
Part123.Anchored = true
Part123.CanCollide = true
Part123.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part123.CFrame = CFrame.new(105, 127.99999237060547, -72, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part123.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part123.Material = Enum.Material.Marble
Part123.BrickColor = BrickColor.new("Medium stone grey")
Part123.Transparency = 0
Part123.Reflectance = 0
Part123.Locked = false
Part123.Shape = Enum.PartType.Block

Part710 = Instance.new("Part")
Part710.Name = "Part7"
Part710.Parent = Grandosla
Part710.Anchored = true
Part710.CanCollide = true
Part710.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part710.CFrame = CFrame.new(165, 128, -72, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part710.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part710.Material = Enum.Material.Marble
Part710.BrickColor = BrickColor.new("Medium stone grey")
Part710.Transparency = 0
Part710.Reflectance = 0
Part710.Locked = false
Part710.Shape = Enum.PartType.Block

Part19 = Instance.new("Part")
Part19.Name = "Part19"
Part19.Parent = Grandosla
Part19.Anchored = true
Part19.CanCollide = true
Part19.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part19.CFrame = CFrame.new(109.49996948242188, 39.49995422363281, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part19.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part19.Material = Enum.Material.Marble
Part19.BrickColor = BrickColor.new("Medium stone grey")
Part19.Transparency = 0
Part19.Reflectance = 0
Part19.Locked = false
Part19.Shape = Enum.PartType.Block

Part37 = Instance.new("Part")
Part37.Name = "Part37"
Part37.Parent = Grandosla
Part37.Anchored = true
Part37.CanCollide = true
Part37.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part37.CFrame = CFrame.new(109.49996948242188, 83.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part37.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part37.Material = Enum.Material.Marble
Part37.BrickColor = BrickColor.new("Medium stone grey")
Part37.Transparency = 0
Part37.Reflectance = 0
Part37.Locked = false
Part37.Shape = Enum.PartType.Block

Part113 = Instance.new("Part")
Part113.Name = "Part113"
Part113.Parent = Grandosla
Part113.Anchored = true
Part113.CanCollide = true
Part113.Size = Vector3.new(1.000000, 1.000000, 62.000000)
Part113.CFrame = CFrame.new(135.000244140625, 224.49996948242188, -73.5001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part113.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part113.Material = Enum.Material.Marble
Part113.BrickColor = BrickColor.new("Medium stone grey")
Part113.Transparency = 0
Part113.Reflectance = 0
Part113.Locked = false
Part113.Shape = Enum.PartType.Block

Part112 = Instance.new("Part")
Part112.Name = "Part112"
Part112.Parent = Grandosla
Part112.Anchored = true
Part112.CanCollide = true
Part112.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part112.CFrame = CFrame.new(166.5, 222.5, -10.5, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part112.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part112.Material = Enum.Material.Marble
Part112.BrickColor = BrickColor.new("Medium stone grey")
Part112.Transparency = 0
Part112.Reflectance = 0
Part112.Locked = false
Part112.Shape = Enum.PartType.Block

Part811 = Instance.new("Part")
Part811.Name = "Part81"
Part811.Parent = Grandosla
Part811.Anchored = true
Part811.CanCollide = true
Part811.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part811.CFrame = CFrame.new(160.49996948242188, 187.50047302246094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part811.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part811.Material = Enum.Material.Marble
Part811.BrickColor = BrickColor.new("Medium stone grey")
Part811.Transparency = 0
Part811.Reflectance = 0
Part811.Locked = false
Part811.Shape = Enum.PartType.Block

Part69 = Instance.new("Part")
Part69.Name = "Part69"
Part69.Parent = Grandosla
Part69.Anchored = true
Part69.CanCollide = true
Part69.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part69.CFrame = CFrame.new(160.49996948242188, 127.50023651123047, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part69.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part69.Material = Enum.Material.Marble
Part69.BrickColor = BrickColor.new("Medium stone grey")
Part69.Transparency = 0
Part69.Reflectance = 0
Part69.Locked = false
Part69.Shape = Enum.PartType.Block

Part30 = Instance.new("Part")
Part30.Name = "Part30"
Part30.Parent = Grandosla
Part30.Anchored = true
Part30.CanCollide = true
Part30.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part30.CFrame = CFrame.new(109.49996948242188, 63.50001525878906, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part30.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part30.Material = Enum.Material.Marble
Part30.BrickColor = BrickColor.new("Medium stone grey")
Part30.Transparency = 0
Part30.Reflectance = 0
Part30.Locked = false
Part30.Shape = Enum.PartType.Block

Part23 = Instance.new("Part")
Part23.Name = "Part23"
Part23.Parent = Grandosla
Part23.Anchored = true
Part23.CanCollide = true
Part23.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part23.CFrame = CFrame.new(109.49996948242188, 79.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part23.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part23.Material = Enum.Material.Marble
Part23.BrickColor = BrickColor.new("Medium stone grey")
Part23.Transparency = 0
Part23.Reflectance = 0
Part23.Locked = false
Part23.Shape = Enum.PartType.Block

Part99 = Instance.new("Part")
Part99.Name = "Part99"
Part99.Parent = Grandosla
Part99.Anchored = true
Part99.CanCollide = true
Part99.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part99.CFrame = CFrame.new(160.49996948242188, 195.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part99.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part99.Material = Enum.Material.Marble
Part99.BrickColor = BrickColor.new("Medium stone grey")
Part99.Transparency = 0
Part99.Reflectance = 0
Part99.Locked = false
Part99.Shape = Enum.PartType.Block

Wedge2 = Instance.new("WedgePart")
Wedge2.Name = "Wedge"
Wedge2.Parent = Grandosla
Wedge2.Anchored = true
Wedge2.CanCollide = true
Wedge2.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge2.CFrame = CFrame.new(135, 44, -2, -1, 0, 0, 0, 1, 0, 0, 0, -1)
Wedge2.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge2.Material = Enum.Material.Marble
Wedge2.BrickColor = BrickColor.new("Medium stone grey")
Wedge2.Transparency = 0
Wedge2.Reflectance = 0
Wedge2.Locked = false

Part82 = Instance.new("Part")
Part82.Name = "Part82"
Part82.Parent = Grandosla
Part82.Anchored = true
Part82.CanCollide = true
Part82.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part82.CFrame = CFrame.new(160.49996948242188, 189.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part82.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part82.Material = Enum.Material.Marble
Part82.BrickColor = BrickColor.new("Medium stone grey")
Part82.Transparency = 0
Part82.Reflectance = 0
Part82.Locked = false
Part82.Shape = Enum.PartType.Block

Part57 = Instance.new("Part")
Part57.Name = "Part57"
Part57.Parent = Grandosla
Part57.Anchored = true
Part57.CanCollide = true
Part57.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part57.CFrame = CFrame.new(109.49996948242188, 121.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part57.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part57.Material = Enum.Material.Marble
Part57.BrickColor = BrickColor.new("Medium stone grey")
Part57.Transparency = 0
Part57.Reflectance = 0
Part57.Locked = false
Part57.Shape = Enum.PartType.Block

Part62 = Instance.new("Part")
Part62.Name = "Part62"
Part62.Parent = Grandosla
Part62.Anchored = true
Part62.CanCollide = true
Part62.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part62.CFrame = CFrame.new(160.49996948242188, 137.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part62.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part62.Material = Enum.Material.Marble
Part62.BrickColor = BrickColor.new("Medium stone grey")
Part62.Transparency = 0
Part62.Reflectance = 0
Part62.Locked = false
Part62.Shape = Enum.PartType.Block

Part93 = Instance.new("Part")
Part93.Name = "Part93"
Part93.Parent = Grandosla
Part93.Anchored = true
Part93.CanCollide = true
Part93.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part93.CFrame = CFrame.new(160.49996948242188, 153.5003662109375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part93.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part93.Material = Enum.Material.Marble
Part93.BrickColor = BrickColor.new("Medium stone grey")
Part93.Transparency = 0
Part93.Reflectance = 0
Part93.Locked = false
Part93.Shape = Enum.PartType.Block

Part40 = Instance.new("Part")
Part40.Name = "Part40"
Part40.Parent = Grandosla
Part40.Anchored = true
Part40.CanCollide = true
Part40.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part40.CFrame = CFrame.new(109.49996948242188, 93.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part40.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part40.Material = Enum.Material.Marble
Part40.BrickColor = BrickColor.new("Medium stone grey")
Part40.Transparency = 0
Part40.Reflectance = 0
Part40.Locked = false
Part40.Shape = Enum.PartType.Block

Part83 = Instance.new("Part")
Part83.Name = "Part83"
Part83.Parent = Grandosla
Part83.Anchored = true
Part83.CanCollide = true
Part83.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part83.CFrame = CFrame.new(160.49996948242188, 191.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part83.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part83.Material = Enum.Material.Marble
Part83.BrickColor = BrickColor.new("Medium stone grey")
Part83.Transparency = 0
Part83.Reflectance = 0
Part83.Locked = false
Part83.Shape = Enum.PartType.Block

Part55 = Instance.new("Part")
Part55.Name = "Part55"
Part55.Parent = Grandosla
Part55.Anchored = true
Part55.CanCollide = true
Part55.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part55.CFrame = CFrame.new(109.49996948242188, 123.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part55.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part55.Material = Enum.Material.Marble
Part55.BrickColor = BrickColor.new("Medium stone grey")
Part55.Transparency = 0
Part55.Reflectance = 0
Part55.Locked = false
Part55.Shape = Enum.PartType.Block

Part18 = Instance.new("Part")
Part18.Name = "Part18"
Part18.Parent = Grandosla
Part18.Anchored = true
Part18.CanCollide = true
Part18.Size = Vector3.new(1.000000, 89.000000, 1.000000)
Part18.CFrame = CFrame.new(111.49996948242188, 80.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part18.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part18.Material = Enum.Material.Marble
Part18.BrickColor = BrickColor.new("Medium stone grey")
Part18.Transparency = 0
Part18.Reflectance = 0
Part18.Locked = false
Part18.Shape = Enum.PartType.Block

Wall3 = Instance.new("Part")
Wall3.Name = "Wall"
Wall3.Parent = Grandosla
Wall3.Anchored = true
Wall3.CanCollide = true
Wall3.Size = Vector3.new(155.000000, 0.400000, 9.100000)
Wall3.CFrame = CFrame.new(111.55000305175781, 142.5, -73.80000305175781, 0, 0, 1, -1, 0, 0, 0, -1, 0)
Wall3.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall3.Material = Enum.Material.Plastic
Wall3.BrickColor = BrickColor.new("Dark stone grey")
Wall3.Transparency = 1
Wall3.Reflectance = 0
Wall3.Locked = false
Wall3.Shape = Enum.PartType.Block
Texture4 = Instance.new("Texture")
Texture4.Name = "Texture"
Texture4.Parent = Wall3
Texture4.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture4.Face = Enum.NormalId.Bottom
Texture4.StudsPerTileU = 5
Texture4.StudsPerTileV = 5
Texture4.Transparency = 0
Texture23 = Instance.new("Texture")
Texture23.Name = "Texture2"
Texture23.Parent = Wall3
Texture23.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture23.Face = Enum.NormalId.Top
Texture23.StudsPerTileU = 5
Texture23.StudsPerTileV = 5
Texture23.Transparency = 0

Part42 = Instance.new("Part")
Part42.Name = "Part42"
Part42.Parent = Grandosla
Part42.Anchored = true
Part42.CanCollide = true
Part42.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part42.CFrame = CFrame.new(109.49996948242188, 59.499969482421875, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part42.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part42.Material = Enum.Material.Marble
Part42.BrickColor = BrickColor.new("Medium stone grey")
Part42.Transparency = 0
Part42.Reflectance = 0
Part42.Locked = false
Part42.Shape = Enum.PartType.Block

Part1211 = Instance.new("Part")
Part1211.Name = "Part121"
Part1211.Parent = Grandosla
Part1211.Anchored = true
Part1211.CanCollide = true
Part1211.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part1211.CFrame = CFrame.new(160.49996948242188, 213.5, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part1211.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1211.Material = Enum.Material.Marble
Part1211.BrickColor = BrickColor.new("Medium stone grey")
Part1211.Transparency = 0
Part1211.Reflectance = 0
Part1211.Locked = false
Part1211.Shape = Enum.PartType.Block

Part125 = Instance.new("Part")
Part125.Name = "Part125"
Part125.Parent = Grandosla
Part125.Anchored = true
Part125.CanCollide = true
Part125.Size = Vector3.new(4.000000, 184.000000, 4.000000)
Part125.CFrame = CFrame.new(165, 128, -12, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part125.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part125.Material = Enum.Material.Marble
Part125.BrickColor = BrickColor.new("Medium stone grey")
Part125.Transparency = 0
Part125.Reflectance = 0
Part125.Locked = false
Part125.Shape = Enum.PartType.Block

Part96 = Instance.new("Part")
Part96.Name = "Part96"
Part96.Parent = Grandosla
Part96.Anchored = true
Part96.CanCollide = true
Part96.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part96.CFrame = CFrame.new(160.49996948242188, 203.50042724609375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part96.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part96.Material = Enum.Material.Marble
Part96.BrickColor = BrickColor.new("Medium stone grey")
Part96.Transparency = 0
Part96.Reflectance = 0
Part96.Locked = false
Part96.Shape = Enum.PartType.Block

Part118 = Instance.new("Part")
Part118.Name = "Part118"
Part118.Parent = Grandosla
Part118.Anchored = true
Part118.CanCollide = true
Part118.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part118.CFrame = CFrame.new(160.49996948242188, 219.49990844726562, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part118.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part118.Material = Enum.Material.Marble
Part118.BrickColor = BrickColor.new("Medium stone grey")
Part118.Transparency = 0
Part118.Reflectance = 0
Part118.Locked = false
Part118.Shape = Enum.PartType.Block

Part116 = Instance.new("Part")
Part116.Name = "Part116"
Part116.Parent = Grandosla
Part116.Anchored = true
Part116.CanCollide = true
Part116.Size = Vector3.new(1.000000, 29.000000, 1.000000)
Part116.CFrame = CFrame.new(115.5, 50.5, -73.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part116.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part116.Material = Enum.Material.Marble
Part116.BrickColor = BrickColor.new("Medium stone grey")
Part116.Transparency = 0
Part116.Reflectance = 0
Part116.Locked = false
Part116.Shape = Enum.PartType.Block

Part111 = Instance.new("Part")
Part111.Name = "Part11"
Part111.Parent = Grandosla
Part111.Anchored = true
Part111.CanCollide = true
Part111.Size = Vector3.new(8.000000, 1.000000, 1.000000)
Part111.CFrame = CFrame.new(111, 64.5, -73.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part111.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part111.Material = Enum.Material.Marble
Part111.BrickColor = BrickColor.new("Medium stone grey")
Part111.Transparency = 0
Part111.Reflectance = 0
Part111.Locked = false
Part111.Shape = Enum.PartType.Block

Control = Instance.new("Model")
Control.Name = "Control"
Control.Parent = Grandosla
ComputerRoot = Instance.new("Part")
ComputerRoot.Name = "ComputerRoot"
ComputerRoot.Parent = Control
ComputerRoot.Anchored = true
ComputerRoot.CanCollide = true
ComputerRoot.Size = Vector3.new(4.000000, 4.000000, 1.000000)
ComputerRoot.CFrame = CFrame.new(150.5, 225, -42, 0, 0, 1, -1, 0, 0, 0, -1, 0)
ComputerRoot.Color = Color3.new(0.356863, 0.364706, 0.411765)
ComputerRoot.Material = Enum.Material.Plastic
ComputerRoot.BrickColor = BrickColor.new("Smoky grey")
ComputerRoot.Transparency = 0
ComputerRoot.Reflectance = 0
ComputerRoot.Locked = false
ComputerRoot.Shape = Enum.PartType.Block
Screen = Instance.new("Part")
Screen.Name = "Screen"
Screen.Parent = Control
Screen.Anchored = true
Screen.CanCollide = true
Screen.Size = Vector3.new(3.500000, 3.500000, 0.500000)
Screen.CFrame = CFrame.new(150.85000610351562, 225, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Screen.Color = Color3.new(0.015686, 0.686275, 0.925490)
Screen.Material = Enum.Material.Glass
Screen.BrickColor = BrickColor.new("Cyan")
Screen.Transparency = 0
Screen.Reflectance = 0
Screen.Locked = false
Screen.Shape = Enum.PartType.Block
SurfaceGui1 = Instance.new("SurfaceGui")
SurfaceGui1.Name = "SurfaceGui"
SurfaceGui1.Parent = Screen
SurfaceGui1.AlwaysOnTop = false
SurfaceGui1.CanvasSize = Vector2.new(800.000000, 600.000000)
SurfaceGui1.ClipsDescendants = true
SurfaceGui1.Face = Enum.NormalId.Back
SurfaceGui1.LightInfluence = 1
SurfaceGui1.SizingMode = Enum.SurfaceGuiSizingMode.PixelsPerStud
TextLabel1 = Instance.new("TextLabel")
TextLabel1.Name = "TextLabel"
TextLabel1.Parent = SurfaceGui1
TextLabel1.Text = "Grandosla Control Panel"
TextLabel1.Font = Enum.Font.SourceSansBold
TextLabel1.TextSize = 16
TextLabel1.TextColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel1.BackgroundColor3 = Color3.new(1.000000, 1.000000, 1.000000)
TextLabel1.Size = UDim2.new(1, 0, 0, 50)
TextLabel1.Position = UDim2.new(0, 0, 0, 0)
TextLabel1.BorderSizePixel = 1
TextLabel1.BackgroundTransparency = 1
ClickDetector = Instance.new("ClickDetector")
ClickDetector.Name = "ClickDetector"
ClickDetector.Parent = Screen
ClickDetector.MaxActivationDistance = 32
ClickDetector.CursorIcon = ""

Part86 = Instance.new("Part")
Part86.Name = "Part86"
Part86.Parent = Grandosla
Part86.Anchored = true
Part86.CanCollide = true
Part86.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part86.CFrame = CFrame.new(160.49996948242188, 157.50030517578125, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part86.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part86.Material = Enum.Material.Marble
Part86.BrickColor = BrickColor.new("Medium stone grey")
Part86.Transparency = 0
Part86.Reflectance = 0
Part86.Locked = false
Part86.Shape = Enum.PartType.Block

Part70 = Instance.new("Part")
Part70.Name = "Part70"
Part70.Parent = Grandosla
Part70.Anchored = true
Part70.CanCollide = true
Part70.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part70.CFrame = CFrame.new(160.49996948242188, 145.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part70.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part70.Material = Enum.Material.Marble
Part70.BrickColor = BrickColor.new("Medium stone grey")
Part70.Transparency = 0
Part70.Reflectance = 0
Part70.Locked = false
Part70.Shape = Enum.PartType.Block

Part66 = Instance.new("Part")
Part66.Name = "Part66"
Part66.Parent = Grandosla
Part66.Anchored = true
Part66.CanCollide = true
Part66.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part66.CFrame = CFrame.new(160.49996948242188, 133.5002899169922, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part66.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part66.Material = Enum.Material.Marble
Part66.BrickColor = BrickColor.new("Medium stone grey")
Part66.Transparency = 0
Part66.Reflectance = 0
Part66.Locked = false
Part66.Shape = Enum.PartType.Block

Part46 = Instance.new("Part")
Part46.Name = "Part46"
Part46.Parent = Grandosla
Part46.Anchored = true
Part46.CanCollide = true
Part46.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part46.CFrame = CFrame.new(109.49996948242188, 105.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part46.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part46.Material = Enum.Material.Marble
Part46.BrickColor = BrickColor.new("Medium stone grey")
Part46.Transparency = 0
Part46.Reflectance = 0
Part46.Locked = false
Part46.Shape = Enum.PartType.Block

StairCollide = Instance.new("WedgePart")
StairCollide.Name = "StairCollide"
StairCollide.Parent = Grandosla
StairCollide.Anchored = true
StairCollide.CanCollide = true
StairCollide.Size = Vector3.new(8.000000, 16.000000, 8.000000)
StairCollide.CFrame = CFrame.new(111, 44, -70, -1, 0, 0, 0, 1, 0, 0, 0, -1)
StairCollide.Color = Color3.new(0.639216, 0.635294, 0.647059)
StairCollide.Material = Enum.Material.Plastic
StairCollide.BrickColor = BrickColor.new("Medium stone grey")
StairCollide.Transparency = 1
StairCollide.Reflectance = 0
StairCollide.Locked = false

Part67 = Instance.new("Part")
Part67.Name = "Part67"
Part67.Parent = Grandosla
Part67.Anchored = true
Part67.CanCollide = true
Part67.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part67.CFrame = CFrame.new(160.49996948242188, 139.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part67.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part67.Material = Enum.Material.Marble
Part67.BrickColor = BrickColor.new("Medium stone grey")
Part67.Transparency = 0
Part67.Reflectance = 0
Part67.Locked = false
Part67.Shape = Enum.PartType.Block

Wall4 = Instance.new("Part")
Wall4.Name = "Wall"
Wall4.Parent = Grandosla
Wall4.Anchored = true
Wall4.CanCollide = true
Wall4.Size = Vector3.new(184.500000, 0.400000, 47.000000)
Wall4.CFrame = CFrame.new(139.5, 127.74999237060547, -73.80000305175781, 0, 0, 1, -1, 0, 0, 0, -1, 0)
Wall4.Color = Color3.new(0.388235, 0.372549, 0.384314)
Wall4.Material = Enum.Material.Plastic
Wall4.BrickColor = BrickColor.new("Dark stone grey")
Wall4.Transparency = 1
Wall4.Reflectance = 0
Wall4.Locked = false
Wall4.Shape = Enum.PartType.Block
Texture5 = Instance.new("Texture")
Texture5.Name = "Texture"
Texture5.Parent = Wall4
Texture5.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture5.Face = Enum.NormalId.Bottom
Texture5.StudsPerTileU = 5
Texture5.StudsPerTileV = 5
Texture5.Transparency = 0
Texture24 = Instance.new("Texture")
Texture24.Name = "Texture2"
Texture24.Parent = Wall4
Texture24.Texture = "http://www.roblox.com/asset/?id=45558204"
Texture24.Face = Enum.NormalId.Top
Texture24.StudsPerTileU = 5
Texture24.StudsPerTileV = 5
Texture24.Transparency = 0

Part49 = Instance.new("Part")
Part49.Name = "Part49"
Part49.Parent = Grandosla
Part49.Anchored = true
Part49.CanCollide = true
Part49.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part49.CFrame = CFrame.new(109.49996948242188, 101.49988555908203, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part49.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part49.Material = Enum.Material.Marble
Part49.BrickColor = BrickColor.new("Medium stone grey")
Part49.Transparency = 0
Part49.Reflectance = 0
Part49.Locked = false
Part49.Shape = Enum.PartType.Block

Part610 = Instance.new("Part")
Part610.Name = "Part6"
Part610.Parent = Grandosla
Part610.Anchored = true
Part610.CanCollide = true
Part610.Size = Vector3.new(1.000000, 3.000000, 1.000000)
Part610.CFrame = CFrame.new(166.5, 222.5, -73.5, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part610.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part610.Material = Enum.Material.Marble
Part610.BrickColor = BrickColor.new("Medium stone grey")
Part610.Transparency = 0
Part610.Reflectance = 0
Part610.Locked = false
Part610.Shape = Enum.PartType.Block

Storm = Instance.new("Sound")
Storm.Name = "Storm"
Storm.Parent = Grandosla
Storm.SoundId = "rbxassetid://3981355300"
Storm.Volume = 0.5
Storm.Playing = false

Defense = Instance.new("Part")
Defense.Name = "Defense"
Defense.Parent = Grandosla
Defense.Anchored = true
Defense.CanCollide = false
Defense.Size = Vector3.new(64.000000, 158.000000, 64.000000)
Defense.CFrame = CFrame.new(135, 115.00000762939453, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Defense.Color = Color3.new(0.929412, 0.917647, 0.917647)
Defense.Material = Enum.Material.Plastic
Defense.BrickColor = BrickColor.new("Lily white")
Defense.Transparency = 1
Defense.Reflectance = 0
Defense.Locked = false
Defense.Shape = Enum.PartType.Block
ParticleEmitter = Instance.new("ParticleEmitter")
ParticleEmitter.Parent = Defense
ParticleEmitter.Acceleration = Vector3.new(0.000000, 0.000000, 0.000000)
ParticleEmitter.Brightness = 1
ParticleEmitter.Color = ColorSequence.new({ColorSequenceKeypoint.new(0.0000, Color3.new(1.0000, 1.0000, 1.0000)), ColorSequenceKeypoint.new(1.0000, Color3.new(1.0000, 1.0000, 1.0000))})
ParticleEmitter.Drag = 0
ParticleEmitter.EmissionDirection = Enum.NormalId.Bottom
ParticleEmitter.Enabled = false
ParticleEmitter.FlipbookFramerate = NumberRange.new(1.0000, 1.0000)
ParticleEmitter.FlipbookLayout = Enum.ParticleFlipbookLayout.None
ParticleEmitter.FlipbookMode = Enum.ParticleFlipbookMode.Loop
ParticleEmitter.Lifetime = NumberRange.new(1.0000, 1.0000)
ParticleEmitter.LightEmission = 0.8299999833106995
ParticleEmitter.LightInfluence = 0
ParticleEmitter.LockedToPart = true
ParticleEmitter.Orientation = Enum.ParticleOrientation.FacingCamera
ParticleEmitter.Rate = 100
ParticleEmitter.Rotation = NumberRange.new(1000.0000, 1000.0000)
ParticleEmitter.RotSpeed = NumberRange.new(100000.0000, 100000.0000)
ParticleEmitter.Shape = Enum.ParticleEmitterShape.Box
ParticleEmitter.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
ParticleEmitter.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
ParticleEmitter.Size = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 20.0000), NumberSequenceKeypoint.new(1.0000, 20.0000)})
ParticleEmitter.Speed = NumberRange.new(20.0000, 20.0000)
ParticleEmitter.SpreadAngle = Vector2.new(-20.000000, 20.000000)
ParticleEmitter.Texture = "rbxassetid://255514024"
ParticleEmitter.TimeScale = 1
ParticleEmitter.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 1.0000), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1.0000), NumberSequenceKeypoint.new(0.0137, 0.0000), NumberSequenceKeypoint.new(0.1406, 1.0000), NumberSequenceKeypoint.new(0.1550, 0.0000), NumberSequenceKeypoint.new(0.1603, 1.0000), NumberSequenceKeypoint.new(0.3017, 1.0000), NumberSequenceKeypoint.new(0.3047, 0.0000), NumberSequenceKeypoint.new(0.3047, 1.0000), NumberSequenceKeypoint.new(0.4711, 1.0000), NumberSequenceKeypoint.new(0.4780, 0.0000), NumberSequenceKeypoint.new(0.4802, 1.0000), NumberSequenceKeypoint.new(0.6717, 1.0000), NumberSequenceKeypoint.new(0.6748, 0.0000), NumberSequenceKeypoint.new(0.6793, 1.0000), NumberSequenceKeypoint.new(0.8442, 1.0000), NumberSequenceKeypoint.new(0.8465, 0.0000), NumberSequenceKeypoint.new(0.8511, 1.0000), NumberSequenceKeypoint.new(1.0000, 1.0000)})
ParticleEmitter.VelocityInheritance = 0
ParticleEmitter.ZOffset = 0
Lightning = Instance.new("ParticleEmitter")
Lightning.Parent = Defense
Lightning.Acceleration = Vector3.new(0.000000, 0.000000, 0.000000)
Lightning.Brightness = 1
Lightning.Color = ColorSequence.new({ColorSequenceKeypoint.new(0.0000, Color3.new(1.0000, 1.0000, 1.0000)), ColorSequenceKeypoint.new(1.0000, Color3.new(1.0000, 1.0000, 1.0000))})
Lightning.Drag = 0
Lightning.EmissionDirection = Enum.NormalId.Bottom
Lightning.Enabled = false
Lightning.FlipbookFramerate = NumberRange.new(1.0000, 1.0000)
Lightning.FlipbookLayout = Enum.ParticleFlipbookLayout.None
Lightning.FlipbookMode = Enum.ParticleFlipbookMode.Loop
Lightning.Lifetime = NumberRange.new(1.0000, 1.0000)
Lightning.LightEmission = 0.8299999833106995
Lightning.LightInfluence = 0
Lightning.LockedToPart = true
Lightning.Orientation = Enum.ParticleOrientation.FacingCamera
Lightning.Rate = 100
Lightning.Rotation = NumberRange.new(1000.0000, 1000.0000)
Lightning.RotSpeed = NumberRange.new(100000.0000, 100000.0000)
Lightning.Shape = Enum.ParticleEmitterShape.Box
Lightning.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
Lightning.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
Lightning.Size = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 40.0000), NumberSequenceKeypoint.new(1.0000, 40.0000)})
Lightning.Speed = NumberRange.new(20.0000, 20.0000)
Lightning.SpreadAngle = Vector2.new(-20.000000, 20.000000)
Lightning.Texture = "rbxassetid://543954894"
Lightning.TimeScale = 1
Lightning.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0.0000, 1.0000), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1.0000), NumberSequenceKeypoint.new(0.0137, 0.0000), NumberSequenceKeypoint.new(0.1406, 1.0000), NumberSequenceKeypoint.new(0.1550, 0.0000), NumberSequenceKeypoint.new(0.1603, 1.0000), NumberSequenceKeypoint.new(0.3017, 1.0000), NumberSequenceKeypoint.new(0.3047, 0.0000), NumberSequenceKeypoint.new(0.3047, 1.0000), NumberSequenceKeypoint.new(0.4711, 1.0000), NumberSequenceKeypoint.new(0.4780, 0.0000), NumberSequenceKeypoint.new(0.4802, 1.0000), NumberSequenceKeypoint.new(0.6717, 1.0000), NumberSequenceKeypoint.new(0.6748, 0.0000), NumberSequenceKeypoint.new(0.6793, 1.0000), NumberSequenceKeypoint.new(0.8442, 1.0000), NumberSequenceKeypoint.new(0.8465, 0.0000), NumberSequenceKeypoint.new(0.8511, 1.0000), NumberSequenceKeypoint.new(1.0000, 1.0000)})
Lightning.VelocityInheritance = 0
Lightning.ZOffset = 0
Collide = Instance.new("Part")
Collide.Name = "Collide"
Collide.Parent = Defense
Collide.Anchored = true
Collide.CanCollide = false
Collide.Size = Vector3.new(64.000000, 181.000000, 64.000000)
Collide.CFrame = CFrame.new(135, 126.5, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Collide.Color = Color3.new(0.929412, 0.917647, 0.917647)
Collide.Material = Enum.Material.Plastic
Collide.BrickColor = BrickColor.new("Lily white")
Collide.Transparency = 1
Collide.Reflectance = 0
Collide.Locked = false
Collide.Shape = Enum.PartType.Block
Sound = Instance.new("Sound")
Sound.Name = "Sound"
Sound.Parent = Defense

Part44 = Instance.new("Part")
Part44.Name = "Part44"
Part44.Parent = Grandosla
Part44.Anchored = true
Part44.CanCollide = true
Part44.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part44.CFrame = CFrame.new(109.49996948242188, 73.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part44.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part44.Material = Enum.Material.Marble
Part44.BrickColor = BrickColor.new("Medium stone grey")
Part44.Transparency = 0
Part44.Reflectance = 0
Part44.Locked = false
Part44.Shape = Enum.PartType.Block

Part36 = Instance.new("Part")
Part36.Name = "Part36"
Part36.Parent = Grandosla
Part36.Anchored = true
Part36.CanCollide = true
Part36.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part36.CFrame = CFrame.new(109.49996948242188, 89.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part36.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part36.Material = Enum.Material.Marble
Part36.BrickColor = BrickColor.new("Medium stone grey")
Part36.Transparency = 0
Part36.Reflectance = 0
Part36.Locked = false
Part36.Shape = Enum.PartType.Block

Part26 = Instance.new("Part")
Part26.Name = "Part2"
Part26.Parent = Grandosla
Part26.Anchored = true
Part26.CanCollide = true
Part26.Size = Vector3.new(51.000000, 1.000000, 5.000000)
Part26.CFrame = CFrame.new(132.5, 220.5, -12.5, -1, 0, 0, 0, 1, 0, 0, 0, -1)
Part26.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part26.Material = Enum.Material.Marble
Part26.BrickColor = BrickColor.new("Medium stone grey")
Part26.Transparency = 0
Part26.Reflectance = 0
Part26.Locked = false
Part26.Shape = Enum.PartType.Block

Part50 = Instance.new("Part")
Part50.Name = "Part50"
Part50.Parent = Grandosla
Part50.Anchored = true
Part50.CanCollide = true
Part50.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part50.CFrame = CFrame.new(109.49996948242188, 111.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part50.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part50.Material = Enum.Material.Marble
Part50.BrickColor = BrickColor.new("Medium stone grey")
Part50.Transparency = 0
Part50.Reflectance = 0
Part50.Locked = false
Part50.Shape = Enum.PartType.Block

Part88 = Instance.new("Part")
Part88.Name = "Part88"
Part88.Parent = Grandosla
Part88.Anchored = true
Part88.CanCollide = true
Part88.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part88.CFrame = CFrame.new(160.49996948242188, 155.5003662109375, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part88.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part88.Material = Enum.Material.Marble
Part88.BrickColor = BrickColor.new("Medium stone grey")
Part88.Transparency = 0
Part88.Reflectance = 0
Part88.Locked = false
Part88.Shape = Enum.PartType.Block

CornerWedge2 = Instance.new("CornerWedgePart")
CornerWedge2.Name = "CornerWedge"
CornerWedge2.Parent = Grandosla
CornerWedge2.Anchored = true
CornerWedge2.CanCollide = true
CornerWedge2.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge2.CFrame = CFrame.new(95, 44, -2, 1, 0, 0, 0, 1, 0, 0, 0, 1)
CornerWedge2.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge2.Material = Enum.Material.Marble
CornerWedge2.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge2.Transparency = 0
CornerWedge2.Reflectance = 0
CornerWedge2.Locked = false

Part410 = Instance.new("Part")
Part410.Name = "Part4"
Part410.Parent = Grandosla
Part410.Anchored = true
Part410.CanCollide = true
Part410.Size = Vector3.new(64.000000, 1.000000, 4.000000)
Part410.CFrame = CFrame.new(165, 220.5, -42, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part410.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part410.Material = Enum.Material.Marble
Part410.BrickColor = BrickColor.new("Medium stone grey")
Part410.Transparency = 0
Part410.Reflectance = 0
Part410.Locked = false
Part410.Shape = Enum.PartType.Block

Root = Instance.new("Part")
Root.Name = "Root"
Root.Parent = Grandosla
Root.Anchored = true
Root.CanCollide = true
Root.Size = Vector3.new(96.000000, 1.000000, 96.000000)
Root.CFrame = CFrame.new(135, 35.5, -42, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Root.Color = Color3.new(0.639216, 0.635294, 0.647059)
Root.Material = Enum.Material.Marble
Root.BrickColor = BrickColor.new("Medium stone grey")
Root.Transparency = 0
Root.Reflectance = 0
Root.Locked = false
Root.Shape = Enum.PartType.Block

Part1111 = Instance.new("Part")
Part1111.Name = "Part111"
Part1111.Parent = Grandosla
Part1111.Anchored = true
Part1111.CanCollide = true
Part1111.Size = Vector3.new(8.000000, 14.000000, 1.000000)
Part1111.CFrame = CFrame.new(111, 43, -73.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part1111.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part1111.Material = Enum.Material.Marble
Part1111.BrickColor = BrickColor.new("Medium stone grey")
Part1111.Transparency = 0
Part1111.Reflectance = 0
Part1111.Locked = false
Part1111.Shape = Enum.PartType.Block

Part32 = Instance.new("Part")
Part32.Name = "Part3"
Part32.Parent = Grandosla
Part32.Anchored = true
Part32.CanCollide = true
Part32.Size = Vector3.new(5.000000, 1.000000, 1.000000)
Part32.CFrame = CFrame.new(160.5, 220.5, -10.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part32.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part32.Material = Enum.Material.Marble
Part32.BrickColor = BrickColor.new("Medium stone grey")
Part32.Transparency = 0
Part32.Reflectance = 0
Part32.Locked = false
Part32.Shape = Enum.PartType.Block

CornerWedge3 = Instance.new("CornerWedgePart")
CornerWedge3.Name = "CornerWedge"
CornerWedge3.Parent = Grandosla
CornerWedge3.Anchored = true
CornerWedge3.CanCollide = true
CornerWedge3.Size = Vector3.new(16.000000, 16.000000, 16.000000)
CornerWedge3.CFrame = CFrame.new(175, 44, -2, 0, 0, 1, 0, 1, -0, -1, 0, 0)
CornerWedge3.Color = Color3.new(0.639216, 0.635294, 0.647059)
CornerWedge3.Material = Enum.Material.Marble
CornerWedge3.BrickColor = BrickColor.new("Medium stone grey")
CornerWedge3.Transparency = 0
CornerWedge3.Reflectance = 0
CornerWedge3.Locked = false

Part52 = Instance.new("Part")
Part52.Name = "Part52"
Part52.Parent = Grandosla
Part52.Anchored = true
Part52.CanCollide = true
Part52.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part52.CFrame = CFrame.new(109.49996948242188, 113.49984741210938, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part52.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part52.Material = Enum.Material.Marble
Part52.BrickColor = BrickColor.new("Medium stone grey")
Part52.Transparency = 0
Part52.Reflectance = 0
Part52.Locked = false
Part52.Shape = Enum.PartType.Block

Part321 = Instance.new("Part")
Part321.Name = "Part32"
Part321.Parent = Grandosla
Part321.Anchored = true
Part321.CanCollide = true
Part321.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part321.CFrame = CFrame.new(109.49996948242188, 97.50004577636719, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part321.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part321.Material = Enum.Material.Marble
Part321.BrickColor = BrickColor.new("Medium stone grey")
Part321.Transparency = 0
Part321.Reflectance = 0
Part321.Locked = false
Part321.Shape = Enum.PartType.Block

Part97 = Instance.new("Part")
Part97.Name = "Part97"
Part97.Parent = Grandosla
Part97.Anchored = true
Part97.CanCollide = true
Part97.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part97.CFrame = CFrame.new(160.49996948242188, 211.5004119873047, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part97.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part97.Material = Enum.Material.Marble
Part97.BrickColor = BrickColor.new("Medium stone grey")
Part97.Transparency = 0
Part97.Reflectance = 0
Part97.Locked = false
Part97.Shape = Enum.PartType.Block

Part261 = Instance.new("Part")
Part261.Name = "Part26"
Part261.Parent = Grandosla
Part261.Anchored = true
Part261.CanCollide = true
Part261.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part261.CFrame = CFrame.new(109.49996948242188, 85.49998474121094, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part261.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part261.Material = Enum.Material.Marble
Part261.BrickColor = BrickColor.new("Medium stone grey")
Part261.Transparency = 0
Part261.Reflectance = 0
Part261.Locked = false
Part261.Shape = Enum.PartType.Block

Part85 = Instance.new("Part")
Part85.Name = "Part85"
Part85.Parent = Grandosla
Part85.Anchored = true
Part85.CanCollide = true
Part85.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part85.CFrame = CFrame.new(160.49996948242188, 147.50027465820312, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part85.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part85.Material = Enum.Material.Marble
Part85.BrickColor = BrickColor.new("Medium stone grey")
Part85.Transparency = 0
Part85.Reflectance = 0
Part85.Locked = false
Part85.Shape = Enum.PartType.Block

Part114 = Instance.new("Part")
Part114.Name = "Part114"
Part114.Parent = Grandosla
Part114.Anchored = true
Part114.CanCollide = true
Part114.Size = Vector3.new(64.000000, 1.000000, 1.000000)
Part114.CFrame = CFrame.new(103.500244140625, 224.49996948242188, -42.0001220703125, 0, 0, 1, 0, 1, -0, -1, 0, 0)
Part114.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part114.Material = Enum.Material.Marble
Part114.BrickColor = BrickColor.new("Medium stone grey")
Part114.Transparency = 0
Part114.Reflectance = 0
Part114.Locked = false
Part114.Shape = Enum.PartType.Block

Part95 = Instance.new("Part")
Part95.Name = "Part95"
Part95.Parent = Grandosla
Part95.Anchored = true
Part95.CanCollide = true
Part95.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part95.CFrame = CFrame.new(160.49996948242188, 193.50045776367188, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part95.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part95.Material = Enum.Material.Marble
Part95.BrickColor = BrickColor.new("Medium stone grey")
Part95.Transparency = 0
Part95.Reflectance = 0
Part95.Locked = false
Part95.Shape = Enum.PartType.Block

Part53 = Instance.new("Part")
Part53.Name = "Part53"
Part53.Parent = Grandosla
Part53.Anchored = true
Part53.CanCollide = true
Part53.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part53.CFrame = CFrame.new(109.49996948242188, 99.49988555908203, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part53.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part53.Material = Enum.Material.Marble
Part53.BrickColor = BrickColor.new("Medium stone grey")
Part53.Transparency = 0
Part53.Reflectance = 0
Part53.Locked = false
Part53.Shape = Enum.PartType.Block

Part108 = Instance.new("Part")
Part108.Name = "Part108"
Part108.Parent = Grandosla
Part108.Anchored = true
Part108.CanCollide = true
Part108.Size = Vector3.new(8.000000, 4.000000, 1.000000)
Part108.CFrame = CFrame.new(111, 38, -68.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part108.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part108.Material = Enum.Material.Marble
Part108.BrickColor = BrickColor.new("Medium stone grey")
Part108.Transparency = 0
Part108.Reflectance = 0
Part108.Locked = false
Part108.Shape = Enum.PartType.Block

Part89 = Instance.new("Part")
Part89.Name = "Part89"
Part89.Parent = Grandosla
Part89.Anchored = true
Part89.CanCollide = true
Part89.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part89.CFrame = CFrame.new(160.49996948242188, 159.5003204345703, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part89.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part89.Material = Enum.Material.Marble
Part89.BrickColor = BrickColor.new("Medium stone grey")
Part89.Transparency = 0
Part89.Reflectance = 0
Part89.Locked = false
Part89.Shape = Enum.PartType.Block

Wedge3 = Instance.new("WedgePart")
Wedge3.Name = "Wedge"
Wedge3.Parent = Grandosla
Wedge3.Anchored = true
Wedge3.CanCollide = true
Wedge3.Size = Vector3.new(64.000000, 16.000000, 16.000000)
Wedge3.CFrame = CFrame.new(175, 44, -42, 0, 0, -1, 0, 1, 0, 1, 0, 0)
Wedge3.Color = Color3.new(0.639216, 0.635294, 0.647059)
Wedge3.Material = Enum.Material.Marble
Wedge3.BrickColor = BrickColor.new("Medium stone grey")
Wedge3.Transparency = 0
Wedge3.Reflectance = 0
Wedge3.Locked = false

Part98 = Instance.new("Part")
Part98.Name = "Part98"
Part98.Parent = Grandosla
Part98.Anchored = true
Part98.CanCollide = true
Part98.Size = Vector3.new(3.000000, 1.000000, 1.000000)
Part98.CFrame = CFrame.new(160.49996948242188, 197.5004425048828, -14.5, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Part98.Color = Color3.new(0.639216, 0.635294, 0.647059)
Part98.Material = Enum.Material.Marble
Part98.BrickColor = BrickColor.new("Medium stone grey")
Part98.Transparency = 0
Part98.Reflectance = 0
Part98.Locked = false
Part98.Shape = Enum.PartType.Block

local Folder = Instance.new("Folder")
Folder.Parent = game:GetService("ReplicatedStorage")
Folder.Name = "Folder"

local Lightning = Instance.new("Part")
Lightning.Parent = Folder
Lightning.Name = "Lightning"
Lightning.Anchored = true
Lightning.CanCollide = false
Lightning.Size = Vector3.new(20.000000, 50.000000, 20.000000)
Lightning.CFrame = CFrame.new(-184.5, 60, 23, 1, 0, 0, 0, 1, 0, 0, 0, 1)
Lightning.Color = Color3.new(0.639216, 0.635294, 0.647059)
Lightning.Material = Enum.Material.Plastic
Lightning.BrickColor = BrickColor.new("Medium stone grey")
Lightning.Transparency = 1
Lightning.Reflectance = 0
Lightning = Enum.PartType.Block
local Collid = Instance.new("Part")
Collid.Parent = Folder.Lightning
Collid.Name = "Collid"
Collid.Anchored = true
Collid.CanCollide = false
Collid.Size = Vector3.new(50, 100, 100)
Collid.CFrame = CFrame.new(-184.5, 60, 23, 0, 1, -0, -1, 0, 0, 0, 0, 1)
Collid.Color = Color3.new(0.639216, 0.635294, 0.647059)
Collid.Material = Enum.Material.Plastic
Collid.BrickColor = BrickColor.new("Medium stone grey")
Collid.Transparency = 1
Collid.Reflectance = 0
Collid.Shape = Enum.PartType.Cylinder
local ParticleEmitter = Instance.new("ParticleEmitter")
ParticleEmitter.Parent = Folder.Lightning
ParticleEmitter.Acceleration = Vector3.new(0, 0, 0)
ParticleEmitter.Brightness = 1
ParticleEmitter.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)), ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))})
ParticleEmitter.Drag = 0
ParticleEmitter.EmissionDirection = Enum.NormalId.Bottom
ParticleEmitter.Enabled = true
ParticleEmitter.FlipbookFramerate = NumberRange.new(1, 1)
ParticleEmitter.FlipbookLayout = Enum.ParticleFlipbookLayout.None
ParticleEmitter.FlipbookMode = Enum.ParticleFlipbookMode.Loop
ParticleEmitter.Lifetime = NumberRange.new(1, 1)
ParticleEmitter.LightEmission = 0.8299999833106995
ParticleEmitter.LightInfluence = 0
ParticleEmitter.LockedToPart = true
ParticleEmitter.Orientation = Enum.ParticleOrientation.FacingCamera
ParticleEmitter.Rate = 80
ParticleEmitter.Rotation = NumberRange.new(1000, 1000)
ParticleEmitter.RotSpeed = NumberRange.new(100000, 100000)
ParticleEmitter.Shape = Enum.ParticleEmitterShape.Box
ParticleEmitter.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
ParticleEmitter.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
ParticleEmitter.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 50), NumberSequenceKeypoint.new(1, 50)})
ParticleEmitter.Speed = NumberRange.new(0, 0)
ParticleEmitter.SpreadAngle = Vector2.new(-20, 20)
ParticleEmitter.Texture = "rbxassetid://255514024"
ParticleEmitter.TimeScale = 1
ParticleEmitter.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1), NumberSequenceKeypoint.new(0.0137, 0), NumberSequenceKeypoint.new(0.1406, 1), NumberSequenceKeypoint.new(0.1550, 0), NumberSequenceKeypoint.new(0.1603, 1), NumberSequenceKeypoint.new(0.3017, 1), NumberSequenceKeypoint.new(0.3047, 0), NumberSequenceKeypoint.new(0.3047, 1), NumberSequenceKeypoint.new(0.4711, 1), NumberSequenceKeypoint.new(0.4780, 0), NumberSequenceKeypoint.new(0.4802, 1), NumberSequenceKeypoint.new(0.6717, 1), NumberSequenceKeypoint.new(0.6748, 0), NumberSequenceKeypoint.new(0.6793, 1), NumberSequenceKeypoint.new(0.8442, 1), NumberSequenceKeypoint.new(0.8465, 0), NumberSequenceKeypoint.new(0.8511, 1), NumberSequenceKeypoint.new(1, 1)})
ParticleEmitter.VelocityInheritance = 0
ParticleEmitter.ZOffset = 0
local Lightning1 = Instance.new("ParticleEmitter")
Lightning1.Parent = Folder.Lightning
Lightning1.Acceleration = Vector3.new(0, 0, 0)
Lightning1.Brightness = 1
Lightning1.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)), ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))})
Lightning1.Drag = 0
Lightning1.EmissionDirection = Enum.NormalId.Bottom
Lightning1.Enabled = true
Lightning1.FlipbookFramerate = NumberRange.new(1, 1)
Lightning1.FlipbookLayout = Enum.ParticleFlipbookLayout.None
Lightning1.FlipbookMode = Enum.ParticleFlipbookMode.Loop
Lightning1.Lifetime = NumberRange.new(1, 1)
Lightning1.LightEmission = 0.8299999833106995
Lightning1.LightInfluence = 0
Lightning1.LockedToPart = true
Lightning1.Orientation = Enum.ParticleOrientation.FacingCamera
Lightning1.Rate = 80
Lightning1.Rotation = NumberRange.new(1000, 1000)
Lightning1.RotSpeed = NumberRange.new(100000, 100000)
Lightning1.Shape = Enum.ParticleEmitterShape.Box
Lightning1.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
Lightning1.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
Lightning1.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 100), NumberSequenceKeypoint.new(1, 100)})
Lightning1.Speed = NumberRange.new(0, 0)
Lightning1.SpreadAngle = Vector2.new(-20, 20)
Lightning1.Texture = "rbxassetid://543954894"
Lightning1.TimeScale = 1
Lightning1.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(0.0023, 0.0250), NumberSequenceKeypoint.new(0.0084, 1), NumberSequenceKeypoint.new(0.0137, 0), NumberSequenceKeypoint.new(0.1406, 1), NumberSequenceKeypoint.new(0.1550, 0), NumberSequenceKeypoint.new(0.1603, 1), NumberSequenceKeypoint.new(0.3017, 1), NumberSequenceKeypoint.new(0.3047, 0), NumberSequenceKeypoint.new(0.3047, 1), NumberSequenceKeypoint.new(0.4711, 1), NumberSequenceKeypoint.new(0.4780, 0), NumberSequenceKeypoint.new(0.4802, 1), NumberSequenceKeypoint.new(0.6717, 1), NumberSequenceKeypoint.new(0.6748, 0), NumberSequenceKeypoint.new(0.6793, 1), NumberSequenceKeypoint.new(0.8442, 1), NumberSequenceKeypoint.new(0.8465, 0), NumberSequenceKeypoint.new(0.8511, 1), NumberSequenceKeypoint.new(1, 1)})
Lightning1.VelocityInheritance = 0
Lightning1.ZOffset = 0

local Thunder = Instance.new("Sound")
Thunder.Name = "Thunder"
Thunder.Parent = Folder
Thunder.SoundId = "rbxassetid://6458308055"
Thunder.Volume = 1
Thunder.PlaybackSpeed = 1
Thunder.Looped = false
Thunder.Playing = false
Thunder.TimePosition = 0
Thunder.RollOffMaxDistance = 10000
Thunder.RollOffMinDistance = 10
Thunder.RollOffMode = Enum.RollOffMode.Inverse
Thunder.EmitterSize = 10

local grand = Grandosla
local Players = game:GetService("Players")
local plr = Players.LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local hum = char:WaitForChild("Humanoid")
local height
if hum.RigType == Enum.HumanoidRigType.R15 then
    height = hum.HipHeight+1
else
    height = 3
end

grand:PivotTo(
	CFrame.new(hrp.Position, hrp.Position + hrp.CFrame.LookVector)
		* CFrame.Angles(0, math.pi, 0)
		+ hrp.CFrame.LookVector * 70
		+ Vector3.new(0, 154, 0)
		- Vector3.new(0, height, 0)
)

local resources = game:GetService("ReplicatedStorage"):FindFirstChild("Folder")
local lightningTemplate = resources.Lightning
 
local rings = Rings
local defense = Defense
local defenseCollision = Collide
local peak = peak
local ringCore = RingCore
 
local teslaOn = false
 
local ringTable = {}
 
local powerSwitching = false
local stormThread
local stormBusy = false
 
local modelSettings = {
Storm = false,
DestroyAnchored = false,
MaxMass = 0,
Defense = false
}
 
local players = game:GetService("Players")
 
local remoteE = game:GetService("ReplicatedStorage"):FindFirstChild("GrandoslaControlE") or Instance.new("RemoteEvent")
remoteE.Name = "GrandoslaControlE"
remoteE.Parent = game:GetService("ReplicatedStorage")
local remoteF = game:GetService("ReplicatedStorage"):FindFirstChild("GrandoslaControlF") or Instance.new("RemoteFunction")
remoteF.Name = "GrandoslaControlF"
remoteF.Parent = game:GetService("ReplicatedStorage")
 
 
local plr = game:GetService("Players").LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local hum = char:WaitForChild("Humanoid")

 
 
-- Destroyer
local maxSplit = 8
local max = math.max
local min = math.min

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local function splitPart(part, vel)
    if not part or part:IsA("MeshPart") or part:IsA("Terrain") or part:GetAttribute("ExSplit") then
        return
    end

	part:SetAttribute("ExSplit", true)

	local isUnion = part:IsA("UnionOperation") or part:IsA("WedgePart")
		or part:IsA("CornerWedgePart") or (part:IsA("Part") and part.Shape ~= Enum.PartType.Block)

	local split = part:Clone()
	split:SetAttribute("ExSplit", false)
	split:SetAttribute("ExBroken", false)
	split:SetAttribute("IsSplitPart", true)

	local newSizeX = split.Size.X / 2
	local newSizeY = split.Size.Y / 2
	local newSizeZ = split.Size.Z / 2

	local canSplitX = (split.Size.X >= maxSplit)
	local canSplitY = (split.Size.Y >= maxSplit)
	local canSplitZ = (split.Size.Z >= maxSplit)

	if not canSplitX and not canSplitY and not canSplitZ then
		return
	end

	split.Size = Vector3.new(
		canSplitX and newSizeX or split.Size.X,
		canSplitY and newSizeY or split.Size.Y,
		canSplitZ and newSizeZ or split.Size.Z
	)

	local xIter = canSplitX and -1 or 0
	local yIter = canSplitY and -1 or 0
	local zIter = canSplitZ and -1 or 0

	for _, scr in pairs(split:GetChildren()) do
		if scr:IsA("LuaSourceContainer") then
			scr:Destroy()
		end
	end

	local qSize = part.Size / 4
	local partPar = part.Parent

	if isUnion then
		local cut = Instance.new("Part")
		cut.Size = split.Size * 1.01
		cut.Anchored = true
		cut.Transparency = 1

		part.Parent = ReplicatedStorage

		local shadow = part:Clone()
		shadow:SetAttribute("ExProtect", true)
		shadow.Anchored = true
		shadow.CanCollide = false
		shadow.Parent = partPar

		local cuts = {}
		for x = xIter, 1, 2 do
			for y = yIter, 1, 2 do
				for z = zIter, 1, 2 do
					local newCut = cut:Clone()
					local xOff = x * qSize.X
					local yOff = y * qSize.Y
					local zOff = z * qSize.Z
					newCut.CFrame = part.CFrame * CFrame.new(xOff, yOff, zOff)
					table.insert(cuts, newCut)
				end
			end
		end

		local finalCuts = {}
		local totalCuts = #cuts
		local done = 0

		for _, v in pairs(cuts) do
			task.spawn(function()
				local clone = {}
				for i, c in pairs(cuts) do
					if c ~= v then
						table.insert(clone, c)
					end
				end

				local s, partCut = pcall(function()
					return part:SubtractAsync(clone)
				end)

				if s and partCut then
					partCut:SetAttribute("ExBroken", false)
					partCut:SetAttribute("IsSplitPart", true)
					table.insert(finalCuts, partCut)
				end

				done += 1
			end)
		end

		task.spawn(function()
			while done < totalCuts do
				task.wait()
			end
			shadow:Destroy()
			for _, v in pairs(finalCuts) do
				if vel then v.Velocity = vel end
				v.Parent = partPar
			end
		end)

	else
		for x = xIter, 1, 2 do
			for y = yIter, 1, 2 do
				for z = zIter, 1, 2 do
					local newSplit = split:Clone()
					local xOff = x * qSize.X
					local yOff = y * qSize.Y
					local zOff = z * qSize.Z
					newSplit.CFrame = part.CFrame * CFrame.new(xOff, yOff, zOff)
					if vel then newSplit.Velocity = vel end
					newSplit.Parent = partPar
				end
			end
		end
	end

	part.Parent = ReplicatedStorage
	task.delay(1, function()
		part:Destroy()
	end)
end

-- Destroyer
local function destroyer(p)
	local function touched(other)
		if other.Anchored and (not modelSettings.DestroyAnchored or other:GetMass() > modelSettings.MaxMass) then
			return
		end

		if other:GetAttribute("ExProtect") then
			return
		end

		local plrModel = other:FindFirstAncestor(game.Players.LocalPlayer.Name)
		if plrModel then
			return
		end

		if not other:GetAttribute("ExBroken") then
			other:SetAttribute("ExBroken", true)
			other.Anchored = false
			other:BreakJoints()
		end

		other.Color = other.Color:lerp(Color3.new(0, 0, 0), 0.2)
		local vel = (other.Position - p.Position).Unit * 100 + Vector3.new(0, 50, 0)
		splitPart(other, vel)
		other.Velocity = vel

		if not other:GetAttribute("ExDebris") then
			other:SetAttribute("ExDebris", true)
			task.delay(30, function()
				if other then
					other:Destroy()
				end
			end)
		end
	end

	task.spawn(function()
		while p and p.Parent do
			if p:IsDescendantOf(workspace) and not p:GetAttribute("Paused") then
				local parts = workspace:GetPartsInPart(p)
				for _, other in pairs(parts) do
					task.spawn(touched, other)
				end
			end
			task.wait(0.2)
		end
	end)
end
    
    local function boltPause(bolt,isPaused)
        bolt:SetAttribute("Paused",true)
        for i,v in pairs(bolt:GetDescendants()) do
            v:SetAttribute("Paused",isPaused)
        end
    end
    
    local function boltDisabled(bolt,isDis)
        bolt:SetAttribute("Disabled",true)
        for i,v in pairs(bolt:GetDescendants()) do
            v:SetAttribute("Disabled",isDis)
        end
    end
    
    
    
    local peakBeam
    
    local function thunderSounds(model)
        local bolts = {}
        
        local soundPart = Instance.new("Part")
        soundPart.Size = Vector3.new(4,4,4)
        soundPart.Transparency = 1
        soundPart.CanCollide = false
        soundPart:SetAttribute("ExProtect",true)
        local w = Instance.new("Weld")
        w.Part0 = soundPart
        w.Parent = soundPart
        
        for i,v in pairs(model:GetChildren()) do
            table.insert(bolts,v)
        end
        
        local function playSounds()
            if model:GetAttribute("Disabled") then return end
            
            for i = 1,#bolts do
                local newSoundPart = soundPart:Clone()
                newSoundPart.Weld.Part1 = bolts[i]
                local s = resources.Thunder:Clone()
                s.Parent = newSoundPart
                newSoundPart.Parent = bolts[i]
                s:Play()
                task.delay(3,newSoundPart.Destroy,newSoundPart)
            end
        end
        
        model:GetPropertyChangedSignal("Parent"):Connect(function()
            task.spawn(function()
                while grand.Parent and model.Parent do
                    playSounds()
                    task.wait(1)
                end
            end)
        end)
        
        task.spawn(function()
            while grand.Parent and model.Parent do
                playSounds()
                task.wait(1)
            end
        end)
    end
    
    local function createLightingBeam(n)
        local model = Instance.new("Model")
        model.Name = "GrandoslaBeam"
        
        for i = 1,n do
            local newBeam = lightningTemplate:Clone()
            newBeam.Position = Vector3.new(0,50*(i-1),0)
            newBeam.Collid.Position = Vector3.new(0,50*(i-1),0)
            newBeam.Parent = model
            
            destroyer(newBeam.Collid)
            
            if i == 1 then
                model.PrimaryPart = newBeam
            end
        end
        
        for i,v in pairs(model:GetDescendants()) do
            v:SetAttribute("ExProtect",true)
        end
        
        return model
    end
    
    local function initStuff()
        for i,v in pairs(rings:GetChildren()) do
            local powerSound = Instance.new("Sound")
            powerSound.Name = "PowerSound"
            powerSound.Volume = 1
            powerSound.SoundId = "rbxassetid://7047775868"
            powerSound.Parent = v
            
            local humSound = Instance.new("Sound")
            humSound.Name = "HumSound"
            humSound.Volume = 0.25
            humSound.Looped = true
            humSound.SoundId = "rbxassetid://143973639"
            humSound.Parent = v
            
            --[[
            local light = Instance.new("PointLight")
            light.Color = Color3.new(1,0,0)
            light.Enabled = false
            light.Range = 60
            light.Brightness = 0.5
            light.Parent = v
            ]]
            
            table.insert(ringTable,v)
        end
        table.sort(ringTable,function(a,b) return a.Position.Y < b.Position.Y end)
            
            local powerSound = Instance.new("Sound")
            powerSound.Name = "PowerSound"
            powerSound.Volume = 5
            powerSound.SoundId = "rbxassetid://876800936"
            powerSound.Parent = peak
            
            local humSound = Instance.new("Sound")
            humSound.Name = "HumSound"
            humSound.Volume = 1
            humSound.Looped = true
            humSound.SoundId = "rbxassetid://143973639"
            humSound.Parent = peak
            
            local offSound = Instance.new("Sound")
            offSound.Name = "OffSound"
            offSound.Volume = 2
            offSound.SoundId = "rbxassetid://3250635272"
            offSound.Parent = ringCore
        end
        
        local function setParticlesEnabled(model,enabled)
            for i,v in pairs(model:GetDescendants()) do
                if v:IsA("ParticleEmitter") then
                    v.Enabled = enabled
                end
            end
        end
        
        local function setPowered(on)
            local mat = on and Enum.Material.Neon or Enum.Material.Plastic
            for i,v in pairs(rings:GetChildren()) do
                v.Material = mat
            end
            peak.Material = mat
            peak.BoltParticles.Enabled = on
            
            teslaOn = on
        end
        
        local function togglePower()
            if powerSwitching or stormBusy then return end
            powerSwitching = true
            
            local newPowerValue = not teslaOn
            local waitTime = newPowerValue and 0.2 or 0.1
            local mat = newPowerValue and Enum.Material.Neon or Enum.Material.Plastic
            
            if not newPowerValue then
                ringCore.OffSound:Play()
            end
            
            for i,v in pairs(ringTable) do
                if newPowerValue then
                    v.PowerSound:Play()
                    v.HumSound:Play()
                else
                    v.HumSound:Stop()
                end
                v.Material = mat
                --v.PointLight.Enabled = newPowerValue
                task.wait(waitTime)
            end
            
            if newPowerValue then
                peak.PowerSound:Play()
                peak.HumSound:Play()
            else
                peak.HumSound:Stop()
                if modelSettings.Defense then
                    toggleDefense()
                end
                if modelSettings.Storm then
                    task.spawn(toggleStorm)
                end
            end
            
            peak.Material = mat
            peak.BoltParticles.Enabled = newPowerValue
            grand.TopLight.SurfaceLight.Enabled = newPowerValue
            teslaOn = newPowerValue
            
            powerSwitching = false
        end
        local bindEvent = Instance.new("BindableEvent")
        local function fireUpdateSettingsOnPlayer()
            local localPlr = game:GetService("Players").LocalPlayer
            if localPlr then bindEvent:Fire(localPlr,"UpdateSettings",modelSettings) end
        end
        
        local function defenseLoop(part)
            local char = part.Parent
            local hum = char and char:FindFirstChildOfClass("Humanoid")
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if not hum or not hrp then return end
            
            local plr = players:GetPlayerFromCharacter(char)
            if plr and plr.Name == localPlayerName then return end
            
            task.wait(0.5)
            
            while true do
                local parts = workspace:GetPartsInPart(hrp)
                if not table.find(parts,defenseCollision) or not char.Parent or hum.Health == 0 then return end
                
                local newHealth = hum.Health - 50    
                hum.Health = hum.Health - 50
                
                if newHealth <= 0 then
                    for i,v in pairs(char:GetDescendants()) do if v:IsA("BasePart") then v.Color = Color3.new(0,0,0) end end
                    local sound = Instance.new("Sound")
                    sound.Volume = 1
                    sound.SoundId = "rbxassetid://189531243"
                    sound.Parent = hrp
                    sound:Play()
                    return
                end
                
                task.wait(0.1)
            end
        end
        
        function toggleDefense()
            if not modelSettings.Defense and not teslaOn then return end
            
            modelSettings.Defense = not modelSettings.Defense
            fireUpdateSettingsOnPlayer()
            
            if modelSettings.Defense then defense.Sound:Play() else defense.Sound:Stop() end
            for i,v in pairs(defense:GetChildren()) do
                if v:IsA("ParticleEmitter") then
                    v.Enabled = modelSettings.Defense
                end
            end
            
            defenseCollision.Parent = modelSettings.Defense and defense or nil
        end
        defenseCollision.Parent = nil
        defenseCollision.Touched:Connect(defenseLoop)
        
        while true do
            local a = game:GetService("Lighting"):FindFirstChild("GrandoslaLight")
            if a then a:Destroy() else break end
        end
        local stormTI = TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
        
        local function stormStrike(cf)
            local stormStrikerBeam = createLightingBeam(50)
            
            local boom = Instance.new("Sound")
            boom.Volume = 3
            boom.SoundId = "rbxassetid://821439273"
            boom.Playing = true
            boom.Parent = stormStrikerBeam.PrimaryPart
            
            stormStrikerBeam:PivotTo(cf)
            stormStrikerBeam.Parent = grand.Bolts
            
            task.delay(1,function()
                boltDisabled(stormStrikerBeam,true)
                setParticlesEnabled(stormStrikerBeam,false)
                task.delay(5,stormStrikerBeam.Destroy,stormStrikerBeam)
            end)
            
            
            local stormColor = Instance.new("ColorCorrectionEffect")
            stormColor.Name = "GrandoslaLight"
            stormColor.Parent = game:GetService("Lighting")
            local tween = game:GetService("TweenService"):Create(stormColor,stormTI,{Brightness = 0.5})
            tween.Completed:Connect(function()
                local tween2 = game:GetService("TweenService"):Create(stormColor,stormTI,{Brightness = 0})
                tween2.Completed:Connect(function()
                    stormColor:Destroy()
                end)
                tween2:Play()
            end)
            tween:Play()
        end
        
        local origBrightness = 1
        function toggleStorm()
            if not modelSettings.Storm and (not teslaOn or powerSwitching) then return end
            if stormBusy then return end
            stormBusy = true
            
            if stormThread then
                coroutine.close(stormThread)
                stormThread = nil
            end
            
            modelSettings.Storm = not modelSettings.Storm
            fireUpdateSettingsOnPlayer()
            
            local fadeTI = TweenInfo.new(10,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
            
            local isStorming = modelSettings.Storm
            
            if isStorming then
                origBrightness = game:GetService("Lighting").Brightness
                --origClockTime = game:GetService("Lighting").ClockTime
                
                local clouds = Instance.new("Clouds")
                clouds.Name = "GrandoslaClouds"
                clouds.Color = Color3.fromRGB(50,50,50)
                clouds.Cover = 0
                clouds.Density = 0
                clouds.Parent = workspace.Terrain
                
                game:GetService("TweenService"):Create(clouds,fadeTI,{Cover = 0.85,Density = 0.8}):Play()
                game:GetService("TweenService"):Create(game:GetService("Lighting"),fadeTI,{Brightness = 0}):Play()
                task.wait(8)
                grand.Storm:Play()
            else
                grand.Storm:Stop()
                local clouds = workspace.Terrain:FindFirstChild("GrandoslaClouds")
                
                if clouds then
                    local tween = game:GetService("TweenService"):Create(clouds,fadeTI,{Cover = 0,Density = 0})
                    tween.Completed:Connect(function() clouds:Destroy() end)
                        tween:Play()
                    end
                    
                    game:GetService("TweenService"):Create(game:GetService("Lighting"),fadeTI,{Brightness = origBrightness}):Play()
                    task.wait(10.5)
                    stormBusy = false
                    return
                end
                
                local peakPos = Vector2.new(peak.Position.X,peak.Position.Z)
                
                stormThread = coroutine.create(function()
                    while grand.Parent do
                        local rand = math.random()*2+0.5
                        task.wait(rand)
                        
                        local positions = {}
                        local plrs = players:GetPlayers()
                        for i,v in pairs(plrs) do
                            if v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
                                local rootPos = v.Character.HumanoidRootPart.Position
                                local randPos = Vector2.new(rootPos.X,rootPos.Z) + Vector2.new(math.random()*400-200, math.random()*400-200)
                                
                                if (randPos - peakPos).Magnitude >= 80 then
                                    table.insert(positions,randPos)
                                end
                            end
                        end
                        
                        if #positions > 0 then
                            local selectedPos = positions[math.random(1,#positions)]
                            local params = RaycastParams.new()
                            local res = workspace:Raycast(Vector3.new(selectedPos.X,4000,selectedPos.Y),Vector3.new(0,-5000,0),params)
                            if res then
                                local target = CFrame.new(res.Position)
                                stormStrike(target)
                            end
                        end
                    end
                end)
                
                coroutine.resume(stormThread)
                
                if isStorming then
                    task.wait(2.5)
                end
                stormBusy = false
            end
            
            ---------------------------------------------------------------------------------------
            local lightningClicked = false
            local lightingTarget = CFrame.new(0,0,0)
            local strikeBeam
            
            peakBeam = createLightingBeam(40)
            peakBeam:PivotTo(peak.CFrame)
            peakBeam.Parent = grand.Bolts
            peakBeam:SetAttribute("Particles",true)
            
            for i,v in pairs(grand:GetDescendants()) do
                if v:IsA("BasePart") then
                    v:SetAttribute("ExProtect",true)
                end
            end
            
            task.spawn(function()
                while task.wait(1/60) do
                    if not grand.Parent then return end
                    
                    local peakOn = modelSettings.Storm
                    
                    if lightningClicked and teslaOn then
                        if not strikeBeam then
                            strikeBeam = createLightingBeam(50)
                            thunderSounds(strikeBeam)
                        end
                        
                        local params = RaycastParams.new()
                        params.FilterDescendantsInstances = {grand.Bolts}
                        local res = workspace:Raycast(Vector3.new(lightingTarget.X,4000,lightingTarget.Z),Vector3.new(0,-5000,0),params)
                        if res then
                            local target = CFrame.new(res.Position)
                            strikeBeam:PivotTo(target)
                            strikeBeam.Parent = grand.Bolts
                            
                            peakOn = true
                        end
                    else
                        if strikeBeam then
                            boltDisabled(strikeBeam,true)
                            setParticlesEnabled(strikeBeam,false)
                            task.delay(5,strikeBeam.Destroy,strikeBeam)
                            strikeBeam = nil
                        end
                    end
                    
                    if peakOn then
                        if not peakBeam:GetAttribute("Particles") then
                            boltPause(peakBeam,false)
                            peakBeam:SetAttribute("Particles",true)
                            setParticlesEnabled(peakBeam,true)
                        end
                    else
                        if peakBeam:GetAttribute("Particles") then
                            boltPause(peakBeam,true)
                            peakBeam:SetAttribute("Particles",false)
                            setParticlesEnabled(peakBeam,false)
                        end
                    end
                end
            end)
            
            initStuff()
            setPowered(false)
            
           
           
local OnCommand = function(cmd,...)    
    local args = {...}
    
    if cmd == "MousePos" then
        if not args[2] then return end
        lightingTarget = args[1]
    elseif cmd == "MouseClickState" then
        lightningClicked = args[1]
    end
end

local GrandGui = Instance.new("ScreenGui")
GrandGui.Name = "GrandGui"
GrandGui.ResetOnSpawn = false
GrandGui.Parent = game:GetService("Players").LocalPlayer.PlayerGui

local TextBoxTemplate = Instance.new("Frame")
TextBoxTemplate.Name = "TextBoxTemplate"
TextBoxTemplate.Parent = GrandGui
TextBoxTemplate.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextBoxTemplate.BackgroundTransparency = 1
TextBoxTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextBoxTemplate.BorderSizePixel = 1
TextBoxTemplate.Position = UDim2.new(0, 0, 0, 0)
TextBoxTemplate.Size = UDim2.new(1, 0, 0, 50)
TextBoxTemplate.AnchorPoint = Vector2.new(0, 0)
TextBoxTemplate.Visible = false
TextBoxTemplate.ZIndex = 1
TextBoxTemplate.ClipsDescendants = false
TextBoxTemplate.LayoutOrder = 0
TextBoxTemplate.Active = false

local Box = Instance.new("TextBox")
Box.Name = "Box"
Box.Parent = TextBoxTemplate
Box.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Box.BackgroundTransparency = 0
Box.BorderColor3 = Color3.fromRGB(30, 30, 30)
Box.BorderSizePixel = 0
Box.TextYAlignment = Enum.TextYAlignment.Center
Box.TextXAlignment = Enum.TextXAlignment.Center
Box.Position = UDim2.new(0, 5, 0, 20)
Box.Size = UDim2.new(1, -10, 0, 25)
Box.Font = Enum.Font.SourceSans
Box.Text = ""
Box.TextColor3 = Color3.fromRGB(255, 255, 255)
Box.TextSize = 14
Box.TextScaled = false
Box.TextWrapped = false
Box.TextTransparency = 0
Box.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Box.TextStrokeTransparency = 1
Box.AnchorPoint = Vector2.new(0, 0)
Box.Visible = true
Box.ZIndex = 1
Box.ClipsDescendants = false
Box.LayoutOrder = 0
Box.ClearTextOnFocus = true
Box.PlaceholderText = ""
Box.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
Box.MultiLine = false
Box.Active = true
Box.LineHeight = 1
Box.CursorPosition = 1
Box.TextEditable = true
Box.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Box
UICorner.CornerRadius = UDim.new(0, 8)

local TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = TextBoxTemplate
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1
TextLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextLabel.BorderSizePixel = 1
TextLabel.TextYAlignment = Enum.TextYAlignment.Center
TextLabel.TextXAlignment = Enum.TextXAlignment.Center
TextLabel.Position = UDim2.new(0, 5, 0, 0)
TextLabel.Size = UDim2.new(1, -10, 0, 20)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "Speed"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14
TextLabel.TextScaled = false
TextLabel.TextWrapped = false
TextLabel.TextTransparency = 0
TextLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextStrokeTransparency = 1
TextLabel.AnchorPoint = Vector2.new(0, 0)
TextLabel.Visible = true
TextLabel.ZIndex = 1
TextLabel.ClipsDescendants = false
TextLabel.LayoutOrder = 0
TextLabel.Active = false
TextLabel.LineHeight = 1
TextLabel.MaxVisibleGraphemes = -1

local Frame = Instance.new("Frame")
Frame.Name = "Frame"
Frame.Parent = GrandGui
Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Frame.BackgroundTransparency = 0
Frame.BorderColor3 = Color3.fromRGB(27, 42, 53)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.05000000074505806, 0, 0.6000000238418579, 0)
Frame.Size = UDim2.new(0, 150, 0, 165)
Frame.AnchorPoint = Vector2.new(0, 0)
Frame.Visible = true
Frame.ZIndex = 1
Frame.ClipsDescendants = false
Frame.LayoutOrder = 0
Frame.Active = true

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Frame
UICorner.CornerRadius = UDim.new(0, 8)

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Frame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.BorderColor3 = Color3.fromRGB(27, 42, 53)
Title.BorderSizePixel = 1
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.TextXAlignment = Enum.TextXAlignment.Center
Title.Position = UDim2.new(0, 5, 0, 0)
Title.Size = UDim2.new(1, -10, 0, 25)
Title.Font = Enum.Font.SourceSansBold
Title.Text = "Grandosla"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.TextScaled = false
Title.TextWrapped = false
Title.TextTransparency = 0
Title.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Title.TextStrokeTransparency = 1
Title.AnchorPoint = Vector2.new(0, 0)
Title.Visible = true
Title.ZIndex = 1
Title.ClipsDescendants = false
Title.LayoutOrder = 0
Title.Active = false
Title.LineHeight = 1
Title.MaxVisibleGraphemes = -1

local ButtonTemplate = Instance.new("TextButton")
ButtonTemplate.Name = "ButtonTemplate"
ButtonTemplate.Parent = GrandGui
ButtonTemplate.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
ButtonTemplate.BackgroundTransparency = 0
ButtonTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
ButtonTemplate.BorderSizePixel = 1
ButtonTemplate.TextYAlignment = Enum.TextYAlignment.Center
ButtonTemplate.TextXAlignment = Enum.TextXAlignment.Center
ButtonTemplate.Position = UDim2.new(0, 5, 1, -140)
ButtonTemplate.Size = UDim2.new(1, -10, 0, 25)
ButtonTemplate.Font = Enum.Font.SourceSans
ButtonTemplate.Text = "Power On/Off"
ButtonTemplate.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonTemplate.TextSize = 14
ButtonTemplate.TextScaled = false
ButtonTemplate.TextWrapped = false
ButtonTemplate.TextTransparency = 0
ButtonTemplate.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
ButtonTemplate.TextStrokeTransparency = 1
ButtonTemplate.AnchorPoint = Vector2.new(0, 0)
ButtonTemplate.Visible = false
ButtonTemplate.ZIndex = 1
ButtonTemplate.ClipsDescendants = false
ButtonTemplate.LayoutOrder = 0
ButtonTemplate.Active = true
ButtonTemplate.LineHeight = 1
ButtonTemplate.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = ButtonTemplate
UICorner.CornerRadius = UDim.new(0, 8)

local plr = game:GetService("Players").LocalPlayer
local mouse = plr:GetMouse()
local UIS = game:GetService("UserInputService")
 
local gui = GrandGui
 
local remoteE = game:GetService("ReplicatedStorage"):WaitForChild("GrandoslaControlE")
local remoteF = game:GetService("ReplicatedStorage"):WaitForChild("GrandoslaControlF")
local frame = gui:WaitForChild("Frame")
 
local initSize = 25
local buttonSize = 30
local textBoxSize = 50
local baseWidth = 150
 
local buttonTemplate = gui:WaitForChild("ButtonTemplate")
local textBoxTemplate = gui:WaitForChild("TextBoxTemplate")
 
local nextPosition = initSize
 
local mouse = plr:GetMouse()
local clickThunder = false
 
local grand = workspace:WaitForChild("Grandosla")

-- Gui Lib --
local function setTitle(text)
    frame:WaitForChild("Title").Text = text
end
 
local function newButton(text,clickFunc)
    local newButtonGui = buttonTemplate:Clone()
    newButtonGui.Position = UDim2.new(0,5,0,nextPosition)
    nextPosition = nextPosition + buttonSize
    
    newButtonGui.Text = text
    newButtonGui.Visible = true
    
    if clickFunc then
        newButtonGui.MouseButton1Click:Connect(clickFunc)
    end
    
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newButtonGui.Parent = frame
    
    return newButtonGui
end
 
local function newTextBox(label,defaultText,changedFunc)
    local newFrame = textBoxTemplate:Clone()
    newFrame.Position = UDim2.new(0,0,0,nextPosition)
    nextPosition = nextPosition + textBoxSize
    
    newFrame.TextLabel.Text = label
    newFrame.Box.Text = defaultText or ""
    newFrame.Visible = true
 
    if changedFunc then
        newFrame.Box.FocusLost:Connect(function()
            changedFunc(newFrame.Box.Text)
        end)
    end
 
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newFrame.Parent = frame
 
    return newFrame
end
 
local mouse = game:GetService("Players").LocalPlayer:GetMouse()
frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local releaseEvent,mouseEvent
 
        local initX = frame.AbsolutePosition.X
        local initY = frame.AbsolutePosition.Y
        local offX = mouse.X - initX
        local offY = mouse.Y - initY
 
        releaseEvent = UIS.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                releaseEvent:Disconnect()
                mouseEvent:Disconnect()
            end
        end)
 
        mouseEvent = UIS.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement then
                local inputX,inputY = input.Position.X,input.Position.Y
                local posX,posY = inputX-offX,inputY-offY
                frame.Position = UDim2.new(0,posX,0,posY)
            end
        end)
    end
end)
 
----------------------------------------------
 
local modelSettings = modelSettings
 
local anchoredButton,defenseButton,stormButton,massBox,clickButton
local function updateButtons()
    anchoredButton.Text = modelSettings.DestroyAnchored and "Destroy Anchored: On" or "Destroy Anchored: Off"
    defenseButton.Text = modelSettings.Defense and "Interior Defense: On" or "Interior Defense: Off"
    stormButton.Text = modelSettings.Storm and "Grand Storm: On" or "Grand Storm: Off"
    massBox.Box.Text = tostring(modelSettings.MaxMass)
    clickButton.Text = clickThunder and "Mouse Thunder Beam: On" or "Mouse Thunder Beam: Off"
end
 
setTitle("Grandosla")
newButton("Power Toggle",function()
    togglePower()
    updateButtons()
end)
defenseButton = newButton("Interior Defense",function()
    toggleDefense()
    updateButtons()
end)
stormButton = newButton("Grand Storm",function()
    toggleStorm()
    updateButtons()
end)
clickButton=newButton("Mouse Thunder Beam",function()
    clickThunder = not clickThunder
    updateButtons()
end)
anchoredButton = newButton("Anchored",function()
    modelSettings.DestroyAnchored = not modelSettings.DestroyAnchored
    updateButtons()
end)
massBox=newTextBox("Max Anchored Mass","",function(str)
    modelSettings.MaxMass = tonumber(str) or 0
    updateButtons()
end)
updateButtons()
 
remoteE.OnClientEvent:Connect(function(cmd,...)
    local args = {...}
    if cmd == "UpdateSettings" then
        modelSettings = args[1]
        updateButtons()
    end
end)
 
local UIS = game:GetService("UserInputService")
 
local input = function(io,a)
    if a or not clickThunder then return end
    
    if io.UserInputType == Enum.UserInputType.MouseButton1 then
        local clicking = io.UserInputState == Enum.UserInputState.Begin
        OnCommand("MouseClickState",clicking)
    end
end
local con2 = UIS.InputBegan:Connect(input)
local con3 = UIS.InputEnded:Connect(input)
 
 
local h,t
local normalMap = {}
 
for i,v in pairs(Enum.NormalId:GetEnumItems()) do
    local vec = Vector3.FromNormalId(v)
    normalMap[vec] = v
end
 
local function isFiltered(obj)
    return obj:FindFirstAncestor("GrandoslaBeam")
end
 
while task.wait(1/60) do
    if not gui.Parent then con2:Disconnect() con3:Disconnect() return end
    
    local Mouse = mouse
    local Target,Hit
    local TargetSurface = Enum.NormalId.Right
 
    local filterList = {plr.Character}
 
    while true do
        local params = RaycastParams.new()
        params.FilterType = Enum.RaycastFilterType.Blacklist
        params.FilterDescendantsInstances = filterList
 
        local res = workspace:Raycast(Mouse.Origin.Position,Mouse.Origin.LookVector*100000,params)
        if res then
            local objectNormal = res.Instance.CFrame:ToObjectSpace(res.Instance.CFrame + res.Normal).p
            objectNormal = Vector3.new(math.round(objectNormal.X), math.round(objectNormal.Y), math.round(objectNormal.Z))
 
            local inst = res.Instance
            if isFiltered(inst) then
                table.insert(filterList,inst)
                continue
            else
                Target = inst
 
                if objectNormal.Magnitude > 1 then
                    objectNormal = objectNormal * Vector3.new(0,1,1)
                    if objectNormal.Magnitude > 1 then
                        objectNormal = objectNormal * Vector3.new(0,0,1)
                    end
                end
 
                TargetSurface = normalMap[objectNormal]
                Hit = CFrame.new(res.Position,res.Position + Mouse.Origin.LookVector)
                break
            end
        else
            break
        end
    end
 
    Hit = Hit or Mouse.Hit
 
    if h~=Hit or t~=Target then
        if clickThunder then OnCommand("MousePos",Hit,Target) end
        h,t=Hit,Target
    end
end
end)

local mjolnirh = createScriptButton("mjolnir", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "mjolnir"
Mjolnir = Instance.new("Tool")
Mjolnir.Name = "Mjolnir"
Mjolnir.TextureId = "http://www.roblox.com/asset/?version=1&id=1280038"

Handle = Instance.new("Part")
Handle.Parent = Mjolnir
Handle.Anchored = false
Handle.CanCollide = false
Handle.Size = Vector3.new(1.000000, 4.000000, 2.000000)
Handle.CFrame = CFrame.new(0, 2, -11, -1.1920928955078125e-07, 0, -1.0000001192092896, 0, 1, 0, 1.0000001192092896, 0, -1.1920928955078125e-07)
Handle.Color = Color3.new(0.388235, 0.372549, 0.384314)
Handle.Material = Enum.Material.Plastic
Handle.BrickColor = BrickColor.new("Dark stone grey")
Handle.Transparency = 0
Handle.Reflectance = 0
Handle.Shape = Enum.PartType.Block
Handle.Name = "Handle"
Boom = Instance.new("Sound")
Boom.Parent = Handle
Boom.SoundId = "rbxasset://sounds/Rocket shot.wav"
Boom.Volume = 1
Boom.PlaybackSpeed = 1
Boom.Looped = false
Boom.Playing = false
Boom.TimePosition = 0
Boom.RollOffMaxDistance = 10000
Boom.RollOffMinDistance = 10
Boom.RollOffMode = Enum.RollOffMode.Inverse
Boom.EmitterSize = 10
Boom.Name = "Boom"
Mesh = Instance.new("SpecialMesh")
Mesh.Parent = Handle
Mesh.MeshId = "http://www.roblox.com/asset/?id=1279013"
Mesh.TextureId = "http://www.roblox.com/asset/?id=1279012"
Mesh.Offset = Vector3.new(0.000000, 0.000000, 0.000000)
Mesh.Scale = Vector3.new(1.050000, 1.050000, 1.050000)
Mesh.MeshType = Enum.MeshType.FileMesh
Mesh.Name = "Mesh"

localPlayerName = game:GetService("Players").LocalPlayer.Name

wait = task.wait
delay = task.delay

-------- OMG HAX
r = game:service("RunService")


Tool = Mjolnir
hammer = Tool.Handle



local modelSettings = {
DestroyAnchored = false,
MaxMass = 0
}

local remoteE = Instance.new("RemoteEvent")
remoteE.Name = "RemoteE"
remoteE.Parent = Tool
local remoteF = Instance.new("RemoteFunction")
remoteF.Name = "RemoteF"
remoteF.Parent = Tool

local bindEvent = Instance.new("BindableEvent")

local function fireUpdateSettingsOnPlayer()
    local localPlr = game:GetService("Players").LocalPlayer
    if localPlr then bindEvent:Fire(localPlr,"UpdateSettings",modelSettings) end
end

bindEvent.Event:Connect(function(plr,cmd,...)
    if plr.Name ~= localPlayerName then return end
    local args = {...}
    
    if cmd == "SetSetting" then
        modelSettings[args[1]] = args[2]
        fireUpdateSettingsOnPlayer()
    end
end)

local function newShockRing()
    local shockRing = Instance.new("Part")
    shockRing.formFactor = 2
    shockRing.Size = Vector3.new(1, 0.4, 1)
    shockRing.Anchored = true
    shockRing.Locked = true
    shockRing.CanCollide = false
    shockRing.archivable = false
    shockRing.TopSurface = 0
    shockRing.BottomSurface = 0
    shockRing.Transparency = 1
    local decal = Instance.new("Decal")
    decal.Face = 1
    decal.Texture = "http://www.roblox.com/asset/?version=1&id=1280730"
    decal.Parent = shockRing
    
    local bottomDecal = decal:Clone()
    bottomDecal.Face = 4
    bottomDecal.Parent = shockRing
    
    return shockRing
end


local players = game:GetService("Players")
function doDamage(hit)
    local humanoid = hit.Parent:findFirstChild("Humanoid")
    local vCharacter = Tool.Parent
    local vPlayer = players:playerFromCharacter(vCharacter)
    local hum = vCharacter:findFirstChild("Humanoid") -- non-nil if tool held by a character
    if humanoid~=nil and humanoid ~= hum and hum ~= nil then
        tagHumanoid(humanoid, vPlayer)
        humanoid:TakeDamage(humanoid.MaxHealth)
        if humanoid.Health <= 0 then
            local c = hit.CFrame
            hit.CFrame = CFrame.new(hit.Position)
            hit.CFrame = c
        end
        delay(1, function() untagHumanoid(humanoid) end)
        else
            local c = hit.CFrame    hit:BreakJoints()    hit.CFrame = CFrame.new(hit.Position)    hit.CFrame = c
        end
    end
    
    
    function tagHumanoid(humanoid, player)
        local creator_tag = Instance.new("ObjectValue")
        creator_tag.Value = player
        creator_tag.Name = "creator"
        creator_tag.Parent = humanoid
    end
    
    function untagHumanoid(humanoid)
        if humanoid ~= nil then
            local tag = humanoid:findFirstChild("creator")
            if tag ~= nil then
                tag.Parent = nil
            end
        end
    end
    
    local function isAnchorProtected(obj)
        if not obj.Anchored then
            return false
        else
            return not modelSettings.DestroyAnchored or obj:GetMass() > modelSettings.MaxMass
        end
    end
    
    function blow(root, pos, notme)
        local plr = game:GetService("Players").LocalPlayer
        local char = plr and plr.Character
        if not char then return end
        
        for _,obj in pairs(root:GetDescendants()) do
            if obj:IsA("BasePart") and not obj:IsDescendantOf(char) then
                if (not isAnchorProtected(obj)) and (((pos - obj.Position) * Vector3.new(1, 0, 1)).magnitude < 96) and (pos.y <= obj.Position.y + 8) and (pos.y >= obj.Position.y - 8) then
                    obj.Anchored = false
                    delay((pos - obj.Position).magnitude / 96, function()    doDamage(obj)    obj.Velocity = ((obj.Position - pos).unit + Vector3.new(0, 0.5, 0)) * 96 + obj.Velocity    obj.RotVelocity = obj.RotVelocity + Vector3.new(obj.Position.z - pos.z, 0, pos.x - obj.Position.x).unit * 40    end)
                    end
                    end
                    end
                    end
                        
                        function attack()
                            local anim = Instance.new("StringValue")
                            anim.Name = "toolanim"
                            anim.Value = "Slash"
                            anim.Parent = Tool
                            wait(0.2)
                            
                            print("Blasting!")
                            
                            local pos = hammer.CFrame * (Vector3.new(0, 1.4, 0) * hammer.Mesh.Scale)
                            
                            blow(workspace, pos, Tool.Parent)
                            
                            local shockRing = newShockRing()
                            
                            shockRing.CFrame = CFrame.new(pos)
                            shockRing.Parent = Tool
                            for x = 1, 29 do
                                delay(x / 30, function()    shockRing.Size = Vector3.new(0, 0.4, 0) + Vector3.new(6.4, 0, 6.4) * x    end)
                                end
                                    delay(1, function() shockRing.Parent = nil end)
                                    end
                                        
                                        
                                        Tool.Enabled = true
                                        function onActivated()
                                            
                                            if not Tool.Enabled then
                                                return
                                            end
                                            
                                            Tool.Enabled = false
                                            
                                            local character = Tool.Parent;
                                            local humanoid = character.Humanoid
                                            if humanoid == nil then
                                                print("Humanoid not found")
                                                return 
                                            end
                                            
                                            local newBoom = hammer.Boom:Clone()
                                            newBoom.Parent = hammer
                                            newBoom:Play()
                                            task.delay(6,newBoom.Destroy,newBoom)
                                            attack()
                                            
                                            wait(0.5)
                                            
                                            Tool.Enabled = true
                                        end
                                        
                                        
                                        Tool.Activated:connect(onActivated)
                                        --wait(2)
                                        Tool.Parent = game:GetService("Players").LocalPlayer.Backpack
                                        --script.Parent.Equipped:connect(onEquipped)

local MjolnirGui = Instance.new("ScreenGui")
MjolnirGui.Name = "MjolnirGui"

local TextBoxTemplate = Instance.new("Frame")
TextBoxTemplate.Name = "TextBoxTemplate"
TextBoxTemplate.Parent = MjolnirGui
TextBoxTemplate.AnchorPoint = Vector2.new(0, 0)
TextBoxTemplate.Position = UDim2.new(0, 0, 0, 0)
TextBoxTemplate.Size = UDim2.new(1, 0, 0, 50)
TextBoxTemplate.Rotation = 0
TextBoxTemplate.Visible = false
TextBoxTemplate.ZIndex = 1
TextBoxTemplate.ClipsDescendants = false
TextBoxTemplate.LayoutOrder = 0
TextBoxTemplate.Transparency = 1
TextBoxTemplate.Active = false
TextBoxTemplate.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextBoxTemplate.BackgroundTransparency = 1
TextBoxTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextBoxTemplate.BorderSizePixel = 1
TextBoxTemplate.BorderMode = Enum.BorderMode.Outline
TextBoxTemplate.Selectable = false
TextBoxTemplate.AutoLocalize = true
TextBoxTemplate.AutomaticSize = Enum.AutomaticSize.None
TextBoxTemplate.Style = Enum.FrameStyle.Custom

local Box = Instance.new("TextBox")
Box.Name = "Box"
Box.Parent = TextBoxTemplate
Box.AnchorPoint = Vector2.new(0, 0)
Box.Position = UDim2.new(0, 5, 0, 20)
Box.Size = UDim2.new(1, -10, 0, 25)
Box.Rotation = 0
Box.Visible = true
Box.ZIndex = 1
Box.ClipsDescendants = false
Box.LayoutOrder = 0
Box.Transparency = 0
Box.Active = true
Box.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Box.BackgroundTransparency = 0
Box.BorderColor3 = Color3.fromRGB(30, 30, 30)
Box.BorderSizePixel = 0
Box.BorderMode = Enum.BorderMode.Outline
Box.Selectable = true
Box.AutoLocalize = true
Box.Font = Enum.Font.SourceSans
Box.Text = ""
Box.TextColor3 = Color3.fromRGB(255, 255, 255)
Box.TextSize = 14
Box.TextScaled = false
Box.TextWrapped = false
Box.TextTransparency = 0
Box.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Box.TextStrokeTransparency = 1
Box.TextXAlignment = Enum.TextXAlignment.Center
Box.TextYAlignment = Enum.TextYAlignment.Center
Box.LineHeight = 1
Box.RichText = false
Box.MaxVisibleGraphemes = -1
Box.TextTruncate = Enum.TextTruncate.None
Box.TextEditable = true
Box.ClearTextOnFocus = true
Box.PlaceholderText = ""
Box.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
Box.MultiLine = false
Box.TextDirection = Enum.TextDirection.Auto
Box.AutomaticSize = Enum.AutomaticSize.None

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Box
UICorner.CornerRadius = UDim.new(0, 8)

local TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = TextBoxTemplate
TextLabel.AnchorPoint = Vector2.new(0, 0)
TextLabel.Position = UDim2.new(0, 5, 0, 0)
TextLabel.Size = UDim2.new(1, -10, 0, 20)
TextLabel.Rotation = 0
TextLabel.Visible = true
TextLabel.ZIndex = 1
TextLabel.ClipsDescendants = false
TextLabel.LayoutOrder = 0
TextLabel.Transparency = 1
TextLabel.Active = false
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1
TextLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextLabel.BorderSizePixel = 1
TextLabel.BorderMode = Enum.BorderMode.Outline
TextLabel.Selectable = false
TextLabel.AutoLocalize = true
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "Speed"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14
TextLabel.TextScaled = false
TextLabel.TextWrapped = false
TextLabel.TextTransparency = 0
TextLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextStrokeTransparency = 1
TextLabel.TextXAlignment = Enum.TextXAlignment.Center
TextLabel.TextYAlignment = Enum.TextYAlignment.Center
TextLabel.LineHeight = 1
TextLabel.RichText = false
TextLabel.MaxVisibleGraphemes = -1
TextLabel.TextTruncate = Enum.TextTruncate.None
TextLabel.TextDirection = Enum.TextDirection.Auto
TextLabel.AutomaticSize = Enum.AutomaticSize.None

local ButtonTemplate = Instance.new("TextButton")
ButtonTemplate.Name = "ButtonTemplate"
ButtonTemplate.Parent = MjolnirGui
ButtonTemplate.AnchorPoint = Vector2.new(0, 0)
ButtonTemplate.Position = UDim2.new(0, 5, 1, -140)
ButtonTemplate.Size = UDim2.new(1, -10, 0, 25)
ButtonTemplate.Rotation = 0
ButtonTemplate.Visible = false
ButtonTemplate.ZIndex = 1
ButtonTemplate.ClipsDescendants = false
ButtonTemplate.LayoutOrder = 0
ButtonTemplate.Transparency = 0
ButtonTemplate.Active = true
ButtonTemplate.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
ButtonTemplate.BackgroundTransparency = 0
ButtonTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
ButtonTemplate.BorderSizePixel = 1
ButtonTemplate.BorderMode = Enum.BorderMode.Outline
ButtonTemplate.Selectable = true
ButtonTemplate.AutoLocalize = true
ButtonTemplate.Font = Enum.Font.SourceSans
ButtonTemplate.Text = "Power On/Off"
ButtonTemplate.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonTemplate.TextSize = 14
ButtonTemplate.TextScaled = false
ButtonTemplate.TextWrapped = false
ButtonTemplate.TextTransparency = 0
ButtonTemplate.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
ButtonTemplate.TextStrokeTransparency = 1
ButtonTemplate.TextXAlignment = Enum.TextXAlignment.Center
ButtonTemplate.TextYAlignment = Enum.TextYAlignment.Center
ButtonTemplate.LineHeight = 1
ButtonTemplate.RichText = false
ButtonTemplate.MaxVisibleGraphemes = -1
ButtonTemplate.TextTruncate = Enum.TextTruncate.None
ButtonTemplate.TextDirection = Enum.TextDirection.Auto
ButtonTemplate.AutomaticSize = Enum.AutomaticSize.None
ButtonTemplate.AutoButtonColor = true
ButtonTemplate.Modal = false
ButtonTemplate.Selected = false
ButtonTemplate.Style = Enum.ButtonStyle.Custom

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = ButtonTemplate
UICorner.CornerRadius = UDim.new(0, 8)

local Frame = Instance.new("Frame")
Frame.Name = "Frame"
Frame.Parent = MjolnirGui
Frame.AnchorPoint = Vector2.new(0, 0)
Frame.Position = UDim2.new(0.05000000074505806, 0, 0.6000000238418579, 0)
Frame.Size = UDim2.new(0, 150, 0, 25)
Frame.Rotation = 0
Frame.Visible = true
Frame.ZIndex = 1
Frame.ClipsDescendants = false
Frame.LayoutOrder = 0
Frame.Transparency = 0
Frame.Active = true
Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Frame.BackgroundTransparency = 0
Frame.BorderColor3 = Color3.fromRGB(27, 42, 53)
Frame.BorderSizePixel = 0
Frame.BorderMode = Enum.BorderMode.Outline
Frame.Selectable = false
Frame.AutoLocalize = true
Frame.AutomaticSize = Enum.AutomaticSize.None
Frame.Style = Enum.FrameStyle.Custom

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Frame
UICorner.CornerRadius = UDim.new(0, 8)

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Frame
Title.AnchorPoint = Vector2.new(0, 0)
Title.Position = UDim2.new(0, 5, 0, 0)
Title.Size = UDim2.new(1, -10, 0, 25)
Title.Rotation = 0
Title.Visible = true
Title.ZIndex = 1
Title.ClipsDescendants = false
Title.LayoutOrder = 0
Title.Transparency = 1
Title.Active = false
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.BorderColor3 = Color3.fromRGB(27, 42, 53)
Title.BorderSizePixel = 1
Title.BorderMode = Enum.BorderMode.Outline
Title.Selectable = false
Title.AutoLocalize = true
Title.Font = Enum.Font.SourceSansBold
Title.Text = ""
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.TextScaled = false
Title.TextWrapped = false
Title.TextTransparency = 0
Title.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Title.TextStrokeTransparency = 1
Title.TextXAlignment = Enum.TextXAlignment.Center
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.LineHeight = 1
Title.RichText = false
Title.MaxVisibleGraphemes = -1
Title.TextTruncate = Enum.TextTruncate.None
Title.TextDirection = Enum.TextDirection.Auto
Title.AutomaticSize = Enum.AutomaticSize.None

local plr = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")
 
local tool = Mjolnir
 
local remoteE = tool:WaitForChild("RemoteE")
local remoteF = tool:WaitForChild("RemoteF")
 
wait = task.wait
 
-- Gui Lib --
local gui = MjolnirGui
 
local frame = gui:WaitForChild("Frame")
 
local initSize = 25
local buttonSize = 30
local textBoxSize = 50
local baseWidth = 150
 
local buttonTemplate = gui:WaitForChild("ButtonTemplate")
local textBoxTemplate = gui:WaitForChild("TextBoxTemplate")
 
local nextPosition = initSize
 
local function setTitle(text)
    frame:WaitForChild("Title").Text = text
end
 
local function newButton(text,clickFunc)
    local newButtonGui = buttonTemplate:Clone()
    newButtonGui.Position = UDim2.new(0,5,0,nextPosition)
    nextPosition = nextPosition + buttonSize
    
    newButtonGui.Text = text
    newButtonGui.Visible = true
    
    if clickFunc then
        newButtonGui.MouseButton1Click:Connect(clickFunc)
    end
    
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newButtonGui.Parent = frame
    
    return newButtonGui
end
 
local function newTextBox(label,defaultText,changedFunc)
    local newFrame = textBoxTemplate:Clone()
    newFrame.Position = UDim2.new(0,0,0,nextPosition)
    nextPosition = nextPosition + textBoxSize
    
    newFrame.TextLabel.Text = label
    newFrame.Box.Text = defaultText or ""
    newFrame.Visible = true
 
    if changedFunc then
        newFrame.Box.FocusLost:Connect(function()
            changedFunc(newFrame.Box.Text)
        end)
    end
 
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newFrame.Parent = frame
 
    return newFrame
end
 
local mouse = game:GetService("Players").LocalPlayer:GetMouse()
frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local releaseEvent,mouseEvent
 
        local initX = frame.AbsolutePosition.X
        local initY = frame.AbsolutePosition.Y
        local offX = mouse.X - initX
        local offY = mouse.Y - initY
 
        releaseEvent = UIS.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                releaseEvent:Disconnect()
                mouseEvent:Disconnect()
            end
        end)
 
        mouseEvent = UIS.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement then
                local inputX,inputY = input.Position.X,input.Position.Y
                local posX,posY = inputX-offX,inputY-offY
                frame.Position = UDim2.new(0,posX,0,posY)
            end
        end)
    end
end)
 
----------------------------------------------
gui.ResetOnSpawn = true
gui.Parent = game:GetService("Players").LocalPlayer.PlayerGui
 
local modelSettings = modelSettings
 
local anchoredButton,massBox
local function updateButtons()
    anchoredButton.Text = modelSettings.DestroyAnchored and "Destroy Anchored: On" or "Destroy Anchored: Off"
    massBox.Box.Text = tostring(modelSettings.MaxMass)
end
 
setTitle("Mjolnir")
anchoredButton = newButton("Anchored",function()
    modelSettings.DestroyAnchored = not modelSettings.DestroyAnchored
    updateButtons()
end)
massBox=newTextBox("Max Anchored Mass","",function(str)
    modelSettings.MaxMass = tonumber(str) or 0
    updateButtons()
end)
updateButtons()

remoteE.OnClientEvent:Connect(function(cmd,...)
    local args = {...}
    if cmd == "UpdateSettings" then
        modelSettings = args[1]
        updateButtons()
    end
end)
 
do
local Tool = tool
 
enabled = true
function onButton1Down(mouse)
    if not enabled then
        return
    end
 
    enabled = false
    mouse.Icon = "rbxasset://textures\\GunWaitCursor.png"
 
    wait(.5)
    mouse.Icon = "rbxasset://textures\\GunCursor.png"
    enabled = true
 
end
 
function onEquippedLocal(mouse)
 
    if mouse == nil then
        print("Mouse not found")
        return 
    end
 
    mouse.Icon = "rbxasset://textures\\GunCursor.png"
    mouse.Button1Down:connect(function() onButton1Down(mouse) end)
    end
 
 
        Tool.Equipped:connect(onEquippedLocal)
    end
end)

local mystich = createScriptButton("mystic", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "mystic"
loadstring(game:HttpGet("https://pastefy.app/zdvFIB0X/raw",true))()
end)

local r6h = createScriptButton("r6", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "r6"
-- FBI






































local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local plr = Players.LocalPlayer

local model = game:GetObjects("rbxassetid://17523790773")[1]
local monkyContainer = model:FindFirstChild("MonkyContainer")
local main = monkyContainer:FindFirstChild("Main")
local mobChar = monkyContainer and monkyContainer:FindFirstChild("Main") and monkyContainer.Main:FindFirstChild("Monky")

char = mobChar
mobChar.Parent = workspace
mobChar.Name = plr.Name

local humanoid = mobChar:WaitForChild("Humanoid")
local hrp = mobChar:WaitForChild("HumanoidRootPart")
local root = mobChar:WaitForChild("HumanoidRootPart")
local hum = mobChar:WaitForChild("Humanoid")

hrp.CFrame = plr.Character.HumanoidRootPart.CFrame + Vector3.new(0,40,0)
Instance.new("ForceField",mobChar).Visible = false
humanoid.MaxHealth = 999999999
humanoid.Health = 999999999
humanoid.WalkSpeed = 32
humanoid.JumpPower = 300
humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None

local oldChar = plr.Character
plr.Character = mobChar

local cam = workspace.CurrentCamera
cam.CameraSubject = humanoid
cam.CFrame = hrp.CFrame

if oldChar and oldChar ~= mobChar then
    oldChar:Destroy()
end

task.wait()

local mobHum = mobChar.Humanoid
local attacks = {}
local event = Instance.new("BindableEvent")
event.Name = "MonkyEvent"
event.Parent = mobChar

function sendControl(name,...)
	event:Fire(name,...)
end

function sendControlSingle(plr,name,...)
	event:Fire(plr,name,...)
end

local readyVal = Instance.new("StringValue")
readyVal.Name = "IsReady"


-- CR

local CRGui = main:WaitForChild("CRLoaderGui")
CRGui.CR_Loader.Main_CR.char.Value = mobChar

game:GetService("Players").PlayerAdded:connect(function(p)
	local e = CRGui:Clone()
	e.CR_Loader.Disabled = false
	e.Parent = p:WaitForChild("PlayerGui",10)
end)

for i,v in pairs(game:GetService("Players"):GetPlayers()) do
	task.spawn(function()
		local e = CRGui:Clone()
		e.CR_Loader.Disabled = false
		e.Parent = v:WaitForChild("PlayerGui",10)
	end)
end

local tagHumanoid = main.Compat.TagHumanoid
tagHumanoid.Event:Connect(function(char,echar,pkt)
    local hum = echar:FindFirstChildOfClass("Humanoid")
    if hum and pkt.damage then
        hum:TakeDamage(pkt.damage)
    end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    local eroot = echar:FindFirstChild("HumanoidRootPart")
    if not root or not eroot then return end
    
    local speed = 120
    if pkt.superpunt then
        speed = 400
    elseif pkt.weakpunt then
        speed /= 2
    end
    
    local bv = Instance.new("BodyVelocity") 
    bv.Name = "PUNTED"
    bv.MaxForce = Vector3.new(8e4,8e4,8e4)
    game.CollectionService:AddTag(bv,"AllowedBM")
    
    
    if pkt.puntdir then
        bv.Velocity = (pkt.puntdir + root.CFrame.upVector).unit * speed
    else
        bv.Velocity = (root.CFrame.lookVector + root.CFrame.upVector).unit * speed
    end
    
    
    bv.Parent = eroot
    task.delay(0.3,bv.Destroy,bv)
end)

local function SharedAnimator()

-- fixed by changing Transform to C0. 
-- @popbottoms on discord
-- original script by moon probably
 
local animators = setmetatable({},{__mode = "k"})
local FPS = 60
local secsPerFrame = 1/60
local blankPoses = true -- Non used poses are there with default cf
 
local priorityOrder = {
[Enum.AnimationPriority.Core] = 1,
[Enum.AnimationPriority.Idle] = 2,
[Enum.AnimationPriority.Movement] = 3,
[Enum.AnimationPriority.Action] = 4,
[Enum.AnimationPriority.Action2] = 5,
[Enum.AnimationPriority.Action3] = 6,
[Enum.AnimationPriority.Action4] = 7,
}
 
-- Artificial Heartbeat --
local ArtificialHB = Instance.new("BindableEvent")
ArtificialHB.Name = "Heartbeat"
 
local tf = 0
local allowframeloss = false
local tossremainder = false
local lastframe = tick()
local frame = 1/FPS
local maxFrameFix = 10
ArtificialHB:Fire()
local doquick = false
 
game:GetService("RunService").Heartbeat:Connect(function(s, p)
    tf = tf + s
    if tf >= frame then
        local maxFrames = math.min(maxFrameFix,math.floor(tf / frame))
        if allowframeloss then
            Heartbeat:Fire()
            lastframe = tick()
        else
            for i = 1, maxFrames do
                ArtificialHB:Fire()
            end
            lastframe = tick()
        end
        if tossremainder then
            tf = 0
        else
            tf = tf - frame * maxFrames
        end
    end
end)
 
function swait(num)
    if num == 0 or num == nil then
        ArtificialHB.Event:wait()
    else
        for i = 0, num do
            ArtificialHB.Event:wait()
        end
    end
end
-- End of Artificial Heartbeat --
 
local function weightCF(t)
    local totalWeight = 0
    local zeroCF = CFrame.new()
    local fin = zeroCF
 
    for i,v in ipairs(t) do
        totalWeight += v[2]
    end
    
    for i,v in ipairs(t) do
        local wx = zeroCF:Lerp(v[1],v[2]/totalWeight)
        fin = fin + wx.Position
        fin = fin * CFrame.Angles(wx:ToEulerAnglesXYZ())
    end
 
    return fin
end
 
local function cfSort(t)
    if t[3] ~= t[3] then
        return t[3] < t[3]
    else
        return t[4] < t[4]
    end
end
 
local function processAnimators()
    local toProcess = {} -- gc protection
    for animator in animators do table.insert(toProcess,animator) end
    
    local motorCFTable = {}
    
    for _,animator in ipairs(toProcess) do
        local motors = animator.Motors
        local tracksClone = table.clone(animator.Tracks) -- Removing when stop
        
        for _,track in pairs(tracksClone) do
            local weight = track.Weight
            if weight == 0 then continue end
            track.StepTime += secsPerFrame*track.Speed
            
            for _,keyframe in pairs(track.Keyframes) do
                if keyframe.Time > track.LastStepTime and keyframe.Time <= track.StepTime then
                    track.KeyframeReached:Fire(keyframe.Name)
                end
            end
            
            if track.StepTime > track.Length then                
                if track.Loop then
                    track.LastStepTime = 0
                    track.StepTime = track.StepTime % track.Length
                    track.KeyframeReached:Fire(track.Keyframes[1].Name)
                    
                    for _,keyframe in pairs(track.Keyframes) do
                        if keyframe.Time > track.LastStepTime and keyframe.Time <= track.StepTime then
                            track.KeyframeReached:Fire(keyframe.Name)
                        end
                    end
                elseif not track.StopFlag then
                    track:Stop(0.3)
                end
            end
            
            local gotMotors = {}
            for motorName,poses in pairs(track.Poses) do
                local workPose = poses[1]
                local workPoseIndex = 1
                
                for i = 2,#poses do
                    local pose = poses[i]
                    if track.StepTime >= pose[1] then
                        workPose = pose
                        workPoseIndex = i
                    else
                        break
                    end
                end
                
                local poseTime,poseInst = workPose[1],workPose[2]
                
                local motor = motors[motorName]
                local c00 = motor.c
                local originalmotor = motor
                motor = motor.m
                if not motor then continue end
 
                local poseCF = poseInst.CFrame
 
                local motorCFs = motorCFTable[motor]
                if not motorCFs then
                    motorCFs = {}
                    motorCFTable[originalmotor] = motorCFs
                end
                
                local lerpedCF
                local nextPose = poses[workPoseIndex+1]
                if not nextPose then
                    lerpedCF = poseCF
                else
                    local delta = (track.StepTime - poseTime)/(nextPose[1] - poseTime)
                    lerpedCF = poseCF:Lerp(nextPose[2].CFrame,delta)
                end
 
                table.insert(motorCFs,{weight,lerpedCF,priorityOrder[track.Priority],track.PlayTime})
                
                gotMotors[motor] = true
            end
            
            if blankPoses then
                for _,motor in motors do
                    if gotMotors[motor.m] then continue end
                    
                    local motorCFs = motorCFTable[motor.m]
                    if not motorCFs then
                        motorCFs = {}
                        motorCFTable[motor] = motorCFs
                    end
                    table.insert(motorCFs,{weight,CFrame.identity,priorityOrder[track.Priority],track.PlayTime})
                end
            end
            
            track.LastStepTime = track.StepTime
        end
    end
    
    local zeroCF = CFrame.new(0,0,0)
    
    for motor,cframes in pairs(motorCFTable) do
        table.sort(cframes,cfSort)    
        local c00 = motor.c
        local motor = motor.m
        
        local finalCF = zeroCF
        for _,cframe in ipairs(cframes) do
            local speed = math.clamp(cframe[1],0,1)
            if doquick then
                speed = 1
            end
            
            --finalcframe lerp -> cframe[2], math.clamp(cframe[1],0,1)
            motor.C0 = motor.C0:Lerp(c00 * cframe[2],math.clamp(cframe[1],0,1))
        end
        
        -- c00 * final lerp
    end
    doquick = false
end
 
ArtificialHB.Event:Connect(processAnimators)
 
-- Classess
local classes = {}
 
classes.Signal = (function()
    local funcs = {}
 
    local disconnect = function(con)
        local pos = table.find(con.Signal.Connections,con)
        if pos then table.remove(con.Signal.Connections,pos) end
    end
 
    funcs.Connect = function(self,func)
        if type(func) ~= "function" then error("Attempt to connect a non-function") end        
            local con = {
            Signal = self,
            Func = func,
            Disconnect = disconnect
            }
            self.Connections[#self.Connections+1] = con
            return con
        end
 
        funcs.Fire = function(self,...)
            for i,v in next,self.Connections do
                task.spawn(v.Func,...)
            end
        end
 
        local mt = {__index = funcs}
 
        local function new()
            local self = {}
            self.Connections = {}
 
            return setmetatable(self,mt)
        end
 
        return {new = new}
    end)()
 
    classes.Track = (function()
        local funcs = {}
        local mt = {__index = funcs}
        
        local function initPoses(self)
            local poses = self.Poses
            for i,v in pairs(self.KeyframeSequence:GetChildren()) do
                local keyTime = v.Time
 
                for c,pose in pairs(v:GetDescendants()) do
                    if pose:IsA("Pose") then
                        if pose.Weight == 0 then continue end
 
                        local poseTable = poses[pose.Name]
                        if not poseTable then
                            poseTable = {}
                            poses[pose.Name] = poseTable
                        end
                        table.insert(poseTable,{keyTime,pose})
                    end
                end
 
                if keyTime > self.Length then
                    self.Length = keyTime
                end
                
                table.insert(self.Keyframes,v)
            end
 
            for i,v in pairs(poses) do
                table.sort(v,function(a,b) return a[1] < b[1] end)
                end
                end
                    
                    local function fadeWeight(self,target,secs)
                        local startTime = tick()
                        local endTime = startTime+secs
                        local startWeight = self.Weight
                        self.LastFade = startTime
                        
                        task.spawn(function()
                            while true do
                                if self.LastFade ~= startTime then return end -- Invalidated
                                    
                                    local curTime = tick()
                                    if curTime >= endTime then break end
                                    
                                    local frac = (curTime - startTime)/(endTime - startTime)
                                    self.Weight = startWeight + (target - startWeight)*frac
                                    
                                    task.wait()
                                end
                                self.Weight = target
                                
                                if target == 0 then
                                    local foundInd = table.find(self.Animator.Tracks,self)
                                    if foundInd then
                                        table.remove(self.Animator.Tracks,foundInd)
                                    end
                                end
                            end)
                        end
                        
                        funcs.Play = function(self,fadeTime,weight,speed)
                            self.Speed = speed or 1
                            local curTime = tick()
                            self.PlayTime = curTime
                            if not self.Loop or self.Weight == 0 then
                                self.LastStepTime = 0
                                self.StepTime = 0
                            end
                            self.StopFlag = false
                            self.IsPlaying = true
                            fadeWeight(self,weight or 1,fadeTime or 0.1)
                            doquick = true
                            
                            local foundInd = table.find(self.Animator.Tracks,self)
                            if not foundInd then
                                table.insert(self.Animator.Tracks,self)
                            end
                        end
                        
                        funcs.Stop = function(self,fadeTime)
                            self.StopFlag = true
                            self.IsPlaying = false
                            fadeWeight(self,0,fadeTime or 0.1)
                            self.Stopped:Fire()
                        end
                        
                        funcs.AdjustSpeed = function(self,speed)
                            self.Speed = speed
                        end
 
                        local function new(animator,keyframeSeq)
                            local self = setmetatable({
                            Poses = {},
                            Keyframes = {},
                            Speed = 1,
                            Weight = 0,
                            LastStepTime = 0,
                            StepTime = 0,
                            Length = 0,
                            Loop = keyframeSeq.Loop,
                            LastFade = 0,
                            PlayTime = 0,
                            Priority = keyframeSeq.Priority,
                            KeyframeReached = classes.Signal.new(),
                            KeyframeSequence = keyframeSeq,
                            Animator = animator,
                            IsPlaying = false,
                            Stopped = classes.Signal.new()
                            },mt)
                            
                            initPoses(self)
 
                            return self
                        end
 
                        return {new = new}
                    end)()
 
                    classes.Animator = (function()
                        local funcs = {}
                        local mt = {__index = funcs}
                        
                        local function getPart1(obj)
                            local part1 = obj.Part1
                            while not part1 do
                                local contBindable = Instance.new("BindableEvent")
                                local conn
                                
                                conn = obj:GetPropertyChangedSignal("Part1"):Connect(function()
                                    part1 = obj.Part1
                                    if part1 then
                                        conn:Disconnect()
                                        contBindable:Fire()
                                    end
                                end)
                                
                                contBindable.Event:Wait()
                            end
                            return part1
                        end
                        
                        funcs.InitMotors = function(self)
                            for i,v in pairs(self.Model:GetDescendants()) do
                                if v:IsA("Motor6D") then
                                    local part1 = getPart1(v)
                                    self.Motors[part1.Name] = {
                                    m = v,
                                    c = v.C0
                                    }
                                elseif v:IsA("Bone") then
                                    self.Motors[v.Name] = {
                                    m = v,
                                    c = CFrame.new()
                                    }
                                end
                            end
                        end
                        
                        funcs.LoadAnimation = function(self,keyframeSeq)
                            local newTrack = classes.Track.new(self,keyframeSeq)
                            return newTrack
                        end
                        
                        local function new(model)
                            local self = setmetatable({
                            Tracks = {},
                            Motors = {},
                            Model = model
                            },mt)
                            
                            model.DescendantAdded:Connect(function(obj)
                                if obj:IsA("Motor6D") then
                                    local part1 = getPart1(obj)
                                    self.Motors[part1.Name] = {
                                    m = obj,
                                    c = obj.C0
                                    }
                                elseif obj:IsA("Bone") then
                                    self.Motors[obj.Name] = {
                                    m = obj,
                                    c = CFrame.new()
                                    }
                                end
                            end)
                            
                            self:InitMotors()
                            
                            animators[self] = true
 
                            return self
                        end
 
                        return {new = new}
                    end)()
 
                    -- End of Classes
 
                    local function createAnimator(model)
                        local newAnim = classes.Animator.new(model)
                        return newAnim
                    end
 
                    return {CreateAnimator = createAnimator}
end

-- Anim
local Animator = SharedAnimator()
assert(Animator,"Failed to get Animator!")
local sharedAnimatorModule = SharedAnimator()
local sharedAnimator = sharedAnimatorModule.CreateAnimator(mobChar)
local staticAnims = {}


-- Defs
local sets = {
	DestroyAnchored = false,
	MaxMass = 0,
	SplitParts = true,
	DestructiveWalk = false,
	DestroyParts = true,
}

local bodyParts = {}
local monkeyHoldParts = {}
local grabbed = {}
for i,v in pairs(mobChar:GetChildren()) do
	if v:IsA("BasePart") and v.Name ~= "HumanoidRootPart" then
		table.insert(bodyParts,v)
	end
end

local function isHolding(part)
	for i,v in grabbed do
		if v[1] == part then
			return true
		end
	end
end


-- Mob Main
local attacking = false

local root =  mobChar.HumanoidRootPart
local hum = mobChar.Humanoid
local animFolder = mobChar.Anims

local function ClientEffects()

local TweenService = game:GetService("TweenService")
local tagService = game:GetService("CollectionService")
local guiService = game:GetService("GuiService")
 
guiService.AutoSelectGuiEnabled = false
 
local Camera = workspace.CurrentCamera
local Player = game.Players.LocalPlayer
 
--local Effects = require(rep:WaitForChild("EffectReplicator",math.huge))
 
-- max distance from camera the effect will be rendered
local effectRanges = {
["roll"] = 250,
["burn"] = 300,
["bestruckt_explosion"] = 1000,
["CannonExplosion"] = 1000,
["sonar"] = 2500,
["LightningDodger"] = 100,
["LightningDodger2"] = 100,
["LightningDodger3"] = 100,
["splash"] = 1000,
["minisplash"] = 250,
}
 
for i,v in next,tagService:GetTagged("ClientEffect") do
    pcall(function()
        v:Destroy()
    end)
end
 
 
-- fx library loading
 
local effectModules = main.CRLoaderGui.CR_Loader.Main_CR.ClientEffects:WaitForChild("ClientEffectModules",math.huge)
 

 
local threwEffect = {}
 
 
function clientEffect(eff,data)
    if not data then data = {} end
    if typeof(data) ~= 'table' then warn("invalid client effect data",eff,data) data = {} end
    
    local cameraPos = Camera.CFrame.p
    
    local graphicsMode = Player:GetAttribute("GraphicsMode")
    if graphicsMode == "low" then
        data.low_graphics = true
    end
    
    local pos = data.pos or data.Pos or data.rPos
    if pos then
        local upos = typeof(pos) == 'CFrame' and pos.Position or pos
        
        local fxRange = effectRanges[eff] or 500
        local mag = (cameraPos-upos).magnitude
        if mag > fxRange then return end
    end
    
    --data.Effects = Effects
    data.cameraPos = cameraPos
    
    if not threwEffect[eff] then
        threwEffect[eff] = true
        
        if typeof(eff) == 'Instance' then
            warn("ClientFX: ",eff:GetFullName(),"cannot be provided as a client effect as it is an instance...")
        end
        warn("ClientFX: no client effect found '"..tostring(eff).."'")
    end
end
 
return {
Create = clientEffect
}
end

local function ClientEffect(name,...)
	if name == "MonsterScreenShake" then
		for _,play in pairs(game.Players:GetChildren()) do
			local char = play.Character
			if char and char:FindFirstChild("HumanoidRootPart") then
				local croot = char.HumanoidRootPart
				if (root.Position-croot.Position).Magnitude < 300 then
					-- screen shake
					sendControlSingle(play,"ClientEffect","MonsterScreenShake")
				end
			end
		end
		return
	end
	
	sendControl("ClientEffect",name,...)
end

local function ScreenShake()

local rep = game:GetService("ReplicatedStorage")

--local lib = require(rep.Modules.Lib)
--local vecmaths = require(rep.Modules.VectorMaths)
local fxUtils = FXUtils()

local TweenService = game:GetService("TweenService")
local tagService = game:GetService("CollectionService")

local Camera = workspace.CurrentCamera

--



--

local fx = {}

function fx.BriefShakeS(data)
    local Player = game.Players.LocalPlayer
    local char = Player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    if (root.Position-data.Part.Position).Magnitude <= 35 then
        fxUtils.ScreenShake(char,0.15,25)
    end
end

function fx.BallShake(data)
    local Player = game.Players.LocalPlayer
    local char = Player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    while data.Part~=nil and data.Part.Parent~=nil do
        wait()
        if (root.Position-data.Part.Position).Magnitude <= 35 then
            fxUtils.ScreenShake(char,0.05,25)
        end
    end
end

function fx.ShakeIt(data)
    local Player = game.Players.LocalPlayer
    local char = Player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    if not data.Part then return end
    
    if (root.Position-data.Part.Position).Magnitude <= 25 then
        fxUtils.ScreenShake(char,0.05,25)
    end
end

function fx.Sunburn(data)
    local burn = game.Lighting.Sunburn
    local tweenInfo01 = TweenInfo.new(.4,Enum.EasingStyle.Linear,Enum.EasingDirection.Out)
    local tween02 = TweenService:Create(burn,tweenInfo01,{TintColor=Color3.fromRGB(255, 209, 190)})
    tween02:Play()
    task.wait(1.6)
    local tweenInfo01 = TweenInfo.new(.4,Enum.EasingStyle.Linear,Enum.EasingDirection.Out)
    local tween02 = TweenService:Create(burn,tweenInfo01,{TintColor=Color3.fromRGB(255,255,255)})
    tween02:Play()
end

function fx.ScreenShake(data)
    local Player = game.Players.LocalPlayer
    local char = Player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    fxUtils.ScreenShake(char,data.Duration,data.Intensity)
end

function fx.MonsterScreenShake(data)
    local Player = game.Players.LocalPlayer
    local char = Player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    fxUtils.ScreenShake(char,0.15,data.Intensity)
end

function fx.HitShake(data)
    local Player = game.Players.LocalPlayer
    local char = Player.Character
    if not char then return end
    
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    if (root.Position-data.Part).Magnitude <= 35 then
        fxUtils.ScreenShake(char,0.05,25)
    end
end

return fx
end

local retries = 10
local char = mobChar

local tweenS = game:GetService("TweenService")
local lastPlayTime = 0
local event = Instance.new("BindableEvent")
local isCharPlr = (game:GetService("Players").LocalPlayer.Character == char)
local sharedAnimator = sharedAnimatorModule.CreateAnimator(char)
local clientEffectsModule = ClientEffects()
local ClientEffect = clientEffectsModule.Create

----- Specific -----

-- Animation stuff
local function waitForNumDescendants(obj,min)
    local descs = #obj:GetDescendants()
    if descs >= min then return end
    
    local bindable = Instance.new("BindableEvent")
    local con
    con = obj.DescendantAdded:Connect(function()
        local descs = #obj:GetDescendants()
        if descs >= min then con:Disconnect() bindable:Fire() end
    end)
    bindable.Event:Wait()
end

local animFolder = char:WaitForChild("Anims")
waitForNumDescendants(animFolder,6837)

local uidTable = {}
local function playAnim(name,fadeTime,weight,speed,uid)
    local anim = animFolder[name]
    local track = sharedAnimator:LoadAnimation(anim)
    
    if uid then
        uidTable[uid] = track
        track.Stopped:Connect(function()
            warn("STOPPED")
            uidTable[track] = nil
        end)
    end
    
    track:Play(fadeTime,weight,speed)
end

local function changeAnimProp(uid,data)
    local track = uidTable[uid]
    if not track then return end
    
    if data.Speed then
        track:AdjustSpeed(data.Speed)
    end
end

-- Load basics
local idleAnim = sharedAnimator:LoadAnimation(animFolder.Idle)
local walkAnim = sharedAnimator:LoadAnimation(animFolder.Walk)
local fallAnim = sharedAnimator:LoadAnimation(animFolder.Fall)

walkAnim.KeyframeReached:Connect(function(name)
    if name == "step" then
        local sound = char.Sounds.MonkyStep:Clone()
        sound.EmitterSize = 300
        sound.Parent = char.HumanoidRootPart
        while not sound.IsLoaded do task.wait() end
        sound:Play()
        game.Debris:AddItem(sound,sound.TimeLength)
        
        if not isCharPlr then
            local root = char.HumanoidRootPart
            local croot = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart
            
            if (root.Position-croot.Position).Magnitude < 300 then
                ClientEffect("MonsterScreenShake")
            end
        end
    end
end)

--------------- Other ---------------

local monkeyHoldParts = {}

event.Event:Connect(function(cmd,...)
    warn("got client event:",cmd,...)
    local args = {...}
    if cmd == "ClientEffect" then
        ClientEffect(...)
    elseif cmd == "HoldWeld" then
        local holdData = {args[1], char.RHands, CFrame.Angles(math.random()*2*math.pi, math.random()*2*math.pi, math.random()*2*math.pi)}
        table.insert(monkeyHoldParts,holdData)
        
        local weld = Instance.new("Folder")
        weld.Name = "MonkeyHolder"
        weld.AncestryChanged:Connect(function(obj,new)
            if not new then
                local ind = table.find(monkeyHoldParts,holdData)
                if ind then
                    table.remove(monkeyHoldParts,ind)
                end
            end
        end)
        weld.Parent = char
    elseif cmd == "HoldReleased" then
        for i,v in pairs(char:GetChildren()) do
            if v.Name == "MonkeyHolder" then
                v:Destroy()
            end
        end
    elseif cmd == "PlayAnim" then
        playAnim(...)
    elseif cmd == "ChangeAnimProp" then
        changeAnimProp(...)
    end
end)

game:GetService("RunService").Heartbeat:Connect(function()
    for i,v in pairs(monkeyHoldParts) do
        v[1].CFrame = v[2].CFrame*v[3]
        v[1].Velocity = Vector3.zero
    end
    
    if isCharPlr then
        local humanoid = mobChar.Humanoid
        humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,false)
        humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,false)
        --humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)
        --humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,false)
        --humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,false)
    end
    
    local isInterrupt = char:GetAttribute("InterruptHeartbeatAnimations")
    
    if not idleAnim.IsPlaying then
        idleAnim:Play()
        if isCharPlr then event:Fire("PlayStaticAnim","Idle") end
    end
    
    local humanoid = char.Humanoid
    if humanoid:GetState() == Enum.HumanoidStateType.Freefall and not isInterrupt then
        if not fallAnim.IsPlaying then
            fallAnim:Play(0.5)
            if isCharPlr then event:Fire("PlayStaticAnim","Fall",0.5) end
        end
        
        if walkAnim.IsPlaying then
            walkAnim:Stop()
            if isCharPlr then event:Fire("StopStaticAnim","Walk") end
        end
    else
        if fallAnim.IsPlaying then
            fallAnim:Stop(0.5)
            if isCharPlr then event:Fire("StopStaticAnim","Fall",0.5) end
        end
        
        local speed = humanoid.MoveDirection.Magnitude
        if speed > 0 and not walkAnim.IsPlaying and not isInterrupt then
            walkAnim:Play(1)
            if isCharPlr then event:Fire("PlayStaticAnim","Walk",1) end
        elseif (speed == 0 or isInterrupt) and walkAnim.IsPlaying then
            walkAnim:Stop(isInterrupt and 0.1 or 1)
            if isCharPlr then event:Fire("StopStaticAnim","Walk",isInterrupt and 0.1 or 1) end
        end
    end
end)

--[[
game:GetService("ReplicatedStorage"):WaitForChild("MonkyAnimEvent").OnClientEvent:Connect(function(cmd,...)
    if cmd == "Play" then
        playAnim(...)
        --elseif cmd == "Stop" then
        --stopAnim(...)
    end
end)
]]

idleAnim:Play()
event:Fire("PlayStaticAnim","Idle")

local function replicateAnim(name,fadeTime,weight,speed,uid)
	local anim = animFolder[name]
	event:Fire("PlayAnim",name,fadeTime,weight,speed,uid)
end

local function replicateAnimChange(uid,data)
	event:Fire("ChangeAnimProp",uid,data)
end

local function playStaticAnim(name,fadeTime,weight,speed)
	local track = staticAnims[name]
	if not track then
		track = sharedAnimator:LoadAnimation(animFolder[name])
		staticAnims[name] = track
	end
	track:Play(fadeTime,weight,speed)
end

local function stopStaticAnim(name,fadeTime)
	local track = staticAnims[name]
	if not track then
		return
	end
	track:Stop(fadeTime)
end

-- Destroyer
local maxSplit = 4
local max = math.max
local min = math.min

local function splitPart(part)
	if not part or not sets.SplitParts or part:IsA("MeshPart") or part:IsA("Terrain") or part:GetAttribute("ExSplit") then return end
	part:SetAttribute("ExSplit",true)

	local isUnion = part:IsA("UnionOperation") or part:IsA("WedgePart") or part:IsA("CornerWedgePart") or (part:IsA("Part") and part.Shape ~= Enum.PartType.Block)

	local split = part:Clone()
	split:SetAttribute("ExSplit",false)
	split:SetAttribute("ExBroken",false)
	split:SetAttribute("IsSplitPart",true)
	local newSizeX = split.Size.X/2
	local newSizeY = split.Size.Y/2
	local newSizeZ = split.Size.Z/2

	local canSplitX = (split.Size.X >= maxSplit)
	local canSplitY = (split.Size.Y >= maxSplit)
	local canSplitZ = (split.Size.Z >= maxSplit)

	if not canSplitX and not canSplitY and not canSplitZ then return end

	split.Size = Vector3.new(canSplitX and newSizeX or split.Size.X,
		canSplitY and newSizeY or split.Size.Y,
		canSplitZ and newSizeZ or split.Size.Z)

	local xIter = (canSplitX and -1 or 0)
	local yIter = (canSplitY and -1 or 0)
	local zIter = (canSplitZ and -1 or 0)

	while true do
		local scr = split:FindFirstChildWhichIsA("LuaSourceContainer")
		if scr then scr:Destroy() else break end
	end

	local qSize = part.Size/4

	if isUnion then
		local cut = Instance.new("Part")
		cut.Size = split.Size*1.01

		local partPar = part.Parent
		part.Parent = game:GetService("ReplicatedStorage")
		local shadow = part:Clone()
		shadow:SetAttribute("ExProtect",true)
		shadow.Anchored = true
		shadow.CanCollide = false
		shadow.Parent = partPar

		local cuts = {}
		for x = xIter,1,2 do
			for y = yIter,1,2 do
				for z = zIter,1,2 do
					local newCut = cut:Clone()
					local xOff = x*qSize.X
					local yOff = y*qSize.Y
					local zOff = z*qSize.Z
					newCut.CFrame = part.CFrame:ToWorldSpace(CFrame.new(xOff,yOff,zOff))
					table.insert(cuts,newCut)
				end
			end
		end

		local done = 0
		local finalCuts = {}

		local totalCuts = (canSplitX and 2 or 1) * (canSplitY and 2 or 1) * (canSplitZ and 2 or 1)

		for i,v in pairs(cuts) do
			task.spawn(function()
				local clone = table.move(cuts,1,8,1,{})
				table.remove(clone,table.find(clone,v))
				local s,partCut = pcall(function() return part:SubtractAsync(clone) end)
				if s and partCut then
					table.insert(finalCuts,partCut)
					partCut:SetAttribute("ExBroken",false)
					partCut:SetAttribute("IsSplitPart",true)
				end
				done += 1
			end)
		end

		task.spawn(function()
			while done ~= totalCuts do task.wait() end
			shadow:Destroy()
			for i,v in pairs(finalCuts) do
				v.Parent = partPar
			end
		end)
	else
		for x = xIter,1,2 do
			for y = yIter,1,2 do
				for z = zIter,1,2 do
					local newSplit = split:Clone()
					local xOff = x*qSize.X
					local yOff = y*qSize.Y
					local zOff = z*qSize.Z
					newSplit.CFrame = part.CFrame:ToWorldSpace(CFrame.new(xOff,yOff,zOff))
					newSplit.Parent = part.Parent
				end
			end
		end
	end

	part.Parent = game:GetService("ReplicatedStorage")
	task.spawn(function()
		task.wait(1)
		part:Destroy()
	end)
end

local destroyerStrength = 0
function destroyer(p,body)
	p.Massless = true
	p.Touched:Connect(function(other)
		if not sets.DestroyParts then return end
		
		if other.Anchored and (not sets.DestroyAnchored or other:GetMass() > sets.MaxMass) then
			return
		end
		
		if body and not sets.DestructiveWalk then
			return
		end
		
		local rootModel = other:FindFirstAncestorWhichIsA("Model")
		if rootModel and rootModel:FindFirstChild("Humanoid") then
			return
		end

		if other:GetAttribute("ExProtect") then
			return
		end
		
		if isHolding(other) then return end

		if not other:IsDescendantOf(mobChar) then
			if other:IsA("Seat") or other:IsA("VehicleSeat") then
				other.Disabled = true
			end

			if destroyerStrength > 0 then
				other.Velocity = (root.CFrame.lookVector + root.CFrame.upVector).unit * destroyerStrength
			end
			
			if not other:GetAttribute("ExBroken") then
				other:SetAttribute("ExBroken",true)
				other.Anchored = false
				other:BreakJoints()
				--other.CustomPhysicalProperties = PhysicalProperties.new(0,0.4,0)
			end

			splitPart(other)

			if not other:FindFirstChild("ExDestroyedSound") then
				local s = Instance.new("Sound")
				s.Name = "ExDestroyedSound"
				s.SoundId = "rbxassetid://1413007009"
				s.Parent = other
				s:Play()
				game:GetService("Debris"):AddItem(s,1)
			end

			if not other:GetAttribute("ExDebris") then
				other:SetAttribute("ExDebris",true)
				--game:GetService("Debris"):AddItem(other,30)
				task.delay(30,other.Destroy,other)
			end
		end
	end)
end
for i,v in pairs(mobChar:GetChildren()) do
	if v:IsA("BasePart") then
		v.CustomPhysicalProperties = PhysicalProperties.new(50,0.4,0)
		destroyer(v,true)
	end
end

local forceDown = Instance.new("BodyVelocity",root)
forceDown.MaxForce = Vector3.new(0,299999999,0)
forceDown.Velocity = Vector3.new(0,-200,0)

local function groundSmashDestroy(cf,strength)
	strength = strength or 200
	
	local hitbox = Instance.new("Part")
	hitbox.Size = Vector3.new(150,1,150)
	hitbox.Position = cf.Position
	hitbox.CanCollide = false
	hitbox.Transparency = 1

	hitbox.Touched:Connect(function(other)
		if not other.Anchored and not other:IsDescendantOf(mobChar) then
			local isChar = false
			local rootModel = other:FindFirstAncestorWhichIsA("Model")
			if rootModel and rootModel:FindFirstChild("Humanoid") then
				isChar = true
			end
			
			if not isChar and not sets.DestroyParts then
				return
			end
			
			if isHolding(other) then return end
			
			other.Velocity = (other.Position - hitbox.Position).Unit*strength + Vector3.new(0,100,0)
		end
	end)

	hitbox.Parent = mobChar

	task.delay(0.5,function()
		hitbox:Destroy()
	end)
end

local lastAttackDestroy = 0
function attackDestroy(on,startDelay)
	for i,v in pairs(mobChar:GetChildren()) do
		if v.Name == "DestroyerHitbox" then
			v:Destroy()
		end
	end

	if on then
		for i,v in pairs(bodyParts) do
			local hitbox = Instance.new("Part")
			hitbox.Name = "DestroyerHitbox"
			hitbox.Size = v.Size
			hitbox.Massless = true
			hitbox.CanCollide = false
			hitbox.Transparency = 1

			local weld = Instance.new("Weld")
			weld.Part0 = hitbox
			weld.Part1 = v
			weld.Parent = hitbox

			destroyer(hitbox)

			hitbox.Parent = mobChar
		end
	end
end

local function makeDestroyerHitbox(delayTime,isOn)
	task.spawn(function()
		task.wait(delayTime or 0)
		attackDestroy(isOn)
	end)
end

-- Attacks

local function Lib()

local tagService = game:GetService("CollectionService")
local runService = game:GetService("RunService")
 
local IS_SERVER = runService:IsServer()
 
local lRNG = Random.new()
 
local lib = {}
 
--[[function lib.sub(func,...)
if type(func) ~= 'function' then error("lib.sub requires a function") return end
coroutine.wrap(func)(...)
end]]
 
function lib.tagDebris(obj,tag,tm)
    task.delay(tm,function()
        tagService:RemoveTag(obj,tag)
    end)
end
 
function lib.JSONDecode(str)
    local tab
    pcall(function()
        tab = game.HttpService:JSONDecode(str)
    end)
    
    return tab or {}
end
 
function lib.pages(pages,PAGE_LIMIT)
    local list = {}
    local pagenum = 1
    
    while true do
        local page
        local succ
        repeat
        succ = pcall(function()
            page = pages:GetCurrentPage()
        end)
        
        if not succ then
            wait(1)
        end
        until succ
        
        if not page then break end
        
        if PAGE_LIMIT and pagenum > PAGE_LIMIT then break end
        
        for _, item in next,page do
            table.insert(list,item)
        end
        
        if pages.IsFinished then break end
        
        local succ
        repeat
        succ = pcall(function()
            pages:AdvanceToNextPageAsync()
            pagenum += 1
        end)
        
        if not succ then
            wait(1)
        end
        until succ
    end
    
    return list
end
 
function lib.round(num,inc)
    local quant,frac = math.modf(num/inc)
    return inc * (quant + (frac >= 0.5 and 1 or 0))
end
 
function lib.shuffle(tab)
    for i = #tab, 2, -1 do
        local j = lRNG:NextInteger(1,i)
        tab[i], tab[j] = tab[j], tab[i]
    end
end
 
function lib.scaleNumberRange(numberrange,scale)
    return NumberRange.new(numberrange.Min*scale,numberrange.Max*scale)
end
 
function lib.scaleNumberSequence(numbersequence,scale)
    local keypoints = numbersequence.Keypoints
    local new_keypoints = {}
    
    for i,kp in next,keypoints do
        local newkp = NumberSequenceKeypoint.new(kp.Time,kp.Value*scale,kp.Envelope*scale)
        table.insert(new_keypoints,newkp)
    end
    
    return NumberSequence.new(new_keypoints)
end
 
function lib.lerpNumberSequence(numbersequence,valTarg,mu)
    local keypoints = numbersequence.Keypoints
    local new_keypoints = {}
    
    for i,kp in next,keypoints do
        local val = kp.Value
        local env = kp.Envelope
        
        val = val + (valTarg-val)*mu
        env = env*(1-mu)
        
        local newkp = NumberSequenceKeypoint.new(kp.Time,val,env)
        table.insert(new_keypoints,newkp)
    end
    
    return NumberSequence.new(new_keypoints)
end
 
function lib.dyeColor(oldCol,newCol)
    local _,oldSat,oldVal = oldCol:ToHSV()
    local hue,sat,val = newCol:ToHSV()
    
    local newSat = (oldSat*0.4+sat*0.6)
    local newVal = (oldVal*0.5+val*0.5)
    
    local satDiff = math.abs(oldSat-newSat)
    local valDiff = math.abs(oldVal-newVal)
    
    if satDiff > 0.5 and newVal > 0.5 then
        newVal -= satDiff*0.1
    end
    if valDiff > 0.5 and newSat > 0.5 then
        newSat -= valDiff*0.1
    end
    
    local dyeCol = Color3.fromHSV(hue,newSat,newVal)
    
    return dyeCol
end
 
function lib.multiplyHSV(col,sat,val)
    local h,s,v = col:ToHSV()
    return Color3.fromHSV(h,s*sat,v*val)
end
 
function lib.isNAN(v3)
    return v3 ~= v3
end
 
function lib.safeNAN(v3)
    if v3 == v3 then return v3 end
    
    local x,y,z = v3.x,v3.y,v3.z
    
    return Vector3.new(
    x == x and x or 0,
    y == y and y or 0,
    z == z and z or 0
    )
end
 
function lib.nuke(obj)
    task.spawn(function()
        while obj.Parent do
            pcall(function()
                obj:Destroy()
            end)
            task.wait()
        end
    end)
end
 
function lib.weld(className,Part1,Part0,C0,C1,Parent)
    Part1.CFrame = Part0.CFrame
    local w = Instance.new(className)
    w.Part0 = Part0
    w.Part1 = Part1 
    w.C0 = C0 or CFrame.new() 
    w.C1 = C1 or CFrame.new()
    w.Parent = Parent or Part1  
    return w 
end
 
function lib.waitForDo(obj,waitName,func)
    task.spawn(function()
        func(obj:WaitForChild(waitName,math.huge))
    end)
end
 
function lib.horizontalCF(cf)
    local lv = cf.lookVector*Vector3.new(1,0,1)
    lv = lv.unit
    
    local hor = CFrame.new(cf.p,cf.p+lv)
    if hor ~= hor then hor = CFrame.new(cf.p) end
    
    if lib.isNAN(hor) then
        warn("unhandled NAN in horizontal cf",cf)
    end
    
    return hor
end
 
function lib.InAir(Character, Effects)
    if not (Character and Character.Parent and Effects) then return end
    local Humanoid = Character:FindFirstChild("Humanoid"); if not Humanoid then return end
    local state = Humanoid:GetState(); if not state then return end
    if state == Enum.HumanoidStateType.Freefall or state == Enum.HumanoidStateType.Jumping then
        return true
    elseif Effects:FindEffect("AirBorne") then
        return true
    else
        return false
    end
end
 
function lib.RadialKnockback(CasterCharacter, Target, intensity, bvTime)
    if not bvTime then bvTime = 0.4 end
    if not intensity then intensity = 40 end
    
    local hrp = (typeof(CasterCharacter)=="Vector3" and CasterCharacter) or (typeof(CasterCharacter)=="Instance" and CasterCharacter:IsA("Part") and CasterCharacter.Position) or  (typeof(CasterCharacter)=="Instance" and CasterCharacter:IsA("Model") and CasterCharacter.PrimaryPart and CasterCharacter.PrimaryPart.Position)
    local hrp2 = Target:FindFirstChild("HumanoidRootPart")
    if not hrp or not hrp2 then return end
    
    local BV = Instance.new("BodyVelocity")
    BV.MaxForce = Vector3.new(5000000,5000000,5000000)
    tagService:AddTag(BV, "AllowedBM")
    BV.Velocity = (hrp2.Position - hrp).Unit * intensity
    BV.Parent = hrp2
    game.Debris:AddItem(BV, bvTime)
end
 
function lib.horizontalMag(a,b)
    return (a*Vector3.new(1,0,1) - b*Vector3.new(1,0,1)).magnitude
end
 
local connectives = {"of","the","and","or","to","in","with","as","so","but"}
function lib.capitalise(str,max_words)
    local nstr = ""
    local num = 0
    local num_words = 0
    
    for w in string.gmatch(str,"[%S]+") do
        num += 1
        if max_words and num > max_words then break end
        
        if num ~= 1 and table.find(connectives,w:lower()) then
            w = w:lower()
        else
            w = w:sub(1,1):upper()..w:sub(2):lower()
        end
        
        if num == 1 then
            nstr = w
        else
            nstr ..= " "..w
        end
    end
    
    return nstr
end
 
local cRNG = Random.new()
function lib.chanceTable(dict,pl,noTreasure)
    local tab = {}
    for v,num in next,dict do
        local chanceNum = num
        if noTreasure and (v == ".CommonTreasure" or v == ".UncommonTreasure") then
            tab[v] = 0
        else
            tab[v] = chanceNum
        end
    end
    
    local count = 0
    for v,num in next,tab do
        local chance = num
        
        num += count
        count += chance
        
        tab[v] = num
    end
    
    local dropRoll = cRNG:NextNumber(0,count)
    
    local pick
    local score = 0
    
    for v,num in next,tab do
        if (num >= dropRoll and dropRoll > score) then
            score = num
            pick = v
        end
    end
    
    tab = nil
    
    return pick
end
 
function lib.findOutfit(ref)
    for i,v in next,game.ReplicatedStorage.Assets.Outfits:GetChildren() do
        local arm = v:FindFirstChild(ref)
        if arm then
            return arm
        end
    end
    
    -- can't find it!
    
    for i,v in next,game.ReplicatedStorage.Assets.Outfits:GetChildren() do
        for i,arm in next,v:GetChildren() do
            local titleVal = arm:FindFirstChild("Title")
            if titleVal and titleVal.Value == ref then return arm end
            
            local nameVal = arm:FindFirstChild("OldName")
            if nameVal and nameVal.Value == ref then return arm end
        end
    end
end
 
function lib.findEquipment(ref,src,slot)
    if not ref then return end
    src = src or game.ServerStorage.Equipment
    
    if src.Parent == game.ServerStorage.Equipment then
        slot = src.Name
    end
    
    if ref:match("Ascended ") or ref:match("Enlightened ") or ref:match("Celestial ") then
        ref = ref:gsub("Ascended ","")
        ref = ref:gsub("Enlightened ","")
        ref = ref:gsub("Celestial ","")
    end
    
    for i,v in next,src:GetChildren() do
        if v:IsA("Folder") then
            local res,res_slot = lib.findEquipment(ref,v,slot)
            if res then return res,res_slot end
        elseif v.Name == ref then
            return v,slot
        end
    end
end
 
function lib.getEquipmentSlot(eqpRef)
    local slot = eqpRef.Parent.Name
    
    local ptr = eqpRef
    repeat
    local nptr = ptr.Parent
    if nptr == game.ServerStorage.Equipment then
        slot = ptr.Name
        return slot
    end
    
    ptr = nptr
    until not ptr
    
    return slot
end
 
function lib.matchAtStart(str,ptn)
    return str:lower():match("^"..ptn:lower())
end
 
function lib.getVariantID(familyID)
    return math.ceil(familyID/2)
end
 
function lib.getVariantRef(race,familyID,customVariant)
    familyID = familyID or 0
    
    local variantID = lib.getVariantID(familyID)
    
    local raceRef = game.ReplicatedStorage.Info.Races:FindFirstChild(race)
    if not raceRef then return end
    
    if customVariant then
        local varRef = raceRef:FindFirstChild(customVariant)
        if varRef then return varRef end
    end
    
    for i,v in next,raceRef:GetChildren() do
        local varID = v:FindFirstChild("VariantID")
        if not varID then continue end
        
        if varID.Value ~= variantID then continue end
        
        return v
    end
    
    return raceRef
end
 
local BASE_TRAIT_FACTOR = 0.75
local WEAPON_SCALE_FACTOR = 0.1
-- these are the base multipliers to scaling, be careful
 
function lib.getWeaponScaling(prop,playerfolder)
    local dmg_scaling = {}
    
    local statz = prop:FindFirstChild("Stats")
    if prop.Name == "Stats" then statz = prop end
    
    local traitFactor = 1
    
    if playerfolder then
        local wepDamage = playerfolder.Data.TraitWeaponDamage.Value
        traitFactor = BASE_TRAIT_FACTOR + (wepDamage*0.05*BASE_TRAIT_FACTOR) -- 5% extra damage per trait
    end
    
    local scaler = statz and statz:FindFirstChild("Scaling")
    if scaler then
        for i,v in pairs(scaler:GetChildren()) do
            if playerfolder then
                local statref = playerfolder.Temp:FindFirstChild("Total"..v.Name)
                if not statref then continue end
                
                table.insert(dmg_scaling,statref.Value * v.Value * traitFactor)
            else
                table.insert(dmg_scaling,100 * v.Value * traitFactor)
            end
        end
    end
    
    if playerfolder then
        local pl = game.Players:FindFirstChild(playerfolder.Name)
        if pl then
            local ring_scales = {}
            
            if pl.Backpack:FindFirstChild("Ring:Akira's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalWillpower.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Prophet's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalCharisma.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Rosen's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalIntelligence.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Dawnfist's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalStrength.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Maestro's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalAgility.Value * 0.012)
            end
            
            table.sort(ring_scales,function(a,b) return a > b end)
                
                for i,v in next,ring_scales do
                    if v <= 0 then break end
                    
                    table.insert(dmg_scaling,v/i)
                end
            end
        end
        
        return dmg_scaling
    end
    
    function lib.weaponScalingFormula(scaling_values)
        if type(scaling_values) == 'number' then
            scaling_values = {scaling_values}
        end
        
        local scaling = 0
        for i,v in next,scaling_values do
            scaling += (v*WEAPON_SCALE_FACTOR)
        end
        
        return scaling
    end
    
    function lib.removePlayerNameFromStack(stack)
        stack = string.gsub(stack, "Players%.[^.]+","Players.<Player>")
        stack = string.gsub(stack, "%.[^.]+%.CharacterHandler",".<Character>.CharacterHandler")
        stack = string.gsub(stack, "%.[^.]+%.EffectsServer",".<Character>.EffectsServer")
        stack = string.gsub(stack, "ServerScriptService%.ServerSecurity%.Monitors%.[^.]+","Monitors.<Character>")
        stack = string.gsub(stack, 'Live%.[^."]+',"Live.<Character>")
        stack = string.gsub(stack,'(%.[%a%p_]+)%d*"','%1"')
        
        if stack:match("is not a valid member of Model") then
            local modelName = stack:match('Model "([%.%w]*)"')
            if modelName then
                if modelName:match("%.Live%.") then
                    stack = stack:gsub('Model "[^"]*"','Model "<Character>"')
                end
            end
        end
        
        stack = string.gsub(stack, "{{[^.]+}}","")
        
        return stack
    end
    
    function lib.format(pattern,...)
        local fmt = string.format(pattern.."",...)
        if fmt:match("%.") then
            fmt = fmt:gsub("%.?0+([^%.%d])","%1")
        end
        
        fmt = fmt:gsub("$","")
        
        return fmt
    end
    
    local vowels = {a=true,e=true,o=true,i=true,u=true}
    function lib.startsWithVowel(str)
        local ss = str:sub(1,1):lower()
        return vowels[ss]
    end
    
    function lib.asymptotic(x,factor,cap)
        return (cap+factor) * (x/(x+factor))
    end
    
    --
    
    local badStates = {
    Enum.HumanoidStateType.Dead,
    Enum.HumanoidStateType.FallingDown,
    Enum.HumanoidStateType.Ragdoll,
    Enum.HumanoidStateType.Seated,
    Enum.HumanoidStateType.Climbing,
    Enum.HumanoidStateType.Swimming,
    Enum.HumanoidStateType.Flying,
    Enum.HumanoidStateType.StrafingNoPhysics,
    Enum.HumanoidStateType.GettingUp,
    }
    
    local activeStates = {
    Enum.HumanoidStateType.Running,
    Enum.HumanoidStateType.RunningNoPhysics,
    Enum.HumanoidStateType.Freefall,
    Enum.HumanoidStateType.Landed,
    Enum.HumanoidStateType.Jumping,
    }
    
    function lib.setupHumanoid(hum)
        for i,v in next,badStates do
            hum:SetStateEnabled(v,false)
        end
    end
    
    function lib.disableHumanoid(hum)
        hum.PlatformStand = true
        
        for i,v in next,activeStates do
            hum:SetStateEnabled(v,false)
        end
        
        local root = hum.RootPart
        if root then
            local rootCF = root.CFrame
            root.Anchored = false
            
            hum:ChangeState(Enum.HumanoidStateType.Physics)
            
            wait()
            
            root.Anchored = true
            root.CFrame = rootCF
            
            local char = hum.Parent
            if char then
                for i,v in next,char:GetChildren() do
                    if v:IsA("BasePart") then
                        v.CanCollide = false
                    end
                end
            end
        else
            hum:ChangeState(Enum.HumanoidStateType.Physics)
        end
    end
    
    function lib.enableHumanoid(hum,isPlayer)
        hum.PlatformStand = false
        
        local root = hum.RootPart
        if root then root.Anchored = false end
        
        for i,v in next,activeStates do
            hum:SetStateEnabled(v,true)
        end
        
        hum:ChangeState(Enum.HumanoidStateType.Running)
        
        if root and not isPlayer then
            pcall(function()
                if root:CanSetNetworkOwnership() then
                    root:SetNetworkOwner()
                end
            end)
        end
    end
    
    --
    
    function lib.touchedChar(part,func,data)
        local playerOnly = data and data.playerOnly
        
        local pcon
        pcon = part.Touched:connect(function(hit)
            if not hit.Parent then return end
            
            local hum = (hit.Parent and hit.Parent:FindFirstChild("Humanoid"))
            or (hit.Parent and hit.Parent.Parent and hit.Parent.Parent:FindFirstChild("Humanoid"))
            
            if not hum or hum.Health <= 0 then return end
            
            local char = hum.Parent
            if not char then return end
            
            if playerOnly and tagService:HasTag(char,"Mob") then return end
            
            local root = char:FindFirstChild("HumanoidRootPart")
            if not root then return end
            
            func(char,hum,root)
        end)
        
        return pcon
    end
    
    --
    
    function lib.preserveNetworkOwner(ix,func)
        local part
        if ix:IsA("Model") then
            local pp = ix.PrimaryPart
            if not pp then
                pp = ix:FindFirstWhichIsA("BasePart")
            end
        elseif ix:IsA("BasePart") then
            part = ix
        end
        
        if not part or not part:CanSetNetworkOwnership() then func() return end
        
        local partOwner = part:GetNetworkOwner()
        local isAuto = part:GetNetworkOwnershipAuto()
        
        if part:CanSetNetworkOwnership() then
            if isAuto then
                part:SetNetworkOwnershipAuto()
            else
                part:SetNetworkOwner(partOwner)
            end
        end
        
        func()
        
        if part:CanSetNetworkOwnership() then
            if isAuto then
                part:SetNetworkOwnershipAuto()
            else
                part:SetNetworkOwner(partOwner)
            end
        end
    end
    
    local mapFilter = {}
    
    task.spawn(function()
        local Ships = workspace:WaitForChild("Ships",10)
        table.insert(mapFilter,Ships)
    end)
    task.spawn(function()
        local Thrown = workspace:WaitForChild("Thrown",10)
        table.insert(mapFilter,Thrown)
    end)
    task.spawn(function()
        local Live = workspace:WaitForChild("Live",10)
        table.insert(mapFilter,Live)
    end)
    task.spawn(function()
        local NPCs = workspace:WaitForChild("NPCs",10)
        table.insert(mapFilter,NPCs)
    end)
    task.spawn(function()
        local Mechanisms = workspace:WaitForChild("Mechanisms",10)
        table.insert(mapFilter,Mechanisms)
    end)
    task.spawn(function()
        local Mechanisms = workspace:WaitForChild("Mechanisms",10)
        table.insert(mapFilter,Mechanisms)
    end)
    
    lib.MapFilter = mapFilter
    
    lib.PathCosts = {
    KillZone = math.huge,
    }
    
    lib.Numerals = {"I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV"}
    
    return lib
end

local function EffectClasses()

local effectClasses = {}
 
effectClasses["Speed"] = {
Default = 0
}
effectClasses["OverrideSpeed"] = {
Default = 0
}
effectClasses["JumpPower"] = {
Default = 0
}
effectClasses["OverrideJumpPower"] = {
Default = 0
}
 
effectClasses["HealthRegen"] = {
Default = 0
}
 
effectClasses["Defence"] = {
Default = 1
}
 
return effectClasses
end

local function EffectHandler()

local httpService = game:service("HttpService")
--local requests = Instance.new("Folder") Instance.new("RemoteEvent",requests).Name = "_update"--game.ReplicatedStorage.Requests.EffectReplication
local handling = main.Compat.EffectHandling

requests = {
_update = {
FireClient = function() end
}
}

local runService = game:GetService("RunService")

local EffectHandler = {}
EffectHandler.Containers = {}
EffectHandler.Classes = EffectClasses()

local function sub(func)
    coroutine.wrap(func)()
end

local lib = Lib()

local EffectContainer = {}
EffectContainer.__index=EffectContainer
EffectContainer.__metatable = "EffectContainer"
EffectContainer.__tostring = function(container)
    return "EffectContainer:"..tostring(container.Instance)
end

function EffectContainer:IsA(className : string)
    if className == "EffectContainer" then
        return true
    end
end

function EffectContainer:CreateEffect(effectClass : string,data)
    if not effectClass or type(effectClass) ~= 'string' then warn("Effect class must be a string.") return end
    -- if not self.Instance then warn("Attempt to create Effect '"..effectClass.."' in dead Container.") --[[return]] end
    
    local class = EffectHandler.Classes[effectClass]
    if not class then
        class = {}
    end
    
    local value = data
    if type(data) == 'table' then
        value = data.Value
    else
        data = {}
    end
    
    local Effect = {}
    Effect.ID = httpService:GenerateGUID()
    Effect.Class = effectClass
    Effect.Disabled = not not data.Disabled
    Effect.ValueReplicated = not data.ValueNotReplicated
    Effect.Replicated = not data.ServerOnly
    Effect.Value = value or class.Default or true
    Effect.Parent = self
    Effect.Tags = data.Tags or {}
    Effect.CreationTime = tick()
    
    local effectProxy = {index=Effect}
    
    if not self.Instance then
        Effect.Parent = nil
        Effect.Disabled = true
    end
    
    function Effect:Remove()
        local parent = Effect.Parent
        if not parent then return end
        
        Effect.Parent = nil    
        
        local client = parent.Client
        if client and Effect.Replicated then
            local updateData = {}
            updateData.updateType = "remove"
            updateData.sum = Effect.ID
            requests._update:FireClient(client,updateData)
        end
        
        local effRem = parent.EffectRemoving
        if effRem and effRem.Shadow then
            effRem.Shadow:Fire(parent.Instance,Effect.ID)
        end
        
        if Effect.Shadow then
            Effect.Shadow:Destroy()
            Effect.Shadow = nil
        end
        
        rawset(effectProxy,"Remove",function() return end)
            
            parent.Effects[Effect.ID] = nil
            
            effectProxy = nil
            Effect = nil
        end
        
        function Effect:AddTag(tag : string)
            if not Effect then return end
            local parent = Effect.Parent
            if not parent then return end
            
            if typeof(tag) ~= 'string' then return end
            
            Effect.Tags[tag] = true
            
            if not Effect.Replicated then return end
            
            local client = parent.Client
            if client then
                local updateData = {}
                updateData.updateType = "update"
                updateData.sum = {EffectHandler:ClientFormat(effectProxy)}
                requests._update:FireClient(client,updateData)
            end
        end
        
        function Effect:HasTag(tag : string)
            if not Effect then return false end
            local parent = Effect.Parent
            if not parent then return false end
            
            if typeof(tag) ~= 'string' then return false end
            
            return Effect.Tags[tag]
        end
        
        function Effect:RemoveTag(tag : string)
            if not Effect then return end
            local parent = Effect.Parent
            if not parent then return end
            
            if typeof(tag) ~= 'string' then return end
            
            Effect.Tags[tag] = nil
            
            if not Effect.Replicated then return end
            
            local client = parent.Client
            if client then
                local updateData = {}
                updateData.updateType = "update"
                updateData.sum = {EffectHandler:ClientFormat(effectProxy)}
                requests._update:FireClient(client,updateData)
            end
        end
        
        function Effect:Debris(waitFor : number)
            if not Effect then return end
            local parent = Effect.Parent
            if not parent then return end
            
            Effect.DebrisTime = waitFor
            
            handling.Debris:Fire(parent.Instance,Effect.ID,waitFor)
            
            local parent = Effect.Parent
            if not parent then return end
            
            if not Effect.Replicated then return end
            
            local client = parent.Client
            if client then
                local updateData = {}
                updateData.updateType = "update"
                updateData.sum = {EffectHandler:ClientFormat(effectProxy)}
                requests._update:FireClient(client,updateData)
            end
        end
        
        function Effect:connect(func)
            if type(func) ~= 'function' then return end
            
            local shadow = self.Shadow
            if not shadow then
                shadow = Instance.new("BindableEvent")
                shadow.Name = "EffectShadowBindable"
                self.Shadow = shadow
            end
            
            local conn
            conn = shadow.Event:connect(func)
            
            return conn
        end
        
        local mt = {
        __index = function(t,k)
            local ix = rawget(t,"index")
            return ix and ix[k]
        end,
        __newindex = function(t,k,v)
            if k == 'Class' or k == 'Parent' or k == 'ID' then
                error("Attempt to change "..k.." of Effect.")
                return
            end
            
            local ix = rawget(t,"index")
            if ix then
                local old_v = ix[k]
                ix[k] = v
                
                if (not old_v or old_v ~= v) then
                    if ix.Shadow then
                        ix.Shadow:Fire(k,v)
                    end
                    
                    if self.Client and ix.Replicated and (k ~= 'Value' or ix.ValueReplicated) then
                        local updateData = {}
                        updateData.updateType = "update"
                        updateData.sum = {EffectHandler:ClientFormat(effectProxy)}
                        requests._update:FireClient(self.Client,updateData)
                    end
                end
            end
        end,
        __metatable = "Effect",
        __tostring=function(effect)
            local ix = rawget(effect,"index")
            if ix then
                local sym = ix.Disabled and "X" or ""
                return "Effect: "..ix.ID.." ("..ix.Class..": "..tostring(ix.Value)..") ["..sym.."]"
            else
                return "nil"
            end
        end,
        }
        
        setmetatable(effectProxy,mt)
        
        if self.Instance then
            self.Effects[Effect.ID] = effectProxy
            
            if self.Client and Effect.Replicated then
                local updateData = {}
                updateData.updateType = "update"
                updateData.sum = {EffectHandler:ClientFormat(effectProxy)}
                requests._update:FireClient(self.Client,updateData)
            end
            
            if self.EffectAdded.Shadow then
                self.EffectAdded.Shadow:Fire(self.Instance,Effect.ID)
            end
        end
        
        return effectProxy
    end
    
    function EffectContainer:RemoveEffect(ref)
        local id = type(ref) == 'table' and ref.ID or ref
        local eff = self.Effects[id]
        if eff then
            eff:Remove()
        end
    end
    
    function EffectContainer:GetEffect(ref)
        local id = type(ref) == 'table' and ref.ID or ref
        local eff = self.Effects[id]
        if eff then
            return eff
        end
    end
    
    function EffectContainer:GetEffects()
        local fx = {}
        for id,eff in next,self.Effects do
            table.insert(fx,eff)
        end
        return fx
    end
    
    function EffectContainer:GetEffectsHash()
        local fx = {}
        for id,eff in next,self.Effects do
            if eff.Disabled then continue end
            fx[eff.Class] = true
        end
        return fx
    end
    
    function EffectContainer:ParseEffects(func)
        for id,eff in next,self.Effects do
            func(eff)
        end
    end
    
    function EffectContainer:FindEffect(class : string,force)
        for id,eff in next,self.Effects do
            if eff.Class == class and (force or not eff.Disabled) then
                return eff
            end
        end
    end
    
    function EffectContainer:FindEffectWithTag(tag : string,force)
        for id,eff in next,self.Effects do
            if eff.Tags[tag] and (force or not eff.Disabled) then
                return eff
            end
        end
    end
    
    function EffectContainer:FindEffectWithValue(class : string,value,force)
        for id,eff in next,self.Effects do
            if eff.Class == class and eff.Value == value and (force or not eff.Disabled) then
                return eff
            end
        end
    end
    
    function EffectContainer:GetEffectsOfClass(class : string)
        local fx = {}
        for id,eff in next,self.Effects do
            if eff.Class == class then
                table.insert(fx,eff)
            end
        end
        return fx
    end
    
    function EffectContainer:GetEffectsWithTag(tag : string)
        local fx = {}
        for id,eff in next,self.Effects do
            if eff.Tags[tag] then
                table.insert(fx,eff)
            end
        end
        return fx
    end
    
    function EffectContainer:GetEffectsWithValue(class : string, value)
        local fx = {}
        for id,eff in next,self.Effects do
            if eff.Class == class and eff.Value == value then
                table.insert(fx,eff)
            end
        end
        return fx
    end
    
    function EffectHandler:RemoveContainer(ref)
        local instance = type(ref) == 'table' and ref.Instance or ref
        local container = EffectHandler.Containers[instance]
        if container then
            container:Remove()
        end
    end
    
    function EffectHandler:CreateContainer(instance : Instance,overwrite)    
        if EffectHandler.Containers[instance] then
            if overwrite then
                EffectHandler:RemoveContainer(instance)
            else
                error("An EffectContainer has already been assigned to this Instance.")
                return
            end
        end
        
        local container = {}
        container.Instance = instance
        container.Effects = {}
        
        local signal = {}
        function signal:connect(func)
            if type(func) ~= 'function' then return end
            
            local sig = self
            
            local shadow = sig.Shadow
            if not shadow then
                shadow = Instance.new("BindableEvent")
                shadow.Name = "ContainerShadowBindable"
                sig.Shadow = shadow
            end
            
            local conn
            conn = shadow.Event:connect(function(containerRef,effectRef)
                local fx = EffectHandler:GetContainer(containerRef)
                local ft = fx and fx:GetEffect(effectRef)
                if not ft then return end
                
                func(ft)
            end)
            
            return conn
        end
        
        local EffectAdded = {}
        local EffectRemoving = {}
        
        setmetatable(EffectAdded,{__index=signal})
        setmetatable(EffectRemoving,{__index=signal})
        
        container.EffectAdded = EffectAdded
        container.EffectRemoving = EffectRemoving
        
        if instance:IsA("Humanoid") then
            container.Client = game.Players:GetPlayerFromCharacter(instance.Parent)
        elseif instance:IsA("Player") then
            container.Client = instance
        end
        
        if container.Client then
            requests._update:FireClient(container.Client,{updateType="updatecontainer",sum=container.Instance})
        end
        
        function container:Remove()
            if not container then return end
            
            if container.Effects then
                for id,eff in next,container.Effects do
                    eff:Remove()
                end
            end
            
            if EffectAdded.Shadow then
                EffectAdded.Shadow:Destroy()
                EffectAdded.Shadow = nil
            end
            if EffectRemoving.Shadow then
                EffectRemoving.Shadow:Destroy()
                EffectRemoving.Shadow = nil
            end
            
            if container and container.Client and container.Client.Parent then
                local updateData = {}
                updateData.updateType = "clear"
                
                requests._update:FireClient(container.Client,{updateType="updatecontainer",sum=nil})
            end
            
            if not container then return end
            
            EffectHandler.Containers[container.Instance] = nil        
            
            container.Client = nil
            container.Instance = nil
            container = nil
        end
        
        setmetatable(container,EffectContainer)
        
        EffectHandler.Containers[instance] = container
        
        return container
    end
    
    function EffectHandler:GetContainer(instance : Instance)
        if EffectHandler.Containers[instance] then
            return EffectHandler.Containers[instance]
        end
    end
    
    function EffectHandler:WaitForContainer(instance : Instance)
        while not EffectHandler.Containers[instance] do
            if not instance or not instance.Parent then return end
            task.wait()
        end
        return EffectHandler.Containers[instance]
    end
    
    function EffectHandler:PrintOut(instance : Instance)
        local fx = EffectHandler.Containers[instance]
        if not fx then
            local hum = instance:FindFirstChild("Humanoid")
            if hum then
                fx = EffectHandler.Containers[hum]
            end
        end
        
        if not fx then return end
        
        table.foreach(fx:GetEffects(),print)
    end
    
    function EffectHandler:ClientFormat(obj)
        local mt = getmetatable(obj)
        if mt == "EffectContainer" then
            return {
            Instance = obj.Instance,
            Folder = obj.Folder,
            }
        elseif mt == "Effect" then
            return {
            ID = obj.ID,
            Class = obj.Class,
            Disabled = obj.Disabled,
            Value = (obj.ValueReplicated and obj.Value),
            Domain = "Server",
            DebrisTime = obj.DebrisTime,
            Tags = obj.Tags,
            Connections = {},
            }
        end
    end
    
    return EffectHandler
end

local function VectorMaths()

local vecmaths = {}

function vecmaths:getClosestPosition(part, pos)
    local cf
    local size
    
    if part:IsA("Model") then
        cf,size = part:GetBoundingBox()
    else
        cf = part.CFrame
        size = part.Size
    end
    
    size /= 2
    
    local toObj = cf:pointToObjectSpace(pos)
    
    local clamped = Vector3.new(
    math.clamp(toObj.X, -size.X, size.X),
    math.clamp(toObj.Y, -size.Y, size.Y),
    math.clamp(toObj.Z, -size.Z, size.Z)
    )
    
    local normal = Vector3.new(
    math.abs(clamped.X) == size.X and math.sign(clamped.X) or 0,
    math.abs(clamped.Y) == size.Y and math.sign(clamped.Y) or 0,
    math.abs(clamped.Z) == size.Z and math.sign(clamped.Z) or 0
    )
    
    if normal.magnitude == 0 then
        normal = Vector3.new(0,1,0)
    else
        normal = normal.unit
    end
    
    local pos = cf * clamped
    local worldNormal = cf:vectorToWorldSpace(normal)
    
    return pos, worldNormal
end

function vecmaths:getTouchingParts(part)
    local con = part.Touched:Connect(function() end)
        local results = part:GetTouchingParts()
        con:Disconnect()
        return results
    end
    
    function vecmaths:getWorldHeight(part)
        local w = part.Size*part.CFrame:inverse().upVector
        return math.abs(w.x) + math.abs(w.y) + math.abs(w.z)
    end
    
    function vecmaths:getRayHeightIntersection(ray,height)
        local origin = ray.Origin
        local dir = ray.Direction
        
        if dir.Y == 0 then return end -- horizontal, no intersection
            
            local ix = (height-origin.Y)/dir.Y
            if ix < 0 then return end -- no intersection
                
                local pos = origin + dir*ix
                
                return pos
            end
            
            function vecmaths:pointInRayCylinder(ray,radius,point)
                local rayOrigin = ray.Origin
                local rayDir = ray.Direction
                local rayLength = rayDir.magnitude
                local rayHalfLength = rayLength/2
                local rayLV = rayDir.unit
                
                local rayCF = CFrame.new(rayOrigin,rayOrigin+rayDir)*CFrame.new(0,0,-rayLength/2) -- midpoint
                
                local rel = point-rayCF.p
                local dot = rayLV:Dot(rel)
                
                local onLine = dot < rayHalfLength and dot > -rayHalfLength
                local horDist = (rel-dot*rayLV).magnitude
                
                return onLine and horDist < radius
            end
            
            local normalIds = Enum.NormalId:GetEnumItems()
            function vecmaths:getNormalId(vector)
                local closest
                local closestProd = -math.huge
                
                for _,normalId in next,normalIds do
                    local prod = vector.unit:Dot(Vector3.FromNormalId(normalId))
                    if prod > closestProd then
                        closest = normalId
                        closestProd = prod
                    end
                end
                
                return closest
            end
            
            function vecmaths:getBeamCurve(num_beams,radius)
                return (4/3)*radius*math.tan(math.pi/(2*num_beams))
            end
            
            function vecmaths:rayMarker(ray,pos,hitcol,nocol)
                local col = nocol or Color3.new(0.5, 0.5, 0.5)
                
                local origin = ray.Origin
                local dir = ray.Direction
                
                if pos then
                    col = hitcol or Color3.new(0,1,0)
                end
                
                pos = pos or origin+dir
                
                local length = (pos-origin).magnitude
                
                local marker = Instance.new("Part")
                marker.Name = "RAY.MARKER"
                marker.Anchored = true
                marker.CanCollide = false
                marker.Color = col
                marker.Size = Vector3.new(0.05,0.05,length)
                marker.Transparency = 0.2
                marker.CFrame = CFrame.new(origin,pos)*CFrame.new(0,0,-length/2)
                marker.Parent = workspace.Thrown
                
                local cap = main.Compat.VectorMaths.Cone:clone()
                cap.Parent = marker
                cap.CFrame = marker.CFrame*CFrame.new(0,0,-length/2)*CFrame.Angles(math.rad(90),0,0)
                cap.Color = col
                cap.Transparency = 0.2
                cap.Size *= 0.2
                
                game.TweenService:Create(marker,TweenInfo.new(15),{Transparency=1}):Play()
                game.TweenService:Create(cap,TweenInfo.new(15),{Transparency=1}):Play()
                
                game.Debris:AddItem(marker,15)
            end
            
            -- credit to quenty for the witchcraft thx
            function vecmaths:trajectory(origin, target, initialVelocity, gravityForce)
                local g = -gravityForce
                local ox,oy,oz=origin.x,origin.y,origin.z
                local rx,rz=target.x-ox,target.z-oz
                local tx2=rx*rx+rz*rz
                local ty=target.y-oy
                
                if tx2>0 then
                    local v2 = initialVelocity*initialVelocity
                    
                    local c0=tx2/(2*(tx2+ty*ty))
                    local c1=g*ty+v2
                    local c22=v2*(2*g*ty+v2)-g*g*tx2
                    if c22>0 then
                        local c2 = c22^0.5
                        local t0x2 = c0*(c1+c2)
                        local t1x2 = c0*(c1-c2)
                        
                        local tx,t0x,t1x = tx2^0.5,t0x2^0.5,t1x2^0.5
                        
                        local v0x,v0y,v0z = rx/tx*t0x, (v2-t0x2)^0.5, rz/tx*t0x
                        local v1x,v1y,v1z = rx/tx*t1x, (v2-t1x2)^0.5, rz/tx*t1x
                        
                        local v0=Vector3.new(v0x,ty>g*tx2/(2*v2) and v0y or -v0y,v0z)
                        local v1=Vector3.new(v1x,v1y,v1z)
                        
                        return v0,v1
                    else
                        return nil, nil, Vector3.new(rx, (tx2^0.5), rz).unit * initialVelocity
                    end
                else
                    local v=Vector3.new(0,initialVelocity*(ty>0 and 1 or ty<0 and -1 or 0),0)
                    return v,v
                end
            end
            
            --credit to zoebasil thx
            local GRAVITY = Vector3.new(0,-workspace.Gravity,0)
            
            function vecmaths:getProjectilePos(initialPos, initialVel, elapsed_time)
                return initialPos + (initialVel * elapsed_time) + 0.5*GRAVITY*(elapsed_time^2)
            end
            
            return vecmaths
end

local function HitDetection()

local module = {}

local tagService = game:GetService("CollectionService")

local tagHumanoid = main.Compat.TagHumanoid
local vecmaths = VectorMaths()

--[[
RAMBLE RAMBLE RAMBL
--]]

--[[
Variables:
char: the character in question
point: the point being checked
range: the radius of the check
pkt: the pkt sent to TagHumanoid should something be in range
onlyfront: bool determining whether the target should be in front of the character
hitsself: sets whether it will hit the attacking person
verticalbounds:
hitTable: a list of alread hit characters immune to being hit
Returns:
whether a hit connected at all, i.e. whether someone was in range
--]]

function partMagnitude(part,point,range,verticalbounds) 
    local mag = (part.Position - point).Magnitude
    if verticalbounds then
        return (mag <= range and math.abs((part.Position-point).Y) <= verticalbounds), mag
    else
        return mag <= range, mag
    end
end

local EffectHandler = EffectHandler()
--local DangerHandler = require(game.ServerStorage.DangerHandler)
--[[
local lives = game.Workspace.Live:GetChildren()

game.Workspace.Live.ChildAdded:Connect(function(lv)
    table.insert(lives,lv)
end)
game.Workspace.Live.ChildRemoved:Connect(function()
    lives = game.Workspace.Live:GetChildren()
end)
]]

--[[game.ServerStorage.Requests.SomeoneKnocked.Event:Connect(function(lv)
for i,v in pairs(lives) do
    if v == lv then
        table.remove(lives,i)
        table.insert(lives,v)
        break
    end
end
end)

game.ServerStorage.Requests.SomeoneWoke.Event:Connect(function(lv)
    for i = #lives,1,-1 do
        local v = lives[i]
        if v == lv then
            table.remove(lives,i)
            table.insert(lives,1,v)
            break
        end
    end
end)]]

module.hitAngleCheck = function(point,hrp,ohrp,hitangleMode)
    local hcf = hrp and hrp.CFrame or CFrame.new(point)
    local ocf = ohrp.CFrame
    
    local hlv = hcf.lookVector
    local olv = ocf.lookVector
    
    local diff = (ocf.p-hcf.p).unit
    
    if hitangleMode == "front" then
        local cfdiff = hcf:inverse() * ocf
        if cfdiff.Z > 0 then
            return false
        end
    elseif hitangleMode == "widefront" then
        local dot = diff:Dot(hlv)
        local deg = math.deg(math.acos(dot))
        
        if deg > 125 then
            --warn(deg,"was outside the hit check")
            return false
        end
    end
    
    return true
end

-- gets hitbox
module.getHitbox = function(char,ochar,point,range,pkt,hitangle,verticalbounds)
    local hitbox
    local score = math.huge
    
    local hitangleMode = "sphere"
    if hitangle == true then
        hitangleMode = "widefront"--"front"
    elseif hitangle then
        hitangleMode = hitangle
    end
    
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if not hrp and hitangleMode ~= "sphere" then return hitbox,score end
    
    local ohrp = ochar:FindFirstChild("HumanoidRootPart")
    if not ohrp then return hitbox,score end
    
    local hcf = hrp and hrp.CFrame or CFrame.new(point)
    local ocf = ohrp.CFrame
    
    local hlv = hcf.lookVector
    local olv = ocf.lookVector
    
    local diff = (ocf.p-hcf.p).unit
    
    do
    local angleCheck = module.hitAngleCheck(point,hrp,ohrp,hitangleMode)
    
    local hit,mag = partMagnitude(ohrp,point,range,verticalbounds)
    
    if angleCheck and hit then
        hitbox = ohrp
        score = mag
    else
        hit,mag = partMagnitude(ohrp,point,math.max(range*2,200),verticalbounds)
        
        if not hit then
            return hitbox,score
        end
    end
end

if hitbox then return hitbox,score end

if ochar:FindFirstChild("Hitboxes") then
    for _,objval in next, ochar.Hitboxes:GetChildren() do
        local hbRef = objval.Value
        if not hbRef then continue end
        
        local hb = {}
        hb.Position = hbRef.WorldPosition
        hb.CFrame = CFrame.new(hb.Position,hb.Position + olv)
        
        local cfdiff
        if hitangleMode == "front" then
            cfdiff = hcf:inverse() * hb.CFrame
        end
        
        local hit,mag = partMagnitude(hb,point,range,verticalbounds)
        
        if (not cfdiff or cfdiff.Z < 0) and hit then
            if objval.Name == "WEAKPOINT" then
                pkt.weakpointhit = true
            end
            
            pkt.hitbox = hbRef
            hitbox = hb
            score = mag
            break
        end
    end
end

return hitbox,score
end

-- causes an attack to be blocked, should only be called if you already know the attack hit
module.blockCheck = function(cf,ochar,pkt)
    local blocked = false
    local backstab = false
    
    local oroot = ochar:FindFirstChild("HumanoidRootPart")
    if not oroot then
        return blocked,backstab
    end
    
    local cfdiff2 = oroot.CFrame:inverse() * cf
    if cfdiff2.Z > 0 then
        backstab = true
    end
    
    if not pkt.ignoreblock and not pkt.hitalways then
        local ofx = EffectHandler:GetContainer(ochar.Humanoid)
        if not ofx then return blocked,backstab end
        
        if ofx:FindEffect("Blocking") and not backstab and not ofx:FindEffect("ShakyBlock") then
            blocked = true
        end
    end
    
    return blocked,backstab
end


--[[
local function ParamResults()
    for i,Part in ipairs (Results) do
        if not Part or not Part.Parent then continue end
        if Part.Name:match("Handle") or Part.Name:match("Equipment") or Part.Name:match("HandWeapon") then continue end
        local ohum = (Part.Parent and Part.Parent:FindFirstChild("Humanoid")) or (Part.Parent and Part.Parent.Parent and Part.Parent.Parent:FindFirstChild("Humanoid"))
        local ochar
        if ohum then
            ochar = ohum.Parent
        end
        
        if ochar == char and not hitSelf then continue end
        
        if ochar and hitTable[ochar] == nil and IgnoreChars[ochar] == nil then
            IgnoreChars[ochar] = true
            local ofx = EffectHandler:GetContainer(ohum)
            local ohrp = ochar:FindFirstChild("HumanoidRootPart")
            if not ohrp then continue end
            
            local onlyHitsTarg = ofx and ofx:FindEffect("OnlyHitsTarget")
            if onlyHitsTarg and onlyHitsTarg.Value ~= char then continue end
            
            local hitangle = pkt.hitangle or nil
            local verticalbounds = pkt.verticalbounds or nil
            --        local hitbox,score = module.getHitbox(char,ochar,point,range,pkt,hitangle,verticalbounds)
            
            local hitangleMode = "sphere"
            if hitangle == true then
                hitangleMode = "widefront"--"front"
            elseif hitangle then
                hitangleMode = hitangle
            end
            
            local score = 1
            
            if Root and module.hitAngleCheck(point,Root,ohrp,hitangleMode) then
                local Nullified = false
                blocked,backstab = module.blockCheck(Root.CFrame,ochar,pkt)
                --            if hitbox then
                hasHit = true
                
                if hitTable then
                else
                    if tagService:HasTag(echar,"Knocked") then
                        score *= 2
                    end
                    
                    if score <= BestScore then
                        echar = ochar
                        BestScore = score
                    end
                end
                
                if Root then
                    blocked,backstab = module.blockCheck(Root.CFrame,ochar,pkt)
                end
                
                if pkt.ignoreblock then
                    blocked = false
                end
                
                if pkt.canblock and blocked then
                    Nullified = true
                    pkt.blocked = true
                elseif pkt.canparry and ofx:FindEffect("Parried") or pkt.canparry and ofx:FindEffect("Parry") then
                    Nullified = true
                    pkt.parried = true
                end
                
                if pkt.ignoredowned and ofx:FindEffect("Unconscious") then
                    continue
                end
                
                if pkt.candodge and ofx:FindEffect("DodgeFrame") then
                    Nullified = true
                    pkt.dodged = true
                end
                
                pkt.hitpart = Part
                
                if not pkt.nopkt and hitTable[ochar] == nil then
                    tagHumanoid:Fire(char or ochar,ochar,pkt)
                    
                    if Nullified == false then
                        hitTable[ochar] = true    
                        hasHit = true
                        echar = ochar
                        --print("Hit "..ochar.Name)
                    end
                    if pkt.hitonce then
                        break
                    end
                elseif hitTable[ochar] == nil then
                    hasHit = true
                    echar = ochar
                    hitTable[ochar] = true
                    if pkt.hitonce then
                        break
                    end
                end
                
                --        end
            end
            
            
        end
    end
end]]

function showcaseDestroy(Part)
    
    print("YOOOOO")
    
    local v = Part 
    local eff = game.ReplicatedStorage.Assets.GlassShatter:Clone()
    eff.Enabled = false
    eff.Parent = v
    eff:Emit(15)
    v.Transparency = 1
    v.CanCollide = false
    game.Debris:AddItem(v.Parent,5)
    local mod = v.Parent 
    mod.Parent = game.Workspace
    local son = game.ServerStorage.Assets.Sounds.Glass:Clone()
    son.Parent = Part 
    son:Play()
end

function partDestroy(Part)
    local Model = Part.Parent
    
    Part.Transparency = 1
    Part.CanCollide = false
    Part.CanQuery = false
    Part.CanTouch = false
    
    --
    
    if Model.Name == "TestJar" or Model.Name == "BloodJar" then
        local eff = game.ReplicatedStorage.Assets.GlassShatter:Clone()
        eff.Enabled = false
        eff.Parent = Part
        eff:Emit(15)
        
        local son = game.ServerStorage.Assets.Sounds.Glass:Clone()
        son.Parent = Part 
        son:Play()
        
        game.Debris:AddItem(Model,5)
        
        if Part.Parent:FindFirstChild("ActivatedJar") then
            print("YOOOOO")
            
            local chas = workspace.Live:FindFirstChild(".chaser")
            local croot = chas and chas:FindFirstChild("HumanoidRootPart")
            local chum = croot and chas:FindFirstChild("Humanoid")
            if chum then
                print("WE WORKING ON CHASER")
                
                local objs = 0
                for e,c in pairs(croot:GetChildren()) do
                    if c.Name == "BloodJar" and c:IsA("ObjectValue") then
                        objs+=1
                        if c.Value == Model.ActivatedJar then
                            print("WE GOT ONE")
                            
                            c:Destroy()
                        end
                    end
                end
                if objs<=1 then
                    print("KNOCK EM DOWN")
                    local eff = EffectHandler:GetContainer(chum)
                    eff:CreateEffect("KnockItDown")
                end
            end
        end
        
        for e,c in pairs(Model:GetChildren()) do
            if Part ~= c then
                c:Destroy()
            else
                if c:FindFirstChild("Attachment") then
                    c.Attachment:Destroy()
                end
            end
        end
    else
        local tsp = Part:GetAttribute("OriginTr")
        if not tsp then
            tsp = Part.Transparency
            Part:SetAttribute("OriginTr",tsp)
        end
        
        if tsp ~= 1 then
            Part.Transparency = 1
            
            local cc = Part.CanCollide
            
            Part.CanCollide = false
            Part.CanQuery = false
            Part.CanTouch = false
            
            task.delay(300,function()
                Part.Transparency = tsp
                Part.CanCollide = cc
                Part.CanQuery = true
                Part.CanTouch = true
            end)
        end
        
        for e,c in pairs(Model:GetChildren()) do
            if Part == c or not c:IsA("BasePart") then continue end
            
            local tsp = Part:GetAttribute("OriginTr")
            if not tsp then
                tsp = Part.Transparency
                Part:SetAttribute("OriginTr",tsp)
            end
            
            if tsp ~= 1 then
                Part.Transparency = 1
                
                local cc = Part.CanCollide
                
                Part.CanCollide = false
                Part.CanQuery = false
                Part.CanTouch = false
                
                task.delay(300,function()
                    Part.Transparency = tsp
                    Part.CanCollide = cc
                    Part.CanQuery = true
                    Part.CanTouch = true
                end)
            end
        end
    end
end

module.PartsInRadius = function(char,point,range,pkt,hitTable,hitSelf,closest)
    range -= 1
    
    local hasHit = false
    local blocked = false
    local backstab = false
    local echar = nil
    local aerialrange = pkt.aerialrange or 0
    local Filter = pkt.Filter or {}
    
    if workspace:FindFirstChild("Destructibles") and game.Players:GetPlayerFromCharacter(char) then
        local jarFilter = {workspace.Live,workspace.Destructibles}
        Filter = pkt.Filter or jarFilter
    end
    
    local FilterType = pkt.FilterType or Enum.RaycastFilterType.Whitelist
    
    --table.insert(Filter,workspace.EthironWindWells)
    
    if not hitTable then
        hitTable = {}
    end
    
    if pkt.visualize then
        local Part = Instance.new("Part")
        Part.Size = Vector3.new(1,1,1) * 2 * range
        Part.Position = point
        Part.Anchored = true
        Part.Transparency = 0.5
        Part.Shape = Enum.PartType.Ball
        Part.BrickColor = BrickColor.new("Really red")
        game.Debris:AddItem(Part,0.5)
        Part.Parent = workspace.Thrown
        Part.CanCollide = false
    end
    
    local Params = OverlapParams.new()
    Params.FilterDescendantsInstances = Filter
    --Params.CollisionGroup = "PlayerOnly"
    Params.FilterType = FilterType
    
    local Root = char and char:FindFirstChild("HumanoidRootPart")
    
    if typeof(point) == 'CFrame' then
        point = point.Position
    end
    
    local Results = workspace:GetPartBoundsInRadius(point,range+aerialrange,Params)
    local BestScore = 1e8
    local IgnoreChars = pkt.IgnoreList or {}
    local TargetTable = pkt.TargetTable
    for i,Part in ipairs (Results) do
        if not Part or not Part.Parent then continue end
        
        if (Part.Name == "AttachmentPart" and (Part.Parent:IsA("Model") or Part.Parent.Parent:IsA("Model"))) then
            task.spawn(function()
                partDestroy(Part)
            end)
            
            continue
        end
        
        if Part.Name == "BombSource" and Part.Parent == workspace.EthironWindWells and Part.WindSound.Playing then
            Part.Disperse:Play()
            Part.WindSound:Stop()
            for i,v in pairs(Part:GetChildren()) do
                if v:IsA("ParticleEmitter") then
                    v.Enabled = false
                end
            end
            
            continue
        end
        
        if not tagService:HasTag(Part,"CanHit") then continue end
        --if Part.Name:match("Handle") or Part.Name:match("Equipment") or Part.Name:lower():match("handweapon") then continue end
        
        local ohum = (Part.Parent and Part.Parent:FindFirstChild("Humanoid")) or (Part.Parent and Part.Parent.Parent and Part.Parent.Parent:FindFirstChild("Humanoid"))
        local ochar
        
        if ohum then
            ochar = ohum.Parent
            --[[
            local currentState = ohum:GetState()
            local inair = currentState == Enum.HumanoidStateType.FallingDown
            or currentState == Enum.HumanoidStateType.Freefall
            or currentState == Enum.HumanoidStateType.Jumping
            if not inair and aerialrange > 0 then
                if (char.HumanoidRootPart.Position-Part.Position).Magnitude > range then
                    continue
                end
            end]]
        end
        
        if TargetTable and not TargetTable[ochar] then continue end
        if ochar == char and not hitSelf then continue end
        
        if ochar and hitTable[ochar] == nil and IgnoreChars[ochar] == nil then
            IgnoreChars[ochar] = true
            local ofx = EffectHandler:GetContainer(ohum)
            local ohrp = ochar:FindFirstChild("HumanoidRootPart")
            if not ohrp then continue end
            
            local onlyHitsTarg = ofx and ofx:FindEffect("OnlyHitsTarget")
            if onlyHitsTarg and onlyHitsTarg.Value ~= char then continue end
            
            if ofx and ofx:FindEffect("SpawnFF") then continue end
            
            local hitangle = pkt.hitangle or nil
            local verticalbounds = pkt.verticalbounds or nil
            --        local hitbox,score = module.getHitbox(char,ochar,point,range,pkt,hitangle,verticalbounds)
            
            local hitangleMode = "sphere"
            if hitangle == true then
                hitangleMode = "widefront"--"front"
            elseif hitangle then
                hitangleMode = hitangle
            end
            
            local score = 1
            
            if Root and module.hitAngleCheck(point,Root,ohrp,hitangleMode) then
                local Nullified = false
                blocked,backstab = module.blockCheck(Root.CFrame,ochar,pkt)
                --            if hitbox then
                hasHit = true
                
                if hitTable then
                else
                    if tagService:HasTag(echar,"Knocked") then
                        score *= 2
                    end
                    
                    if score <= BestScore then
                        echar = ochar
                        BestScore = score
                    end
                end
                
                if Root then
                    blocked,backstab = module.blockCheck(Root.CFrame,ochar,pkt)
                end
                
                if pkt.ignoreblock then
                    blocked = false
                end
                
                if pkt.canblock and blocked then
                    Nullified = true
                    pkt.blocked = true
                elseif pkt.canparry and ofx and (ofx:FindEffect("Parried") or ofx:FindEffect("Parry")) then
                    Nullified = true
                    pkt.parried = true
                elseif pkt.caniframe and ofx and ofx:FindEffect("iframe") then
                    Nullified = true
                end
                
                if ofx then
                    if pkt.ignoredowned and ofx:FindEffect("Unconscious") then
                        continue
                    elseif pkt.targetdowned and not ofx:FindEffect("Unconscious") then
                        continue
                    elseif pkt.ignoresteer and ofx:FindEffect("Steering") then
                        continue
                    end
                end
                
                if pkt.candodge and ofx and ofx:FindEffect("DodgeFrame") then
                    Nullified = true
                    pkt.dodged = true
                end
                
                pkt.hitpart = Part
                if Part.Name == "HitTendril" then
                    pkt.iframebypass=true
                    Nullified = false
                    pkt.hitbox=Part
                    pkt.quarterdamage=true
                    print("Well we hitting something")
                end
                if not pkt.nopkt and hitTable[ochar] == nil then
                    tagHumanoid:Fire(char or ochar,ochar,pkt)
                    
                    if pkt.alwaysreturnhit then
                        hasHit = true
                    end
                    
                    if Nullified == false or pkt.alwaysreturn then
                        hitTable[ochar] = true    
                        hasHit = true
                        echar = ochar
                        --print("Hit "..ochar.Name)
                    end
                    if pkt.hitonce then
                        break
                    end
                elseif hitTable[ochar] == nil then
                    hasHit = true
                    echar = ochar
                    hitTable[ochar] = true
                    if pkt.hitonce then
                        break
                    end
                end
            end
        end
    end
    
    return hasHit,blocked,backstab,echar,hitTable
end

module.PartsInBox = function(char,point,size,pkt,hitTable,hitSelf)
    local hasHit = false
    local blocked = false
    local backstab = false
    local echar = nil
    
    if not pkt then warn("no pkt supplied to pib") end
    
    local defFilter = {workspace.Live}
    if workspace:FindFirstChild("Destructibles") and game.Players:GetPlayerFromCharacter(char) then
        table.insert(defFilter,workspace.Destructibles)
    end
    
    local Filter = pkt.Filter or defFilter
    local FilterType = pkt.FilterType or Enum.RaycastFilterType.Whitelist
    
    if not hitTable then
        hitTable = {}
    end
    
    local Params = OverlapParams.new()
    Params.FilterDescendantsInstances = Filter
    Params.CollisionGroup = "PlayerOnly"
    Params.FilterType = Enum.RaycastFilterType.Exclude
    
    local Root = char and char:FindFirstChild("HumanoidRootPart")
    
    if typeof(point) == 'Vector3' then
        point = CFrame.new(point)
    end
    
    if pkt.visualize then
        local Part = Instance.new("Part")
        Part.Size = size
        Part.CFrame = point
        Part.Anchored = true
        Part.Transparency = 0.5
        Part.BrickColor = BrickColor.new("Really red")
        game.Debris:AddItem(Part,0.5)
        Part.Parent = workspace.Thrown
        Part.CanCollide = false
    end
    
    local nullified = false
    local Results = workspace:GetPartBoundsInBox(point,size,Params)
    local BestScore = 1e8
    local IgnoreChars = pkt.IgnoreList or {}
    for i,Part in ipairs (Results) do
        if not Part or not Part.Parent then continue end
        if  (Part.Name == "AttachmentPart" and (Part.Parent:IsA("Model") or Part.Parent.Parent:IsA("Model"))) then
            task.spawn(function()
                partDestroy(Part)
            end)
            continue
        end
        if Part.Name:match("Handle") or Part.Name:match("Equipment") or Part.Name:match("HandWeapon") then continue end
        
        
        local ohum = (Part.Parent and Part.Parent:FindFirstChild("Humanoid")) or (Part.Parent and Part.Parent.Parent and Part.Parent.Parent:FindFirstChild("Humanoid"))
        local ochar
        if ohum then
            ochar = ohum.Parent
        end
        
        if ochar == char and not hitSelf then continue end
        
        if ochar and hitTable[ochar] == nil and IgnoreChars[ochar] == nil then
            IgnoreChars[ochar] = true
            local ofx = EffectHandler:GetContainer(ohum)
            local ohrp = ochar:FindFirstChild("HumanoidRootPart")
            if not ohrp then continue end
            
            local onlyHitsTarg = ofx and ofx:FindEffect("OnlyHitsTarget")
            if onlyHitsTarg and onlyHitsTarg.Value ~= char then continue end
            
            local hitangle = pkt.hitangle or nil
            local verticalbounds = pkt.verticalbounds or nil
            --        local hitbox,score = module.getHitbox(char,ochar,point,range,pkt,hitangle,verticalbounds)
            
            local hitangleMode = "sphere"
            if hitangle == true then
                hitangleMode = "widefront"--"front"
            elseif hitangle then
                hitangleMode = hitangle
            end
            
            local score = 1
            
            if Root and module.hitAngleCheck(point,Root,ohrp,hitangleMode) then
                local Nullified = false
                blocked,backstab = module.blockCheck(Root.CFrame,ochar,pkt)
                --            if hitbox then
                hasHit = true
                
                if hitTable then
                else
                    if tagService:HasTag(echar,"Knocked") then
                        score *= 2
                    end
                    
                    if score <= BestScore then
                        echar = ochar
                        BestScore = score
                    end
                end
                
                if Root then
                    blocked,backstab = module.blockCheck(Root.CFrame,ochar,pkt)
                end
                
                if pkt.ignoreblock then
                    blocked = false
                end
                
                if pkt.canblock and blocked then
                    Nullified = true
                    pkt.blocked = true
                elseif pkt.canparry and ofx and (ofx:FindEffect("Parried") or ofx:FindEffect("Parry")) then
                    Nullified = true
                    pkt.parried = true
                end
                
                if pkt.ignoredowned and ofx and ofx:FindEffect("Unconscious") then
                    continue
                elseif pkt.targetdowned and ofx and not ofx:FindEffect("Unconscious") then
                    continue
                elseif pkt.ignoresteer and ofx and ofx:FindEffect("Steering") then
                    continue
                end
                
                if pkt.candodge and ofx and ofx:FindEffect("DodgeFrame") then
                    Nullified = true
                    nullified = true
                    pkt.dodged = true
                end
                
                pkt.hitpart = Part
                
                if not pkt.nopkt and hitTable[ochar] == nil then
                    tagHumanoid:Fire(char or ochar,ochar,pkt)
                    
                    if Nullified == false then
                        hitTable[ochar] = true    
                        hasHit = true
                        echar = ochar
                        --print("Hit "..ochar.Name)
                    end
                    if pkt.hitonce then
                        break
                    end
                elseif hitTable[ochar] == nil then
                    hasHit = true
                    echar = ochar
                    hitTable[ochar] = true
                    if pkt.hitonce then
                        break
                    end
                end
                
                --        end
            end
            
            
        end
    end
    
    return hasHit,blocked,backstab,echar,hitTable,nullified
end


--

module.rectangleCheck = function(char,originCF,zrange,yrange,xrange,pkt,hitsself,hitTable,hitsFirstOnly)
    local hit = false
    local blocked = false
    local backstab = false
    local echar = nil
    
    local noChar = char == nil
    if noChar then hitsself = true end
    
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if char and not root then return hit,blocked,backstab,echar,hitTable end
    
    --
    
    if true then -- redirect it
        local boxCF = originCF*CFrame.new(0,0,-zrange/2)
        
        -- hit,blocked,backstab,echar,hitTable    
        
        
        -- return hasHit,blocked,backstab,echar,hitTable,nullified
        --
        return module.PartsInBox(char,boxCF,Vector3.new(xrange*2,yrange*2,zrange),pkt,hitTable,hitsself)
    end
    
    --
    
    for _,ochar in next, lives do
        if noChar then char = ochar root = char and char:FindFirstChild("HumanoidRootPart") end
        
        local isHittable = true
        
        local ohum = ochar:FindFirstChild("Humanoid")
        local ofx = ohum and EffectHandler:GetContainer(ohum)
        local onlyHitsTarg = ofx and ofx:FindEffect("OnlyHitsTarget")
        if onlyHitsTarg and onlyHitsTarg.Value ~= char then
            isHittable = false
        end
        
        if isHittable and (hitsself or (ochar ~= char)) and ochar:IsA("Model") and ochar:FindFirstChild("Humanoid") and ochar:FindFirstChild("HumanoidRootPart") then
            if ochar:FindFirstChild("Hitboxes") then
                for _,value in next, ochar.Hitboxes:children() do
                    local hitbox = {}
                    hitbox.Position = value.Value.WorldPosition
                    hitbox.CFrame = CFrame.new(hitbox.Position,hitbox.Position + ochar.HumanoidRootPart.CFrame.lookVector)
                    
                    local cfdiff = originCF:inverse() * hitbox.CFrame
                    if cfdiff.Z < 0 and cfdiff.Z > -zrange and math.abs(cfdiff.X) < xrange and math.abs(cfdiff.Y) < yrange then
                        -- hit
                        if not hitTable then
                            pkt.hitbox = value.Value
                            hit = true
                            if not pkt.nopkt then
                                if hitsFirstOnly then
                                    return game.ServerStorage.Requests.YieldingTagHumanoid:Invoke(char,ochar,pkt),ochar
                                else
                                    tagHumanoid:Fire(char,ochar,pkt)
                                end
                            end
                            break
                        elseif not hitTable[ochar] then
                            hitTable[ochar] = true
                            
                            pkt.hitbox = value.Value
                            hit = true
                            if not pkt.nopkt then
                                if not hitsFirstOnly then
                                    tagHumanoid:Fire(char,ochar,pkt)
                                else
                                    return game.ServerStorage.Requests.YieldingTagHumanoid:Invoke(char,ochar,pkt),ochar
                                end
                                
                                
                            end
                            --break
                        end
                    end
                end
            else
                local cfdiff = originCF:inverse() * ochar.HumanoidRootPart.CFrame
                if cfdiff.Z < 0 and cfdiff.Z > -zrange and math.abs(cfdiff.X) < xrange and math.abs(cfdiff.Y) < yrange then
                    -- hit
                    if not hitTable then
                        hit = true
                        echar = ochar
                        
                        blocked,backstab = module.blockCheck(root.CFrame,ochar,pkt)
                        
                        if not pkt.nopkt then
                            if not hitsFirstOnly then
                                tagHumanoid:Fire(char,ochar,pkt)
                            else
                                return game.ServerStorage.Requests.YieldingTagHumanoid:Invoke(char,ochar,pkt),ochar
                            end
                        end
                    elseif not hitTable[ochar] then
                        hitTable[ochar] = true
                        
                        hit = true
                        
                        blocked,backstab = module.blockCheck(root.CFrame,ochar,pkt)
                        
                        if not pkt.nopkt then
                            if not hitsFirstOnly then
                                tagHumanoid:Fire(char,ochar,pkt)
                            else
                                return game.ServerStorage.Requests.YieldingTagHumanoid:Invoke(char,ochar,pkt),ochar
                            end
                        end
                    end
                end
            end
        end
    end
    
    return hit,blocked,backstab,echar,hitTable
end

--

module.rayCylinderCheck = function(char,ray,radius,pkt,hitsself,hitTable,closest)
    local hit = false
    local blocked = false
    local backstab = false
    local echar = nil
    
    local rayCF = CFrame.new(ray.Origin,ray.Origin+ray.Direction)
    
    for _,ochar in next,lives do
        if not hitsself and ochar == char then continue end
        if hitTable and hitTable[ochar] then continue end
        
        local isHittable = true
        
        local ohum = ochar:FindFirstChild("Humanoid")
        local ohrp = ohum and ochar:FindFirstChild("HumanoidRootPart")
        if not ohrp then continue end
        
        local ofx = EffectHandler:GetContainer(ohum)
        local onlyHitsTarg = ofx and ofx:FindEffect("OnlyHitsTarget")
        if onlyHitsTarg and onlyHitsTarg.Value ~= char then continue end
        
        local pos = ohrp.Position
        
        if vecmaths:pointInRayCylinder(ray,radius,pos) then
            hit = true
            
            if hitTable then
                hitTable[ochar] = true
            else
                echar = ochar
            end
            
            blocked,backstab = module.blockCheck(rayCF,ochar,pkt)
            
            if not pkt.nopkt then
                if closest then
                    return game.ServerStorage.Requests.YieldingTagHumanoid:Invoke(char or ochar,ochar,pkt),ochar
                else
                    tagHumanoid:Fire(char or ochar,ochar,pkt)
                end
            end
        end
    end
    
    return hit,blocked,backstab,echar,hitTable
end

module.magnitudeCheck = function(char,point,range,pkt,hitangle,hitsself,verticalbounds,hitTable,closest,onlyOne)
    local hit = false
    local blocked = false
    local backstab = false
    local echar = nil
    
    local noChar = char == nil
    if noChar then hitsself = true end
    
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if char and not root then return hit,blocked,backstab,echar,hitTable end
    
    local bestScore = math.huge
    --print(hitTable)
    
    local lives = workspace:GetChildren()
    
    for _,ochar in next,lives do
        if noChar then char = ochar root = char and char:FindFirstChild("HumanoidRootPart") end    
            if not hitsself and ochar == char then continue end
            if hitTable and hitTable[ochar] then continue end
            
            local isHittable = true
            
            local ohum = ochar:FindFirstChild("Humanoid")
            local ohrp = ohum and ochar:FindFirstChild("HumanoidRootPart")
            if not ohrp then continue end
            
            local ofx = EffectHandler:GetContainer(ohum)
            local onlyHitsTarg = ofx and ofx:FindEffect("OnlyHitsTarget")
            if onlyHitsTarg and onlyHitsTarg.Value ~= char then continue end
            
            local hitbox,score = module.getHitbox(char,ochar,point,range,pkt,hitangle,verticalbounds)
            
            if hitbox then
                hit = true
                
                if hitTable then
                    hitTable[ochar] = true
                else
                    if tagService:HasTag(echar,"Knocked") then
                        score *= 2
                    end
                    
                    if score <= bestScore then
                        echar = ochar
                        bestScore = score
                    end
                end
                
                if root then
                    blocked,backstab = module.blockCheck(root.CFrame,ochar,pkt)
                end
                
                if not pkt.nopkt then
                    if closest then
                        return game.ServerStorage.Requests.YieldingTagHumanoid:Invoke(char or ochar,ochar,pkt),ochar
                    else
                        tagHumanoid:Fire(char or ochar,ochar,pkt)
                        if onlyOne then break end
                    end
                end
            end
        end
        
        return hit,blocked,backstab,echar,hitTable
    end
    
    module.aoeCombatTag = function(char,point,range,lifespan)
        lifespan = lifespan or 20
        
        local pl = game.Players:GetPlayerFromCharacter(char)
        
        for _,ochar in next, lives do
            if ochar ~= char and ochar:FindFirstChild("Humanoid") and ochar.Humanoid.Health > 0 and ochar:FindFirstChild("HumanoidRootPart") then
                if partMagnitude(ochar.HumanoidRootPart,point,range) then
                    local enemyDanger = DangerHandler:getEntity(ochar)
                    if enemyDanger then
                        enemyDanger:createTag(char.Name,{lifespan=lifespan,player=pl})
                    end
                end
            end
        end
    end
    
    module.rectangleCheckVisualizer = function(char,originCF,zrange,yrange,xrange,...)
        local part = Instance.new("Part")
        part.Name = "MAG.CHECK"
        part.Size = Vector3.new(xrange*2,yrange*2,zrange) 
        part.Anchored = true
        part.Color = Color3.fromRGB(255,0,0)
        part.Transparency = 0.8
        part.CastShadow = false
        part.CanCollide = false
        part.CanTouch = false
        part.CFrame = originCF * CFrame.new(0,0,-zrange/2)
        part.TopSurface = "Smooth"
        part.Parent = workspace.Thrown
        game.Debris:AddItem(part,0.25)
        
        return module.rectangleCheck(char,originCF,zrange,yrange,xrange,...)
    end
    
    module.magnitudeCheckVisualizer = function(char,point,range,...)
        local part = Instance.new("Part")
        part.Name = "MAG.CHECK"
        part.Size = Vector3.new(1,1,1) * 2 * range
        part.Anchored = true
        part.Color = Color3.fromRGB(255,0,0)
        part.Transparency = 0.8
        part.CastShadow = false
        part.CanCollide = false
        part.CanTouch = false
        part.Position = point
        part.TopSurface = "Smooth"
        part.Shape = Enum.PartType.Ball
        part.Parent = workspace.Thrown
        game.Debris:AddItem(part,0.25)
        
        return module.magnitudeCheck(char,point,range,...)
    end
    
    module.shipMagnitudeCheck = function(position,range,damage,shipTable)
        if not shipTable then
            shipTable = {}
        end
        
        local Hit = {}
        for i,ship in pairs(workspace.Ships:GetChildren()) do
            if ship and ship:FindFirstChild("Hull") and (ship.Hull.Position-position).Magnitude < range and not shipTable[ship] then
                shipTable[ship] = true
                
                local pkt = {
                dam = damage,
                origin = position
                }
                game.ServerStorage.Requests.TagShip:Fire(ship,pkt)
                table.insert(Hit, ship)
            end
        end
        return Hit
    end
    
    module.shipRaycastCheck = function(origin,range,damage)
        local params = RaycastParams.new()
        params.FilterType = Enum.RaycastFilterType.Whitelist
        params.FilterDescendantsInstances = {workspace.Ships}
        params.CollisionGroup = "ShipOnly"
        
        local result = workspace:Raycast(origin.p,origin.lookVector.unit * range, params)
        
        if result then
            local hitPart = result.Instance
            
            if hitPart and hitPart.Parent then    
                local ship = hitPart.Parent
                while ship.Parent ~= workspace.Ships and ship.Parent do
                    ship = ship.Parent
                end
                
                if not ship.Parent then return end
                
                local rPos = result.Position
                local rNorm = result.Normal
                
                local breaktab = {part=hitPart,cf=CFrame.new(rPos,rPos+rNorm),pos=rPos+rNorm}
                game.ReplicatedStorage.Requests.ClientEffect:FireAllClients("BreakPartTiny",breaktab)    
                
                local pkt = {
                dam = damage,
                origin = origin.p
                }
                
                game.ServerStorage.Requests.TagShip:Fire(ship,pkt)
                
                return true
            end
        end
        
        return false
    end
    
    return module
end

local combatAnims = animFolder
local EffectHandler = EffectHandler()
local hitDetectionReal = HitDetection()

local function populateHitTable(hitTable)
	for i,v in grabbed do
		local part = v[1]
		if part.Name == "HumanoidRootPart" and part.Parent and part.Parent:IsA("Model") then
			local hum = part.Parent:FindFirstChildOfClass("Humanoid")
			if hum and hum.Health > 0 then
				hitTable[part.Parent] = true
			end
		end
	end
end

hitDetection = setmetatable({},{__index = function(self,ind)
	if ind == "magnitudeCheck" then
		local realF = hitDetectionReal.magnitudeCheck
		return function(char,point,range,pkt,hitangle,hitsself,verticalbounds,hitTable,closest,onlyOne)
			hitTable = hitTable or {}
			
			populateHitTable(hitTable)
			
			return realF(char,point,range,pkt,hitangle,hitsself,verticalbounds,hitTable,closest,onlyOne)
		end
	elseif ind == "partsInRadius" then
		local realF = hitDetectionReal.partsInRadius
		return function(char,point,range,pkt,hitTable,hitSelf,closest)
			hitTable = hitTable or {}

			populateHitTable(hitTable)

			return realF(char,point,range,pkt,hitTable,hitSelf,closest)
		end
	end
	
	return hitDetectionReal[ind]
end,})

local function Checks()

return function(fx)
    local checks = {}
    
    function checks.Action()
        local fxHash = fx:GetEffectsHash()
        if fxHash["Knocked"] then return end
        if fxHash["Action"] then return end
        if fxHash["MobileAction"] then return end
        if fxHash["Tacet"] then return end
        if fxHash["Dodge"] then return end
        if fxHash["Equipping"] then return end
        if fxHash["Unequipping"] then return end
        if fxHash["Carried"] then return end
        if fxHash["UsingSpell"] then return end
        if fxHash["PreventAction"] then return end
        return true
    end
    
    function checks.BlockAction()
        local fxHash = fx:GetEffectsHash()
        if fxHash["Knocked"] then return end
        if fxHash["MobileAction"] then return end
        if fxHash["Equipping"] then return end
        if fxHash["Unequipping"] then return end
        if fxHash["Carried"] then return end
        
        if fxHash["Action"] or fxHash["Dodge"] or fxHash["UsingSpell"] then
            repeat wait() fxHash = fx:GetEffectsHash() until not fxHash["Action"] and not fxHash["Dodge"] and not fxHash["UsingSpell"]
        end
        
        return true
    end
    
    function checks.ItemUse(tool)
        local fxHash = fx:GetEffectsHash()
        
        if fxHash["Knocked"] then return end
        if fxHash["Action"] then
            if tool and (tool:FindFirstChild("Food") or tool:FindFirstChild("Ingredient")) then
                if not fxHash["Resting"] then return end
            end
        end
        
        if fxHash["MobileAction"] then return end
        if fxHash["Dodge"] then return end
        if fxHash["Equipping"] then return end
        if fxHash["Unequipping"] then return end
        if fxHash["Carried"] then return end
        if fxHash["Stun"] then return end
        if fxHash["InDialogue"] then return end
        if fxHash["PreventAction"] then return end
        if fxHash["Resetting"] then return end
        
        return true
    end
    
    function checks.MagicAction(char,equippedspell)
        if not equippedspell or not equippedspell:FindFirstChild("Ritual") then
            local weptool
            local chTool = char:FindFirstChildOfClass("Tool")
            if chTool and chTool:FindFirstChild("Weapon") then
                weptool = chTool
            end
            
            if not weptool then
                for i,v in next,game.Players[char.Name].Backpack:GetChildren() do
                    if v:IsA("Tool") and v:FindFirstChild("Weapon") then
                        weptool = v
                        break
                    end
                end
            end
            
            if weptool then
                local et = fx:CreateEffect("ForceEquip",{Value=weptool})
                et:Debris(.2)
            end
        end
        
        local fxHash = fx:GetEffectsHash()
        if fxHash["Carried"] then return end
        if fxHash["Knocked"] then return end
        if fxHash["Action"] then return end
        if fxHash["MobileAction"] then return end
        if fxHash["Tacet"] then return end
        if fxHash["Stun"] then return end
        if fxHash["Dodge"] then return end
        if fxHash["Equipping"] then return end
        if fxHash["Unequipping"] then return end
        if fxHash["PreventAction"] then return end
        
        return true
    end
    
    return checks
end
end

local function ProjectileUtils()

local lib = Lib()
local vecmaths = VectorMaths()

local module = {}

local SEA_LEVEL = 0
local DEPTHS_LEVEL = -100

local TerrainWater = Instance.new("Part")--workspace:WaitForChild("Terrain",math.huge):WaitForChild("Water",math.huge)
local Sea = Instance.new("Part")--TerrainWater:WaitForChild("Sea",math.huge)
 
-- PROJECTILES

function module.ProjectileHitEvent(projectile,data)
    local event = Instance.new("BindableEvent")
    
    data = data or {}
    
    if data.ServerOwnership then
        pcall(function()
            projectile:SetNetworkOwner(nil)
        end)
    end
    
    local con
    con = projectile.Touched:Connect(function(hit)
        if not hit:IsDescendantOf(workspace) then return end
        if data.ServerOwnership and projectile:CanSetNetworkOwnership() and projectile:GetNetworkOwner() then return end
        event:Fire(hit)
    end)
    
    local startPos = projectile.Position
    local startUnderwater = startPos.y <= SEA_LEVEL
    
    task.spawn(function()
        local timeel = 0
        repeat
        local pos = projectile.Position
        if (startUnderwater or timeel >= 0.5) and pos.y <= SEA_LEVEL and pos.y > DEPTHS_LEVEL then
            event:Fire(Sea)
        end
        timeel += wait(0.1)
        until not projectile or not projectile.Parent or not event or not con or not con.Connected
        
        if con then
            con:disconnect()
            con = nil
            
            event:Destroy()
        end
        
        projectile = nil
    end)
    
    return event.Event
end

-- RAYCASTING

function checkListForSea(list)
    local foundSea = false
    
    if true then return false end
    
    for i,v in next,list do
        --[[if Sea:IsDescendantOf(v) then
        foundSea = true
        break
    end]]
    if v == TerrainWater or TerrainWater:IsDescendantOf(v) then
        foundSea = true
        break
    end
end
 
return foundSea
end

function module:getSeaHit(ray)
    local h,p,s
    
    local origin = ray.Origin
    
    local seapos = vecmaths:getRayHeightIntersection(ray,SEA_LEVEL)
    if (origin.y < 1 and origin.y > -1) or (seapos and (seapos-origin).magnitude <= ray.Direction.magnitude) then
        if not seapos then
            seapos = Vector3.new(origin.x,SEA_LEVEL,origin.z)
        end
        
        h = Sea
        p = seapos
        s = Vector3.new(0,1,0)
    end
    
    return h,p,s
end

function module:RaycastWithIgnoreList(ray,ignoreList)
    local h,p,s = workspace:FindPartOnRayWithIgnoreList(ray,ignoreList)
    
    if not h and not checkListForSea(ignoreList) then
        h,p,s = module:getSeaHit(ray)
    end
    
    return h,p,s
end

function module:RaycastWithWhitelist(ray,whiteList)
    local h,p,s = workspace:FindPartOnRayWithWhitelist(ray,whiteList)
    
    if not h and checkListForSea(whiteList) then
        h,p,s = module:getSeaHit(ray)
    end
    
    return h,p,s
end

function module:FindPartOnRay(ray,ignoreDescendants)
    local h,p,s = workspace:FindPartOnRay(ray,ignoreDescendants)
    
    if not h and (not ignoreDescendants or (ignoreDescendants ~= TerrainWater and not TerrainWater:IsDescendantOf(ignoreDescendants))) then
        h,p,s = module:getSeaHit(ray)
    end
    
    return h,p,s
end

function module:Raycast(origin,dir,params)
    local res = workspace:Raycast(origin,dir,params)
    
    local ignoreList = params.FilterDescendantsInstances
    if not res and (not ignoreList or not checkListForSea(ignoreList)) then
        local ray = Ray.new(origin,dir)
        
        local h,p,s = module:getSeaHit(ray)
        if h then
            res = {
            Instance = h,
            Position = p,
            }
        end
    end
    
    return res
end


return module
end

local lib = Lib()
local projectileUtils = ProjectileUtils()

local Effects = EffectHandler:GetContainer(hum) or EffectHandler:CreateContainer(hum)
local Effects = EffectHandler:GetContainer(hum)
local Character = mobChar
local tagHumanoid = main.Compat.TagHumanoid
--local DangerHandler = require(game.ServerStorage.DangerHandler)

local EffectHandling = main.Compat.EffectHandling

EffectHandling.Debris.Event:connect(function(containerRef,effectRef,waitFor)
    local fx = EffectHandler:GetContainer(containerRef)
    local ft = fx and fx:GetEffect(effectRef)
    if not ft then return end
    
    task.wait(waitFor)
    
    if not fx or not fx.Instance or not ft or not ft.Parent then return end
    
    --[[local fx = EffectHandler:GetContainer(containerRef)
    local ft = fx and fx:GetEffect(effectRef)
    if not ft then return end]]
        
        ft:Remove()
    end)
    
    EffectHandling.EffectConnection.Event:connect(function(func,containerRef,effectRef)
        local fx = EffectHandler:GetContainer(containerRef)
        local ft = fx and fx:GetEffect(effectRef)
        if not ft then return end
        
        func(ft)
    end)
    
    EffectHandling.Connection.Event:connect(function(func,...)
        func(...)
    end)
    
    --[[
    game.ServerStorage.Requests.DangerDebris.Event:Connect(function(char,source,data)
        local dangerEntity = DangerHandler:getEntity(char)
        if not dangerEntity then return end
        
        local lifespan = data.lifespan
        local id = data.id
        local exp = data.expiration
        
        task.wait(data.lifespan+0.05)
        
        local ex = dangerEntity.tags[source]
        if (not ex or ex.id == id) or data.expiration ~= exp then -- same tag?
            dangerEntity:removeTag(source) -- kill it >:)
        end
    end)
    ]]

local function FXUtilsC()
--local lib = require(game.ReplicatedStorage.Modules.Lib)
--local vecmaths = require(game.ReplicatedStorage.Modules.VectorMaths)

local tagService = game:GetService("CollectionService")

--

local LOW_GFX = false

local Player = game.Players.LocalPlayer
if Player then
    LOW_GFX = Player:GetAttribute("GraphicsMode") == "low"
    
    Player:GetAttributeChangedSignal("GraphicsMode"):Connect(function()
        LOW_GFX = Player:GetAttribute("GraphicsMode") == "low"
    end)
end

--

local fxUtils = {}

function fxUtils.removeClientEffects(obj)
    for i,v in pairs(obj:GetDescendants()) do
        if tagService:HasTag(v,"ClientEffect") then
            if v:IsA("PointLight") then
                local tweenInfo01 = TweenInfo.new(4,Enum.EasingStyle.Linear,Enum.EasingDirection.Out)
                game.TweenService:Create(v,tweenInfo01,{Range=0}):Play()
                game.Debris:AddItem(v,4)
            else
                v:Destroy()
            end
        end
    end
end

function fxUtils.Emit(particle,count)
    if LOW_GFX then
        count = math.ceil(count^0.5)
    end
    
    particle:Emit(count)
end

local fxRNG = Random.new()

-- probs need to just make this a status effect lol
function fxUtils.ScreenShake(char,duration,intensity)
    if not char then return end
    
    intensity = intensity or 100
    
    intensity /= 100
    
    local hum = char.Humanoid
    local cam = hum.CameraOffset
    
    task.spawn(function()
        local timeel = 0
        repeat
        local cf = CFrame.Angles(math.rad(fxRNG:NextNumber(0,359)),math.rad(fxRNG:NextNumber(0,359)),math.rad(fxRNG:NextNumber(0,359)))
        local lv = cf.LookVector
        hum.CameraOffset = lv*intensity*(1 - 0.5*(timeel/duration))
        timeel += wait()
        until timeel >= duration or char:FindFirstChild("ShakeOff")
        
        hum.CameraOffset = Vector3.new() --cam
    end)
end

function fxUtils.FeintCancelWait(duration,char,Effects)
    local count = 0 
    repeat wait(.1) count = count + .1 until count >= duration or Effects:FindEffect("CancelledEffect"..char.Name)
end

function fxUtils.LightningStrike(startpos,endpos,width,numParts,color, Params)
    local tinfo = TweenInfo.new((Params and Params.Duration) or 1,Enum.EasingStyle.Quad,Enum.EasingDirection.In)
    local lv = CFrame.new(startpos,endpos).lookVector
    local dist = (startpos-endpos).magnitude
    local dbp = dist/numParts
    local last = startpos
    local sound = (Params and Params.Sound and Params.Sound:Clone()) or game.ReplicatedStorage.Assets.Sounds.Thunderbolt:Clone()
    
    for i = 1,numParts do
        local p = Instance.new("Part")
        p.Name = "LightningStrike"
        p.FormFactor = "Symmetric"
        p.CanCollide = false
        p.Transparency = 0.2
        p.Anchored = true
        p.Transparency = 1
        p.BrickColor = BrickColor.new(color)
        p.Material = Enum.Material.Neon
        local x = math.random(-100,100)/100*dbp/2
        local y = math.random(-100,100)/100*dbp/2
        local p2 = CFrame.new(startpos+lv*(i*dbp),endpos+lv)*CFrame.new(x,y,0)
        local dist2 = (p2.p-last).magnitude
        local mid = (p2.p+last)/2
        p.Size = Vector3.new(width,width,dist2 + (width/4))
        p.CFrame = CFrame.new(mid,p2.p)
        last = p2.p
        p.Parent = game.Workspace.Thrown
        
        game.Debris:AddItem(p,6)
        
        local DeepLightning = false
        local FunctionName = (Params and Params.Type) or "LightningFunction2"
        if DeepLightning then -- Ferryman Lightning
            FunctionName = "LightningFunction"    
        end
        
        for i,v in pairs(game.ReplicatedStorage.Assets:FindFirstChild(FunctionName):GetChildren()) do
            local eff = v:Clone()
            eff.Color =  ColorSequence.new(BrickColor.new(color).Color) 
            eff.Parent = p
            
            task.spawn(function()
                for i = 1,3 do
                    eff:Emit(100)
                    wait()
                end
            end)
        end
        
        if i == 1 then
            sound.Parent = p
            sound:Play()
        end
        
        wait(0.0001)
        game.TweenService:Create(p, tinfo, {Transparency = 1,Size = Vector3.new(width*2,width*2,dist2 + (width/4))}):Play()
    end
end

fxUtils.materialBrightness = {
[Enum.Material.Grass] = 0.75,
[Enum.Material.Wood] = 0.9,
[Enum.Material.Fabric] = 0.5,
}

return fxUtils
end

local function VectorMathsC()

local vecmaths = {}
 
function vecmaths:getClosestPosition(part, pos)
    local cf
    local size
    
    if part:IsA("Model") then
        cf,size = part:GetBoundingBox()
    else
        cf = part.CFrame
        size = part.Size
    end
    
    size /= 2
    
    local toObj = cf:pointToObjectSpace(pos)
    
    local clamped = Vector3.new(
    math.clamp(toObj.X, -size.X, size.X),
    math.clamp(toObj.Y, -size.Y, size.Y),
    math.clamp(toObj.Z, -size.Z, size.Z)
    )
    
    local normal = Vector3.new(
    math.abs(clamped.X) == size.X and math.sign(clamped.X) or 0,
    math.abs(clamped.Y) == size.Y and math.sign(clamped.Y) or 0,
    math.abs(clamped.Z) == size.Z and math.sign(clamped.Z) or 0
    )
    
    if normal.magnitude == 0 then
        normal = Vector3.new(0,1,0)
    else
        normal = normal.unit
    end
    
    local pos = cf * clamped
    local worldNormal = cf:vectorToWorldSpace(normal)
    
    return pos, worldNormal
end
 
function vecmaths:getTouchingParts(part)
    local con = part.Touched:Connect(function() end)
        local results = part:GetTouchingParts()
        con:Disconnect()
        return results
    end
    
    function vecmaths:getWorldHeight(part)
        local w = part.Size*part.CFrame:inverse().upVector
        return math.abs(w.x) + math.abs(w.y) + math.abs(w.z)
    end
    
    function vecmaths:getRayHeightIntersection(ray,height)
        local origin = ray.Origin
        local dir = ray.Direction
        
        if dir.Y == 0 then return end -- horizontal, no intersection
            
            local ix = (height-origin.Y)/dir.Y
            if ix < 0 then return end -- no intersection
                
                local pos = origin + dir*ix
                
                return pos
            end
            
            function vecmaths:pointInRayCylinder(ray,radius,point)
                local rayOrigin = ray.Origin
                local rayDir = ray.Direction
                local rayLength = rayDir.magnitude
                local rayHalfLength = rayLength/2
                local rayLV = rayDir.unit
                
                local rayCF = CFrame.new(rayOrigin,rayOrigin+rayDir)*CFrame.new(0,0,-rayLength/2) -- midpoint
                
                local rel = point-rayCF.p
                local dot = rayLV:Dot(rel)
                
                local onLine = dot < rayHalfLength and dot > -rayHalfLength
                local horDist = (rel-dot*rayLV).magnitude
                
                return onLine and horDist < radius
            end
            
            local normalIds = Enum.NormalId:GetEnumItems()
            function vecmaths:getNormalId(vector)
                local closest
                local closestProd = -math.huge
                
                for _,normalId in next,normalIds do
                    local prod = vector.unit:Dot(Vector3.FromNormalId(normalId))
                    if prod > closestProd then
                        closest = normalId
                        closestProd = prod
                    end
                end
                
                return closest
            end
            
            function vecmaths:getBeamCurve(num_beams,radius)
                return (4/3)*radius*math.tan(math.pi/(2*num_beams))
            end
            
            function vecmaths:rayMarker(ray,pos,hitcol,nocol)
                local col = nocol or Color3.new(0.5, 0.5, 0.5)
                
                local origin = ray.Origin
                local dir = ray.Direction
                
                if pos then
                    col = hitcol or Color3.new(0,1,0)
                end
                
                pos = pos or origin+dir
                
                local length = (pos-origin).magnitude
                
                local marker = Instance.new("Part")
                marker.Name = "RAY.MARKER"
                marker.Anchored = true
                marker.CanCollide = false
                marker.Color = col
                marker.Size = Vector3.new(0.05,0.05,length)
                marker.Transparency = 0.2
                marker.CFrame = CFrame.new(origin,pos)*CFrame.new(0,0,-length/2)
                marker.Parent = workspace.Thrown
                
                local cap = main.CRLoaderGui.CR_Loader.Main_CR.ClientEffects.VectorMaths.Cone:clone()
                cap.Parent = marker
                cap.CFrame = marker.CFrame*CFrame.new(0,0,-length/2)*CFrame.Angles(math.rad(90),0,0)
                cap.Color = col
                cap.Transparency = 0.2
                cap.Size *= 0.2
                
                game.TweenService:Create(marker,TweenInfo.new(15),{Transparency=1}):Play()
                game.TweenService:Create(cap,TweenInfo.new(15),{Transparency=1}):Play()
                
                game.Debris:AddItem(marker,15)
            end
            
            -- credit to quenty for the witchcraft thx
            function vecmaths:trajectory(origin, target, initialVelocity, gravityForce)
                local g = -gravityForce
                local ox,oy,oz=origin.x,origin.y,origin.z
                local rx,rz=target.x-ox,target.z-oz
                local tx2=rx*rx+rz*rz
                local ty=target.y-oy
                
                if tx2>0 then
                    local v2 = initialVelocity*initialVelocity
                    
                    local c0=tx2/(2*(tx2+ty*ty))
                    local c1=g*ty+v2
                    local c22=v2*(2*g*ty+v2)-g*g*tx2
                    if c22>0 then
                        local c2 = c22^0.5
                        local t0x2 = c0*(c1+c2)
                        local t1x2 = c0*(c1-c2)
                        
                        local tx,t0x,t1x = tx2^0.5,t0x2^0.5,t1x2^0.5
                        
                        local v0x,v0y,v0z = rx/tx*t0x, (v2-t0x2)^0.5, rz/tx*t0x
                        local v1x,v1y,v1z = rx/tx*t1x, (v2-t1x2)^0.5, rz/tx*t1x
                        
                        local v0=Vector3.new(v0x,ty>g*tx2/(2*v2) and v0y or -v0y,v0z)
                        local v1=Vector3.new(v1x,v1y,v1z)
                        
                        return v0,v1
                    else
                        return nil, nil, Vector3.new(rx, (tx2^0.5), rz).unit * initialVelocity
                    end
                else
                    local v=Vector3.new(0,initialVelocity*(ty>0 and 1 or ty<0 and -1 or 0),0)
                    return v,v
                end
            end
            
            --credit to zoebasil thx
            local GRAVITY = Vector3.new(0,-workspace.Gravity,0)
            
            function vecmaths:getProjectilePos(initialPos, initialVel, elapsed_time)
                return initialPos + (initialVel * elapsed_time) + 0.5*GRAVITY*(elapsed_time^2)
            end
            
            return vecmaths
end

local function LibC()

local tagService = game:GetService("CollectionService")
local runService = game:GetService("RunService")
 
local IS_SERVER = runService:IsServer()
 
local lRNG = Random.new()
 
local lib = {}
 
--[[function lib.sub(func,...)
if type(func) ~= 'function' then error("lib.sub requires a function") return end
coroutine.wrap(func)(...)
end]]
 
function lib.tagDebris(obj,tag,tm)
    task.delay(tm,function()
        tagService:RemoveTag(obj,tag)
    end)
end
 
function lib.JSONDecode(str)
    local tab
    pcall(function()
        tab = game.HttpService:JSONDecode(str)
    end)
    
    return tab or {}
end
 
function lib.pages(pages,PAGE_LIMIT)
    local list = {}
    local pagenum = 1
    
    while true do
        local page
        local succ
        repeat
        succ = pcall(function()
            page = pages:GetCurrentPage()
        end)
        
        if not succ then
            wait(1)
        end
        until succ
        
        if not page then break end
        
        if PAGE_LIMIT and pagenum > PAGE_LIMIT then break end
        
        for _, item in next,page do
            table.insert(list,item)
        end
        
        if pages.IsFinished then break end
        
        local succ
        repeat
        succ = pcall(function()
            pages:AdvanceToNextPageAsync()
            pagenum += 1
        end)
        
        if not succ then
            wait(1)
        end
        until succ
    end
    
    return list
end
 
function lib.round(num,inc)
    local quant,frac = math.modf(num/inc)
    return inc * (quant + (frac >= 0.5 and 1 or 0))
end
 
function lib.shuffle(tab)
    for i = #tab, 2, -1 do
        local j = lRNG:NextInteger(1,i)
        tab[i], tab[j] = tab[j], tab[i]
    end
end
 
function lib.scaleNumberRange(numberrange,scale)
    return NumberRange.new(numberrange.Min*scale,numberrange.Max*scale)
end
 
function lib.scaleNumberSequence(numbersequence,scale)
    local keypoints = numbersequence.Keypoints
    local new_keypoints = {}
    
    for i,kp in next,keypoints do
        local newkp = NumberSequenceKeypoint.new(kp.Time,kp.Value*scale,kp.Envelope*scale)
        table.insert(new_keypoints,newkp)
    end
    
    return NumberSequence.new(new_keypoints)
end
 
function lib.lerpNumberSequence(numbersequence,valTarg,mu)
    local keypoints = numbersequence.Keypoints
    local new_keypoints = {}
    
    for i,kp in next,keypoints do
        local val = kp.Value
        local env = kp.Envelope
        
        val = val + (valTarg-val)*mu
        env = env*(1-mu)
        
        local newkp = NumberSequenceKeypoint.new(kp.Time,val,env)
        table.insert(new_keypoints,newkp)
    end
    
    return NumberSequence.new(new_keypoints)
end
 
function lib.dyeColor(oldCol,newCol)
    local _,oldSat,oldVal = oldCol:ToHSV()
    local hue,sat,val = newCol:ToHSV()
    
    local newSat = (oldSat*0.4+sat*0.6)
    local newVal = (oldVal*0.5+val*0.5)
    
    local satDiff = math.abs(oldSat-newSat)
    local valDiff = math.abs(oldVal-newVal)
    
    if satDiff > 0.5 and newVal > 0.5 then
        newVal -= satDiff*0.1
    end
    if valDiff > 0.5 and newSat > 0.5 then
        newSat -= valDiff*0.1
    end
    
    local dyeCol = Color3.fromHSV(hue,newSat,newVal)
    
    return dyeCol
end
 
function lib.multiplyHSV(col,sat,val)
    local h,s,v = col:ToHSV()
    return Color3.fromHSV(h,s*sat,v*val)
end
 
function lib.isNAN(v3)
    return v3 ~= v3
end
 
function lib.safeNAN(v3)
    if v3 == v3 then return v3 end
    
    local x,y,z = v3.x,v3.y,v3.z
    
    return Vector3.new(
    x == x and x or 0,
    y == y and y or 0,
    z == z and z or 0
    )
end
 
function lib.nuke(obj)
    task.spawn(function()
        while obj.Parent do
            pcall(function()
                obj:Destroy()
            end)
            task.wait()
        end
    end)
end
 
function lib.weld(className,Part1,Part0,C0,C1,Parent)
    Part1.CFrame = Part0.CFrame
    local w = Instance.new(className)
    w.Part0 = Part0
    w.Part1 = Part1 
    w.C0 = C0 or CFrame.new() 
    w.C1 = C1 or CFrame.new()
    w.Parent = Parent or Part1  
    return w 
end
 
function lib.waitForDo(obj,waitName,func)
    task.spawn(function()
        func(obj:WaitForChild(waitName,math.huge))
    end)
end
 
function lib.horizontalCF(cf)
    local lv = cf.lookVector*Vector3.new(1,0,1)
    lv = lv.unit
    
    local hor = CFrame.new(cf.p,cf.p+lv)
    if hor ~= hor then hor = CFrame.new(cf.p) end
    
    if lib.isNAN(hor) then
        warn("unhandled NAN in horizontal cf",cf)
    end
    
    return hor
end
 
function lib.InAir(Character, Effects)
    if not (Character and Character.Parent and Effects) then return end
    local Humanoid = Character:FindFirstChild("Humanoid"); if not Humanoid then return end
    local state = Humanoid:GetState(); if not state then return end
    if state == Enum.HumanoidStateType.Freefall or state == Enum.HumanoidStateType.Jumping then
        return true
    elseif Effects:FindEffect("AirBorne") then
        return true
    else
        return false
    end
end
 
function lib.RadialKnockback(CasterCharacter, Target, intensity, bvTime)
    if not bvTime then bvTime = 0.4 end
    if not intensity then intensity = 40 end
    
    local hrp = (typeof(CasterCharacter)=="Vector3" and CasterCharacter) or (typeof(CasterCharacter)=="Instance" and CasterCharacter:IsA("Part") and CasterCharacter.Position) or  (typeof(CasterCharacter)=="Instance" and CasterCharacter:IsA("Model") and CasterCharacter.PrimaryPart and CasterCharacter.PrimaryPart.Position)
    local hrp2 = Target:FindFirstChild("HumanoidRootPart")
    if not hrp or not hrp2 then return end
    
    local BV = Instance.new("BodyVelocity")
    BV.MaxForce = Vector3.new(5000000,5000000,5000000)
    tagService:AddTag(BV, "AllowedBM")
    BV.Velocity = (hrp2.Position - hrp).Unit * intensity
    BV.Parent = hrp2
    game.Debris:AddItem(BV, bvTime)
end
 
function lib.horizontalMag(a,b)
    return (a*Vector3.new(1,0,1) - b*Vector3.new(1,0,1)).magnitude
end
 
local connectives = {"of","the","and","or","to","in","with","as","so","but"}
function lib.capitalise(str,max_words)
    local nstr = ""
    local num = 0
    local num_words = 0
    
    for w in string.gmatch(str,"[%S]+") do
        num += 1
        if max_words and num > max_words then break end
        
        if num ~= 1 and table.find(connectives,w:lower()) then
            w = w:lower()
        else
            w = w:sub(1,1):upper()..w:sub(2):lower()
        end
        
        if num == 1 then
            nstr = w
        else
            nstr ..= " "..w
        end
    end
    
    return nstr
end
 
local cRNG = Random.new()
function lib.chanceTable(dict,pl,noTreasure)
    local tab = {}
    for v,num in next,dict do
        local chanceNum = num
        if noTreasure and (v == ".CommonTreasure" or v == ".UncommonTreasure") then
            tab[v] = 0
        else
            tab[v] = chanceNum
        end
    end
    
    local count = 0
    for v,num in next,tab do
        local chance = num
        
        num += count
        count += chance
        
        tab[v] = num
    end
    
    local dropRoll = cRNG:NextNumber(0,count)
    
    local pick
    local score = 0
    
    for v,num in next,tab do
        if (num >= dropRoll and dropRoll > score) then
            score = num
            pick = v
        end
    end
    
    tab = nil
    
    return pick
end
 
function lib.findOutfit(ref)
    for i,v in next,game.ReplicatedStorage.Assets.Outfits:GetChildren() do
        local arm = v:FindFirstChild(ref)
        if arm then
            return arm
        end
    end
    
    -- can't find it!
    
    for i,v in next,game.ReplicatedStorage.Assets.Outfits:GetChildren() do
        for i,arm in next,v:GetChildren() do
            local titleVal = arm:FindFirstChild("Title")
            if titleVal and titleVal.Value == ref then return arm end
            
            local nameVal = arm:FindFirstChild("OldName")
            if nameVal and nameVal.Value == ref then return arm end
        end
    end
end
 
function lib.findEquipment(ref,src,slot)
    if not ref then return end
    src = src or game.ServerStorage.Equipment
    
    if src.Parent == game.ServerStorage.Equipment then
        slot = src.Name
    end
    
    if ref:match("Ascended ") or ref:match("Enlightened ") or ref:match("Celestial ") then
        ref = ref:gsub("Ascended ","")
        ref = ref:gsub("Enlightened ","")
        ref = ref:gsub("Celestial ","")
    end
    
    for i,v in next,src:GetChildren() do
        if v:IsA("Folder") then
            local res,res_slot = lib.findEquipment(ref,v,slot)
            if res then return res,res_slot end
        elseif v.Name == ref then
            return v,slot
        end
    end
end
 
function lib.getEquipmentSlot(eqpRef)
    local slot = eqpRef.Parent.Name
    
    local ptr = eqpRef
    repeat
    local nptr = ptr.Parent
    if nptr == game.ServerStorage.Equipment then
        slot = ptr.Name
        return slot
    end
    
    ptr = nptr
    until not ptr
    
    return slot
end
 
function lib.matchAtStart(str,ptn)
    return str:lower():match("^"..ptn:lower())
end
 
function lib.getVariantID(familyID)
    return math.ceil(familyID/2)
end
 
function lib.getVariantRef(race,familyID,customVariant)
    familyID = familyID or 0
    
    local variantID = lib.getVariantID(familyID)
    
    local raceRef = game.ReplicatedStorage.Info.Races:FindFirstChild(race)
    if not raceRef then return end
    
    if customVariant then
        local varRef = raceRef:FindFirstChild(customVariant)
        if varRef then return varRef end
    end
    
    for i,v in next,raceRef:GetChildren() do
        local varID = v:FindFirstChild("VariantID")
        if not varID then continue end
        
        if varID.Value ~= variantID then continue end
        
        return v
    end
    
    return raceRef
end
 
local BASE_TRAIT_FACTOR = 0.75
local WEAPON_SCALE_FACTOR = 0.1
-- these are the base multipliers to scaling, be careful
 
function lib.getWeaponScaling(prop,playerfolder)
    local dmg_scaling = {}
    
    local statz = prop:FindFirstChild("Stats")
    if prop.Name == "Stats" then statz = prop end
    
    local traitFactor = 1
    
    if playerfolder then
        local wepDamage = playerfolder.Data.TraitWeaponDamage.Value
        traitFactor = BASE_TRAIT_FACTOR + (wepDamage*0.05*BASE_TRAIT_FACTOR) -- 5% extra damage per trait
    end
    
    local scaler = statz and statz:FindFirstChild("Scaling")
    if scaler then
        for i,v in pairs(scaler:GetChildren()) do
            if playerfolder then
                local statref = playerfolder.Temp:FindFirstChild("Total"..v.Name)
                if not statref then continue end
                
                table.insert(dmg_scaling,statref.Value * v.Value * traitFactor)
            else
                table.insert(dmg_scaling,100 * v.Value * traitFactor)
            end
        end
    end
    
    if playerfolder then
        local pl = game.Players:FindFirstChild(playerfolder.Name)
        if pl then
            local ring_scales = {}
            
            if pl.Backpack:FindFirstChild("Ring:Akira's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalWillpower.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Prophet's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalCharisma.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Rosen's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalIntelligence.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Dawnfist's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalStrength.Value * 0.012)
            end
            if pl.Backpack:FindFirstChild("Ring:Maestro's Ring") then
                table.insert(ring_scales,playerfolder.Temp.TotalAgility.Value * 0.012)
            end
            
            table.sort(ring_scales,function(a,b) return a > b end)
                
                for i,v in next,ring_scales do
                    if v <= 0 then break end
                    
                    table.insert(dmg_scaling,v/i)
                end
            end
        end
        
        return dmg_scaling
    end
    
    function lib.weaponScalingFormula(scaling_values)
        if type(scaling_values) == 'number' then
            scaling_values = {scaling_values}
        end
        
        local scaling = 0
        for i,v in next,scaling_values do
            scaling += (v*WEAPON_SCALE_FACTOR)
        end
        
        return scaling
    end
    
    function lib.removePlayerNameFromStack(stack)
        stack = string.gsub(stack, "Players%.[^.]+","Players.<Player>")
        stack = string.gsub(stack, "%.[^.]+%.CharacterHandler",".<Character>.CharacterHandler")
        stack = string.gsub(stack, "%.[^.]+%.EffectsServer",".<Character>.EffectsServer")
        stack = string.gsub(stack, "ServerScriptService%.ServerSecurity%.Monitors%.[^.]+","Monitors.<Character>")
        stack = string.gsub(stack, 'Live%.[^."]+',"Live.<Character>")
        stack = string.gsub(stack,'(%.[%a%p_]+)%d*"','%1"')
        
        if stack:match("is not a valid member of Model") then
            local modelName = stack:match('Model "([%.%w]*)"')
            if modelName then
                if modelName:match("%.Live%.") then
                    stack = stack:gsub('Model "[^"]*"','Model "<Character>"')
                end
            end
        end
        
        stack = string.gsub(stack, "{{[^.]+}}","")
        
        return stack
    end
    
    function lib.format(pattern,...)
        local fmt = string.format(pattern.."",...)
        if fmt:match("%.") then
            fmt = fmt:gsub("%.?0+([^%.%d])","%1")
        end
        
        fmt = fmt:gsub("$","")
        
        return fmt
    end
    
    local vowels = {a=true,e=true,o=true,i=true,u=true}
    function lib.startsWithVowel(str)
        local ss = str:sub(1,1):lower()
        return vowels[ss]
    end
    
    function lib.asymptotic(x,factor,cap)
        return (cap+factor) * (x/(x+factor))
    end
    
    --
    
    local badStates = {
    Enum.HumanoidStateType.Dead,
    Enum.HumanoidStateType.FallingDown,
    Enum.HumanoidStateType.Ragdoll,
    Enum.HumanoidStateType.Seated,
    Enum.HumanoidStateType.Climbing,
    Enum.HumanoidStateType.Swimming,
    Enum.HumanoidStateType.Flying,
    Enum.HumanoidStateType.StrafingNoPhysics,
    Enum.HumanoidStateType.GettingUp,
    }
    
    local activeStates = {
    Enum.HumanoidStateType.Running,
    Enum.HumanoidStateType.RunningNoPhysics,
    Enum.HumanoidStateType.Freefall,
    Enum.HumanoidStateType.Landed,
    Enum.HumanoidStateType.Jumping,
    }
    
    function lib.setupHumanoid(hum)
        for i,v in next,badStates do
            hum:SetStateEnabled(v,false)
        end
    end
    
    function lib.disableHumanoid(hum)
        hum.PlatformStand = true
        
        for i,v in next,activeStates do
            hum:SetStateEnabled(v,false)
        end
        
        local root = hum.RootPart
        if root then
            local rootCF = root.CFrame
            root.Anchored = false
            
            hum:ChangeState(Enum.HumanoidStateType.Physics)
            
            wait()
            
            root.Anchored = true
            root.CFrame = rootCF
            
            local char = hum.Parent
            if char then
                for i,v in next,char:GetChildren() do
                    if v:IsA("BasePart") then
                        v.CanCollide = false
                    end
                end
            end
        else
            hum:ChangeState(Enum.HumanoidStateType.Physics)
        end
    end
    
    function lib.enableHumanoid(hum,isPlayer)
        hum.PlatformStand = false
        
        local root = hum.RootPart
        if root then root.Anchored = false end
        
        for i,v in next,activeStates do
            hum:SetStateEnabled(v,true)
        end
        
        hum:ChangeState(Enum.HumanoidStateType.Running)
        
        if root and not isPlayer then
            pcall(function()
                if root:CanSetNetworkOwnership() then
                    root:SetNetworkOwner()
                end
            end)
        end
    end
    
    --
    
    function lib.touchedChar(part,func,data)
        local playerOnly = data and data.playerOnly
        
        local pcon
        pcon = part.Touched:connect(function(hit)
            if not hit.Parent then return end
            
            local hum = (hit.Parent and hit.Parent:FindFirstChild("Humanoid"))
            or (hit.Parent and hit.Parent.Parent and hit.Parent.Parent:FindFirstChild("Humanoid"))
            
            if not hum or hum.Health <= 0 then return end
            
            local char = hum.Parent
            if not char then return end
            
            if playerOnly and tagService:HasTag(char,"Mob") then return end
            
            local root = char:FindFirstChild("HumanoidRootPart")
            if not root then return end
            
            func(char,hum,root)
        end)
        
        return pcon
    end
    
    --
    
    function lib.preserveNetworkOwner(ix,func)
        local part
        if ix:IsA("Model") then
            local pp = ix.PrimaryPart
            if not pp then
                pp = ix:FindFirstWhichIsA("BasePart")
            end
        elseif ix:IsA("BasePart") then
            part = ix
        end
        
        if not part or not part:CanSetNetworkOwnership() then func() return end
        
        local partOwner = part:GetNetworkOwner()
        local isAuto = part:GetNetworkOwnershipAuto()
        
        if part:CanSetNetworkOwnership() then
            if isAuto then
                part:SetNetworkOwnershipAuto()
            else
                part:SetNetworkOwner(partOwner)
            end
        end
        
        func()
        
        if part:CanSetNetworkOwnership() then
            if isAuto then
                part:SetNetworkOwnershipAuto()
            else
                part:SetNetworkOwner(partOwner)
            end
        end
    end
    
    local mapFilter = {}
    
    task.spawn(function()
        local Ships = workspace:WaitForChild("Ships",10)
        table.insert(mapFilter,Ships)
    end)
    task.spawn(function()
        local Thrown = workspace:WaitForChild("Thrown",10)
        table.insert(mapFilter,Thrown)
    end)
    task.spawn(function()
        local Live = workspace:WaitForChild("Live",10)
        table.insert(mapFilter,Live)
    end)
    task.spawn(function()
        local NPCs = workspace:WaitForChild("NPCs",10)
        table.insert(mapFilter,NPCs)
    end)
    task.spawn(function()
        local Mechanisms = workspace:WaitForChild("Mechanisms",10)
        table.insert(mapFilter,Mechanisms)
    end)
    task.spawn(function()
        local Mechanisms = workspace:WaitForChild("Mechanisms",10)
        table.insert(mapFilter,Mechanisms)
    end)
    
    lib.MapFilter = mapFilter
    
    lib.PathCosts = {
    KillZone = math.huge,
    }
    
    lib.Numerals = {"I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV"}
    
    return lib
end

local function Cannon()

local rep = game:GetService("ReplicatedStorage")
 
local lib = LibC()
local vecmaths = VectorMathsC()
local fxUtils = FXUtils()
 
local TweenService = game:GetService("TweenService")
local tagService = game:GetService("CollectionService")
 
local Camera = workspace.CurrentCamera
 
--
 
 
 
--
 
local fx = {}
 
function fx.GolemExplosion(data)
    local pos = data.pos
    local radius = data.radius
    local color = data.color or Color3.fromRGB(255,255,255)
    
    local eff = rep.Assets.Effects.Explosions.GolemExplosion:Clone()
    eff.Color = color
    eff.CFrame = CFrame.new(pos)
    eff.Size = Vector3.new(1,1,1)
    eff.Transparency = 0
    eff.Parent = workspace.Thrown
    
    local whirls = {}
    
    for i = -1,1 do
        local whirl = rep.Assets.Effects.Explosions.Whirl:clone()
        whirl.CFrame = eff.CFrame*CFrame.new(0,i*radius*0.5,0)*CFrame.Angles(0,math.rad(math.random(0,359)),0)
        whirl.Size = Vector3.new(2,1,2)
        whirl.Parent = eff
        
        whirls[i] = whirl
    end
    
    rep.Debris:Fire(eff,4)
    
    for i,whirl in next,whirls do
        local sz = Vector3.new(radius,radius/20,radius)*2.3
        if i ~= 0 then
            sz *= 0.85
        end
        
        TweenService:Create(whirl,TweenInfo.new(1,Enum.EasingStyle.Linear,Enum.EasingDirection.Out),{CFrame=whirl.CFrame*CFrame.Angles(0,math.rad(179),0)}):Play()
        TweenService:Create(whirl,TweenInfo.new(0.25,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{Size=sz}):Play()
    end
    
    TweenService:Create(eff,TweenInfo.new(0.2,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{Transparency=0.2,Size=Vector3.new(radius,radius,radius)*2}):Play()
    
    for i,whirl in next,whirls do
        TweenService:Create(whirl,TweenInfo.new(0.25),{Transparency=1}):Play()
    end
    
    wait(0.1)
    if eff:FindFirstChild("Explode2") then
        eff.Explode2.PlaybackSpeed *= math.random(90,110)/100
        eff.Explode2:Play()
    end
    
    for i,v in pairs(eff:GetChildren()) do
        if v:IsA("ParticleEmitter") then
            if v.Name == "c" then
                v.Color = ColorSequence.new(color)
            end
            fxUtils.Emit(v,60)
        end
    end
    
    wait(0.15)
    
    TweenService:Create(eff,TweenInfo.new(0.3),{Transparency=1}):Play()
end    
 
function fx.CannonExplosion(data)
    local pos = data.pos
    local radius = data.radius
    
    local scalefactor = data.scalefactor or 1
    
    local eff = data.Azure and rep.Assets.Effects.Explosions.CannonExplosionBlue:Clone() or rep.Assets.Effects.Explosions.CannonExplosion:Clone()
    eff.CFrame = CFrame.new(pos)
    eff.Size = Vector3.new(1,1,1)
    eff.Transparency = 1
    eff.Parent = workspace.Thrown
    
    rep.Debris:Fire(eff,3)
    
    for i,v in next,eff.Impact:GetChildren() do
        local num = tonumber(v.Name)
        if num then
            if scalefactor ~= 1 then
                v.Size = lib.scaleNumberSequence(v.Size,scalefactor)
            end
            
            fxUtils.Emit(v,num)
        end
    end
    
    if eff:FindFirstChild("Explode") then
        eff.Explode.PlaybackSpeed *= math.random(90,110)/100
        eff.Explode:Play()
    end
end    
 
function fx.StoneExplosion(data)
    local pos = data.pos
    local radius = data.radius
    
    local scalefactor = data.scalefactor or 1
    
    local eff = main.CRLoaderGui.Main_CR.ClientEffects.ClientEffectsModule.Cannon.StoneExplosion:Clone()
    eff.CFrame = CFrame.new(pos)
    eff.Size = Vector3.new(1,1,1)
    eff.Transparency = 1
    eff.Parent = workspace
    
    task.delay(3,eff.Destroy,eff)
    
    for i,v in next,eff.Impact:GetChildren() do
        local num = tonumber(v.Name)
        if num then
            if scalefactor ~= 1 then
                v.Size = lib.scaleNumberSequence(v.Size,scalefactor)
                
                if num == 50 then
                    v.Speed = lib.scaleNumberRange(v.Speed,scalefactor)
                end
            end
            
            
            
            fxUtils.Emit(v,num)
        end
    end
    
    if eff:FindFirstChild("Explode") then
        eff.Explode.PlaybackSpeed *= math.random(90,110)/100
        eff.Explode:Play()
    end
end    
 
return fx
end

local function Crabbo()

local rep = game:GetService("ReplicatedStorage")
 
--local lib = require(rep.Modules.Lib)
--local vecmaths = require(rep.Modules.VectorMaths)
local fxUtils = FXUtils()
 
local TweenService = game:GetService("TweenService")
local tagService = game:GetService("CollectionService")
 
local Camera = workspace.CurrentCamera
 
--
 
 
 
--
 
local fx = {}
 
function fx.BubbleBeam(data)
    local bubbleTable = data.bubbles
    
    local timeStart = tick()
    local oldTime = tick()
    
    while #bubbleTable > 0 do
        local delta = tick() - oldTime
        
        for i,info in pairs(bubbleTable) do
            if info.cfVal and info.cfVal.Parent then
                if tick() - timeStart > info.startTime and not info.bubble then
                    info.bubble = rep.Assets.Effects.DarkBubble:Clone()
                    info.bubble.CFrame = info.cfVal.Value
                    info.bubble.Parent = workspace.Thrown
                    info.bubble.Sound:Play()
                end
                
                if info.bubble then
                    TweenService:Create(info.bubble,TweenInfo.new(delta),{
                    CFrame = info.cfVal.Value
                    }):Play()
                end
            else
                if info.bubble then
                    TweenService:Create(info.bubble,TweenInfo.new(0.1),{
                    Size = info.bubble.Size * 3,
                    Transparency = 1,
                    }):Play()
                    
                    fxUtils.Emit(info.bubble.Particle,15)
                    info.bubble.Sound:Play()
                    
                    rep.Debris:Fire(info.bubble,2)
                end
                
                table.remove(bubbleTable,i)
            end    
        end
        
        oldTime = tick()
        
        wait()
    end
end
 
function fx.GroundSmash(data)
    local part = main.CRLoaderGui.Main_CR.ClientEffects.ClientEffectsModules.Crabbo.NewDirt2:Clone()
    part.CFrame = data.CFrame
    part.Parent = workspace
    task.delay(2,part.Destroy,part)
    
    if data.small then
        --        part.Pt1.Speed = NumberRange.new(part.Pt1.Speed.Max/2)
        --        part.Pt2.Speed = NumberRange.new(part.Pt2.Speed.Max/2)
        part.Pt1.Speed = NumberRange.new(part.Pt1.Speed.Max*2)
        part.Pt2.Speed = NumberRange.new(part.Pt2.Speed.Max*2)
    else
        part.Pt1.Speed = NumberRange.new(part.Pt1.Speed.Max*4)
        part.Pt2.Speed = NumberRange.new(part.Pt2.Speed.Max*4)
    end
    
    fxUtils.Emit(part.Pt1,100)
    fxUtils.Emit(part.Pt2,100)
    part.Sound:Play()
end
 
return fx
end

local checks = Checks()(Effects)
local ActionCheck = checks.Action
local MagicActionCheck = checks.MagicAction

local weapon_en = true

local function preAttack()
	mobChar:SetAttribute("InterruptHeartbeatAnimations",true)
	hum.WalkSpeed = 0
end

local function postAttack()
	mobChar:SetAttribute("InterruptHeartbeatAnimations",false)
	hum.WalkSpeed = 32
end

local wrapper = {}
function wrapper.MidPunch()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()

	task.spawn(function()
		weapon_en = false

		local eg = Effects:CreateEffect("Swiping")
		eg:Debris(8)

		local scale = math.random(30,200)/100

		if Effects:FindEffect("Awakened") then
			scale *= 1.2
		end
		
		local uid = tick()
		anim = sharedAnimator:LoadAnimation(combatAnims.MidSwipe)
		anim.Stopped:Connect(cont)
		anim:Play(0.2,1,scale)
		replicateAnim("MidSwipe",0.2,1,scale,uid)
		
		destroyerStrength = 200
		makeDestroyerHitbox(0.5/scale,true)
		task.wait(0.5/scale)

		local sound = main.Swing1:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,2)

		if scale < 1 then
			scale = 1
			anim:AdjustSpeed(scale)
			replicateAnimChange(uid,{Speed = scale})
		end

		task.wait(0.3/scale)

		local pkt = {damage=160,posture=40,weapon=true,blunt=true,noparryiframes=true,noparrystun=true,punt=true,superpunt=true,puntgrips=true,puntdir=root.CFrame.lookVector}

		local range = 38

		local function getHitpos(i)
			return (root.CFrame * CFrame.new(0,0,-19 - (i * 15))).p
		end

		local hitTable = {}
		for i = 0,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		local trail = Character.LHands.WeaponTrail
		trail.Enabled = true

		task.wait(0.1/scale)

		for i = 0,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		eg:Remove()
		trail.Enabled = false

		if Effects:FindEffect("Awakened") then
			task.wait(0.85)
		else
			task.wait(1.5/scale)
		end

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	makeDestroyerHitbox(0.2,false)
	postAttack()
	destroyerStrength = 0

	return true
end

function wrapper.Swipe()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()
	
	task.spawn(function()
		weapon_en = false

		local eg = Effects:CreateEffect("Swiping")
		eg:Debris(8)

		local scale = math.random(60,140)/100

		if Effects:FindEffect("Awakened") then
			scale *= 1.2
		end

		anim = sharedAnimator:LoadAnimation(combatAnims.Swipe)
		anim.Stopped:Connect(cont)
		anim:Play(0.2,1,scale)
		replicateAnim("Swipe",0.2,1,scale)
		
		destroyerStrength = 200
		makeDestroyerHitbox(0.5/scale,true)
		task.wait(0.5/scale)

		local sound = main.Swing1:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,2)

		task.wait(0.3/scale)

		local pkt = {damage=80,posture=40,weapon=true,blunt=true,noparryiframes=true,noparrystun=true}

		local range = 24

		local function getHitpos(i)
			return (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05-10,-10 * i - 15)).p
		end

		local hitTable = {}
		for i = 1,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		-- MID HIT
		do
			local hitPos = (root.CFrame * CFrame.new(0,0,-16)).p
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		local trail = Character.LHands.WeaponTrail
		trail.Enabled = true

		task.wait(0.1/scale)

		for i = 1,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		eg:Remove()
		trail.Enabled = false

		if Effects:FindEffect("Awakened") then
			task.wait(0.85)
		else
			task.wait(1.5/scale)
		end

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	makeDestroyerHitbox(0.2,false)
	postAttack()
	destroyerStrength = 0

	return true
end

function wrapper.Stomp()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()

	task.spawn(function()
		weapon_en = false

		local eg = Effects:CreateEffect("Action")
		eg:Debris(8)

		local scale = math.random(120,170)/100

		if Effects:FindEffect("Awakened") then
			scale *= 1.2
		end

		anim = sharedAnimator:LoadAnimation(combatAnims.Stomp)
		anim.Stopped:Connect(cont)
		anim:Play(0.2,1,scale)
		replicateAnim("Stomp",0.2,1,scale)
		
		makeDestroyerHitbox(0.6/scale,true)
		task.wait(0.6/scale)

		local sound = main.Swing2:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,2)

		task.wait(0.4/scale)

		local pkt = {damage=80,posture=50,weapon=true,blunt=true,executes=true,smushes=true,noparryiframes=true,noparrystun=true}

		local range = 30

		local function getHitpos(i)
			return (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05-10,0)).p
		end
		
		local adjustment = root.CFrame.LookVector*26
		groundSmashDestroy(CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,-15)).p))
		ClientEffect("GroundSmash",{CFrame=CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,0)).p + adjustment)})
		ClientEffect("MonsterScreenShake")

		local hitTable = {}
		for i = 1,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		for i = 1,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		eg:Remove()

		if Effects:FindEffect("Awakened") then
			task.wait(0.85)
		else
			task.wait(1.5/scale)
		end

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	makeDestroyerHitbox(0.2,false)
	postAttack()

	return true
end

function wrapper.Punt()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()
	
	task.spawn(function()
		weapon_en = false

		local eg = Effects:CreateEffect("Action")
		eg:Debris(8)

		local scale = math.random(90,110)/100

		if Effects:FindEffect("Awakened") then
			scale *= 1.2
		end

		anim = sharedAnimator:LoadAnimation(combatAnims.Punt)
		anim.Stopped:Connect(cont)
		anim:Play(0.9/scale,1,scale)
		replicateAnim("Punt",0.9/scale,1,scale)
		
		destroyerStrength = 400
		makeDestroyerHitbox(0.6/scale + (0.4/scale)-0.2,true)
		task.wait(0.6/scale)

		local sound = main.Swing2:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,2)

		task.wait((0.4/scale)-0.2)

		local rwindow = Effects:CreateEffect("RollWindow",{Value=1}) -- used to tell npc's to roll
		rwindow:Debris(0.7)

		task.wait(0.2)

		local pkt = {damage=80,posture=50,weapon=true,blunt=true,noparry=true,punt=true,rollthrough=true,superpunt=true,puntgrips=true}

		local range = 30

		local function getHitpos()
			return (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05-10,0)).p
		end

		local hitTable = {}
		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		-- MID HIT
		do
			local hitPos = (root.CFrame * CFrame.new(0,-10,0)).p
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		rwindow:Remove()

		task.wait(0.1/scale)

		eg:Remove()

		if Effects:FindEffect("Awakened") then
			task.wait(0.85)
		else
			task.wait(1.5/scale)
		end

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	makeDestroyerHitbox(0.2,false)
	destroyerStrength = 0
	postAttack()

	return true
end

function wrapper.TripleStomp()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()
	
	task.spawn(function()
		weapon_en = false

		local eg = Effects:CreateEffect("Action")
		eg:Debris(8)

		local scale = 1.2

		if Effects:FindEffect("Awakened") then
			scale *= 1.2
		end
		
		local adjustment = root.CFrame.LookVector*16

		anim = sharedAnimator:LoadAnimation(combatAnims.TripleStomp)
		anim.Stopped:Connect(cont)
		anim:Play(0.2,1,scale)
		replicateAnim("TripleStomp",0.2,1,scale)
		
		makeDestroyerHitbox(0.6/scale,true)
		task.wait(0.6/scale)

		local sound = main.Swing2:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound.PlaybackSpeed *= math.random(95,105)/100
		sound:Play()
		game.Debris:AddItem(sound,2)

		task.wait(0.4/scale)

		local pkt = {damage=60,posture=20,weapon=true,blunt=true,executes=true,smushes=true,noparryiframes=true,noparrystun=true}

		local range = 30

		local function getHitpos()
			return (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05-10,0)).p
		end
		
		groundSmashDestroy(CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,-15)).p))
		ClientEffect("GroundSmash",{CFrame=CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,0)).p + adjustment)})
		ClientEffect("MonsterScreenShake")

		local hitTable = {}

		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		local sound = main.Swing2:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound.PlaybackSpeed *= math.random(95,105)/100
		sound:Play()
		game.Debris:AddItem(sound,2)

		task.wait(0.5/scale)
		
		groundSmashDestroy(CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,-15)).p))
		ClientEffect("GroundSmash",{CFrame=CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,0)).p + adjustment)})
		ClientEffect("MonsterScreenShake")


		hitTable = {}
		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		local sound = main.Swing2:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound.PlaybackSpeed *= math.random(95,105)/100
		sound:Play()
		game.Debris:AddItem(sound,2)

		task.wait(0.5/scale)
		
		groundSmashDestroy(CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,-15)).p))
		ClientEffect("GroundSmash",{CFrame=CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,0)).p + adjustment)})
		ClientEffect("MonsterScreenShake")
		

		hitTable = {}
		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		do
			local hitPos = getHitpos()
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		task.wait(0.5/scale)

		eg:Remove()

		if Effects:FindEffect("Awakened") then
			task.wait(0.85)
		else
			task.wait(1.5/scale)
		end

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	makeDestroyerHitbox(0.2,false)
	postAttack()

	return true
end

function wrapper.Grabbo()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	if #grabbed > 0 then
		sendControl("HoldReleased")

		for _,grab in pairs(grabbed) do
			local target = grab[1]
			local weld = grab[2]

			weld:Destroy()

			local rootModel = target:FindFirstAncestorWhichIsA("Model")
			if rootModel and rootModel:FindFirstChild("Humanoid") then
				rootModel.Humanoid.PlatformStand = false
			else
				target.CanCollide = target:GetAttribute("MonkeyCanCollide")
			end
		end

		table.clear(grabbed)
		return
	end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()

	weapon_en = false

	task.spawn(function()
		local eg = Effects:CreateEffect("Action")
		eg:Debris(8)

			--[[
			local screechRef = game.ReplicatedStorage.Assets.Sounds.Crab["CrabScreech"..math.random(1,2)]

			local so = screechRef:clone()
			so.Parent = root
			so:Play()
			game.Debris:AddItem(so,5)
			]]--

		anim = sharedAnimator:LoadAnimation(combatAnims.Grab)
		anim.Stopped:Connect(cont)
		anim:Play()
		replicateAnim("Grab")

		task.wait(0.5)

		local sound = main.Swing1:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,2)

		task.wait(0.3)

		local trail = Character.RHands.WeaponTrail
		trail.Enabled = true

		task.wait(0.1)
		
		-- select target
		local targets = {}
		local gotHumanoids = {}
		local targDistance

		local point = (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05,-18)).p
		local range = 40
		local max = 50
		
		local canDestroyParts = sets.DestroyParts

		for _,other in pairs(workspace:GetDescendants()) do
			if #targets == max then break end

			if other:IsA("BasePart") and (not other.Anchored or sets.DestroyAnchored) and other:GetMass() < 1000 and not other:IsDescendantOf(mobChar) then
				local distance = (other.Position-point).Magnitude

				if distance < range then
					other.Anchored = false
					local rootModel = other:FindFirstAncestorWhichIsA("Model")
					if rootModel then
						local hum = rootModel:FindFirstChild("Humanoid")
						local hrp = rootModel:FindFirstChild("HumanoidRootPart")

						if not hum or hum.Health == 0 or not hrp then
							if canDestroyParts then
								other:SetAttribute("MonkeyCanCollide",other.CanCollide)
								other.CanCollide = false
								other:BreakJoints()
							else
								continue
							end
						elseif hrp == other then
							if gotHumanoids[rootModel] then continue end
							gotHumanoids[rootModel] = true
							rootModel.Humanoid.PlatformStand = true
						end
					elseif canDestroyParts then
						other:SetAttribute("MonkeyCanCollide",other.CanCollide)
						other.CanCollide = false
						other:BreakJoints()
					else
						continue
					end
					table.insert(targets,other)
				end
			end
		end

		task.wait(0.1)

		trail.Enabled = false

		if #targets > 0 then
			for _,target in pairs(targets) do
				if not target:CanSetNetworkOwnership() then continue end

				sendControl("HoldWeld",target)

				local holdData = {target, mobChar.RHands, CFrame.Angles(math.random()*2*math.pi, math.random()*2*math.pi, math.random()*2*math.pi)}
				table.insert(monkeyHoldParts,holdData)

				local weld = Instance.new("Folder")
				weld.Name = "MonkeyHolder"
				weld.AncestryChanged:Connect(function(obj,new)
					if not new then
						local ind = table.find(monkeyHoldParts,holdData)
						if ind then
							table.remove(monkeyHoldParts,ind)
						end
					end
				end)
				weld.Parent = mobChar

				table.insert(grabbed,{target,weld})
			end
		end
		
		--[[
		-- select target
		local target
		local targRoot
		local targHum

		local targDistance

		local point = (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05,-18)).p
		local point2 = (root.CFrame * CFrame.new(0,-hum.HipHeight*0.5,-18)).p

		local range = 20 --25

		for _,ochar in pairs(workspace.Live:GetChildren()) do
			local ohrp = ochar:FindFirstChild("HumanoidRootPart")
			local ohum = ochar:FindFirstChild("Humanoid")
			if ochar and ohrp and ohum and not ochar:FindFirstChild("CustomRig") then
				local distance = math.min(
					(ohrp.Position-point).Magnitude,
					(ohrp.Position-point2).Magnitude
				)

				local ofx = EffectHandler:GetContainer(ohum)

				if distance < range and (ofx and not ofx:FindEffect("Dodge")) and ((not target) or distance < targDistance) then
					target = ochar
					targRoot = ohrp
					targHum = ohum
					targDistance = distance
				end
			end
		end

		task.wait(0.1)

		trail.Enabled = false

		if target and targRoot and targHum then
			local targetFx = EffectHandler:GetContainer(targHum)

			if targetFx then
				root.Anchored = true

				local weld = Instance.new("Weld")
				weld.Part0 = Character.RHands
				weld.Part1 = targRoot
				weld.Parent = targRoot
				weld.C0 = CFrame.new()
				game.ServerStorage.Debris:Fire(weld,1.5)

				local anim2 = hum:LoadAnimation(combatAnims.Throw)
				anim:Stop(0.2)


				local taction = targetFx:CreateEffect("Action")
				taction:Debris(8)

				local tps = targetFx:CreateEffect("TPSafe")
				tps:Debris(2)

				local flight = targetFx:CreateEffect("FlightOk")
				flight:Debris(3)

				task.wait(0.2)

				anim2:Play(0.2)

				task.wait(0.8)

				-- crunch
				weld:Destroy()

				local bv = Instance.new("BodyVelocity")
				bv.Name = "ThrowBV"
				bv.MaxForce = Vector3.new(1,1,1) * 8e4
				bv.Velocity = root.CFrame.lookVector * 150 - Vector3.new(0,250,0)
				bv.Parent = target:FindFirstChild("Torso") or targRoot
				game.Debris:AddItem(bv,0.2)

				task.wait(0.2)

				tagHumanoid:Fire(Character,target,{damage=90,crunch=true,knockout=true,executes=true,smushes=true})

				task.wait(0.1)

				root.Anchored = false

				taction:Remove()
			end
		end
		]]

		eg:Remove()

		if Effects:FindEffect("Awakened") then
			task.wait(0.85)
		else
			task.wait(1.5)
		end

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	postAttack()

	return true
end

wrapper.Throw = function()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	if #grabbed == 0 then return end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()
	
	task.spawn(function()
		weapon_en = false
		anim = sharedAnimator:LoadAnimation(combatAnims.Throw)
		anim.Stopped:Connect(cont)
		anim:Play(0.2)
		replicateAnim("Throw",0.2)

		task.wait(0.8)

		local sound = mobChar.Sounds.Swing1:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,2)

		sendControl("HoldReleased")

		for _,grab in pairs(grabbed) do
			local target = grab[1]
			local weld = grab[2]

			-- crunch
			weld:Destroy()


			target.Velocity = root.CFrame.lookVector * 300 - Vector3.new(0,50,0)

			local rootModel = target:FindFirstAncestorWhichIsA("Model")
			if rootModel and rootModel:FindFirstChild("Humanoid") then
				rootModel.Humanoid.PlatformStand = false
				rootModel.Humanoid:ChangeState(Enum.HumanoidStateType.FallingDown)
			else
				target.CanCollide = target:GetAttribute("MonkeyCanCollide")
			end
		end

		task.wait(0.3)

		table.clear(grabbed)
		
		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	postAttack()
end

local mousePos
local function BoulderProjectile(cf)
	local ball = main.BoulderProjectile:clone()
	ball.Anchored = true
	ball.CanCollide = false
	ball.Parent = workspace
	task.delay(12,ball.Destroy,ball)

	ball.CFrame = cf

	local ballIgn = {mobChar,ball}

	local timeel = 0
	repeat
		local step = task.wait()
		timeel += step

		local prev_cf = cf

		local lv = cf.LookVector
		lv += Vector3.new(0,-0.1*step,0)

		local grav = 1-(lv.y*0.5)
		local dist = 200*step*grav

		local st_cf = CFrame.new(cf.p,cf.p+lv)
		cf = st_cf * CFrame.new(0,0,-dist)

		local ray = Ray.new(prev_cf.p,lv*dist)
		local chit,cpos,cnor = projectileUtils:RaycastWithIgnoreList(ray,ballIgn)
		if chit then
			-- BOOM

			ball.CFrame = CFrame.new(cpos,cpos+lv)

			ball.Transparency = 1

			for i,v in next,ball:GetDescendants() do
				if v:IsA("ParticleEmitter") or v:IsA("Trail") then
					v.Enabled = false
				end
			end

			task.delay(2,ball.Destroy,ball)

			local doExplode = false

			if false and chit:IsDescendantOf(workspace.Terrain.Water) then
				game.ReplicatedStorage.Requests.ClientEffect:FireAllClients("splash",{pos=cpos,height=cpos.y,strength=1})

				for i,v in next,workspace.Ships:GetChildren() do
					local hull = v:FindFirstChild("Hull")
					if not hull then continue end

					if (hull.Position-cpos).magnitude >= 100 then continue end

					game.ServerStorage.Requests.TagShip:Fire(v,{slow=0.5,slowdur=8})
				end
			else
				if false and chit:IsDescendantOf(workspace.Live) then
					local ehum = chit.Parent:FindFirstChild("Humanoid") or (chit.Parent and chit.Parent.Parent:FindFirstChild("Humanoid"))
					if not ehum then
						ball.CFrame = cf
						continue
					end

					local echar = ehum.Parent

					game.ServerStorage.Requests.TagHumanoid:Fire(Character,ehum,{damage=80,executes=true,posture=25,blunt=true,blast=true,knockpower=3,velocityfrom=cpos,velocityfrom_mag=100})
				elseif false and chit:IsDescendantOf(workspace.Ships) then
					local estats = chit.Parent:FindFirstChild("Stats") or (chit.Parent and chit.Parent.Parent:FindFirstChild("Stats"))
					if estats then
						local eship = estats.Parent

						game.ServerStorage.Requests.TagShip:Fire(eship,{dam=250,origin=cpos,slow=0.5,slowdur=3})
					end

					--local interact = Environment.Collision(Operator,chit,"Force",CANNON_INTENSITY,{Position=cpos},cf.Position)
				end

				ClientEffect("StoneExplosion",{pos=cpos,radius=30})

				local hitter = hitDetection.magnitudeCheck(Character,cpos,30,{damage=40,posture=10,blast=true,knockpower=2,velocityfrom=cpos,velocityfrom_mag=100})
				
				if sets.DestroyParts then
					local overlap = OverlapParams.new()
					overlap.FilterDescendantsInstances = ballIgn
					
					task.spawn(function()
						for i = 1,1 do
							local parts = workspace:GetPartBoundsInRadius(cpos,30,overlap)
							
							for _,part in parts do
								if part.Anchored and (not sets.DestroyAnchored or part:GetMass() > sets.MaxMass) then
									continue
								end
								
								local rootModel = part:FindFirstAncestorWhichIsA("Model")
								if rootModel and rootModel:FindFirstChild("Humanoid") then
									continue
								end
								
								if isHolding(part) then continue end

								part.Velocity = (part.Position - cpos).unit * 150
								
								local other = part
								if not other:IsDescendantOf(mobChar) then
									if not other:GetAttribute("ExBroken") then
										other:SetAttribute("ExBroken",true)
										other.Anchored = false
										other:BreakJoints()
										--other.CustomPhysicalProperties = PhysicalProperties.new(0,0.4,0)
									end

									splitPart(other)

									if not other:GetAttribute("ExDebris") then
										other:SetAttribute("ExDebris",true)
										game:GetService("Debris"):AddItem(other,30)
									end
								end
							end
							task.wait(0.1)
						end
					end)
				end
				
				--local hitter2 = hitDetection.shipMagnitudeCheck(cpos,CANNON_AOE,CANNON_SHIP_DAMAGE,{[Ship]=true})
			end

			break
		end

		ball.CFrame = cf
	until not ball.Parent
end

function wrapper.Hurl()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	if not mousePos then return end
	local chosenPos = mousePos
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()
	
	task.spawn(function()
		weapon_en = false

		local eg = Effects:CreateEffect("Action")
		eg:Debris(8)

		local scale = math.random(90,110)/100

		if Effects:FindEffect("Awakened") then
			scale *= 1.2
		end

		anim = sharedAnimator:LoadAnimation(combatAnims.Hurl)
		anim.Stopped:Connect(cont)
		anim:Play(0.2/scale,1,scale)
		replicateAnim("Hurl",0.2,1,scale)

		task.wait(0.7/scale)

		local sound = main.Swing2:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,3)

		task.wait(0.2/scale)

		local sound = main.earthpass1:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,3)

		--local target = Character.Target.Value
		--local targRoot = chosenTarget--local targRoot = target and target:FindFirstChild("HumanoidRootPart")

		task.spawn(function()
			for i = 1,3 do
				local sweepCF = root.CFrame*CFrame.new(15,-30,0)

				local targ_cf = sweepCF
				--if targRoot then
					targ_cf = CFrame.new(sweepCF.Position,chosenPos.Position)*CFrame.Angles(math.rad(math.random(-3,3)),math.rad(math.random(-3,3)),0)
				--end

				task.spawn(function()
					BoulderProjectile(targ_cf)
				end)

				task.wait(0.1)
			end
		end)

		task.wait((0.4/scale)-0.2)

		local rwindow = Effects:CreateEffect("RollWindow",{Value=1}) -- used to tell npc's to roll
		rwindow:Debris(0.5)

		task.wait(0.2)

		local pkt = {damage=80,posture=50,weapon=true,blunt=true,noparry=true,punt=true,rollthrough=true,superpunt=true,puntgrips=true}

		local range = 36

		local function getHitpos(i)
			return (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05-7,-7)).p
		end

		local hitTable = {}
		for i = 1,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		task.wait(0.1/scale)

		for i = 1,2 do
			local hitPos = getHitpos(i)
			local hitter = hitDetection.magnitudeCheck(Character,hitPos,range,pkt,false,false,nil,hitTable)
		end

		rwindow:Remove()

		task.wait(0.1/scale)

		eg:Remove()

		if Effects:FindEffect("Awakened") then
			task.wait(0.85)
		else
			task.wait(1.5/scale)
		end

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	postAttack()

	return true
end

function wrapper.LeapHurl()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	if not mousePos then return end
	local chosenPos = mousePos
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()
	
	task.spawn(function()
		weapon_en = false

		local eg = Effects:CreateEffect("Action")
		eg:Debris(8)

		local scale = math.random(90,110)/100

		if Effects:FindEffect("Awakened") then
			scale *= 1.2
		end

		anim = sharedAnimator:LoadAnimation(combatAnims.LeapHurl)
		anim.Stopped:Connect(cont)
		anim:Play(0.2/scale,1,scale)
		replicateAnim("LeapHurl",0.2,1,scale)

		local sound = main.earthpass1:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,3)

		task.wait(0.2/scale)
		
		forceDown.MaxForce = Vector3.new(0,0,0)
		forceDown.Parent = nil
		
		hum.PlatformStand = true
		local leapBV = Instance.new("BodyVelocity",root)
		leapBV.Velocity = (root.CFrame.lookVector*-80) + Vector3.new(0,120,0)
		leapBV.MaxForce = Vector3.new(9e9,9e9,9e9)
		--game.ServerStorage.Debris:Fire(leapBV,0.8)
		task.delay(0.8,leapBV.Destroy,leapBV)

		game.TweenService:Create(leapBV,TweenInfo.new(0.6),{Velocity=(root.CFrame.lookVector*-50)}):Play()
		task.delay(0.6,function()
			hum.PlatformStand = false
		end)

		task.wait(0.5/scale)

		local sound = main.Swing2:Clone()
		sound.Parent = root
		sound.EmitterSize = 300
		sound:Play()
		game.Debris:AddItem(sound,3)

		task.wait(0.2/scale)

		--local target = Character.Target.Value
		--local targRoot = target and target:FindFirstChild("HumanoidRootPart")

		local num_rocks = 1
			--[[if Effects:FindEffect("Awakened") then
				num_rocks = 2
			end]]

		task.spawn(function()
			for i = 1,num_rocks do
				local sweepCF = root.CFrame*CFrame.new(0,0,-5)

				local targ_cf = sweepCF
				--if targRoot then
					targ_cf = CFrame.new(sweepCF.Position,chosenPos.Position)*CFrame.Angles(math.rad(math.random(-3,3)),math.rad(math.random(-3,3)),0)
				--end

				task.spawn(function()
					BoulderProjectile(targ_cf)
				end)

				task.wait(0.1)
			end
		end)

		task.wait(0.4/scale)

		eg:Remove()

		task.wait(2/scale)

		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	postAttack()
	forceDown.MaxForce = Vector3.new(0,299999999,0)
	forceDown.Parent = root

	return true
end

local awakenEffect
function wrapper.Awaken()
	if not weapon_en then return end
	if not ActionCheck() then return end
	if Effects:FindEffect("Blocking") then return end
	if Effects:FindEffect("NoAttack") then return end
	if Effects:FindEffect("Dodge") then return end
	
	local anim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end
	
	preAttack()
	
	task.spawn(function()
		weapon_en = false

		local son1 = mobChar.Sounds.ArdourStart:Clone()
		son1.Parent = Character.HumanoidRootPart
		son1:Play()
		game:GetService("Debris"):AddItem(son1,10)

		local eg = Effects:CreateEffect("Action")
		eg:Debris(8)

		anim = sharedAnimator:LoadAnimation(combatAnims.Awaken)
		anim.Stopped:Connect(cont)
		anim:Play()
		replicateAnim("Awaken")

		task.wait(1)

		local screamRef = mobChar.Sounds.MonkyScream

		local sound = screamRef:Clone()
		sound.Parent = root
		sound:Play()
		game.Debris:AddItem(sound,6)

		local rootPos = root.Position

		local pkt = {sanity=50,ardourscream=true,willpowerreq=50}

		local hitter = hitDetection.magnitudeCheck(Character,root.Position,200,pkt,false,false,nil)

		local eff = main.ArdourOutBig.RippleAttach:Clone()
		eff.Parent = Character.Head
		
		--groundSmashDestroy(CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,-15)).p), 150)

		task.spawn(function()
			task.wait(1)
			eff.Ripple.Enabled = false
		end)
		
		if not awakenEffect then
			for i,v in next,main.AwakenFX:GetChildren() do
				local vc = v:clone()
				vc.Parent = Character:FindFirstChild("UpperTorso") or root
			end
		end

		game:GetService("Debris"):AddItem(eff,5)

		task.wait(1.5)

		eg:Remove()
		weapon_en = true
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	postAttack()
	
	if not Effects:FindEffect("Awakened") then
		awakenEffect = Effects:CreateEffect("Awakened")
	end

	return true
end

wrapper.Execute = function()
	if Effects:FindEffect("Executing") then return end
	if not ActionCheck() then return end
	
	local Humanoid = mobChar.Humanoid
	local pos = root.Position
	local Mob = mobChar
	
	local SCREEN_SHAKE_RANGE = 300

	-- select target
	local target
	local targDistance

	local point = (root.CFrame * CFrame.new(0,-hum.HipHeight*1.05,-18)).p
	local range = 25

	for _,ochar in pairs(workspace:GetChildren()) do
		if ochar and ochar:FindFirstChild("HumanoidRootPart") and ochar ~= mobChar then
			local distance = (ochar.HumanoidRootPart.Position-point).Magnitude

			local hum = ochar:FindFirstChildOfClass("Humanoid")
			local hrp = ochar:FindFirstChild("HumanoidRootPart")
			
			if not hrp or isHolding(hrp) then
				continue
			end

			if hum and hum.Health > 0 and distance < range and ((not target) or distance < targDistance) then
				target = ochar
				targDistance = distance
			end
		end
	end
	
	if not target then return end
	preAttack()
	
	local executeAnim
	local contBindable,doneAnim = Instance.new("BindableEvent"),false
	local function cont()
		doneAnim = true
		contBindable:Fire()
	end

	task.spawn(function()
		local pos = root.Position

		local targetHum = target:FindFirstChild("Humanoid")
		local targetHRP = targetHum and target:FindFirstChild("HumanoidRootPart")
		--local targetFx = targetHRP and EffectHandler:GetContainer(targetHum)

		--if not targetFx or not targetFx:FindEffect("Unconscious") or targetFx:FindEffect("Carried") or targetFx:FindEffect("Pinned") or targetFx:FindEffect("NoExecute") then
			--return
		--end

		local ntt = Effects:CreateEffect("NoToolToggle")
		ntt:Debris(8)

		--local taction = targetFx:CreateEffect("Action")
		--taction:Debris(8)
		--local pinned = targetFx:CreateEffect("Pinned",{Value=Mob})
		--pinned:Debris(8)
		--local beingExecuted = targetFx:CreateEffect("BeingExecuted",{Value=Mob})
		--beingExecuted:Debris(8)

		local action = Effects:CreateEffect("Action")
		action:Debris(8)
		local executing = Effects:CreateEffect("Executing",{Value=target})
		executing:Debris(8)

		local noCancel = Effects:CreateEffect("NoExecuteCancel")
		noCancel:Debris(0.4)

		local cancelled = false

		executeAnim = sharedAnimator:LoadAnimation(animFolder.Execute)
		local executed = false
		
		executeAnim.Stopped:Connect(cont)
		executeAnim:Play(0.3)
		replicateAnim("Execute",0.3)

		Humanoid.AutoRotate = false
		
		makeDestroyerHitbox(0.6,true)

		local selfCancel = false
		local timeel = 0
		local lastSplat = -1000
		local played = false
		repeat
			selfCancel = not executing or not executing.Parent
			cancelled = Effects:FindEffect("Knocked") or selfCancel-- or targetFx:FindEffect("Carried")
			timeel = timeel+wait()	

			if timeel > 0.6 and not played then
				played = true

				local sound = main.Swing2:Clone()
				sound.Parent = root
				sound.EmitterSize = 300
				sound:Play()
				game.Debris:AddItem(sound,2)
			end
		until timeel >= 0.7 or cancelled
		
		local adjustment = root.CFrame.LookVector*26
		groundSmashDestroy(CFrame.new((root.CFrame * CFrame.new(0,-hum.HipHeight*1.25,-15)).p))
		ClientEffect("GroundSmash",{CFrame=CFrame.new((root.CFrame * CFrame.new(0,-Humanoid.HipHeight*1.25,0)).p + adjustment)})
		--ClientEffect("MonsterScreenShake")

		root.Anchored = false

		targetHum.AutoRotate = false

		if executed or not cancelled then -- kill em	
			local pkt = {damage=27,posture=14,melee=true,blunt=true,executes=true,smushes=true}
			local hitTable = {target}
			--local hitter = hitDetection.magnitudeCheck(Mob,targetHRP.Position - Vector3.new(0,Humanoid.HipHeight*1.05,0),9,pkt,false,false,nil,hitTable)
			pkt.hitangle = false
			pkt.verticalbounds = false
			local hitter = hitDetection.PartsInRadius(Mob,targetHRP.Position - Vector3.new(0,Humanoid.HipHeight*1.05,0),30,pkt,hitTable,nil,nil)
			game.CollectionService:AddTag(target,"Bloody")
			--local targDanger = DangerHandler:getEntity(target)
			--if targDanger then
			--	targDanger:createTag(Mob.Name..":Execute",{damage=math.huge,lifespan=20})
			--end

			targetHum.Health = 0

			--SendSonar()

			local splatter = mobChar.Sounds.Squished:Clone()
			splatter.Parent = root
			splatter:Play()
			game.Debris:AddItem(splatter,5)

			local sound = mobChar.Sounds.Impact:Clone()
			sound.EmitterSize = SCREEN_SHAKE_RANGE
			sound.Parent = root
			sound:Play()
			game.Debris:AddItem(sound,sound.TimeLength)

			ClientEffect("MonsterScreenShake")
		else
			--pinnedAnim:Stop()
			executeAnim:Stop()
		end

		Humanoid.AutoRotate = true

		action:Remove()

		ntt:Remove()
		--pinned:Remove()
		--taction:Remove()

		--beingExecuted:Remove()
		if executing and executing.Parent then executing:Remove() end

		--if selfCancel then
		--game.ServerStorage.Requests.Knock:Fire(target,5,true)
		--end
	end)
	
	if not doneAnim then contBindable.Event:Wait() end
	makeDestroyerHitbox(0.2,false)
	postAttack()
end

attacks = wrapper

-- Event
event.Event:Connect(function(p,cmd,...)
	if p ~= plr then return end
	
	local args = {...}
	if cmd == "Attack" then
		local attackName = args[1]
		if not attacking and weapon_en and attacks[attackName] then
			local attack = attacks[attackName]
			attacking = true
			attack()
			attacking = false
		end
	elseif cmd == "PlayStaticAnim" then
		playStaticAnim(...)
	elseif cmd == "StopStaticAnim" then
		stopStaticAnim(...)
	elseif cmd == "SetSetting" then
		sets[args[1]] = args[2]
	elseif cmd == "Clean" then
		for i,v in pairs(workspace:GetDescendants()) do
			if v:GetAttribute("ExBroken") ~= nil then
				v:Destroy()
			end
		end
	elseif cmd == "MousePos" then
		if not args[1] then mousePos = nil return end
		mousePos = args[1]
	elseif cmd == "RemoveAwaken" then
		if awakenEffect then
			awakenEffect:Remove()
			awakenEffect = nil
			local awakenHolder = Character:FindFirstChild("UpperTorso") or root
			for i,v in awakenHolder:GetChildren() do
				if main.AwakenFX:FindFirstChild(v.Name) then
					v:Destroy()
				end
			end
		end
	end
end)

root.CanCollide = false

game:GetService("RunService").Heartbeat:Connect(function()
	for i,v in pairs(monkeyHoldParts) do
		v[1].CFrame = v[2].CFrame*v[3]
		v[1].Velocity = Vector3.new(0,0,0)
	end
end)

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local ControllerGui = Instance.new("ScreenGui")
ControllerGui.Name = "ControllerGui"
ControllerGui.Parent = player:WaitForChild("PlayerGui")

local TextBoxTemplate = Instance.new("Frame")
TextBoxTemplate.Name = "TextBoxTemplate"
TextBoxTemplate.Parent = ControllerGui
TextBoxTemplate.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextBoxTemplate.BackgroundTransparency = 1
TextBoxTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextBoxTemplate.BorderSizePixel = 1
TextBoxTemplate.Position = UDim2.new(0, 0, 0, 0)
TextBoxTemplate.Size = UDim2.new(1, 0, 0, 50)
TextBoxTemplate.AnchorPoint = Vector2.new(0, 0)
TextBoxTemplate.Visible = false
TextBoxTemplate.ZIndex = 1
TextBoxTemplate.ClipsDescendants = false
TextBoxTemplate.LayoutOrder = 0
TextBoxTemplate.Active = false

local Box = Instance.new("TextBox")
Box.Name = "Box"
Box.Parent = TextBoxTemplate
Box.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Box.BackgroundTransparency = 0
Box.BorderColor3 = Color3.fromRGB(30, 30, 30)
Box.BorderSizePixel = 0
Box.Position = UDim2.new(0, 5, 0, 20)
Box.Size = UDim2.new(1, -10, 0, 25)
Box.Font = Enum.Font.SourceSans
Box.Text = ""
Box.TextColor3 = Color3.fromRGB(255, 255, 255)
Box.TextSize = 14
Box.TextScaled = false
Box.TextWrapped = false
Box.TextTransparency = 0
Box.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Box.TextStrokeTransparency = 1
Box.AnchorPoint = Vector2.new(0, 0)
Box.Visible = true
Box.ZIndex = 1
Box.ClipsDescendants = false
Box.LayoutOrder = 0
Box.ClearTextOnFocus = true
Box.PlaceholderText = ""
Box.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
Box.MultiLine = false
Box.Active = true
Box.LineHeight = 1
Box.CursorPosition = 1
Box.TextEditable = true
Box.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Box

local TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = TextBoxTemplate
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1
TextLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextLabel.BorderSizePixel = 1
TextLabel.Position = UDim2.new(0, 5, 0, 0)
TextLabel.Size = UDim2.new(1, -10, 0, 20)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "Speed"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14
TextLabel.TextScaled = false
TextLabel.TextWrapped = false
TextLabel.TextTransparency = 0
TextLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextStrokeTransparency = 1
TextLabel.AnchorPoint = Vector2.new(0, 0)
TextLabel.Visible = true
TextLabel.ZIndex = 1
TextLabel.ClipsDescendants = false
TextLabel.LayoutOrder = 0
TextLabel.Active = false
TextLabel.LineHeight = 1
TextLabel.MaxVisibleGraphemes = -1

local Frame = Instance.new("Frame")
Frame.Name = "Frame"
Frame.Parent = ControllerGui
Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Frame.BackgroundTransparency = 0
Frame.BorderColor3 = Color3.fromRGB(27, 42, 53)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.05000000074505806, 0, 0.6000000238418579, 0)
Frame.Size = UDim2.new(0, 150, 0, 165)
Frame.AnchorPoint = Vector2.new(0, 0)
Frame.Visible = true
Frame.ZIndex = 1
Frame.ClipsDescendants = false
Frame.LayoutOrder = 0
Frame.Active = true

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Frame

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Frame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.BorderColor3 = Color3.fromRGB(27, 42, 53)
Title.BorderSizePixel = 1
Title.Position = UDim2.new(0, 5, 0, 0)
Title.Size = UDim2.new(1, -10, 0, 25)
Title.Font = Enum.Font.SourceSansBold
Title.Text = "Grandosla"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.TextScaled = false
Title.TextWrapped = false
Title.TextTransparency = 0
Title.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Title.TextStrokeTransparency = 1
Title.AnchorPoint = Vector2.new(0, 0)
Title.Visible = true
Title.ZIndex = 1
Title.ClipsDescendants = false
Title.LayoutOrder = 0
Title.Active = false
Title.LineHeight = 1
Title.MaxVisibleGraphemes = -1

local ButtonTemplate = Instance.new("TextButton")
ButtonTemplate.Name = "ButtonTemplate"
ButtonTemplate.Parent = ControllerGui
ButtonTemplate.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
ButtonTemplate.BackgroundTransparency = 0
ButtonTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
ButtonTemplate.BorderSizePixel = 1
ButtonTemplate.Position = UDim2.new(0, 5, 1, -140)
ButtonTemplate.Size = UDim2.new(1, -10, 0, 25)
ButtonTemplate.Font = Enum.Font.SourceSans
ButtonTemplate.Text = "Power On/Off"
ButtonTemplate.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonTemplate.TextSize = 14
ButtonTemplate.TextScaled = false
ButtonTemplate.TextWrapped = false
ButtonTemplate.TextTransparency = 0
ButtonTemplate.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
ButtonTemplate.TextStrokeTransparency = 1
ButtonTemplate.AnchorPoint = Vector2.new(0, 0)
ButtonTemplate.Visible = false
ButtonTemplate.ZIndex = 1
ButtonTemplate.ClipsDescendants = false
ButtonTemplate.LayoutOrder = 0
ButtonTemplate.Active = true
ButtonTemplate.LineHeight = 1
ButtonTemplate.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = ButtonTemplate

local plr = game:GetService("Players").LocalPlayer
local mouse = plr:GetMouse()
local char = mobChar

local UserInputService = game:GetService("UserInputService")

UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end

	if input.UserInputType == Enum.UserInputType.Keyboard then
		local key = input.KeyCode

		if key == Enum.KeyCode.Z then
			wrapper.Stomp()
		elseif key == Enum.KeyCode.X then
			wrapper.Swipe()
		elseif key == Enum.KeyCode.C then
			wrapper.Grabbo()
		elseif key == Enum.KeyCode.V then
			wrapper.Throw()
		elseif key == Enum.KeyCode.B then
			wrapper.Punt()
		elseif key == Enum.KeyCode.N then
			wrapper.TripleStomp()
		elseif key == Enum.KeyCode.M then
			wrapper.Execute()
		elseif key == Enum.KeyCode.F then
			wrapper.Hurl()
		elseif key == Enum.KeyCode.G then
			wrapper.LeapHurl()
		elseif key == Enum.KeyCode.J then
			wrapper.Awaken()
		elseif key == Enum.KeyCode.H then
			wrapper.MidPunch()
		elseif key == Enum.KeyCode.K then
			if awakenEffect then
    			awakenEffect:Remove()
    			awakenEffect = nil
    			local awakenHolder = Character:FindFirstChild("UpperTorso") or root
    			for i,v in awakenHolder:GetChildren() do
    				if main.AwakenFX:FindFirstChild(v.Name) then
    					v:Destroy()
    				end
    			end
    		end
    		end
    	end
end)

local UIS = game:GetService("UserInputService")

-- Gui Lib --
local gui = ControllerGui
local frame = gui:WaitForChild("Frame")

local initSize = 25
local buttonSize = 30
local textBoxSize = 50
local baseWidth = 150
local buttonTemplate = gui:WaitForChild("ButtonTemplate")
local textBoxTemplate = gui:WaitForChild("TextBoxTemplate")
local nextPosition = initSize

local function setTitle(text)
    frame:WaitForChild("Title").Text = text
end

local function newButton(text,clickFunc)
    local newButtonGui = buttonTemplate:Clone()
    newButtonGui.Position = UDim2.new(0,5,0,nextPosition)
    nextPosition = nextPosition + buttonSize
    
    newButtonGui.Text = text
    newButtonGui.Visible = true
    
    if clickFunc then
        newButtonGui.MouseButton1Click:Connect(clickFunc)
    end
    
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newButtonGui.Parent = frame
    
    return newButtonGui
end

local function newTextBox(label,defaultText,changedFunc)
    local newFrame = textBoxTemplate:Clone()
    newFrame.Position = UDim2.new(0,0,0,nextPosition)
    nextPosition = nextPosition + textBoxSize
    
    newFrame.TextLabel.Text = label
    newFrame.Box.Text = defaultText or ""
    newFrame.Visible = true
    
    if changedFunc then
        newFrame.Box.FocusLost:Connect(function()
            changedFunc(newFrame.Box.Text)
        end)
    end
    
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newFrame.Parent = frame
    
    return newFrame
end

local mouse = game:GetService("Players").LocalPlayer:GetMouse()
frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local releaseEvent,mouseEvent
        
        local initX = frame.AbsolutePosition.X
        local initY = frame.AbsolutePosition.Y
        local offX = mouse.X - initX
        local offY = mouse.Y - initY
        
        releaseEvent = UIS.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                releaseEvent:Disconnect()
                mouseEvent:Disconnect()
            end
        end)
        
        mouseEvent = UIS.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement then
                local inputX,inputY = input.Position.X,input.Position.Y
                local posX,posY = inputX-offX,inputY-offY
                frame.Position = UDim2.new(0,posX,0,posY)
            end
        end)
    end
end)

----------------------------------------------

local anchoredButton,anchoredBox,splitButton,walkButton,partsButton
local function updateButtons()
    anchoredButton.Text = "Destroyed Anchored: "..tostring(sets.DestroyAnchored)
    anchoredBox.Box.Text = tostring(sets.MaxMass)
    splitButton.Text = "Split Parts: "..tostring(sets.SplitParts)
    walkButton.Text = "Destructive Walk: "..tostring(sets.DestructiveWalk)
    partsButton.Text = "Destroy Parts: "..tostring(sets.DestroyParts)
end

setTitle("Monky")

cleanButton = newButton("Clean Parts",function()
		for i,v in pairs(workspace:GetDescendants()) do
			if v:GetAttribute("ExBroken") ~= nil then
				v:Destroy()
			end
		end
    updateButtons()
end)

partsButton = newButton("Destroy Parts",function()
    sets.DestroyParts = not sets.DestroyParts
    sets.DestroyParts = sets.DestroyParts
    partsButton.Text = "Destroy Parts: "..tostring(sets.DestroyParts)
    updateButtons()
end)

splitButton = newButton("Split Parts",function()
    sets.SplitParts = not sets.SplitParts
    sets.SplitParts = sets.SplitParts
    splitButton.Text = "Split Parts: "..tostring(sets.SplitParts)
    updateButtons()
end)

walkButton = newButton("Destructive Walk",function()
    sets.DestructiveWalk = not sets.DestructiveWalk
    sets.DestructiveWalk = sets.DestructiveWalk
    walkButton.Text = "Destructive Walk: "..tostring(sets.DestructiveWalk)
    updateButtons()
end)

anchoredButton = newButton("Destroyed Anchored",function()
    sets.DestroyAnchored = not sets.DestroyAnchored
    sets.DestroyAnchored = sets.DestroyAnchored
    anchoredButton.Text = "Destroyed Anchored: "..tostring(sets.DestroyAnchored)
    updateButtons()
end)

anchoredBox = newTextBox("Max Anchored Mass","",function()
    sets.MaxMass = tonumber(anchoredBox.Box.Text) or 0
    sets.MaxMass = sets.MaxMass
    anchoredBox.Box.Text = tostring(sets.MaxMass)
    updateButtons()
end)

updateButtons()

local function onCommand(cmd, ...)
    local args = {...}

    if cmd == "MousePos" then
        if not args[1] then 
            mousePos = nil 
            return 
        end
        
        mousePos = args[1]
    end
end

local h,t
local normalMap = {}

for i,v in pairs(Enum.NormalId:GetEnumItems()) do
    local vec = Vector3.FromNormalId(v)
    normalMap[vec] = v
end

local function isFiltered(obj)
    return not obj.CanCollide
end

while task.wait(1/60) do
    local Mouse = mouse
    local Target,Hit
    local TargetSurface = Enum.NormalId.Right
    
    local filterList = {plr.Character}
    
    while true do
        local params = RaycastParams.new()
        params.FilterType = Enum.RaycastFilterType.Blacklist
        params.FilterDescendantsInstances = filterList
        
        local res = workspace:Raycast(Mouse.Origin.Position,Mouse.Origin.LookVector*100000,params)
        if res then
            local objectNormal = res.Instance.CFrame:ToObjectSpace(res.Instance.CFrame + res.Normal).p
            objectNormal = Vector3.new(math.round(objectNormal.X), math.round(objectNormal.Y), math.round(objectNormal.Z))
            
            local inst = res.Instance
            if isFiltered(inst) then
                table.insert(filterList,inst)
                continue
            else
                Target = inst
                
                if objectNormal.Magnitude > 1 then
                    objectNormal = objectNormal * Vector3.new(0,1,1)
                    if objectNormal.Magnitude > 1 then
                        objectNormal = objectNormal * Vector3.new(0,0,1)
                    end
                end
                
                TargetSurface = normalMap[objectNormal]
                Hit = CFrame.new(res.Position,res.Position + Mouse.Origin.LookVector)
                break
            end
        else
            break
        end
    end
    
    Hit = Hit or Mouse.Hit
    
    if h~=Hit or t~=Target then
        onCommand("MousePos",Hit,Target)
        h,t=Hit,Target
    end
end

end)

local tah = createScriptButton("ta", function(btn)
	btn.Text = "Loading... Please Wait"
	wait(0.5)
	btn.Text = "ta"
local model = game:GetObjects("rbxassetid://99241196464591")[1]
local ex = model:FindFirstChild("DestroyerEx")

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

local Players = game:GetService("Players")
local plr = Players.LocalPlayer or Players:GetPlayers()[1]

if plr and not plr.Character then
	plr.CharacterAdded:Wait()
end

if ex and not workspace:FindFirstChild("DestroyerEx") then
	if not ex.PrimaryPart then
		ex.PrimaryPart = ex:FindFirstChildWhichIsA("BasePart")
	end

	if plr and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
		ex.PrimaryPart.Anchored = true
		ex:SetPrimaryPartCFrame(plr.Character.HumanoidRootPart.CFrame + Vector3.new(0, 10, 0))
		ex.Parent = workspace
		task.wait(1)
		ex.PrimaryPart.Anchored = false
		end
    end
		local vehicle = ex
		local guiScripts = vehicle:FindFirstChild("GuiScripts")
        local door = guiScripts.Door
		local Seat = guiScripts:FindFirstChild("VehicleSeat")



local vehicle = ex
local guiScripts = vehicle.GuiScripts
local seat = guiScripts.VehicleSeat
local door = guiScripts.Door
local doorPrompt = door.PromptAttachment.ProximityPrompt
 
for i,v in vehicle:GetDescendants() do
    if v:IsA("BasePart") then
        v.CollisionGroup = "DestroyerEx"
    end
end
 
local sets = {
AnchoredOn = false,
AnchoredMass = 0,
SplitParts = true
}
 
local doorOn = false
doorPrompt.Triggered:Connect(function()
    doorOn = not doorOn
    door.HingeConstraint.TargetAngle = doorOn and -90 or 0
end)
 
 
local driveL = guiScripts.FL.DriveMotor
local driveR = guiScripts.FR.DriveMotor
local swing = guiScripts.SlewingRing.Swing

function owner(plr)
    local descs = vehicle:GetDescendants()
    for i,v in pairs(descs) do
        if v:IsA("BasePart") then
            v:SetNetworkOwner(plr)
        end
    end
end
 
local lastEngineSoundTime = 0
local function engineSound(on)
    local curTime = tick()
    lastEngineSoundTime = curTime
    
    if on then
        task.spawn(function()
            vehicle.Counterweight.Start:Play()
            task.wait(1.5)
            if lastEngineSoundTime ~= curTime then return end
            vehicle.Counterweight.Engine:Play()
        end)
    else
        vehicle.Counterweight.Start:Stop()
        vehicle.Counterweight.Engine:Stop()
    end
end
 
local currentGui,driver
function onChildAdded(child)
    if child.Name == "SeatWeld" and child.Part1.Name == "HumanoidRootPart" then
        local plr = game:GetService("Players").LocalPlayer
        if plr then
            if currentGui then
                currentGui:Destroy()
            end
            
            engineSound(true)
            
            currentGui = seat.ExGui:Clone()
            currentGui.Parent = plr.PlayerGui
            owner(plr)
            driver = plr
            doorPrompt.Enabled = false
        end
    end
end
 
function onChildRemoved(child)
    if child.Name == "SeatWeld" then
        if currentGui then
            currentGui:Destroy()
        end
        
        engineSound(false)
        
        driver = nil
        doorPrompt.Enabled = true
    end
end
 
seat.ChildAdded:connect(onChildAdded)
seat.ChildRemoved:connect(onChildRemoved)
 
-- Sounds
local sounds = {
Main = {
Sound = guiScripts.MainPivot.Sound,
Start = 0,
LoopStart = 0.5,
LoopEnd = 2
},
Stick = {
Sound = guiScripts.StickPivot.Sound,
Start = 0,
LoopStart = 0.5,
LoopEnd = 2
},
Bucket = {
Sound = guiScripts.BucketPivot.Sound,
Start = 0,
LoopStart = 0.5,
LoopEnd = 2
},
Spin = {
Sound = guiScripts.SlewingRing.Sound,
Start = 0,
LoopStart = 0,
LoopEnd = math.huge
},
Horn = {
Sound = guiScripts.VehicleSeat.Sound,
OneTime = true
}
}
 
local function playSound(name)
    local data = sounds[name]
    local sound = data.Sound
    
    if data.OneTime then
        if not sound.Playing then
            sound:Play()
        end
        return
    end
    
    data.LastTime = tick()
    
    if not data.Setup then
        sound.DidLoop:Connect(function()
            sound.TimePosition = data.LoopStart
        end)
        data.Setup = true
    end
    
    if not sound.Playing then
        if data.Start then
            sound.TimePosition = data.Start
        end
        sound:Play()
        while tick() - data.LastTime < 0.25 do
            if sound.TimePosition >= data.LoopEnd then
                sound.TimePosition = data.LoopStart
            end
            task.wait()
        end
        sound:Stop()
    end
end
 
local lights = false
 
-- Heavy
for i,v in pairs(vehicle:GetDescendants()) do
    if v:IsA("BasePart") then
        v.CustomPhysicalProperties = PhysicalProperties.new(100,0.4,0)
    end
end
guiScripts.Door.CustomPhysicalProperties = PhysicalProperties.new(7.85,0.4,0)
 
-- Destroyer
local maxSplit = 4
local max = math.max
local min = math.min

local function splitPart(part)
    if not part or not sets.SplitParts or part:IsA("MeshPart") or part:IsA("Terrain") or part:GetAttribute("ExSplit") then
        return
    end
	part:SetAttribute("ExSplit", true)
	part.CollisionGroup = "DestroyerExParts"

	local isUnion = part:IsA("UnionOperation") or part:IsA("WedgePart") or part:IsA("CornerWedgePart") or (part:IsA("Part") and part.Shape ~= Enum.PartType.Block)

	local split = part:Clone()
	split:SetAttribute("ExSplit", false)
	split:SetAttribute("ExBroken", false)
	split:SetAttribute("IsSplitPart", true)

	local newSizeX = split.Size.X/2
	local newSizeY = split.Size.Y/2
	local newSizeZ = split.Size.Z/2

	local canSplitX = (split.Size.X >= maxSplit)
	local canSplitY = (split.Size.Y >= maxSplit)
	local canSplitZ = (split.Size.Z >= maxSplit)

	if not canSplitX and not canSplitY and not canSplitZ then return end

	split.Size = Vector3.new(canSplitX and newSizeX or split.Size.X,
		canSplitY and newSizeY or split.Size.Y,
		canSplitZ and newSizeZ or split.Size.Z)

	local xIter = (canSplitX and -1 or 0)
	local yIter = (canSplitY and -1 or 0)
	local zIter = (canSplitZ and -1 or 0)

	while true do
		local scr = split:FindFirstChildWhichIsA("LuaSourceContainer")
		if scr then scr:Destroy() else break end
	end

	local qSize = part.Size/4

	if isUnion then
		local cut = Instance.new("Part")
		cut.Size = split.Size*1.01
		cut.Anchored = true
		cut.CanCollide = false

		local partPar = part.Parent
		part.Parent = game:GetService("ReplicatedStorage")
		local shadow = part:Clone()
		shadow:SetAttribute("ExProtect", true)
		shadow.Anchored = true
		shadow.CanCollide = false
		shadow.Parent = partPar

		local cuts = {}
		for x = xIter,1,2 do
			for y = yIter,1,2 do
				for z = zIter,1,2 do
					local newCut = cut:Clone()
					local xOff = x*qSize.X
					local yOff = y*qSize.Y
					local zOff = z*qSize.Z
					newCut.CFrame = part.CFrame:ToWorldSpace(CFrame.new(xOff,yOff,zOff))
					table.insert(cuts,newCut)
				end
			end
		end

		local done = 0
		local finalCuts = {}
		local totalCuts = #cuts

		for i,v in pairs(cuts) do
			task.spawn(function()
				local clone = {}
				for _,c in pairs(cuts) do
					if c ~= v then table.insert(clone,c) end
				end
				local success, partCut = pcall(function() return part:SubtractAsync(clone) end)
				if success and partCut then
					partCut:SetAttribute("ExBroken", false)
					partCut:SetAttribute("IsSplitPart", true)
					partCut.CollisionGroup = "DestroyerExParts"
					table.insert(finalCuts, partCut)
				end
				done += 1
			end)
		end

		task.spawn(function()
			while done ~= totalCuts do task.wait() end
			shadow:Destroy()
			for _,v in pairs(finalCuts) do
				v.Parent = partPar
			end
		end)
	else
		for x = xIter,1,2 do
			for y = yIter,1,2 do
				for z = zIter,1,2 do
					local newSplit = split:Clone()
					local xOff = x*qSize.X
					local yOff = y*qSize.Y
					local zOff = z*qSize.Z
					newSplit.CFrame = part.CFrame:ToWorldSpace(CFrame.new(xOff,yOff,zOff))
					newSplit.Parent = part.Parent
				end
			end
		end
	end

	part.Parent = game:GetService("ReplicatedStorage")
	task.spawn(function()
		task.wait(1)
		part:Destroy()
	end)
end

local function destroyer(p)
	if not p then return end
	p.Massless = true
	p.Touched:Connect(function(other)
		if other.Anchored and (not sets.AnchoredOn or other:GetMass() > sets.AnchoredMass) then return end
		if other:GetAttribute("ExProtect") then return end
		if not other:GetAttribute("ExBroken") then
			other:SetAttribute("ExBroken", true)
			other.Anchored = false
			other:BreakJoints()
		end
		splitPart(other)
		if not other:FindFirstChild("ExDestroyedSound") then
			local s = Instance.new("Sound")
			s.Name = "ExDestroyedSound"
			s.SoundId = "rbxassetid://1413007009"
			s.Parent = other
			s:Play()
			game:GetService("Debris"):AddItem(s, 1)
		end
		if not other:GetAttribute("ExDebris") then
			other:SetAttribute("ExDebris", true)
			game:GetService("Debris"):AddItem(other, 30)
		end
	end)
end

destroyer(guiScripts.Bucket)
destroyer(guiScripts.Claw2)
destroyer(guiScripts.Stick)
destroyer(guiScripts.MainBoom)
for _,v in pairs(vehicle:GetChildren()) do
	if v.Name == "Hydraulics" then
		for _,h in pairs(v:GetChildren()) do
			destroyer(h)
		end
	end
end

local doorParts = {guiScripts.Door, vehicle:WaitForChild("DoorWindows"), vehicle:WaitForChild("DoorWelder")}
for _,p in pairs(doorParts) do
	for _,v in pairs(vehicle:GetDescendants()) do
		if v:IsA("BasePart") and not table.find(doorParts, v) then
			local col = Instance.new("NoCollisionConstraint")
			col.Part0 = p
			col.Part1 = v
			col.Parent = p
		end
	end
end
    

local sitting = false
local cooldown = false
local cooldownTime = 2
local drivingGui = nil

local function ExGuiii()
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local ExGui = Instance.new("ScreenGui")
ExGui.Name = "ExGui"
ExGui.Parent = player:WaitForChild("PlayerGui")
ExGui.ResetOnSpawn = true

local Frame = Instance.new("Frame")
Frame.Name = "Frame"
Frame.Parent = ExGui
Frame.Name = "Frame"
Frame.Archivable = true
Frame.Position = UDim2.new(0.05000000074505806, 0, 0.6000000238418579, 0)
Frame.Size = UDim2.new(0, 150, 0, 255)
Frame.AnchorPoint = Vector2.new(0, 0)
Frame.Visible = true
Frame.ZIndex = 1
Frame.ClipsDescendants = false
Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Frame.BackgroundTransparency = 0
Frame.BorderColor3 = Color3.fromRGB(27, 42, 53)
Frame.BorderSizePixel = 0
Frame.Rotation = 0
Frame.SizeConstraint = Enum.SizeConstraint.RelativeXY
Frame.Style = Enum.FrameStyle.Custom
Frame.Selectable = false
Frame.Active = false
Frame.Draggable = false
Frame.AutomaticSize = Enum.AutomaticSize.None
Frame.SelectionGroup = false
Frame.LayoutOrder = 0

local CleanButton = Instance.new("TextButton")
CleanButton.Name = "CleanButton"
CleanButton.Parent = Frame
CleanButton.Name = "CleanButton"
CleanButton.Archivable = true
CleanButton.Position = UDim2.new(0, 5, 1, -140)
CleanButton.Size = UDim2.new(1, -10, 0, 25)
CleanButton.AnchorPoint = Vector2.new(0, 0)
CleanButton.Visible = true
CleanButton.ZIndex = 1
CleanButton.ClipsDescendants = false
CleanButton.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
CleanButton.BackgroundTransparency = 0
CleanButton.BorderColor3 = Color3.fromRGB(27, 42, 53)
CleanButton.BorderSizePixel = 1
CleanButton.Rotation = 0
CleanButton.SizeConstraint = Enum.SizeConstraint.RelativeXY
CleanButton.Modal = false
CleanButton.Style = Enum.ButtonStyle.Custom
CleanButton.Selectable = true
CleanButton.Active = true
CleanButton.Draggable = false
CleanButton.AutomaticSize = Enum.AutomaticSize.None
CleanButton.Font = Enum.Font.SourceSans
CleanButton.Text = "Clean Parts"
CleanButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CleanButton.TextTransparency = 0
CleanButton.TextSize = 14
CleanButton.TextScaled = false
CleanButton.TextWrapped = false
CleanButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
CleanButton.TextStrokeTransparency = 1
CleanButton.TextXAlignment = Enum.TextXAlignment.Center
CleanButton.TextYAlignment = Enum.TextYAlignment.Center
CleanButton.RichText = false
CleanButton.LineHeight = 1
CleanButton.AutoButtonColor = true
CleanButton.Modal = false
CleanButton.SelectionGroup = false
CleanButton.LayoutOrder = 0

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = CleanButton
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local DoorButton = Instance.new("TextButton")
DoorButton.Name = "DoorButton"
DoorButton.Parent = Frame
DoorButton.Name = "DoorButton"
DoorButton.Archivable = true
DoorButton.Position = UDim2.new(0, 5, 1, -230)
DoorButton.Size = UDim2.new(1, -10, 0, 25)
DoorButton.AnchorPoint = Vector2.new(0, 0)
DoorButton.Visible = true
DoorButton.ZIndex = 1
DoorButton.ClipsDescendants = false
DoorButton.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
DoorButton.BackgroundTransparency = 0
DoorButton.BorderColor3 = Color3.fromRGB(27, 42, 53)
DoorButton.BorderSizePixel = 1
DoorButton.Rotation = 0
DoorButton.SizeConstraint = Enum.SizeConstraint.RelativeXY
DoorButton.Modal = false
DoorButton.Style = Enum.ButtonStyle.Custom
DoorButton.Selectable = true
DoorButton.Active = true
DoorButton.Draggable = false
DoorButton.AutomaticSize = Enum.AutomaticSize.None
DoorButton.Font = Enum.Font.SourceSans
DoorButton.Text = "Toggle Door"
DoorButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DoorButton.TextTransparency = 0
DoorButton.TextSize = 14
DoorButton.TextScaled = false
DoorButton.TextWrapped = false
DoorButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
DoorButton.TextStrokeTransparency = 1
DoorButton.TextXAlignment = Enum.TextXAlignment.Center
DoorButton.TextYAlignment = Enum.TextYAlignment.Center
DoorButton.RichText = false
DoorButton.LineHeight = 1
DoorButton.AutoButtonColor = true
DoorButton.Modal = false
DoorButton.SelectionGroup = false
DoorButton.LayoutOrder = 0

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = DoorButton
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local AnchoredMass = Instance.new("TextBox")
AnchoredMass.Name = "AnchoredMass"
AnchoredMass.Parent = Frame
AnchoredMass.Name = "AnchoredMass"
AnchoredMass.Archivable = true
AnchoredMass.Position = UDim2.new(0, 5, 1, -30)
AnchoredMass.Size = UDim2.new(1, -10, 0, 25)
AnchoredMass.AnchorPoint = Vector2.new(0, 0)
AnchoredMass.Visible = true
AnchoredMass.ZIndex = 1
AnchoredMass.ClipsDescendants = false
AnchoredMass.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
AnchoredMass.BackgroundTransparency = 0
AnchoredMass.BorderColor3 = Color3.fromRGB(30, 30, 30)
AnchoredMass.BorderSizePixel = 0
AnchoredMass.Rotation = 0
AnchoredMass.SizeConstraint = Enum.SizeConstraint.RelativeXY
AnchoredMass.Selectable = true
AnchoredMass.Active = true
AnchoredMass.Draggable = false
AnchoredMass.AutomaticSize = Enum.AutomaticSize.None
AnchoredMass.Font = Enum.Font.SourceSans
AnchoredMass.Text = ""
AnchoredMass.TextColor3 = Color3.fromRGB(255, 255, 255)
AnchoredMass.TextTransparency = 0
AnchoredMass.TextSize = 14
AnchoredMass.TextScaled = false
AnchoredMass.TextWrapped = false
AnchoredMass.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
AnchoredMass.TextStrokeTransparency = 1
AnchoredMass.TextXAlignment = Enum.TextXAlignment.Center
AnchoredMass.TextYAlignment = Enum.TextYAlignment.Center
AnchoredMass.RichText = false
AnchoredMass.ClearTextOnFocus = true
AnchoredMass.PlaceholderText = ""
AnchoredMass.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
AnchoredMass.MultiLine = false
AnchoredMass.LineHeight = 1
AnchoredMass.SelectionGroup = false
AnchoredMass.LayoutOrder = 0

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = AnchoredMass
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Frame
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local SplitButton = Instance.new("TextButton")
SplitButton.Name = "SplitButton"
SplitButton.Parent = Frame
SplitButton.Name = "SplitButton"
SplitButton.Archivable = true
SplitButton.Position = UDim2.new(0, 5, 1, -110)
SplitButton.Size = UDim2.new(1, -10, 0, 25)
SplitButton.AnchorPoint = Vector2.new(0, 0)
SplitButton.Visible = true
SplitButton.ZIndex = 1
SplitButton.ClipsDescendants = false
SplitButton.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
SplitButton.BackgroundTransparency = 0
SplitButton.BorderColor3 = Color3.fromRGB(27, 42, 53)
SplitButton.BorderSizePixel = 1
SplitButton.Rotation = 0
SplitButton.SizeConstraint = Enum.SizeConstraint.RelativeXY
SplitButton.Modal = false
SplitButton.Style = Enum.ButtonStyle.Custom
SplitButton.Selectable = true
SplitButton.Active = true
SplitButton.Draggable = false
SplitButton.AutomaticSize = Enum.AutomaticSize.None
SplitButton.Font = Enum.Font.SourceSans
SplitButton.Text = "Split Parts:"
SplitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SplitButton.TextTransparency = 0
SplitButton.TextSize = 14
SplitButton.TextScaled = false
SplitButton.TextWrapped = false
SplitButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
SplitButton.TextStrokeTransparency = 1
SplitButton.TextXAlignment = Enum.TextXAlignment.Center
SplitButton.TextYAlignment = Enum.TextYAlignment.Center
SplitButton.RichText = false
SplitButton.LineHeight = 1
SplitButton.AutoButtonColor = true
SplitButton.Modal = false
SplitButton.SelectionGroup = false
SplitButton.LayoutOrder = 0

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = SplitButton
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local LightButton = Instance.new("TextButton")
LightButton.Name = "LightButton"
LightButton.Parent = Frame
LightButton.Name = "LightButton"
LightButton.Archivable = true
LightButton.Position = UDim2.new(0, 5, 1, -200)
LightButton.Size = UDim2.new(1, -10, 0, 25)
LightButton.AnchorPoint = Vector2.new(0, 0)
LightButton.Visible = true
LightButton.ZIndex = 1
LightButton.ClipsDescendants = false
LightButton.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
LightButton.BackgroundTransparency = 0
LightButton.BorderColor3 = Color3.fromRGB(27, 42, 53)
LightButton.BorderSizePixel = 1
LightButton.Rotation = 0
LightButton.SizeConstraint = Enum.SizeConstraint.RelativeXY
LightButton.Modal = false
LightButton.Style = Enum.ButtonStyle.Custom
LightButton.Selectable = true
LightButton.Active = true
LightButton.Draggable = false
LightButton.AutomaticSize = Enum.AutomaticSize.None
LightButton.Font = Enum.Font.SourceSans
LightButton.Text = "Toggle Lights"
LightButton.TextColor3 = Color3.fromRGB(255, 255, 255)
LightButton.TextTransparency = 0
LightButton.TextSize = 14
LightButton.TextScaled = false
LightButton.TextWrapped = false
LightButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
LightButton.TextStrokeTransparency = 1
LightButton.TextXAlignment = Enum.TextXAlignment.Center
LightButton.TextYAlignment = Enum.TextYAlignment.Center
LightButton.RichText = false
LightButton.LineHeight = 1
LightButton.AutoButtonColor = true
LightButton.Modal = false
LightButton.SelectionGroup = false
LightButton.LayoutOrder = 0

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = LightButton
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = Frame
TextLabel.Name = "TextLabel"
TextLabel.Archivable = true
TextLabel.Position = UDim2.new(0, 5, 1, -50)
TextLabel.Size = UDim2.new(1, -10, 0, 20)
TextLabel.AnchorPoint = Vector2.new(0, 0)
TextLabel.Visible = true
TextLabel.ZIndex = 1
TextLabel.ClipsDescendants = false
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1
TextLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextLabel.BorderSizePixel = 1
TextLabel.Rotation = 0
TextLabel.SizeConstraint = Enum.SizeConstraint.RelativeXY
TextLabel.Selectable = false
TextLabel.Active = false
TextLabel.Draggable = false
TextLabel.AutomaticSize = Enum.AutomaticSize.None
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "Max Anchored Mass"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextTransparency = 0
TextLabel.TextSize = 14
TextLabel.TextScaled = false
TextLabel.TextWrapped = false
TextLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextStrokeTransparency = 1
TextLabel.TextXAlignment = Enum.TextXAlignment.Center
TextLabel.TextYAlignment = Enum.TextYAlignment.Center
TextLabel.RichText = false
TextLabel.LineHeight = 1
TextLabel.SelectionGroup = false
TextLabel.LayoutOrder = 0

local AnchoredButton = Instance.new("TextButton")
AnchoredButton.Name = "AnchoredButton"
AnchoredButton.Parent = Frame
AnchoredButton.Name = "AnchoredButton"
AnchoredButton.Archivable = true
AnchoredButton.Position = UDim2.new(0, 5, 1, -80)
AnchoredButton.Size = UDim2.new(1, -10, 0, 25)
AnchoredButton.AnchorPoint = Vector2.new(0, 0)
AnchoredButton.Visible = true
AnchoredButton.ZIndex = 1
AnchoredButton.ClipsDescendants = false
AnchoredButton.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
AnchoredButton.BackgroundTransparency = 0
AnchoredButton.BorderColor3 = Color3.fromRGB(27, 42, 53)
AnchoredButton.BorderSizePixel = 1
AnchoredButton.Rotation = 0
AnchoredButton.SizeConstraint = Enum.SizeConstraint.RelativeXY
AnchoredButton.Modal = false
AnchoredButton.Style = Enum.ButtonStyle.Custom
AnchoredButton.Selectable = true
AnchoredButton.Active = true
AnchoredButton.Draggable = false
AnchoredButton.AutomaticSize = Enum.AutomaticSize.None
AnchoredButton.Font = Enum.Font.SourceSans
AnchoredButton.Text = "Destroyed Anchored:"
AnchoredButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AnchoredButton.TextTransparency = 0
AnchoredButton.TextSize = 14
AnchoredButton.TextScaled = false
AnchoredButton.TextWrapped = false
AnchoredButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
AnchoredButton.TextStrokeTransparency = 1
AnchoredButton.TextXAlignment = Enum.TextXAlignment.Center
AnchoredButton.TextYAlignment = Enum.TextYAlignment.Center
AnchoredButton.RichText = false
AnchoredButton.LineHeight = 1
AnchoredButton.AutoButtonColor = true
AnchoredButton.Modal = false
AnchoredButton.SelectionGroup = false
AnchoredButton.LayoutOrder = 0

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = AnchoredButton
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local FixButton = Instance.new("TextButton")
FixButton.Name = "FixButton"
FixButton.Parent = Frame
FixButton.Name = "FixButton"
FixButton.Archivable = true
FixButton.Position = UDim2.new(0, 5, 1, -170)
FixButton.Size = UDim2.new(1, -10, 0, 25)
FixButton.AnchorPoint = Vector2.new(0, 0)
FixButton.Visible = true
FixButton.ZIndex = 1
FixButton.ClipsDescendants = false
FixButton.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
FixButton.BackgroundTransparency = 0
FixButton.BorderColor3 = Color3.fromRGB(27, 42, 53)
FixButton.BorderSizePixel = 1
FixButton.Rotation = 0
FixButton.SizeConstraint = Enum.SizeConstraint.RelativeXY
FixButton.Modal = false
FixButton.Style = Enum.ButtonStyle.Custom
FixButton.Selectable = true
FixButton.Active = true
FixButton.Draggable = false
FixButton.AutomaticSize = Enum.AutomaticSize.None
FixButton.Font = Enum.Font.SourceSans
FixButton.Text = "Fix"
FixButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FixButton.TextTransparency = 0
FixButton.TextSize = 14
FixButton.TextScaled = false
FixButton.TextWrapped = false
FixButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
FixButton.TextStrokeTransparency = 1
FixButton.TextXAlignment = Enum.TextXAlignment.Center
FixButton.TextYAlignment = Enum.TextYAlignment.Center
FixButton.RichText = false
FixButton.LineHeight = 1
FixButton.AutoButtonColor = true
FixButton.Modal = false
FixButton.SelectionGroup = false
FixButton.LayoutOrder = 0

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = FixButton
UICorner.Name = "UICorner"
UICorner.Archivable = true
UICorner.CornerRadius = UDim.new(0, 8)

local Vehicle = Instance.new("ObjectValue")
Vehicle.Name = "Vehicle"
Vehicle.Parent = ExGui
Vehicle.Name = "Vehicle"
Vehicle.Archivable = true
 
local frame = Frame
local anchoredButton = frame:WaitForChild("AnchoredButton")
local anchoredBox = frame:WaitForChild("AnchoredMass")
local doorButton = frame:WaitForChild("DoorButton")
local lightButton = frame:WaitForChild("LightButton")
local splitButton = frame:WaitForChild("SplitButton")
local fixButton = frame:WaitForChild("FixButton")
local cleanButton = frame:WaitForChild("CleanButton")

local UIS = game:GetService("UserInputService")
 
local mouse = game:GetService("Players").LocalPlayer:GetMouse()
frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local releaseEvent,mouseEvent
        
        local initX = frame.AbsolutePosition.X
        local initY = frame.AbsolutePosition.Y
        local offX = mouse.X - initX
        local offY = mouse.Y - initY
        
        releaseEvent = UIS.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                releaseEvent:Disconnect()
                mouseEvent:Disconnect()
            end
        end)
 
        mouseEvent = UIS.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement then
                local inputX,inputY = input.Position.X,input.Position.Y
                local posX,posY = inputX-offX,inputY-offY
                frame.Position = UDim2.new(0,posX,0,posY)
            end
        end)
    end
end)
 
local ancOn = sets.AnchoredOn
local ancMass = sets.AnchoredMass
local splitOn = sets.SplitParts
 
anchoredButton.Text = "Destroyed Anchored: "..tostring(ancOn)
anchoredBox.Text = tostring(ancMass)
splitButton.Text = "Split Parts: "..tostring(splitOn)
 
anchoredBox.FocusLost:Connect(function()
    ancMass = tonumber(anchoredBox.Text) or 0
    sets.AnchoredMass = ancMass
    anchoredBox.Text = tostring(ancMass)
end)
 
anchoredButton.MouseButton1Click:Connect(function()
    ancOn = not ancOn
    sets.AnchoredOn = ancOn
    anchoredButton.Text = "Destroyed Anchored: "..tostring(ancOn)
    destroyer()
end)
 
splitButton.MouseButton1Click:Connect(function()
    splitOn = not splitOn
    sets.SplitParts = splitOn
    splitButton.Text = "Split Parts: "..tostring(splitOn)
    splitPart()
end)
 
doorButton.MouseButton1Click:Connect(function()
    doorOn = not doorOn
    door.HingeConstraint.TargetAngle = doorOn and -90 or 0
end)
 
lightButton.MouseButton1Click:Connect(function()
    lights = not lights
        for i,v in pairs(vehicle:GetDescendants()) do
            if v:IsA("Light") then
                v.Enabled = lights
            end
        end
end)
 
local fixDB = false
fixButton.MouseButton1Click:Connect(function()
    if fixDB then return end
    local gyro = vehicle.Counterweight.BodyGyro
    fixDB = true
    gyro.MaxTorque = Vector3.new(500000,0,500000)
    task.wait(2)
    gyro.MaxTorque = Vector3.new(0,0,0)
    fixDB = false
end)
 
cleanButton.MouseButton1Click:Connect(function()
    for i,v in pairs(workspace:GetDescendants()) do
        if v:GetAttribute("ExBroken") ~= nil then
            v:Destroy()
        end
    end
end)
end

local function ExGuiRe()
    local ExGui = game.Players.LocalPlayer.PlayerGui.ExGui
    if ExGui then
        ExGui:Destroy()
    end
end

local soundfr = guiScripts.FR.Sound

local soundfl = guiScripts.FL.Sound

local function SitOnSeat()
	if sitting or cooldown then return end
	if not Seat or not Seat:IsDescendantOf(workspace) then return end
    engineSound(true)
	sitting = true
	cooldown = false

	character:MoveTo(Seat.Position)
	task.wait(0.2)

	humanoid.Sit = true
	humanoid.Jump = false

	local root = character:WaitForChild("HumanoidRootPart")
	root.CFrame = Seat.CFrame * CFrame.new(0, 2, 0)
	
	local doorPrompt = door.PromptAttachment.ProximityPrompt

	local weld = Instance.new("WeldConstraint")
	weld.Part0 = Seat
	weld.Part1 = root
	weld.Parent = Seat

	ExGuiii()
	doorPrompt.Enabled = false

	local conn
	conn = humanoid.Jumping:Connect(function(isJumping)
		if isJumping and sitting then
			conn:Disconnect()
			if weld then weld:Destroy() end
			if soundfr.Playing == true then soundfr:Stop() end
			if soundfl.Playing == true then soundfl:Stop() end
			engineSound(false)
			sitting = false
			humanoid.Sit = false
			ExGuiRe()
			doorPrompt.Enabled = true
			cooldown = true
			task.delay(cooldownTime, function()
				cooldown = false
			end)
		end
	end)
end

Seat.Touched:Connect(function(hit)
	if cooldown or sitting then return end
	local h = hit.Parent:FindFirstChild("Humanoid")
	if h and hit.Parent == character then
		SitOnSeat()
	end
end)

local guiScripts = vehicle.GuiScripts
local swing = guiScripts.SlewingRing.Swing
local mainMotor = guiScripts.MainPivot.Motor6D
local stickMotor = guiScripts.StickPivot.Motor6D
local bucketMotor = guiScripts.BucketPivot.Motor6D
local UIS = game:GetService("UserInputService")
local humanoid = game.Players.LocalPlayer.Character:WaitForChild("Humanoid")
local driveL = guiScripts.FL.DriveMotor
local driveR = guiScripts.FR.DriveMotor
local maxSpeed = 50
local turnSpeed = 100
local driving = false
local throttle = 0
local steer = 0

local function endedEvent(key, func)
	local con
	con = UIS.InputEnded:Connect(function(input)
		if input.UserInputType ~= Enum.UserInputType.Keyboard then return end
		if input.KeyCode == key then
			con:Disconnect()
			func()
		end
	end)
end

local lastSwing = 0

humanoid:GetPropertyChangedSignal("Sit"):Connect(function()
	if humanoid.Sit then
		driving = true
	else
		driving = false
		driveL.AngularVelocity = 0
		driveR.AngularVelocity = 0
		swing.AngularVelocity = 0
	end
end)

UIS.InputBegan:Connect(function(input, proc)
	if proc or input.UserInputType ~= Enum.UserInputType.Keyboard then return end
	
	if driving then
		if input.KeyCode == Enum.KeyCode.W then
			throttle = -1
			if not guiScripts.FR.Sound.Playing then guiScripts.FR.Sound:Play() end
		elseif input.KeyCode == Enum.KeyCode.S then
			throttle = 1
			if not guiScripts.FL.Sound.Playing then guiScripts.FL.Sound:Play() end
		elseif input.KeyCode == Enum.KeyCode.A then
			steer = -1
			if not guiScripts.FL.Sound.Playing then guiScripts.FL.Sound:Play() end
		elseif input.KeyCode == Enum.KeyCode.D then
			steer = 1
			if not guiScripts.FR.Sound.Playing then guiScripts.FR.Sound:Play() end
		elseif input.KeyCode == Enum.KeyCode.E then
			swing.AngularVelocity = -0.5
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.E) do
					playSound("Spin")
					task.wait()
				end
			end)
			local swingTime = tick()
			lastSwing = swingTime
			endedEvent(Enum.KeyCode.E, function()
				if lastSwing == swingTime then swing.AngularVelocity = 0 end
			end)
		elseif input.KeyCode == Enum.KeyCode.Q then
			swing.AngularVelocity = 0.5
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.Q) do
					playSound("Spin")
					task.wait()
				end
			end)
			local swingTime = tick()
			lastSwing = swingTime
			endedEvent(Enum.KeyCode.Q, function()
				if lastSwing == swingTime then swing.AngularVelocity = 0 end
			end)
		elseif input.KeyCode == Enum.KeyCode.T then
			mainMotor.MaxVelocity = 1
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.T) do
					local prev = mainMotor.DesiredAngle
					mainMotor.DesiredAngle = math.clamp(mainMotor.DesiredAngle - 0.01, -1, 1)
					if mainMotor.DesiredAngle ~= prev then playSound("Main") end
					task.wait()
				end
			end)
		elseif input.KeyCode == Enum.KeyCode.R then
			mainMotor.MaxVelocity = 1
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.R) do
					local prev = mainMotor.DesiredAngle
					mainMotor.DesiredAngle = math.clamp(mainMotor.DesiredAngle + 0.01, -1, 1)
					if mainMotor.DesiredAngle ~= prev then playSound("Main") end
					task.wait()
				end
			end)
		elseif input.KeyCode == Enum.KeyCode.G then
			stickMotor.MaxVelocity = 1
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.G) do
					local prev = stickMotor.DesiredAngle
					stickMotor.DesiredAngle = math.clamp(stickMotor.DesiredAngle - 0.01, -1.2, 1)
					if stickMotor.DesiredAngle ~= prev then playSound("Stick") end
					task.wait()
				end
			end)
		elseif input.KeyCode == Enum.KeyCode.F then
			stickMotor.MaxVelocity = 1
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.F) do
					local prev = stickMotor.DesiredAngle
					stickMotor.DesiredAngle = math.clamp(stickMotor.DesiredAngle + 0.01, -1.2, 1)
					if stickMotor.DesiredAngle ~= prev then playSound("Stick") end
					task.wait()
				end
			end)
		elseif input.KeyCode == Enum.KeyCode.B then
			bucketMotor.MaxVelocity = 1
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.B) do
					local prev = bucketMotor.DesiredAngle
					bucketMotor.DesiredAngle = math.clamp(bucketMotor.DesiredAngle - 0.01, -0.82, 1)
					if bucketMotor.DesiredAngle ~= prev then playSound("Bucket") end
					task.wait()
				end
			end)
		elseif input.KeyCode == Enum.KeyCode.V then
			bucketMotor.MaxVelocity = 1
			task.spawn(function()
				while driving and UIS:IsKeyDown(Enum.KeyCode.V) do
					local prev = bucketMotor.DesiredAngle
					bucketMotor.DesiredAngle = math.clamp(bucketMotor.DesiredAngle + 0.01, -0.82, 1)
					if bucketMotor.DesiredAngle ~= prev then playSound("Bucket") end
					task.wait()
				end
			end)
		elseif input.KeyCode == Enum.KeyCode.H then
			playSound("Horn")
		end
	end
end)

UIS.InputEnded:Connect(function(input)
	if driving then
		if input.KeyCode == Enum.KeyCode.W or input.KeyCode == Enum.KeyCode.S then
			throttle = 0
			guiScripts.FR.Sound:Stop()
			guiScripts.FL.Sound:Stop()
		end
		if input.KeyCode == Enum.KeyCode.A or input.KeyCode == Enum.KeyCode.D then
			steer = 0
			guiScripts.FR.Sound:Stop()
			guiScripts.FL.Sound:Stop()
		end
	end
end)

task.spawn(function()
	while true do
		task.wait()
		if driving then
			local leftSpeed = (throttle * maxSpeed) - (steer * turnSpeed)
			local rightSpeed = (throttle * maxSpeed) + (steer * turnSpeed)
			driveL.AngularVelocity = leftSpeed
			driveR.AngularVelocity = rightSpeed
		end
	end
end)
end)

-- Player
local PlayerFrame = Instance.new("Frame", adm);
PlayerFrame.Visible = false;
PlayerFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
PlayerFrame.Size = UDim2.new(0.80169, 0, 1.05613, -20);
PlayerFrame.Position = UDim2.new(0.19831, 0, 0.00667, 0);
PlayerFrame.BorderColor3 = Color3.fromRGB(28, 43, 54);
PlayerFrame.Name = "Player";
PlayerFrame.BackgroundTransparency = 1;

-- Frame (inside PlayerFrame)
local PlayerInnerFrame = Instance.new("Frame", PlayerFrame);
PlayerInnerFrame.BorderSizePixel = 0;
PlayerInnerFrame.BackgroundColor3 = Color3.fromRGB(39, 39, 39);
PlayerInnerFrame.Size = UDim2.new(0, 396, 0, 146);
PlayerInnerFrame.Position = UDim2.new(0.00961, 0, -0.00671, 0);
PlayerInnerFrame.BorderColor3 = Color3.fromRGB(0, 0, 0);

-- R6
local R6 = Instance.new("TextButton", PlayerInnerFrame);
R6.TextWrapped = true;
R6.RichText = true;
R6.BorderSizePixel = 0;
R6.TextSize = 23;
R6.TextColor3 = Color3.fromRGB(255, 255, 255);
R6.BackgroundColor3 = Color3.fromRGB(55, 55, 55);
R6.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
R6.Size = UDim2.new(0, 107, 0, 27);
R6.BorderColor3 = Color3.fromRGB(0, 0, 0);
R6.Text = "R6";
R6.Name = "R6";
R6.Position = UDim2.new(0.36586, 0, 0.08474, 0);
R6.MouseButton1Click:Connect(function()
------------------------------------------------------------
----        R6 Character            ----
------------------------------------------------------------

local plr = game.Players.LocalPlayer

local Main = game.Players:GetHumanoidDescriptionFromUserId(plr.CharacterAppearanceId)
local morph = game.Players:CreateHumanoidModelFromDescription(Main, Enum.HumanoidRigType.R6)
local oldchar = plr.Character

morph:SetPrimaryPartCFrame(plr.Character.PrimaryPart.CFrame)
morph.Name = plr.Name
plr.Character = morph
morph.Parent = workspace

oldchar:Destroy()

------------------------------------------------------------
----        R6 Animation           ----
------------------------------------------------------------

wait(.1)

local Figure = morph
local Torso = Figure:WaitForChild("Torso")
local RightShoulder = Torso:WaitForChild("Right Shoulder")
local LeftShoulder = Torso:WaitForChild("Left Shoulder")
local RightHip = Torso:WaitForChild("Right Hip")
local LeftHip = Torso:WaitForChild("Left Hip")
local Neck = Torso:WaitForChild("Neck")
local Humanoid = Figure:WaitForChild("Humanoid")
local pose = "Standing"
 
local currentAnim = ""
local currentAnimInstance = nil
local currentAnimTrack = nil
local currentAnimKeyframeHandler = nil
local currentAnimSpeed = 1.0
local animTable = {}
local animNames = { 
idle =     {    
{ id = "http://www.roblox.com/asset/?id=180435571", weight = 9 },
{ id = "http://www.roblox.com/asset/?id=180435792", weight = 1 }
},
walk =     {     
{ id = "http://www.roblox.com/asset/?id=180426354", weight = 10 } 
}, 
run =     {
{ id = "run.xml", weight = 10 } 
}, 
jump =     {
{ id = "http://www.roblox.com/asset/?id=125750702", weight = 10 } 
}, 
fall =     {
{ id = "http://www.roblox.com/asset/?id=180436148", weight = 10 } 
}, 
climb = {
{ id = "http://www.roblox.com/asset/?id=180436334", weight = 10 } 
}, 
sit =     {
{ id = "http://www.roblox.com/asset/?id=178130996", weight = 10 } 
},    
toolnone = {
{ id = "http://www.roblox.com/asset/?id=182393478", weight = 10 } 
},
toolslash = {
{ id = "http://www.roblox.com/asset/?id=129967390", weight = 10 } 
--                { id = "slash.xml", weight = 10 } 
 
},
toollunge = {
{ id = "http://www.roblox.com/asset/?id=129967478", weight = 10 } 
},
wave = {
{ id = "http://www.roblox.com/asset/?id=128777973", weight = 10 } 
},
point = {
{ id = "http://www.roblox.com/asset/?id=128853357", weight = 10 } 
},
dance1 = {
{ id = "http://www.roblox.com/asset/?id=182435998", weight = 10 }, 
{ id = "http://www.roblox.com/asset/?id=182491037", weight = 10 }, 
{ id = "http://www.roblox.com/asset/?id=182491065", weight = 10 } 
},
dance2 = {
{ id = "http://www.roblox.com/asset/?id=182436842", weight = 10 }, 
{ id = "http://www.roblox.com/asset/?id=182491248", weight = 10 }, 
{ id = "http://www.roblox.com/asset/?id=182491277", weight = 10 } 
},
dance3 = {
{ id = "http://www.roblox.com/asset/?id=182436935", weight = 10 }, 
{ id = "http://www.roblox.com/asset/?id=182491368", weight = 10 }, 
{ id = "http://www.roblox.com/asset/?id=182491423", weight = 10 } 
},
laugh = {
{ id = "http://www.roblox.com/asset/?id=129423131", weight = 10 } 
},
cheer = {
{ id = "http://www.roblox.com/asset/?id=129423030", weight = 10 } 
},
}
local dances = {"dance1", "dance2", "dance3"}
 
-- Existance in this list signifies that it is an emote, the value indicates if it is a looping emote
 
local emoteNames = { wave = false, point = false, dance1 = true, dance2 = true, dance3 = true, laugh = false, cheer = false}
 
function configureAnimationSet(name, fileList)
    if (animTable[name] ~= nil) then
        for _, connection in pairs(animTable[name].connections) do
            connection:disconnect()
        end
    end
    animTable[name] = {}
    animTable[name].count = 0
    animTable[name].totalWeight = 0    
    animTable[name].connections = {}
    
    -- check for config values
    
    local config = morph:FindFirstChild(name)
    if (config ~= nil) then
        --        print("Loading anims " .. name)
        
        table.insert(animTable[name].connections, config.ChildAdded:connect(function(child) configureAnimationSet(name, fileList) end))
            table.insert(animTable[name].connections, config.ChildRemoved:connect(function(child) configureAnimationSet(name, fileList) end))
                local idx = 1
                for _, childPart in pairs(config:GetChildren()) do
                    if (childPart:IsA("Animation")) then
                        table.insert(animTable[name].connections, childPart.Changed:connect(function(property) configureAnimationSet(name, fileList) end))
                            animTable[name][idx] = {}
                            animTable[name][idx].anim = childPart
                            local weightObject = childPart:FindFirstChild("Weight")
                            if (weightObject == nil) then
                                animTable[name][idx].weight = 1
                            else
                                animTable[name][idx].weight = weightObject.Value
                            end
                            animTable[name].count = animTable[name].count + 1
                            animTable[name].totalWeight = animTable[name].totalWeight + animTable[name][idx].weight
                            --            print(name .. " [" .. idx .. "] " .. animTable[name][idx].anim.AnimationId .. " (" .. animTable[name][idx].weight .. ")")
                            
                            idx = idx + 1
                        end
                    end
                end
                
                -- fallback to defaults
                
                if (animTable[name].count <= 0) then
                    for idx, anim in pairs(fileList) do
                        animTable[name][idx] = {}
                        animTable[name][idx].anim = Instance.new("Animation")
                        animTable[name][idx].anim.Name = name
                        animTable[name][idx].anim.AnimationId = anim.id
                        animTable[name][idx].weight = anim.weight
                        animTable[name].count = animTable[name].count + 1
                        animTable[name].totalWeight = animTable[name].totalWeight + anim.weight
                        --            print(name .. " [" .. idx .. "] " .. anim.id .. " (" .. anim.weight .. ")")
                        
                    end
                end
            end
            
            -- Setup animation objects
            
            function scriptChildModified(child)
                local fileList = animNames[child.Name]
                if (fileList ~= nil) then
                    configureAnimationSet(child.Name, fileList)
                end    
            end
            
            morph.ChildAdded:connect(scriptChildModified)
            morph.ChildRemoved:connect(scriptChildModified)
            
            
            for name, fileList in pairs(animNames) do 
                configureAnimationSet(name, fileList)
            end    
            
            -- ANIMATION
            
            
            -- declarations
            
            local toolAnim = "None"
            local toolAnimTime = 0
            
            local jumpAnimTime = 0
            local jumpAnimDuration = 0.3
            
            local toolTransitionTime = 0.1
            local fallTransitionTime = 0.3
            local jumpMaxLimbVelocity = 0.75
            
            -- functions
            
            
            function stopAllAnimations()
                local oldAnim = currentAnim
                
                -- return to idle if finishing an emote
                
                if (emoteNames[oldAnim] ~= nil and emoteNames[oldAnim] == false) then
                    oldAnim = "idle"
                end
                
                currentAnim = ""
                currentAnimInstance = nil
                if (currentAnimKeyframeHandler ~= nil) then
                    currentAnimKeyframeHandler:disconnect()
                end
                
                if (currentAnimTrack ~= nil) then
                    currentAnimTrack:Stop()
                    currentAnimTrack:Destroy()
                    currentAnimTrack = nil
                end
                return oldAnim
            end
            
            function setAnimationSpeed(speed)
                if speed ~= currentAnimSpeed then
                    currentAnimSpeed = speed
                    currentAnimTrack:AdjustSpeed(currentAnimSpeed)
                end
            end
            
            function keyFrameReachedFunc(frameName)
                if (frameName == "End") then
                    
                    local repeatAnim = currentAnim
                    -- return to idle if finishing an emote
                    
                    if (emoteNames[repeatAnim] ~= nil and emoteNames[repeatAnim] == false) then
                        repeatAnim = "idle"
                    end
                    
                    local animSpeed = currentAnimSpeed
                    playAnimation(repeatAnim, 0.0, Humanoid)
                    setAnimationSpeed(animSpeed)
                end
            end
            
            -- Preload animations
            
            function playAnimation(animName, transitionTime, humanoid) 
                
                local roll = math.random(1, animTable[animName].totalWeight) 
                local origRoll = roll
                local idx = 1
                while (roll > animTable[animName][idx].weight) do
                    roll = roll - animTable[animName][idx].weight
                    idx = idx + 1
                end
                --        print(animName .. " " .. idx .. " [" .. origRoll .. "]")
                
                local anim = animTable[animName][idx].anim
                
                -- switch animation        
                
                if (anim ~= currentAnimInstance) then
                    
                    if (currentAnimTrack ~= nil) then
                        currentAnimTrack:Stop(transitionTime)
                        currentAnimTrack:Destroy()
                    end
                    
                    currentAnimSpeed = 1.0
                    
                    -- load it to the humanoid; get AnimationTrack
                    
                    currentAnimTrack = humanoid:LoadAnimation(anim)
                    currentAnimTrack.Priority = Enum.AnimationPriority.Core
                    
                    -- play the animation
                    
                    currentAnimTrack:Play(transitionTime)
                    currentAnim = animName
                    currentAnimInstance = anim
                    
                    -- set up keyframe name triggers
                    
                    if (currentAnimKeyframeHandler ~= nil) then
                        currentAnimKeyframeHandler:disconnect()
                    end
                    currentAnimKeyframeHandler = currentAnimTrack.KeyframeReached:connect(keyFrameReachedFunc)
                    
                end
                
            end
            
            -------------------------------------------------------------------------------------------
            
            -------------------------------------------------------------------------------------------
            
            
            local toolAnimName = ""
            local toolAnimTrack = nil
            local toolAnimInstance = nil
            local currentToolAnimKeyframeHandler = nil
            
            function toolKeyFrameReachedFunc(frameName)
                if (frameName == "End") then
                    --        print("Keyframe : ".. frameName)    
                    
                    playToolAnimation(toolAnimName, 0.0, Humanoid)
                end
            end
            
            
            function playToolAnimation(animName, transitionTime, humanoid, priority)     
                
                local roll = math.random(1, animTable[animName].totalWeight) 
                local origRoll = roll
                local idx = 1
                while (roll > animTable[animName][idx].weight) do
                    roll = roll - animTable[animName][idx].weight
                    idx = idx + 1
                end
                --        print(animName .. " * " .. idx .. " [" .. origRoll .. "]")
                
                local anim = animTable[animName][idx].anim
                
                if (toolAnimInstance ~= anim) then
                    
                    if (toolAnimTrack ~= nil) then
                        toolAnimTrack:Stop()
                        toolAnimTrack:Destroy()
                        transitionTime = 0
                    end
                    
                    -- load it to the humanoid; get AnimationTrack
                    
                    toolAnimTrack = humanoid:LoadAnimation(anim)
                    if priority then
                        toolAnimTrack.Priority = priority
                    end
                    
                    -- play the animation
                    
                    toolAnimTrack:Play(transitionTime)
                    toolAnimName = animName
                    toolAnimInstance = anim
                    
                    currentToolAnimKeyframeHandler = toolAnimTrack.KeyframeReached:connect(toolKeyFrameReachedFunc)
                end
            end
            
            function stopToolAnimations()
                local oldAnim = toolAnimName
                
                if (currentToolAnimKeyframeHandler ~= nil) then
                    currentToolAnimKeyframeHandler:disconnect()
                end
                
                toolAnimName = ""
                toolAnimInstance = nil
                if (toolAnimTrack ~= nil) then
                    toolAnimTrack:Stop()
                    toolAnimTrack:Destroy()
                    toolAnimTrack = nil
                end
                
                
                return oldAnim
            end
            
            -------------------------------------------------------------------------------------------
            
            -------------------------------------------------------------------------------------------
            
            
            
            function onRunning(speed)
                if speed > 0.01 then
                    playAnimation("walk", 0.1, Humanoid)
                    if currentAnimInstance and currentAnimInstance.AnimationId == "http://www.roblox.com/asset/?id=180426354" then
                        setAnimationSpeed(speed / 14.5)
                    end
                    pose = "Running"
                else
                    if emoteNames[currentAnim] == nil then
                        playAnimation("idle", 0.1, Humanoid)
                        pose = "Standing"
                    end
                end
            end
            
            function onDied()
                pose = "Dead"
            end
            
            function onJumping()
                playAnimation("jump", 0.1, Humanoid)
                jumpAnimTime = jumpAnimDuration
                pose = "Jumping"
            end
            
            function onClimbing(speed)
                playAnimation("climb", 0.1, Humanoid)
                setAnimationSpeed(speed / 12.0)
                pose = "Climbing"
            end
            
            function onGettingUp()
                pose = "GettingUp"
            end
            
            function onFreeFall()
                if (jumpAnimTime <= 0) then
                    playAnimation("fall", fallTransitionTime, Humanoid)
                end
                pose = "FreeFall"
            end
            
            function onFallingDown()
                pose = "FallingDown"
            end
            
            function onSeated()
                pose = "Seated"
            end
            
            function onPlatformStanding()
                pose = "PlatformStanding"
            end
            
            function onSwimming(speed)
                if speed > 0 then
                    pose = "Running"
                else
                    pose = "Standing"
                end
            end
            
            function getTool()    
                for _, kid in ipairs(Figure:GetChildren()) do
                    if kid.className == "Tool" then return kid end
                end
                return nil
            end
            
            function getToolAnim(tool)
                for _, c in ipairs(tool:GetChildren()) do
                    if c.Name == "toolanim" and c.className == "StringValue" then
                        return c
                    end
                end
                return nil
            end
            
            function animateTool()
                
                if (toolAnim == "None") then
                    playToolAnimation("toolnone", toolTransitionTime, Humanoid, Enum.AnimationPriority.Idle)
                    return
                end
                
                if (toolAnim == "Slash") then
                    playToolAnimation("toolslash", 0, Humanoid, Enum.AnimationPriority.Action)
                    return
                end
                
                if (toolAnim == "Lunge") then
                    playToolAnimation("toollunge", 0, Humanoid, Enum.AnimationPriority.Action)
                    return
                end
            end
            
            function moveSit()
                RightShoulder.MaxVelocity = 0.15
                LeftShoulder.MaxVelocity = 0.15
                RightShoulder:SetDesiredAngle(3.14 /2)
                LeftShoulder:SetDesiredAngle(-3.14 /2)
                RightHip:SetDesiredAngle(3.14 /2)
                LeftHip:SetDesiredAngle(-3.14 /2)
            end
            
            local lastTick = 0
            
            function move(time)
                local amplitude = 1
                local frequency = 1
                local deltaTime = time - lastTick
                lastTick = time
                
                local climbFudge = 0
                local setAngles = false
                
                if (jumpAnimTime > 0) then
                    jumpAnimTime = jumpAnimTime - deltaTime
                end
                
                if (pose == "FreeFall" and jumpAnimTime <= 0) then
                    playAnimation("fall", fallTransitionTime, Humanoid)
                elseif (pose == "Seated") then
                    playAnimation("sit", 0.5, Humanoid)
                    return
                elseif (pose == "Running") then
                    playAnimation("walk", 0.1, Humanoid)
                elseif (pose == "Dead" or pose == "GettingUp" or pose == "FallingDown" or pose == "Seated" or pose == "PlatformStanding") then
                    --        print("Wha " .. pose)
                    
                    stopAllAnimations()
                    amplitude = 0.1
                    frequency = 1
                    setAngles = true
                end
                
                if (setAngles) then
                    local desiredAngle = amplitude * math.sin(time * frequency)
                    
                    RightShoulder:SetDesiredAngle(desiredAngle + climbFudge)
                    LeftShoulder:SetDesiredAngle(desiredAngle - climbFudge)
                    RightHip:SetDesiredAngle(-desiredAngle)
                    LeftHip:SetDesiredAngle(-desiredAngle)
                end
                
                -- Tool Animation handling
                
                local tool = getTool()
                if tool and tool:FindFirstChild("Handle") then
                    
                    local animStringValueObject = getToolAnim(tool)
                    
                    if animStringValueObject then
                        toolAnim = animStringValueObject.Value
                        -- message recieved, delete StringValue
                        
                        animStringValueObject.Parent = nil
                        toolAnimTime = time + .3
                    end
                    
                    if time > toolAnimTime then
                        toolAnimTime = 0
                        toolAnim = "None"
                    end
                    
                    animateTool()        
                else
                    stopToolAnimations()
                    toolAnim = "None"
                    toolAnimInstance = nil
                    toolAnimTime = 0
                end
            end
            
            -- connect events
            
            Humanoid.Died:connect(onDied)
            Humanoid.Running:connect(onRunning)
            Humanoid.Jumping:connect(onJumping)
            Humanoid.Climbing:connect(onClimbing)
            Humanoid.GettingUp:connect(onGettingUp)
            Humanoid.FreeFalling:connect(onFreeFall)
            Humanoid.FallingDown:connect(onFallingDown)
            Humanoid.Seated:connect(onSeated)
            Humanoid.PlatformStanding:connect(onPlatformStanding)
            Humanoid.Swimming:connect(onSwimming)
            
            -- setup emote chat hook
            
            game:GetService("Players").LocalPlayer.Chatted:connect(function(msg)
                local emote = ""
                if msg == "/e dance" then
                    emote = dances[math.random(1, #dances)]
                elseif (string.sub(msg, 1, 3) == "/e ") then
                    emote = string.sub(msg, 4)
                elseif (string.sub(msg, 1, 7) == "/emote ") then
                    emote = string.sub(msg, 8)
                end
                
                if (pose == "Standing" and emoteNames[emote] ~= nil) then
                    playAnimation(emote, 0.1, Humanoid)
                end
                
            end)
            
            
            -- main program
            
            
            -- initialize to idle
            
            playAnimation("idle", 0.1, Humanoid)
            pose = "Standing"
            
            while Figure.Parent ~= nil do
                local _, time = wait(0.1)
                move(time)
            end
           
------------------------------------------------------------
----        Humanoid Health       ----
------------------------------------------------------------


-- Gradually regenerates the Humanoid's Health over time.
 
 
local REGEN_RATE = 1/100 -- Regenerate this fraction of MaxHealth per second.
 
local REGEN_STEP = 1 -- Wait this long between each regeneration step.
 
 
--------------------------------------------------------------------------------
 
 
local Character = morph
local Humanoid = Character:WaitForChild'Humanoid'
 
--------------------------------------------------------------------------------
 
 
while true do
    while Humanoid.Health < Humanoid.MaxHealth do
        local dt = wait(REGEN_STEP)
        local dh = dt*REGEN_RATE*Humanoid.MaxHealth
        Humanoid.Health = math.min(Humanoid.Health + dh, Humanoid.MaxHealth)
    end
    Humanoid.HealthChanged:Wait()
end

-- This Is All R6 Function Made By 00de0l end end
end)

-- Hidden
local Hidden = Instance.new("TextButton", PlayerInnerFrame);
Hidden.TextWrapped = true;
Hidden.BorderSizePixel = 0;
Hidden.TextSize = 23;
Hidden.TextColor3 = Color3.fromRGB(255, 255, 255);
Hidden.BackgroundColor3 = Color3.fromRGB(55, 55, 55);
Hidden.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Hidden.Size = UDim2.new(0, 107, 0, 27);
Hidden.BorderColor3 = Color3.fromRGB(0, 0, 0);
Hidden.Text = "Hidden";
Hidden.Name = "Hidden";
Hidden.Position = UDim2.new(0.71423, 0, 0.08474, 0);

-- Dex
local Dex = Instance.new("TextButton", PlayerInnerFrame);
Dex.TextWrapped = true;
Dex.BorderSizePixel = 0;
Dex.TextSize = 23;
Dex.TextColor3 = Color3.fromRGB(255, 255, 255);
Dex.BackgroundColor3 = Color3.fromRGB(55, 55, 55);
Dex.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Dex.Size = UDim2.new(0, 107, 0, 27);
Dex.BorderColor3 = Color3.fromRGB(0, 0, 0);
Dex.Text = "Dex";
Dex.Name = "Dex";
Dex.Position = UDim2.new(0.01749, 0, 0.08474, 0);
Dex.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"))()
end)

-- Frame
local Frame_eb = Instance.new("Frame", PlayerFrame);
Frame_eb.BorderSizePixel = 0;
Frame_eb.BackgroundColor3 = Color3.fromRGB(34, 34, 34);
Frame_eb.Size = UDim2.new(0, 398, 0, 134);
Frame_eb.Position = UDim2.new(0.01, 0, 0.52, 0);
Frame_eb.BorderColor3 = Color3.fromRGB(0, 0, 0);

-- ScrollBar
local ScrollBar = Instance.new("Frame", PlayerFrame);
ScrollBar.Visible = false;
ScrollBar.BorderSizePixel = 0;
ScrollBar.BackgroundColor3 = Color3.fromRGB(43, 43, 43);
ScrollBar.Size = UDim2.new(0.00253, 16, 0.54208, -48);
ScrollBar.Position = UDim2.new(1, -16, 0.51829, 0);
ScrollBar.BorderColor3 = Color3.fromRGB(28, 43, 54);
ScrollBar.Name = "ScrollBar";

-- Down
local Down = Instance.new("ImageButton", ScrollBar);
Down.BorderSizePixel = 0;
Down.AutoButtonColor = false;
Down.BackgroundTransparency = 1;
Down.Size = UDim2.new(0, 16, 0, 16);
Down.BorderColor3 = Color3.fromRGB(28, 43, 54);
Down.Name = "Down";
Down.Position = UDim2.new(0, 0, 1, -16);

-- Arrow
local Arrow_ed = Instance.new("Frame", Down);
Arrow_ed.Size = UDim2.new(0, 16, 0, 16);
Arrow_ed.BorderColor3 = Color3.fromRGB(28, 43, 54);
Arrow_ed.Name = "Arrow";
Arrow_ed.BackgroundTransparency = 1;

-- Frame (inside Arrow)
local Frame_ef = Instance.new("Frame", Arrow_ed);
Frame_ef.BorderSizePixel = 0;
Frame_ef.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_ef.Size = UDim2.new(0, 7, 0, 1);
Frame_ef.Position = UDim2.new(0, 5, 0, 7);
Frame_ef.BorderColor3 = Color3.fromRGB(28, 43, 54);

-- Frame (inside Arrow)
local Frame_f0 = Instance.new("Frame", Arrow_ed);
Frame_f0.BorderSizePixel = 0;
Frame_f0.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_f0.Size = UDim2.new(0, 5, 0, 1);
Frame_f0.Position = UDim2.new(0, 6, 0, 8);
Frame_f0.BorderColor3 = Color3.fromRGB(28, 43, 54);

-- Frame (inside Arrow)
local Frame_f1 = Instance.new("Frame", Arrow_ed);
Frame_f1.BorderSizePixel = 0;
Frame_f1.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_f1.Size = UDim2.new(0, 3, 0, 1);
Frame_f1.Position = UDim2.new(0, 7, 0, 9);
Frame_f1.BorderColor3 = Color3.fromRGB(28, 43, 54);

-- Frame (inside Arrow)
local Frame_f2 = Instance.new("Frame", Arrow_ed);
Frame_f2.BorderSizePixel = 0;
Frame_f2.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_f2.Size = UDim2.new(0, 1, 0, 1);
Frame_f2.Position = UDim2.new(0, 8, 0, 10);
Frame_f2.BorderColor3 = Color3.fromRGB(28, 43, 54);

-- Up
local Up = Instance.new("ImageButton", ScrollBar);
Up.BorderSizePixel = 0;
Up.AutoButtonColor = false;
Up.BackgroundTransparency = 1;
Up.Size = UDim2.new(0, 16, 0, 16);
Up.BorderColor3 = Color3.fromRGB(28, 43, 54);
Up.Name = "Up";

-- Arrow
local Arrow_f4 = Instance.new("Frame", Up);
Arrow_f4.Size = UDim2.new(0, 16, 0, 16);
Arrow_f4.BorderColor3 = Color3.fromRGB(28, 43, 54);
Arrow_f4.Name = "Arrow";
Arrow_f4.BackgroundTransparency = 1;

-- Frame (inside Arrow)
local Frame_f5 = Instance.new("Frame", Arrow_f4);
Frame_f5.BorderSizePixel = 0;
Frame_f5.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_f5.Size = UDim2.new(0, 7, 0, 1);
Frame_f5.Position = UDim2.new(0, 5, 0, 9);
Frame_f5.BorderColor3 = Color3.fromRGB(28, 43, 54);
Frame_f5.BackgroundTransparency = 0.5;

-- Frame (inside Arrow)
local Frame_f6 = Instance.new("Frame", Arrow_f4);
Frame_f6.BorderSizePixel = 0;
Frame_f6.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_f6.Size = UDim2.new(0, 5, 0, 1);
Frame_f6.Position = UDim2.new(0, 6, 0, 8);
Frame_f6.BorderColor3 = Color3.fromRGB(28, 43, 54);
Frame_f6.BackgroundTransparency = 0.5;

-- Frame (inside Arrow)
local Frame_f7 = Instance.new("Frame", Arrow_f4);
Frame_f7.BorderSizePixel = 0;
Frame_f7.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_f7.Size = UDim2.new(0, 3, 0, 1);
Frame_f7.Position = UDim2.new(0, 7, 0, 7);
Frame_f7.BorderColor3 = Color3.fromRGB(28, 43, 54);
Frame_f7.BackgroundTransparency = 0.5;

-- Frame (inside Arrow)
local Frame_f8 = Instance.new("Frame", Arrow_f4);
Frame_f8.BorderSizePixel = 0;
Frame_f8.BackgroundColor3 = Color3.fromRGB(221, 221, 221);
Frame_f8.Size = UDim2.new(0, 1, 0, 1);
Frame_f8.Position = UDim2.new(0, 8, 0, 6);
Frame_f8.BorderColor3 = Color3.fromRGB(28, 43, 54);
Frame_f8.BackgroundTransparency = 0.5;
	
-- scrollingframe
local scrollingframe = Instance.new("ScrollingFrame", PlayerFrame);
scrollingframe.Active = true;
scrollingframe.BorderSizePixel = 0;
scrollingframe.CanvasSize = UDim2.new(0, 0, 0, 120);
scrollingframe.TopImage = "rbxassetid://0";
scrollingframe.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
scrollingframe.Name = "scrollingframe";
scrollingframe.BottomImage = "rbxassetid://0";
scrollingframe.Size = UDim2.new(0, 398, 0, 120);
scrollingframe.ScrollBarImageColor3 = Color3.fromRGB(85, 85, 85);
scrollingframe.Position = UDim2.new(0.01, 0, 0.52, 0);
scrollingframe.BorderColor3 = Color3.fromRGB(0, 0, 0);
scrollingframe.ScrollBarThickness = 16;
scrollingframe.BackgroundTransparency = 1;

local scrollingFrame = scrollingframe
local scrollbar = ScrollBar

local Up = Up
local Down = Down

local maxCanvasPosition = Vector2.new(0, 0)
local previousMaxCanvasPosition = Vector2.new(0, 0)

local function updateCanvasSize()
	local totalHeight = 0
	local children = scrollingFrame:GetChildren()

	for _, child in pairs(children) do
		if child:IsA("TextButton") then
			totalHeight = totalHeight + child.Size.Y.Offset
			if scrollbar.Visible then
				child.Size = UDim2.new(1, -16, 0, 20)
			else
				child.Size = UDim2.new(1, 0, 0, 20)
			end
		end
	end

	scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, totalHeight)

	local isScrollable = totalHeight > scrollingFrame.AbsoluteSize.Y
	scrollbar.Visible = isScrollable
end

scrollingFrame.ChildAdded:Connect(updateCanvasSize)
scrollingFrame.ChildRemoved:Connect(updateCanvasSize)
updateCanvasSize()

local function updateArrowTransparency()
	local isAtTop = scrollingFrame.CanvasPosition.Y <= 0
	local isAtBottom = scrollingFrame.CanvasPosition.Y >= scrollingFrame.CanvasSize.Y.Offset - scrollingFrame.AbsoluteSize.Y

	local upArrowTransparency = isAtTop and 0.5 or 0
	local downArrowTransparency = isAtBottom and 0.5 or 0
	
	for _, v in pairs(Up.Arrow:GetChildren()) do
		v.BackgroundTransparency = upArrowTransparency
	end

	for _, v in pairs(Down.Arrow:GetChildren()) do
		v.BackgroundTransparency = downArrowTransparency
	end
end

scrollingFrame:GetPropertyChangedSignal("CanvasPosition"):Connect(updateArrowTransparency)
updateArrowTransparency()


local isUpButtonDown = false
local isDownButtonDown = false

local function scroll(direction)
	if direction == "up" then
		scrollingFrame.CanvasPosition = scrollingFrame.CanvasPosition - Vector2.new(0, 15)
	elseif direction == "down" then
		scrollingFrame.CanvasPosition = scrollingFrame.CanvasPosition + Vector2.new(0, 15)
	end
end

Up.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		isUpButtonDown = true
		while isUpButtonDown do
			scroll("up")
			wait(0.1)
		end
	end
end)

Up.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		isUpButtonDown = false
	end
end)

Down.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		isDownButtonDown = true
		while isDownButtonDown do
			scroll("down")
			wait(0.1)
		end
	end
end)

Down.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		isDownButtonDown = false
	end
end)

-- UIListLayout
local UIListLayout_fb = Instance.new("UIListLayout", scrollingframe);
UIListLayout_fb.SortOrder = Enum.SortOrder.LayoutOrder;

-- TextButton
local TextButton_fc = Instance.new("TextButton", scrollingframe);
TextButton_fc.TextWrapped = true;
TextButton_fc.BorderSizePixel = 0;
TextButton_fc.TextSize = 14;
TextButton_fc.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_fc.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_fc.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_fc.Size = UDim2.new(0, 404, 0, 20);
TextButton_fc.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_fc.Text = "doggoarmy.txt";
TextButton_fc.Position = UDim2.new(0, 0, -0, 0);
TextButton_fc.MouseButton1Click:Connect(function()
--|SERVICES|--
local physics = game:GetService("PhysicsService")
local tweening = game:GetService("TweenService")
local insert = game:GetService("InsertService")
--|BASICS|--
local player = game:GetService("Players").LocalPlayer
local user = player:GetMouse()
local char = player.Character or player.CharacterAdded:Wait()
local root = char:WaitForChild("HumanoidRootPart")
local hum = char:WaitForChild("Humanoid")
local gui = player:WaitForChild("PlayerGui")
local mouse = player:GetMouse()
--|OTHER|--
local status = "PASSIVE"
local side = "RIGHT"
local class = "NORMAL"
local focus = nil
local number = 0
--//SETTING\\--
local zkill = Instance.new("Vector3Value")
zkill.Name = "ZombieKill"
zkill.Parent = gui
--//FUNCTIONS\\--
local function write(text,object)
    if object:IsA("TextLabel") == true then
        local count = object:FindFirstChild("Count")
        if count == nil then
            count = Instance.new("NumberValue")
            count.Parent = object
            count.Name = "Count"
            count.Value = count.Value + 1
        else
            count.Value = count.Value + 1
        end
        local startcount = count.Value
        for i = 1,#text do
            if count.Value == startcount then
                local letter = string.sub(text,i,i)
                object.Text = string.sub(text,1,i)
                local sound = Instance.new("Sound")
                sound.Parent = gui
                sound.Name = "Tick"
                sound.PlaybackSpeed = 1.5
                sound.SoundId = "rbxassetid://151715959"
                sound.Playing = true
                sound.TimePosition = 0
                game:GetService("Debris"):AddItem(sound,sound.TimeLength)
                wait(0.01)
            else
                break
            end
        end
    end
end
local function shake()
    if hum then
        delay(0,function()
            for shake = 1,4,1 do
                local length = 0.02
                local propertieschanged = {
                CameraOffset = Vector3.new(2,1,-1.2)
                }
                local info = TweenInfo.new(length,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                local tween = tweening:Create(hum,info,propertieschanged)
                tween:Play()
                wait(length)
                local length = 0.01
                local propertieschanged = {
                CameraOffset = Vector3.new(-1.6,-0.8,3)
                }
                local info = TweenInfo.new(length,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                local tween = tweening:Create(hum,info,propertieschanged)
                tween:Play()
                wait(length)
                local length = 0.03
                local propertieschanged = {
                CameraOffset = Vector3.new(-2.1,1.1,1.4)
                }
                local info = TweenInfo.new(length,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                local tween = tweening:Create(hum,info,propertieschanged)
                tween:Play()
                wait(length)
            end
            local propertieschanged = {
            CameraOffset = Vector3.new(0,0,0)
            }
            local info = TweenInfo.new(0.03,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
            local tween = tweening:Create(hum,info,propertieschanged)
            tween:Play()
        end)
    end
end
local function create(special)
    local npcmodel = game:GetObjects("rbxassetid://257489726")[1]
--Made by Luckymaxer
 
Figure = npcmodel
 
RunService = game:GetService("RunService")
 
Creator = Figure:FindFirstChild("Creator")
 
Humanoid = Figure:WaitForChild("Humanoid")
Head = Figure:WaitForChild("Head")
Torso = Figure:WaitForChild("Torso")
 
Neck = Torso:WaitForChild("Neck")
LeftShoulder = Torso:WaitForChild("Left Shoulder")
RightShoulder = Torso:WaitForChild("Right Shoulder")
LeftHip = Torso:WaitForChild("Left Hip")
RightHip = Torso:WaitForChild("Right Hip")
 
for i, v in pairs({--[[Neck, ]]LeftShoulder, RightShoulder, LeftHip, RightHip}) do
    if v and v.Parent then
        v.DesiredAngle = 0
        v.CurrentAngle = 0
    end
end
 
Pose = "None"
LastPose = Pose
PoseTime = tick()
 
ToolAnimTime = 0
 
function SetPose(pose)
    LastPose = Pose
    Pose = pose
    PoseTime = tick()
end
 
function OnRunning(Speed)
    if Speed > 0 then
        SetPose("Running")
    else
        SetPose("Standing")
    end
end
 
function OnDied()
    SetPose("Dead")
end
 
function OnJumping()
    SetPose("Jumping")
end
 
function OnClimbing()
    SetPose("Climbing")
end
 
function OnGettingUp()
    SetPose("GettingUp")
end
 
function OnFreeFall()
    SetPose("FreeFall")
end
 
function OnFallingDown()
    SetPose("FallingDown")
end
 
function OnSeated()
    SetPose("Seated")
end
 
function OnPlatformStanding()
    SetPose("PlatformStanding")
end
 
function OnSwimming(Speed)
    return OnRunning(Speed)
end
 
function MoveJump()
    RightShoulder.MaxVelocity = 0.15
    LeftShoulder.MaxVelocity = 0.15
    RightShoulder.DesiredAngle = 0.5
    LeftShoulder.DesiredAngle = -0.5
    RightHip.DesiredAngle = -0.5
    LeftHip.DesiredAngle = 0.5
end
 
function MoveFreeFall()
    RightShoulder.MaxVelocity = 0.15
    LeftShoulder.MaxVelocity = 0.15
    RightShoulder.DesiredAngle = 0.5
    LeftShoulder.DesiredAngle = -0.5
    RightHip.DesiredAngle = -0.5
    LeftHip.DesiredAngle = 0.5
end
 
function MoveSit()
    RightShoulder.MaxVelocity = 0.15
    LeftShoulder.MaxVelocity = 0.15
    RightShoulder.DesiredAngle = (math.pi / 2)
    LeftShoulder.DesiredAngle = -(math.pi / 2)
    RightHip.DesiredAngle = 1
    LeftHip.DesiredAngle = -1
end
 
function GetTool()    
    for i, v in pairs(Figure:GetChildren()) do
        if v:IsA("Tool") then
            return v
        end
    end
end
 
function GetToolAnim(Tool)
    for i, v in pairs(Tool:GetChildren()) do
        if v:IsA("StringValue") and v.Name == "ToolAnim" then
            return v
        end
    end
    return nil
end
 
function AnimateTool()
    
    if (ToolAnim == "None") then
        return
    end
    
    if (ToolAnim == "Slash") then
        RightShoulder.MaxVelocity = 0.5
        RightShoulder.DesiredAngle = 0
        return
    end
    
    if (ToolAnim == "Lunge") then
        RightShoulder.MaxVelocity = 0.5
        LeftShoulder.MaxVelocity = 0.5
        RightHip.MaxVelocity = 0.5
        LeftHip.MaxVelocity = 0.5
        RightShoulder.DesiredAngle = (math.pi / 2)
        LeftShoulder.DesiredAngle = 0 
        RightHip.DesiredAngle = (math.pi / 2)
        LeftHip.DesiredAngle = 1
        return
    end
    
end
 
function Move(Time)
    local LimbAmplitude
    local LimbFrequency
    local NeckAmplitude
    local NeckFrequency
    local NeckDesiredAngle
    
    if (Pose == "Jumping") then
        MoveJump()
        return
    elseif (Pose == "FreeFall") then
        MoveFreeFall()
        return
    elseif (Pose == "Seated") then
        MoveSit()
        return
    end
    
    local ClimbFudge = 0
    
    if (Pose == "Running") then
        RightShoulder.MaxVelocity = 0.15
        LeftShoulder.MaxVelocity = 0.15
        LimbAmplitude = 1
        LimbFrequency = 9
        NeckAmplitude = 0
        NeckFrequency = 0
        NeckDesiredAngle = 0
        --[[if Creator and Creator.Value and Creator.Value:IsA("Player") and Creator.Value.Character then
        local CreatorCharacter = Creator.Value.Character
        local CreatorHead = CreatorCharacter:FindFirstChild("Head")
        if CreatorHead then
            local TargetPosition = CreatorHead.Position
            local Direction = Torso.CFrame.lookVector
            local HeadPosition = Head.Position
            NeckDesiredAngle = ((((HeadPosition - TargetPosition).Unit):Cross(Direction)).Y / 4)
        end
    end]]
elseif (Pose == "Climbing") then
    RightShoulder.MaxVelocity = 0.5
    LeftShoulder.MaxVelocity = 0.5
    LimbAmplitude = 1
    LimbFrequency = 9
    NeckAmplitude = 0
    NeckFrequency = 0
    NeckDesiredAngle = 0
    ClimbFudge = math.pi
else
    LimbAmplitude = 0.1
    LimbFrequency = 1
    NeckAmplitude = 0.25
    NeckFrequency = 1.25
end
 
NeckDesiredAngle = ((not NeckDesiredAngle and (NeckAmplitude * math.sin(Time * NeckFrequency))) or NeckDesiredAngle)
LimbDesiredAngle = (LimbAmplitude * math.sin(Time * LimbFrequency))

--Neck.DesiredAngle = NeckDesiredAngle
RightShoulder.DesiredAngle = (LimbDesiredAngle + ClimbFudge)
LeftShoulder.DesiredAngle = (LimbDesiredAngle - ClimbFudge)
RightHip.DesiredAngle = -LimbDesiredAngle
LeftHip.DesiredAngle = -LimbDesiredAngle

local Tool = GetTool()
 
if Tool then
    
    AnimStringValueObject = GetToolAnim(Tool)
    
    if AnimStringValueObject then
        ToolAnim = AnimStringValueObject.Value
        if AnimStringValueObject and AnimStringValueObject.Parent then
            AnimStringValueObject:Destroy()
        end
        ToolAnimTime = (Time + 0.3)
    end
    
    if Time > ToolAnimTime then
        ToolAnimTime = 0
        ToolAnim = "None"
    end
    
    AnimateTool()
    
else
    ToolAnim = "None"
    ToolAnimTime = 0
end

end
 
Humanoid.Died:connect(OnDied)
Humanoid.Running:connect(OnRunning)
Humanoid.Jumping:connect(OnJumping)
Humanoid.Climbing:connect(OnClimbing)
Humanoid.GettingUp:connect(OnGettingUp)
Humanoid.FreeFalling:connect(OnFreeFall)
Humanoid.FallingDown:connect(OnFallingDown)
Humanoid.Seated:connect(OnSeated)
Humanoid.PlatformStanding:connect(OnPlatformStanding)
Humanoid.Swimming:connect(OnSwimming)
 
Humanoid:ChangeState(Enum.HumanoidStateType.None)
 
RunService.Stepped:connect(function()
    local _, Time = wait(0.1)
    Move(Time)
end)

--Made by Luckymaxer

Humanoid = Figure:WaitForChild("Humanoid")

Regenerating = false

function RegenerateHealth()
    if Regenerating then
        return
    end
    Regenerating = true
    while Humanoid.Health < Humanoid.MaxHealth do
        local Second = wait(1)
        local Health = Humanoid.Health
        if Health > 0 and Health < Humanoid.MaxHealth then
            local NewHealthDelta = (0.01 * Second * Humanoid.MaxHealth)
            Health = (Health + NewHealthDelta)
            Humanoid.Health = math.min(Health, Humanoid.MaxHealth)
        end
    end
    if Humanoid.Health > Humanoid.MaxHealth then
        Humanoid.Health = Humanoid.MaxHealth
    end
    Regenerating = false
end

Humanoid.HealthChanged:connect(RegenerateHealth)

    local doge = npcmodel:Clone()
    doge.Parent = workspace
    if npcmodel and npcmodel.Parent then
        npcmodel:Destroy()
    end
    local parts = doge:WaitForChild("Head"):GetChildren()
    for i,object in pairs(parts) do
        if object:IsA("BasePart") == true and object.Name ~= "Fire" then
            object:Destroy()
        end
    end
    number = number + 1
    --[[
    local doge = Instance.new("Part")
    doge.Parent = workspace
    doge.Parent = workspace
    doge.CastShadow = false
    doge.Anchored = false
    doge.CanCollide = true
    doge.Massless = true
    doge.Size = Vector3.new(1,2,4)
    doge.CFrame = root.CFrame + root.CFrame.lookVector * 5 + Vector3.new(0,4,0)
    --]]
    if special == nil then
        doge:WaitForChild("Torso").CFrame = root.CFrame + root.CFrame.lookVector * 5 + Vector3.new(0,4,0)
    else
        doge:WaitForChild("Torso").CFrame = CFrame.new(zkill.Value + Vector3.new(0,6,0))
    end
    local particle = Instance.new("ParticleEmitter")
    particle.Parent = doge:WaitForChild("Torso")
    particle.Enabled = true
    particle.ZOffset = 2
    particle.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,1),NumberSequenceKeypoint.new(0.2,0),NumberSequenceKeypoint.new(1,1)})
    particle.Speed = NumberRange.new(3)
    particle.LightEmission = 1
    particle.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(math.random(0,255),math.random(0,255),math.random(0,255))),ColorSequenceKeypoint.new(1,Color3.fromRGB(math.random(0,255),math.random(0,255),math.random(0,255)))})
    particle.SpreadAngle = Vector2.new(360,360)
    particle.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2),NumberSequenceKeypoint.new(1,0)})
    particle.Rate = 500
    particle.Rotation = NumberRange.new(-360,360)
    particle.Lifetime = NumberRange.new(1)
    delay(0.2,function()
        particle.Enabled = false
    end)
    game:GetService("Debris"):AddItem(particle,1.2)
    local cast = doge:WaitForChild("Head"):WaitForChild("Wow")
    cast.Volume = 2
    cast.Playing = true
    local targetval = Instance.new("Vector3Value")
    targetval.Name = "Target"
    targetval.Parent = doge
    local targetnum = Instance.new("NumberValue")
    targetnum.Name = "Number"
    targetnum.Value = number
    targetnum.Parent = targetval
    local dogetier = Instance.new("StringValue")
    dogetier.Name = "Type"
    dogetier.Value = class
    dogetier.Parent = doge
    local currentvictim = Instance.new("ObjectValue")
    currentvictim.Name = "Victim"
    currentvictim.Parent = doge
    currentvictim.Value = nil
    local add = 1
    if side == "RIGHT" then
        targetval.Name = "RIGHT"
        add = 1
        local target = root.CFrame + root.CFrame.rightVector * (2 + (targetnum.Value + add))
        targetval.Value = target.p
        side = "LEFT"
    elseif side == "LEFT" then
        targetval.Name = "LEFT"
        add = 0
        local target = root.CFrame - root.CFrame.rightVector * (2 + (targetnum.Value + add))
        targetval.Value = target.p
        side = "RIGHT"
    end
    if dogetier.Value == "FIRE" then
        local parts = doge:GetChildren()
        for i,obj in pairs(parts) do
            if obj:IsA("BasePart") == true then
                obj.BrickColor = BrickColor.new("Neon orange")
                if obj.Transparency ~= 1 then
                    if obj.Name == "Head" or obj.Name == "Tail" or obj.Name == "Torso" then
                        local fire = Instance.new("ParticleEmitter")
                        fire.Parent = obj
                        if obj.Name == "Head" or obj.Name == "Tail" then
                            fire.LockedToPart = true
                        end
                        fire.Rate = 500
                        fire.Rotation = NumberRange.new(-360,360)
                        fire.RotSpeed = NumberRange.new(-100,100)
                        fire.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,85,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,255,255))})
                        fire.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.5),NumberSequenceKeypoint.new(1,0)})
                        fire.Lifetime = NumberRange.new(0.7,1)
                        fire.Speed = NumberRange.new(5,6)
                        fire.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0.95),NumberSequenceKeypoint.new(1,0.95)})
                        fire.ZOffset = 1
                        fire.Name = "Fire"
                        fire.LightEmission = 1
                        fire.LightInfluence = 0
                        fire.Texture = "http://www.roblox.com/asset/?id=11601142"
                        fire.Enabled = true
                    end
                end
            end
        end
        local parts = doge:GetDescendants()
        for i,par in pairs(parts) do
            if par:IsA("SpecialMesh") == true then
                par.TextureId = ""
            end
        end
        local burn = Instance.new("Sound")
        burn.Parent = doge:WaitForChild("Head")
        burn.TimePosition = 0
        burn.Looped = true
        burn.Name = "Fire"
        burn.SoundId = "rbxassetid://1250876841"
        burn.Playing = true
    elseif dogetier.Value == "ZOMBIE" then
        local parts = doge:GetDescendants()
        for i,par in pairs(parts) do
            if par:IsA("SpecialMesh") == true then
                par.TextureId = ""
                par.Parent.BrickColor = BrickColor.new("Dark green")
            end
        end
        local bark = doge:WaitForChild("Head"):WaitForChild("Bark")
        bark.SoundId = "rbxassetid://408341537"
        bark.PlaybackSpeed = 1.5
    elseif dogetier.Value == "KAMIKAZE" then
        local tail = doge:FindFirstChild("Tail")
        if tail then
            local mesh = tail:FindFirstChild("Mesh")
            if mesh then
                tail.Material = Enum.Material.Neon
                tail.BrickColor = BrickColor.new("Really red")
                mesh.TextureId = ""
                mesh.MeshId = ""
                mesh.MeshType = Enum.MeshType.Sphere
                mesh.Scale = Vector3.new(1.2,1.2,1.2)
                mesh.Offset = Vector3.new(0.3,0,0)
                local beep = Instance.new("Sound")
                beep.Parent = doge:WaitForChild("Head")
                beep.PlaybackSpeed = 1
                beep.TimePosition = 0
                beep.Looped = true
                beep.SoundId = "rbxassetid://138081500"
                beep.Volume = 0.5
                beep.Playing = true
                local explo = Instance.new("BoolValue")
                explo.Parent = doge
                explo.Value = false
                explo.Name = "Exploding"
                delay(0,function()
                    local between = 0.41
                    while wait(between) do
                        if doge:WaitForChild("Humanoid").Health > 0 then
                            tail.BrickColor = BrickColor.new("Institutional white")
                            local ti = 0.4
                            if explo.Value == true then
                                between = 0.1
                                ti = 0.2
                                beep.PlaybackSpeed = 3
                            end
                            local propertieschanged = {
                            Color = Color3.fromRGB(255,0,0),
                            }
                            local info = TweenInfo.new(ti,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                            local tween = tweening:Create(tail,info,propertieschanged)
                            tween:Play()
                        end
                    end
                end)
                explo.Changed:connect(function()
                    if explo.Value == true then
                        doge:WaitForChild("Humanoid").WalkSpeed = 0
                        wait(2)
                        local exp = Instance.new("ParticleEmitter")
                        exp.Parent = tail
                        exp.Rate = 500
                        exp.Rotation = NumberRange.new(-360,360)
                        exp.RotSpeed = NumberRange.new(-100,100)
                        exp.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,170,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,255,255))})
                        exp.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,10),NumberSequenceKeypoint.new(0.5,10),NumberSequenceKeypoint.new(1,0)})
                        exp.Lifetime = NumberRange.new(0.5)
                        exp.Speed = NumberRange.new(160)
                        exp.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0),NumberSequenceKeypoint.new(0.4,0),NumberSequenceKeypoint.new(1,1)})
                        exp.ZOffset = 10
                        exp.Name = "Fire"
                        exp.LightEmission = 1
                        exp.LightInfluence = 0
                        exp.SpreadAngle = Vector2.new(360,360)
                        exp.Texture = "http://www.roblox.com/asset/?id=11601142"
                        exp.Enabled = true
                        game:GetService("Debris"):AddItem(exp,2)
                        local fire = exp:Clone()
                        fire.Parent = tail
                        local smoke = Instance.new("ParticleEmitter")
                        smoke.Parent = tail
                        smoke.Rate = 500
                        smoke.Rotation = NumberRange.new(-360,360)
                        smoke.RotSpeed = NumberRange.new(-100,100)
                        smoke.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(0,0,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(0,0,0))})
                        smoke.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,10),NumberSequenceKeypoint.new(0.8,10),NumberSequenceKeypoint.new(1,0)})
                        smoke.Lifetime = NumberRange.new(1.2)
                        smoke.Speed = NumberRange.new(160)
                        smoke.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0.9),NumberSequenceKeypoint.new(1,1)})
                        smoke.ZOffset = 1
                        smoke.Name = "Smoke"
                        smoke.LightEmission = 0
                        smoke.LightInfluence = 0
                        smoke.SpreadAngle = Vector2.new(360,360)
                        smoke.Texture = "http://www.roblox.com/asset/?id=249338959"
                        smoke.Enabled = true
                        game:GetService("Debris"):AddItem(smoke,2)
                        local explode = Instance.new("Sound")
                        explode.Parent = tail
                        explode.SoundId = "rbxassetid://165969964"
                        explode.TimePosition = 0
                        explode.Playing = true
                        explode.Volume = 1
                        game:GetService("Debris"):AddItem(explode,explode.TimeLength + 2)
                        delay(0.5,function()
                            exp.Enabled = false
                            fire.Enabled = false
                            smoke.Enabled = false
                        end)
                        shake()
                        number = number - 1
                        local get = workspace:GetDescendants()
                        for i,check in pairs(get) do
                            if check:IsA("Humanoid") == true then
                                if check.Parent.Name ~= player.Name and check.Parent.Name ~= "Doge" then
                                    local hit = check.Parent:FindFirstChild("HumanoidRootPart")
                                    if hit then
                                        if (hit.Position - doge:WaitForChild("Torso").Position).magnitude <= 90 then
                                            check:TakeDamage(200)
                                            local explode = Instance.new("Sound")
                                            explode.Parent = hit
                                            explode.SoundId = "rbxassetid://429400881"
                                            explode.TimePosition = 0
                                            explode.Playing = true
                                            game:GetService("Debris"):AddItem(explode,explode.TimeLength + 1)
                                            local get = check.Parent:GetChildren()
                                            for i,obj in pairs(get) do
                                                if obj:IsA("BasePart") == true then
                                                    local blood = Instance.new("ParticleEmitter")
                                                    blood.Parent = obj
                                                    blood.Texture = "rbxassetid://709137722"
                                                    blood.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,1),NumberSequenceKeypoint.new(0.1,0),NumberSequenceKeypoint.new(0.8,0),NumberSequenceKeypoint.new(1,1)})
                                                    blood.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(85,0,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(85,0,0))})
                                                    blood.Name = "Blood"
                                                    blood.Enabled = true
                                                    blood.Lifetime = NumberRange.new(1)
                                                    blood.Speed = NumberRange.new(10)
                                                    blood.LightEmission = 0.8
                                                    blood.LightInfluence = 0
                                                    blood.Rate = 500
                                                    blood.Rotation = NumberRange.new(-360,360)
                                                    blood.RotSpeed = NumberRange.new(-100,100)
                                                    blood.SpreadAngle = Vector2.new(360,360)
                                                    blood.Acceleration = Vector3.new(0,-10,0)
                                                    blood.Drag = 1
                                                    blood.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.87),NumberSequenceKeypoint.new(0.104,2.06),NumberSequenceKeypoint.new(1,0)})
                                                    game:GetService("Debris"):AddItem(blood,2)
                                                    delay(0.4,function()
                                                        blood.Enabled = false
                                                    end)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                        doge:BreakJoints()
                        beep.Playing = false
                        local get = doge:GetChildren()
                        for i,get in pairs(get) do
                            if get:IsA("BasePart") == true then
                                get.Transparency = 1
                            end
                        end
                        game:GetService("Debris"):AddItem(doge,6)
                    end
                end)
            end
        end
    end
    local dogehum = doge:WaitForChild("Humanoid")
    dogehum.WalkSpeed = 20
    dogehum.MaxHealth = 500
    mouse.Button1Down:connect(function()
        if status == "MOVE TO" then
            dogehum.Jump = true
            local check = root:FindFirstChild("Bark")
            if check == nil then
                local bark = doge:WaitForChild("Head"):WaitForChild("Bark"):Clone()
                bark.Parent = root
                bark.Playing = true
                bark.TimePosition = 0
                game:GetService("Debris"):AddItem(bark,bark.TimeLength + 1)
            end
        end
    end)
    local debounce = Instance.new("BoolValue")
    debounce.Parent = doge
    debounce.Value = false
    debounce.Name = "Debounce"
    dogehum.Touched:connect(function(hit)
        if debounce.Value == false and dogetier.Value ~= "KAMIKAZE" then
            local check = hit.Parent:FindFirstChildOfClass("Humanoid") or hit.Parent.Parent:FindFirstChildOfClass("Humanoid")
            if check and hit:IsDescendantOf(char) == false and check.Parent.Name ~= "Doge" and hit.Transparency ~= 1 then
                debounce.Value = true
                delay(0.4,function()
                    debounce.Value = false
                end)
                if dogetier.Value == "NORMAL" then
                    local starting = check.Health
                    check:TakeDamage(15)
                    local bark = doge:WaitForChild("Head"):WaitForChild("Bark")
                    bark.Playing = true
                    bark.TimePosition = 0
                    local stab = Instance.new("Sound")
                    stab.Parent = doge:WaitForChild("Head")
                    stab.SoundId = "rbxassetid://220833976"
                    stab.TimePosition = 0
                    stab.Playing = true
                    game:GetService("Debris"):AddItem(stab,stab.TimeLength + 1)
                    if check.Health <= 0 and starting > 0 then
                        local explode = Instance.new("Sound")
                        explode.Parent = hit
                        explode.SoundId = "rbxassetid://429400881"
                        explode.TimePosition = 0
                        explode.Playing = true
                        game:GetService("Debris"):AddItem(explode,explode.TimeLength + 1)
                        local get = check.Parent:GetChildren()
                        for i,obj in pairs(get) do
                            if obj:IsA("BasePart") == true then
                                local blood = Instance.new("ParticleEmitter")
                                blood.Parent = obj
                                blood.Texture = "rbxassetid://709137722"
                                blood.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,1),NumberSequenceKeypoint.new(0.1,0),NumberSequenceKeypoint.new(0.8,0),NumberSequenceKeypoint.new(1,1)})
                                blood.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(85,0,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(85,0,0))})
                                blood.Name = "Blood"
                                blood.Enabled = true
                                blood.Lifetime = NumberRange.new(1)
                                blood.Speed = NumberRange.new(10)
                                blood.LightEmission = 0.8
                                blood.LightInfluence = 0
                                blood.Rate = 500
                                blood.Rotation = NumberRange.new(-360,360)
                                blood.RotSpeed = NumberRange.new(-100,100)
                                blood.SpreadAngle = Vector2.new(360,360)
                                blood.Acceleration = Vector3.new(0,-10,0)
                                blood.Drag = 1
                                blood.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.87),NumberSequenceKeypoint.new(0.104,2.06),NumberSequenceKeypoint.new(1,0)})
                                game:GetService("Debris"):AddItem(blood,2)
                                delay(0.4,function()
                                    blood.Enabled = false
                                end)
                            end
                        end
                    end
                    if check.Health <= 0 then
                        if hit.Transparency ~= 1 then
                            hit.Size = hit.Size - Vector3.new(0.1,0.1,0.1)
                            dogehum.Health = dogehum.Health + 20
                            dogehum.WalkSpeed = dogehum.WalkSpeed + 1
                            if hit.Size.x < 0.1 or hit.Size.y < 0.1 or hit.Size.z < 0.1 then
                                hit.Transparency = 1
                                local explode = Instance.new("Sound")
                                explode.Parent = hit
                                explode.SoundId = "rbxassetid://264486467"
                                explode.TimePosition = 0
                                explode.Playing = true
                                game:GetService("Debris"):AddItem(explode,explode.TimeLength + 1)
                            end
                        end
                    end
                    local blood = Instance.new("ParticleEmitter")
                    blood.Parent = hit
                    blood.Texture = "rbxassetid://709137722"
                    blood.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,1),NumberSequenceKeypoint.new(0.1,0),NumberSequenceKeypoint.new(0.8,0),NumberSequenceKeypoint.new(1,1)})
                    blood.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(85,0,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(85,0,0))})
                    blood.Name = "Blood"
                    blood.Enabled = true
                    blood.Lifetime = NumberRange.new(1)
                    blood.Speed = NumberRange.new(10)
                    blood.LightEmission = 0.8
                    blood.LightInfluence = 0
                    blood.Rate = 500
                    blood.Rotation = NumberRange.new(-360,360)
                    blood.RotSpeed = NumberRange.new(-100,100)
                    blood.SpreadAngle = Vector2.new(360,360)
                    blood.Acceleration = Vector3.new(0,-10,0)
                    blood.Drag = 1
                    blood.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.87),NumberSequenceKeypoint.new(0.104,2.06),NumberSequenceKeypoint.new(1,0)})
                    game:GetService("Debris"):AddItem(blood,2)
                    delay(0.2,function()
                        blood.Enabled = false
                    end)
                elseif dogetier.Value == "FIRE" then
                    local bark = doge:WaitForChild("Head"):WaitForChild("Bark")
                    bark.Playing = true
                    bark.TimePosition = 0
                    local douse = Instance.new("Sound")
                    douse.Parent = doge:WaitForChild("Head")
                    douse.SoundId = "rbxassetid://533243953"
                    douse.TimePosition = 0
                    douse.Playing = true
                    game:GetService("Debris"):AddItem(douse,douse.TimeLength + 3)
                    local starting = check.Health
                    delay(0,function()
                        for dmg = 1,10,1 do
                            check:TakeDamage(3)
                            local make = check.Parent:FindFirstChild("AlreadyBeingBurnt")
                            if check.Health <= 0 and starting > 0 and make == nil then
                                local body = check.Parent:FindFirstChild("Body Colors")
                                if body then
                                    body:Destroy()
                                end
                                local new = Instance.new("BoolValue")
                                new.Parent = check.Parent
                                new.Name = "AlreadyBeingBurnt"
                                new.Value = true
                                local explode = Instance.new("Sound")
                                explode.Parent = hit
                                explode.SoundId = "rbxassetid://1250876841"
                                explode.TimePosition = 0
                                explode.Playing = true
                                game:GetService("Debris"):AddItem(explode,explode.TimeLength + 1)
                                local get = check.Parent:GetChildren()
                                for i,obj in pairs(get) do
                                    if obj:IsA("BasePart") == true and obj.Transparency ~= 1 then
                                        local fire = Instance.new("ParticleEmitter")
                                        fire.Parent = obj
                                        fire.Acceleration = Vector3.new(0,10,0)
                                        fire.Rate = 500
                                        fire.Rotation = NumberRange.new(-360,360)
                                        fire.RotSpeed = NumberRange.new(-100,100)
                                        fire.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,85,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,255,255))})
                                        fire.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.5),NumberSequenceKeypoint.new(1,0)})
                                        fire.Lifetime = NumberRange.new(0.7,1)
                                        fire.Speed = NumberRange.new(1,2)
                                        fire.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0.95),NumberSequenceKeypoint.new(1,0.95)})
                                        fire.ZOffset = 1
                                        fire.Name = "Fire"
                                        fire.LightEmission = 1
                                        fire.LightInfluence = 0
                                        fire.Texture = "http://www.roblox.com/asset/?id=11601142"
                                        fire.Enabled = true
                                        delay(0,function()
                                            local propertieschanged = {
                                            Color = Color3.fromRGB(0,0,0),
                                            }
                                            local info = TweenInfo.new(5,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                                            local tween = tweening:Create(obj,info,propertieschanged)
                                            tween:Play()
                                            for eat = 1,10,1 do
                                                local propertieschanged = {
                                                Size = obj.Size - Vector3.new(0.1,0.1,0.1),
                                                }
                                                local info = TweenInfo.new(1,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                                                local tween = tweening:Create(obj,info,propertieschanged)
                                                tween:Play()
                                                if obj.Size.x < 0.1 or obj.Size.y < 0.1 or obj.Size.z < 0.1 then
                                                    game:GetService("Debris"):AddItem(obj,1)
                                                    fire.Enabled = false
                                                    explode.Playing = false
                                                    local propertieschanged = {
                                                    Transparency = 1,
                                                    }
                                                    local info = TweenInfo.new(1,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                                                    local tween = tweening:Create(obj,info,propertieschanged)
                                                    tween:Play()
                                                end
                                                wait(1)
                                            end
                                        end)
                                    elseif obj:IsA("Accessory") == true then
                                        local handle = obj:FindFirstChild("Handle")
                                        if handle then
                                            handle:BreakJoints()
                                            local propertieschanged = {
                                            Transparency = 1,
                                            }
                                            local info = TweenInfo.new(1,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                                            local tween = tweening:Create(handle,info,propertieschanged)
                                            tween:Play()
                                        end
                                    end
                                end
                            end
                            wait(0.3)
                        end
                    end)
                    if check.Health ~= 0 then
                        local fire = Instance.new("ParticleEmitter")
                        fire.Parent = hit
                        fire.Acceleration = Vector3.new(0,3,0)
                        fire.Rate = 500
                        fire.Rotation = NumberRange.new(-360,360)
                        fire.RotSpeed = NumberRange.new(-100,100)
                        fire.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,85,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,255,255))})
                        fire.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.5),NumberSequenceKeypoint.new(1,0)})
                        fire.Lifetime = NumberRange.new(0.7,1)
                        fire.Speed = NumberRange.new(5,6)
                        fire.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0.95),NumberSequenceKeypoint.new(1,0.95)})
                        fire.ZOffset = 1
                        fire.Name = "Fire"
                        fire.LightEmission = 1
                        fire.LightInfluence = 0
                        fire.Texture = "http://www.roblox.com/asset/?id=11601142"
                        fire.Enabled = true
                        game:GetService("Debris"):AddItem(fire,4)
                        delay(3,function()
                            fire.Enabled = false
                        end)
                    end
                    local exp = Instance.new("ParticleEmitter")
                    exp.Parent = hit
                    exp.Rate = 500
                    exp.Rotation = NumberRange.new(-360,360)
                    exp.RotSpeed = NumberRange.new(-100,100)
                    exp.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,85,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,255,255))})
                    exp.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,4),NumberSequenceKeypoint.new(1,0)})
                    exp.Lifetime = NumberRange.new(0.7,1)
                    exp.Speed = NumberRange.new(15,20)
                    exp.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0),NumberSequenceKeypoint.new(1,1)})
                    exp.ZOffset = 1
                    exp.Name = "Fire"
                    exp.LightEmission = 1
                    exp.LightInfluence = 0
                    exp.SpreadAngle = Vector2.new(360,360)
                    exp.Texture = "http://www.roblox.com/asset/?id=11601142"
                    exp.Enabled = true
                    game:GetService("Debris"):AddItem(exp,2)
                    delay(0.2,function()
                        exp.Enabled = false
                    end)
                elseif dogetier.Value == "ZOMBIE" then
                    local starting = check.Health
                    check:TakeDamage(30)
                    local bark = doge:WaitForChild("Head"):WaitForChild("Bark")
                    bark.Playing = true
                    bark.TimePosition = 0
                    local stab = Instance.new("Sound")
                    stab.Parent = doge:WaitForChild("Head")
                    stab.SoundId = "rbxassetid://220833976"
                    stab.TimePosition = 0
                    stab.Playing = true
                    game:GetService("Debris"):AddItem(stab,stab.TimeLength + 1)
                    if check.Health <= 0 and starting > 0 then
                        zkill.Value = hit.Position
                        local explode = Instance.new("Sound")
                        explode.Parent = hit
                        explode.SoundId = "rbxassetid://429400881"
                        explode.TimePosition = 0
                        explode.Playing = true
                        game:GetService("Debris"):AddItem(explode,explode.TimeLength + 1)
                        local get = check.Parent:GetChildren()
                        for i,obj in pairs(get) do
                            if obj:IsA("BasePart") == true then
                                local blood = Instance.new("ParticleEmitter")
                                blood.Parent = obj
                                blood.Texture = "rbxassetid://709137722"
                                blood.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,1),NumberSequenceKeypoint.new(0.1,0),NumberSequenceKeypoint.new(0.8,0),NumberSequenceKeypoint.new(1,1)})
                                blood.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(85,0,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(85,0,0))})
                                blood.Name = "Blood"
                                blood.Enabled = true
                                blood.Lifetime = NumberRange.new(1)
                                blood.Speed = NumberRange.new(10)
                                blood.LightEmission = 0.8
                                blood.LightInfluence = 0
                                blood.Rate = 500
                                blood.Rotation = NumberRange.new(-360,360)
                                blood.RotSpeed = NumberRange.new(-100,100)
                                blood.SpreadAngle = Vector2.new(360,360)
                                blood.Acceleration = Vector3.new(0,-10,0)
                                blood.Drag = 1
                                blood.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.87),NumberSequenceKeypoint.new(0.104,2.06),NumberSequenceKeypoint.new(1,0)})
                                game:GetService("Debris"):AddItem(blood,2)
                                delay(0.4,function()
                                    blood.Enabled = false
                                end)
                            end
                        end
                    end
                    if check.Health <= 0 then
                        if hit.Transparency ~= 1 then
                            hit.Size = hit.Size - Vector3.new(0.1,0.1,0.1)
                            dogehum.Health = dogehum.Health + 60
                            if hit.Size.x < 0.1 or hit.Size.y < 0.1 or hit.Size.z < 0.1 then
                                hit.Transparency = 1
                                local explode = Instance.new("Sound")
                                explode.Parent = hit
                                explode.SoundId = "rbxassetid://264486467"
                                explode.TimePosition = 0
                                explode.Playing = true
                                game:GetService("Debris"):AddItem(explode,explode.TimeLength + 1)
                            end
                        end
                    end
                    local blood = Instance.new("ParticleEmitter")
                    blood.Parent = hit
                    blood.Texture = "rbxassetid://709137722"
                    blood.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,1),NumberSequenceKeypoint.new(0.1,0),NumberSequenceKeypoint.new(0.8,0),NumberSequenceKeypoint.new(1,1)})
                    blood.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(85,0,0)),ColorSequenceKeypoint.new(1,Color3.fromRGB(85,0,0))})
                    blood.Name = "Blood"
                    blood.Enabled = true
                    blood.Lifetime = NumberRange.new(1)
                    blood.Speed = NumberRange.new(10)
                    blood.LightEmission = 0.8
                    blood.LightInfluence = 0
                    blood.Rate = 500
                    blood.Rotation = NumberRange.new(-360,360)
                    blood.RotSpeed = NumberRange.new(-100,100)
                    blood.SpreadAngle = Vector2.new(360,360)
                    blood.Acceleration = Vector3.new(0,-10,0)
                    blood.Drag = 1
                    blood.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,2.87),NumberSequenceKeypoint.new(0.104,2.06),NumberSequenceKeypoint.new(1,0)})
                    game:GetService("Debris"):AddItem(blood,2)
                    delay(0.2,function()
                        blood.Enabled = false
                    end)
                end
            end
        end
    end)
    delay(0,function()
        while wait(0.1) do
            if status == "PASSIVE" then
                local add = 1
                if targetval.Name == "RIGHT" then
                    add = 1
                    local target = root.CFrame + root.CFrame.rightVector * (2 + (targetnum.Value + add))
                    targetval.Value = target.p
                elseif targetval.Name == "LEFT" then
                    add = 0
                    local target = root.CFrame - root.CFrame.rightVector * (2 + (targetnum.Value + add))
                    targetval.Value = target.p
                end
                dogehum:MoveTo(targetval.Value)
                if hum.Jump == true then
                    dogehum.Jump = true
                end
            elseif status == "MOVE TO" then
                dogehum:MoveTo(mouse.hit.p)
            elseif status == "STOP" then
                dogehum:MoveTo(doge:WaitForChild("Torso").Position)
            elseif status == "FIGHT" then
                if doge then
                    local last = 400
                    local least = nil
                    local scout = workspace:GetChildren()
                    for i,work in pairs(scout) do
                        if work:IsA("Model") then
                            local whum = work:FindFirstChildOfClass("Humanoid")
                            if whum then
                                if work.Name ~= "Doge" and work.Name ~= player.Name then
                                    local wtorso = whum.Parent:FindFirstChild("HumanoidRootPart")
                                    if wtorso then
                                        if whum.Health ~= 0 then
                                            if (wtorso.Position - doge:WaitForChild("Torso").Position).magnitude < last then
                                                least = wtorso
                                                last = (wtorso.Position - doge:WaitForChild("Torso").Position).magnitude
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                    if least then
                        currentvictim.Value = least
                    end
                    if currentvictim.Value then
                        dogehum:MoveTo(currentvictim.Value.Position)
                        if (currentvictim.Value.Position.y - doge:WaitForChild("Torso").Position.y) >= 2 then
                            dogehum.Jump = true
                        end
                        if dogetier.Value == "KAMIKAZE" then
                            local exp = doge:FindFirstChild("Exploding")
                            if exp then
                                if (currentvictim.Value.Position - doge:WaitForChild("Torso").Position).magnitude <= 20 then
                                    exp.Value = true
                                end
                            end
                        end
                        local thum = currentvictim.Value.Parent:FindFirstChildOfClass("Humanoid")
                        if thum then
                            if thum.Health <= 0 then
                                currentvictim.Value = nil
                            end
                        end
                    end
                end
            elseif status == "FOCUS" then
                if focus then
                    local base = focus:FindFirstChild("HumanoidRootPart")
                    if base then
                        dogehum:MoveTo(base.Position)
                        if (base.Position.y - doge:WaitForChild("Torso").Position.y) >= 2 then
                            dogehum.Jump = true
                        end
                        if dogetier.Value == "KAMIKAZE" then
                            local exp = doge:FindFirstChild("Exploding")
                            if exp then
                                if (base.Position - doge:WaitForChild("Torso").Position).magnitude <= 20 then
                                    exp.Value = true
                                end
                            end
                        end
                    end
                end
            end
        end
    end)
end
--//MODULE\\--
local explode = Instance.new("Sound")
explode.Parent = workspace
explode.SoundId = "rbxassetid://429400881"
local stab = Instance.new("Sound")
stab.Parent = workspace
stab.SoundId = "rbxassetid://220833976"
local sound = Instance.new("Sound")
sound.Parent = workspace
sound.Name = "Tick"
sound.PlaybackSpeed = 1.5
sound.SoundId = "rbxassetid://151715959"
local zomb = stab:Clone()
zomb.SoundId = "rbxassetid://408341537"
zomb.Parent = workspace
local starter = Instance.new("ScreenGui")
starter.Parent = gui
starter.Name = "DogeGui"
starter.ResetOnSpawn = true
starter.Enabled = true
local label = Instance.new("TextLabel")
label.Parent = starter
label.BackgroundTransparency = 1
label.BorderSizePixel = 0
label.Font = Enum.Font.SciFi
label.TextColor3 = Color3.fromRGB(255,255,255)
label.TextStrokeColor3 = Color3.fromRGB(0,0,0)
label.TextStrokeTransparency = 1
label.TextWrapped = true
label.TextSize = 16
label.Visible = true
label.Text = ""
label.Size = UDim2.new(0.3,0,0.05,0)
label.Position = UDim2.new(-0.3,0,0.05,0)
label:TweenPosition(UDim2.new(0.35,0,0.05,0),"InOut","Quint",0.5,true,nil)
local tag = Instance.new("TextLabel")
tag.Parent = starter
tag.BackgroundTransparency = 1
tag.BorderSizePixel = 0
tag.Font = Enum.Font.SciFi
tag.TextColor3 = Color3.fromRGB(255,255,255)
tag.TextStrokeColor3 = Color3.fromRGB(0,0,0)
tag.TextStrokeTransparency = 1
tag.TextWrapped = true
tag.TextSize = 15
tag.Visible = true
tag.Text = ""
tag.Size = UDim2.new(0.3,0,0.05,0)
tag.Position = UDim2.new(0.35,0,0.1,0)
local find = Instance.new("TextLabel")
find.Parent = starter
find.BackgroundTransparency = 1
find.BorderSizePixel = 0
find.Font = Enum.Font.SciFi
find.TextColor3 = Color3.fromRGB(255,255,255)
find.TextStrokeColor3 = Color3.fromRGB(0,0,0)
find.TextStrokeTransparency = 1
find.TextWrapped = true
find.TextSize = 15
find.Visible = true
find.Text = ""
find.Size = UDim2.new(0.3,0,0.05,0)
find.Position = UDim2.new(0.35,0,0.15,0)
delay(0,function()
    while wait() do
        for change = 1,255 do
            label.TextColor3 = Color3.fromHSV(change/255,1,1)
            tag.TextColor3 = Color3.fromHSV(change/255,1,1)
            find.TextColor3 = Color3.fromHSV(change/255,1,1)
            wait()
        end
    end
end)
delay(0.1,function()
    write("PRESS Q TO SUMMON A DOGE || Z TO CYCLE TYPE",label)
    write("CURRENT STATUS || "..status,tag)
    write("CURRENT TYPE || "..class,find)
end)
zkill.Changed:connect(function()
    create("zombie")
end)
user.KeyDown:connect(function(input,process)
    if true then
        local key = input
        if key == 'q' then
            create(nil)
            local wow = Instance.new("TextLabel")
            wow.Parent = starter
            wow.BackgroundTransparency = 1
            wow.BorderSizePixel = 0
            wow.Font = Enum.Font.SciFi
            wow.TextColor3 = Color3.fromRGB(math.random(0,255),math.random(0,255),math.random(0,255))
            wow.TextStrokeColor3 = Color3.fromRGB(0,0,0)
            wow.TextStrokeTransparency = 1
            wow.TextScaled = true
            wow.Visible = true
            wow.Text = "WOW!"
            wow.Size = UDim2.new(0.2,0,0.05,0)
            wow.Position = UDim2.new(math.random(-1,10) * 0.1,0,math.random(0,10) * 0.1,0)
            wow:TweenPosition(wow.Position - UDim2.new(0,0,0.1,0),"Out","Linear",1,true,nil)
            game:GetService("Debris"):AddItem(wow,1)
            local propertieschanged = {
            TextTransparency = 1
            }
            local info = TweenInfo.new(1,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
            local tween = tweening:Create(wow,info,propertieschanged)
            tween:Play()
        elseif key == 'r' then
            status = "PASSIVE"
            write("CURRENT STATUS || "..status,tag)
        elseif key == 't' then
            status = "MOVE TO"
            write("CURRENT STATUS || "..status.." || CLICK TO JUMP",tag)
        elseif key == 'y' then
            status = "STOP"
            write("CURRENT STATUS || "..status,tag)
        elseif key == 'g' then
            status = "FIGHT"
            write("CURRENT STATUS || "..status,tag)
        elseif key == 'z' then
            if class == "NORMAL" then
                class = "FIRE"
                write("CURRENT TYPE || "..class,find)
            elseif class == "FIRE" then
                class = "KAMIKAZE"
                write("CURRENT TYPE || "..class,find)
            elseif class == "KAMIKAZE" then
                class = "ZOMBIE"
                write("CURRENT TYPE || "..class,find)
            elseif class == "ZOMBIE" then
                class = "NORMAL"
                write("CURRENT TYPE || "..class,find)
            end
        elseif key == 'f' then
            status = "FOCUS"
            local check = mouse.Target.Parent:FindFirstChildOfClass("Humanoid") or mouse.Target.Parent.Parent:FindFirstChildOfClass("Humanoid")
            if check then
                if check.Parent.Name ~= "Doge" then
                    focus = check.Parent
                else
                    focus = nil
                end
            else
                focus = nil
            end
            if focus == nil then
                write("CURRENT STATUS || "..status.." || TARGET INVALID",tag)
            else
                write("CURRENT STATUS || "..status.." || TARGET: "..string.upper(focus.Name),tag)
            end
        elseif key == 'm' then
            if mouse.Target.Parent.Name == "Doge" then
                mouse.Target.Parent:Destroy()
                number = number - 1
                local get = workspace:GetChildren()
                for i,obj in pairs(get) do
                    if get.Name == "Doge" and get.ClassName == "Model" then
                        local tar = get:FindFirstChildOfClass("Vector3Value")
                        if tar then
                            local num = tar:FindFirstChild("Number")
                            if num then
                                num.Value = num.Value - 1
                            end
                        end
                    end
                end
                local wow = Instance.new("TextLabel")
                wow.Parent = starter
                wow.BackgroundTransparency = 1
                wow.BorderSizePixel = 0
                wow.Font = Enum.Font.SciFi
                wow.TextColor3 = Color3.fromRGB(math.random(0,255),math.random(0,255),math.random(0,255))
                wow.TextStrokeColor3 = Color3.fromRGB(0,0,0)
                wow.TextStrokeTransparency = 1
                wow.TextScaled = true
                wow.Visible = true
                wow.Text = "RIP ;("
                wow.Size = UDim2.new(0.2,0,0.05,0)
                wow.Position = UDim2.new(math.random(-1,10) * 0.1,0,math.random(0,10) * 0.1,0)
                wow:TweenPosition(wow.Position - UDim2.new(0,0,0.1,0),"Out","Linear",1,true,nil)
                game:GetService("Debris"):AddItem(wow,1)
                local propertieschanged = {
                TextTransparency = 1
                }
                local info = TweenInfo.new(1,Enum.EasingStyle.Linear,Enum.EasingDirection.Out,0,false,0)
                local tween = tweening:Create(wow,info,propertieschanged)
                tween:Play()
            end
        end
    end
end)
hum.Died:connect(function()
    local get = workspace:GetChildren()
    for i,get in pairs(get) do
        if get.Name == "Doge" and get:IsA("Model") == true then
            get:Destroy()
        end
    end
end) --67 Mango Mustard
end)

-- TextButton
local TextButton_fe = Instance.new("TextButton", scrollingframe);
TextButton_fe.TextWrapped = true;
TextButton_fe.BorderSizePixel = 0;
TextButton_fe.TextSize = 14;
TextButton_fe.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_fe.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_fe.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_fe.Size = UDim2.new(0, 404, 0, 20);
TextButton_fe.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_fe.Text = "Fenrier Painsis.txt";
TextButton_fe.Position = UDim2.new(0, 0, 0.14925, 0);
TextButton_fe.MouseButton1Click:Connect(function()
Player = game:GetService("Players").LocalPlayer
Character = Player.Character 
PlayerGui = Player.PlayerGui 
Backpack = Player.Backpack 
Torso = Character.Torso 
Head = Character.Head 
LeftArm = Character["Left Arm"] 
LeftLeg = Character["Left Leg"] 
RightArm = Character["Right Arm"] 
RightLeg = Character["Right Leg"] 
LS = Torso["Left Shoulder"] 
LH = Torso["Left Hip"] 
RS = Torso["Right Shoulder"] 
RH = Torso["Right Hip"] 
 
if (className ~= "HopperBin") then 
Tool = Instance.new("HopperBin") 
Tool.Parent = Backpack 
Tool.Name = "Painis" 
script.Parent = Tool 
end 
Bin = script.Parent 
 
so = function(id,par,vol,pit) 
coroutine.resume(coroutine.create(function()
local sou = Instance.new("Sound",par or workspace)
sou.Volume=vol
sou.Pitch=pit or 1
sou.SoundId=id
wait() 
sou:play() 
wait(6) 
sou:Remove() 
end))
end
 
function ob1d(mouse) 
size=0.5
mode=1
color=BrickColor.new(Color3.new(math.random(),math.random(),math.random())) 
mo=Instance.new("Model") 
mo.Name="EEEEUGH HA HA HAAAAA" 
mo.Parent=workspace 
game.Debris:AddItem(mo,10)
p=Instance.new("Seat") 
p.Name="Torso" 
p.Size=Vector3.new(14,50,14)*size
p.BrickColor=color
m=Instance.new("SpecialMesh") 
m.Parent=p 
p.Name="Torso" 
p.Parent=mo 
p=Instance.new("Seat") 
p.Shape="Ball" 
p.Size=Vector3.new(24,24,24)*size
p.BrickColor=color
p.Name="Legball" 
for i=1, 10 do 
lol=Instance.new("Seat") 
lol.BrickColor=BrickColor:Black() 
lol.Name="SEE?" 
lol.Parent=mo 
lol.Size=Vector3.new(1,math.random(30,40),1) *size
w=Instance.new("Weld") 
w.Part0=p 
w.Part1=lol 
w.C0=CFrame.new(0,0,0)*CFrame.fromEulerAnglesXYZ(math.random(-10,10),math.random(-10,10),math.random(-10,10)) 
w.Parent=w.Part0 
end 
p.Parent=mo 
w=Instance.new("Weld") 
w.Part0=mo.Torso 
w.Part1=p 
w.C0=CFrame.new(16*(size/2),-48*(size/2),0) 
w.Parent=w.Part0 
p=Instance.new("Seat") 
p.Shape="Ball" 
p.Size=Vector3.new(24,24,24)*size
p.BrickColor=color
p.Name="Legball" 
for i=1, 10 do 
lol=Instance.new("Seat") 
lol.BrickColor=BrickColor:Black() 
lol.Name="SEE?" 
lol.Parent=mo 
lol.Size=Vector3.new(1,math.random(30,40),1) *size
w=Instance.new("Weld") 
w.Part0=p 
w.Part1=lol 
w.C0=CFrame.new(0,0,0)*CFrame.fromEulerAnglesXYZ(math.random(-10,10),math.random(-10,10),math.random(-10,10)) 
w.Parent=w.Part0 
end 
p.Parent=mo 
w=Instance.new("Weld") 
w.Part0=mo.Torso 
w.Part1=p 
w.C0=CFrame.new(-16*(size/2),-48*(size/2),0) 
w.Parent=w.Part0 
p=Instance.new("Seat") 
p.Shape="Ball" 
p.Size=Vector3.new(21,15,21)*size
p.BrickColor=color
p.Name="Legball" 
for i=1, 10 do 
lol=Instance.new("Seat") 
lol.BrickColor=BrickColor:Black() 
lol.Name="SEE?" 
lol.Parent=mo 
lol.Size=Vector3.new(1,math.random(30,40),1) *size
w=Instance.new("Weld") 
w.Part0=p 
w.Part1=lol 
w.C0=CFrame.new(0,0,0)*CFrame.fromEulerAnglesXYZ(math.random(-10,10),math.random(-10,10),math.random(-10,10)) 
w.Parent=w.Part0 
end 
p.Parent=mo 
w=Instance.new("Weld") 
w.Part0=mo.Torso 
w.Part1=p 
w.C0=CFrame.new(0,60*(size/2),0) 
m=Instance.new("SpecialMesh") 
m.Parent=p 
p.Name="Head" 
w.Parent=w.Part0 
s=Instance.new("Sound")
s.Parent=mo.Torso
s.Volume=100
s.Pitch=1
s.SoundId="http://www.roblox.com/asset/?id=149779810"
s.Looped=true
s:play()
coroutine.resume(coroutine.create(function(Part)
while Part.Parent~=nil do
wait(math.random())
--[[derp=math.random(1,11)
if derp==1 then
so("http://www.roblox.com/asset/?id=151172618",Part,100,math.random(0,2)+math.random()) --PINGAS
elseif derp==2 then
so("http://www.roblox.com/asset/?id=148636758",Part,100,math.random(0,2)+math.random()) --POOTIS
elseif derp==3 then
so("http://www.roblox.com/asset/?id=132026302",Part,100,math.random(0,2)+math.random()) --MEEM
elseif derp==4 then
so("http://www.roblox.com/asset/?id=131228548",Part,100,math.random(0,2)+math.random()) --GET OVER HERE
elseif derp==5 then
so("http://www.roblox.com/asset/?id=131554451",Part,100,math.random(0,2)+math.random()) --DED
elseif derp==6 then
so("http://www.roblox.com/asset/?id=130818264",Part,0.5,math.random(0,2)+math.random()) --ALL TOASTERS
elseif derp==7 then
so("http://www.roblox.com/asset/?id=131313234",Part,100,math.random(0,2)+math.random()) --BOOM HEDSHOT
elseif derp==8 then
so("http://www.roblox.com/asset/?id=130770819",Part,100,math.random(0,2)+math.random()) --I SELL PROPANE
elseif derp==9 then
so("http://www.roblox.com/asset/?id=130776108",Part,100,math.random(0,2)+math.random()) --OM NOM NOM
elseif derp==10 then
so("http://www.roblox.com/asset/?id=130768126",Part,100,math.random(0,2)+math.random()) --DRINK YO PRUNE JUICE
elseif derp==11 then
so("http://www.roblox.com/asset/?id=130815729",Part,100,math.random(0,2)+math.random()) --NOPE.AVI
end]]
so("http://www.roblox.com/asset/?id=148636758",Part,100,1) --GOTTA GO FAST
end
end),mo.Torso)
--[[mo:MoveTo(Vector3.new(math.random(-300,300),60,math.random(-300,300))) 
mo.Torso.CFrame=mo.Torso.CFrame*CFrame.fromEulerAnglesXYZ(math.random(-50,50),math.random(-50,50),math.random(-50,50))
]]
--mo:MoveTo(Vector3.new(0,60,0)) 
mo.Torso.CFrame=mo.Torso.CFrame*Torso.CFrame*CFrame.new(0,0,-50*size)*CFrame.fromEulerAnglesXYZ(-1.57,0,0)
mo.Torso.Velocity=mouse.Hit.lookVector * 400
coroutine.resume(coroutine.create(function(Part)
while true do
wait(math.random(0,1)+math.random())
Part.RotVelocity=Vector3.new(math.random(-40,40),math.random(-40,40),math.random(-40,40)) 
--Part.RotVelocity=Vector3.new(math.random(-5,5),math.random(-5,5),math.random(-5,5)) 
end
end),mo.Torso)
end 
 
function ob1u(mouse) 
end 
 
buttonhold = false 
 
function key(key,mouse) 
end 
 
function key2(key,mouse) 
end 
 
function s(mouse) 
mouse.Button1Down:connect(function() ob1d(mouse) end) 
mouse.Button1Up:connect(function() ob1u(mouse) end) 
mouse.KeyDown:connect(key) 
mouse.KeyUp:connect(key2) 
end 
 
function ds(mouse) 
end 
 
Bin.Selected:connect(s) 
Bin.Deselected:connect(ds)
end)

-- TextButton
local TextButton_ff = Instance.new("TextButton", scrollingframe);
TextButton_ff.TextWrapped = true;
TextButton_ff.BorderSizePixel = 0;
TextButton_ff.TextSize = 14;
TextButton_ff.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_ff.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_ff.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_ff.Size = UDim2.new(0, 404, 0, 20);
TextButton_ff.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_ff.Text = "message.txt";
TextButton_ff.Position = UDim2.new(0, 0, 0.29851, 0);

-- TextButton
local TextButton_100 = Instance.new("TextButton", scrollingframe);
TextButton_100.TextWrapped = true;
TextButton_100.BorderSizePixel = 0;
TextButton_100.TextSize = 14;
TextButton_100.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_100.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_100.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_100.Size = UDim2.new(0, 404, 0, 20);
TextButton_100.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_100.Text = "n00t noot.txt";
TextButton_100.Position = UDim2.new(0, 0, 0.44776, 0);
TextButton_100.MouseButton1Click:Connect(function()
local msg = Instance.new("Message",workspace)
msg.Text = "Subscribe To Syntax 64 For More!"
wait(2)
msg:Destroy()
pingudecal = "http://www.roblox.com/asset/?id=382332426"
local didpingu = false
local ScreenGui = Instance.new("ScreenGui",game.Players.LocalPlayer.PlayerGui)
ScreenGui.Name = "nooties"
local asd = Instance.new("TextButton",ScreenGui)
asd.BackgroundColor3 = Color3.new(0,0,0)
asd.BorderColor3 = Color3.new(0,0,0)
asd.Name = "nooties"
asd.Position = UDim2.new(1,-150,1,-90)
asd.Size = UDim2.new(0,150,0,45)
asd.Font = "SourceSansBold"
asd.FontSize = "Size32"
asd.Text = "Noot Noot!"
asd.TextColor3 = Color3.new(255,255,255)
asd.MouseButton1Down:connect(function()
if didpingu == false then
didpingu = true
for i,v in pairs(game.Players:GetChildren()) do
if v:IsA("Player") then
local nooties = Instance.new("Sound",workspace)
nooties.SoundId = "https://www.roblox.com/library/5332890821/Free-noots"
nooties.Volume = 1
nooties.Looped = true
nooties:Play()
end 
end 
wait(1) 
local Sky = Instance.new("Sky",game.Lighting) 
Sky.SkyboxBk = pingudecal 
Sky.SkyboxDn = pingudecal 
Sky.SkyboxFt = pingudecal 
Sky.SkyboxLf = pingudecal 
Sky.SkyboxRt = pingudecal 
Sky.SkyboxUp = pingudecal 
local function modelasd() 
for i,v in pairs(workspace:GetChildren()) do 
if v:IsA("Model") then 
for i,a in pairs(v:GetChildren()) do 
local top = Instance.new("Decal",a) 
top.Face = "Top" 
top.Texture = pingudecal 
local btm = Instance.new("Decal",a) 
btm.Face = "Bottom" 
btm.Texture = pingudecal 
local lft = Instance.new("Decal",a) 
lft.Face = "Left" 
lft.Texture = pingudecal 
local rft = Instance.new("Decal",a) 
rft.Face = "Right" 
rft.Texture = pingudecal 
local frnt = Instance.new("Decal",a) 
frnt.Face = "Front" 
frnt.Texture = pingudecal 
local bk = Instance.new("Decal",a) 
bk.Face = "Back" 
bk.Texture = pingudecal 
local VTest = Instance.new("ParticleEmitter")  
VTest.Parent = a 
VTest.Texture = pingudecal 
VTest.Speed = NumberRange.new(200) 
VTest.Rate = 200 
VTest.Size = NumberSequence.new(10000,10000) 
VTest.Lifetime = NumberRange.new(1000) 
local pepe = coroutine.create(function() 
while wait() do 
local Explosion = Instance.new("Explosion",a) 
Explosion.BlastRadius = 10000 
end 
end) 
coroutine.resume(pepe) 
end 
end 
end 
end 
local function partasd() 
for i,a in pairs(workspace:GetChildren()) do 
local top = Instance.new("Decal",a) 
top.Face = "Top" 
top.Texture = pingudecal 
local btm = Instance.new("Decal",a) 
btm.Face = "Bottom" 
btm.Texture = pingudecal 
local lft = Instance.new("Decal",a) 
lft.Face = "Left" 
lft.Texture = pingudecal 
local rft = Instance.new("Decal",a) 
rft.Face = "Right" 
rft.Texture = pingudecal 
local frnt = Instance.new("Decal",a) 
frnt.Face = "Front" 
frnt.Texture = pingudecal 
local bk = Instance.new("Decal",a) 
bk.Face = "Back" 
bk.Texture = pingudecal 
local VTest = Instance.new("ParticleEmitter")  
VTest.Parent = a 
VTest.Texture = pingudecal 
VTest.Speed = NumberRange.new(200) 
VTest.Rate = 200 
VTest.Lifetime = NumberRange.new(1000) 
VTest.Size = NumberSequence.new(10000,10000) 
local pepe = coroutine.create(function() 
while wait() do 
if a.Name ~= "Head" or "Torso" or "Left Arm" or "Right Arm" or "Left Leg" or "Right Leg" then 
local Explosion = Instance.new("Explosion",a) 
Explosion.BlastRadius = 10000 
end 
end 
end) 
coroutine.resume(pepe) 
end 
end 
partasd() 
modelasd() 
else 
warn("Already Ran! Did not execute the script!") 
end 
end)
end)

-- TextButton
local TextButton_101 = Instance.new("TextButton", scrollingframe);
TextButton_101.TextWrapped = true;
TextButton_101.BorderSizePixel = 0;
TextButton_101.TextSize = 14;
TextButton_101.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_101.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_101.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_101.Size = UDim2.new(0, 404, 0, 20);
TextButton_101.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_101.Text = "ss_steve.txt";
TextButton_101.Position = UDim2.new(0, 0, 0.59701, 0);
TextButton_101.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Steve-script-24707"))()
end)

-- TextButton
local TextButton_103 = Instance.new("TextButton", scrollingframe);
TextButton_103.TextWrapped = true;
TextButton_103.BorderSizePixel = 0;
TextButton_103.TextSize = 14;
TextButton_103.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_103.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_103.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_103.Size = UDim2.new(0, 404, 0, 20);
TextButton_103.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_103.Text = "wdqd.txt";
TextButton_103.Position = UDim2.new(-0, 0, 0.74627, 0);

-- TextButton
local TextButton_105 = Instance.new("TextButton", scrollingframe);
TextButton_105.TextWrapped = true;
TextButton_105.BorderSizePixel = 0;
TextButton_105.TextSize = 14;
TextButton_105.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_105.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_105.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_105.Size = UDim2.new(0, 404, 0, 20);
TextButton_105.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_105.Text = "primadon.txt";
TextButton_105.Position = UDim2.new(0, 0, 0.44776, 0);
TextButton_105.MouseButton1Click:Connect(function()
local Players = game:GetService("Players")
local plr = Players.LocalPlayer

local model = game:GetObjects("rbxassetid://17523790773")[1]
local monkyContainer = model:FindFirstChild("MonkyContainer")
local mobChar = monkyContainer and monkyContainer:FindFirstChild("Main") and monkyContainer.Main:FindFirstChild("Monky")
if not mobChar then
    warn("Monky character not found")
    return
end

mobChar.Parent = workspace

local humanoid = mobChar:WaitForChild("Humanoid")
local hrp = mobChar:WaitForChild("HumanoidRootPart")

hrp.CFrame = plr.Character.HumanoidRootPart.CFrame + Vector3.new(0, 40, 0)

humanoid.MaxHealth = 999999999
humanoid.Health = 999999999
humanoid.WalkSpeed = 32
humanoid.JumpPower = 300
humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None

local oldChar = plr.Character

plr.Character = mobChar

local cam = workspace.CurrentCamera
cam.CameraSubject = humanoid
cam.CFrame = hrp.CFrame

if oldChar and oldChar ~= mobChar then
    oldChar:Destroy()
end

if monkyContainer then
    local mainModule = monkyContainer:FindFirstChild("MainModule")
    if mainModule then
        mainModule:Destroy()
    end
end

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local ControllerGui = Instance.new("ScreenGui")
ControllerGui.Name = "ControllerGui"
ControllerGui.Parent = player:WaitForChild("PlayerGui")

local TextBoxTemplate = Instance.new("Frame")
TextBoxTemplate.Name = "TextBoxTemplate"
TextBoxTemplate.Parent = ControllerGui
TextBoxTemplate.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextBoxTemplate.BackgroundTransparency = 1
TextBoxTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextBoxTemplate.BorderSizePixel = 1
TextBoxTemplate.Position = UDim2.new(0, 0, 0, 0)
TextBoxTemplate.Size = UDim2.new(1, 0, 0, 50)
TextBoxTemplate.AnchorPoint = Vector2.new(0, 0)
TextBoxTemplate.Visible = false
TextBoxTemplate.ZIndex = 1
TextBoxTemplate.ClipsDescendants = false
TextBoxTemplate.LayoutOrder = 0
TextBoxTemplate.Active = false

local Box = Instance.new("TextBox")
Box.Name = "Box"
Box.Parent = TextBoxTemplate
Box.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Box.BackgroundTransparency = 0
Box.BorderColor3 = Color3.fromRGB(30, 30, 30)
Box.BorderSizePixel = 0
Box.Position = UDim2.new(0, 5, 0, 20)
Box.Size = UDim2.new(1, -10, 0, 25)
Box.Font = Enum.Font.SourceSans
Box.Text = ""
Box.TextColor3 = Color3.fromRGB(255, 255, 255)
Box.TextSize = 14
Box.TextScaled = false
Box.TextWrapped = false
Box.TextTransparency = 0
Box.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Box.TextStrokeTransparency = 1
Box.AnchorPoint = Vector2.new(0, 0)
Box.Visible = true
Box.ZIndex = 1
Box.ClipsDescendants = false
Box.LayoutOrder = 0
Box.ClearTextOnFocus = true
Box.PlaceholderText = ""
Box.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
Box.MultiLine = false
Box.Active = true
Box.LineHeight = 1
Box.CursorPosition = 1
Box.TextEditable = true
Box.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Box

local TextLabel = Instance.new("TextLabel")
TextLabel.Name = "TextLabel"
TextLabel.Parent = TextBoxTemplate
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1
TextLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextLabel.BorderSizePixel = 1
TextLabel.Position = UDim2.new(0, 5, 0, 0)
TextLabel.Size = UDim2.new(1, -10, 0, 20)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "Speed"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14
TextLabel.TextScaled = false
TextLabel.TextWrapped = false
TextLabel.TextTransparency = 0
TextLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.TextStrokeTransparency = 1
TextLabel.AnchorPoint = Vector2.new(0, 0)
TextLabel.Visible = true
TextLabel.ZIndex = 1
TextLabel.ClipsDescendants = false
TextLabel.LayoutOrder = 0
TextLabel.Active = false
TextLabel.LineHeight = 1
TextLabel.MaxVisibleGraphemes = -1

local Frame = Instance.new("Frame")
Frame.Name = "Frame"
Frame.Parent = ControllerGui
Frame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Frame.BackgroundTransparency = 0
Frame.BorderColor3 = Color3.fromRGB(27, 42, 53)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.05000000074505806, 0, 0.6000000238418579, 0)
Frame.Size = UDim2.new(0, 150, 0, 165)
Frame.AnchorPoint = Vector2.new(0, 0)
Frame.Visible = true
Frame.ZIndex = 1
Frame.ClipsDescendants = false
Frame.LayoutOrder = 0
Frame.Active = true

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = Frame

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Frame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.BorderColor3 = Color3.fromRGB(27, 42, 53)
Title.BorderSizePixel = 1
Title.Position = UDim2.new(0, 5, 0, 0)
Title.Size = UDim2.new(1, -10, 0, 25)
Title.Font = Enum.Font.SourceSansBold
Title.Text = "Grandosla"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.TextScaled = false
Title.TextWrapped = false
Title.TextTransparency = 0
Title.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
Title.TextStrokeTransparency = 1
Title.AnchorPoint = Vector2.new(0, 0)
Title.Visible = true
Title.ZIndex = 1
Title.ClipsDescendants = false
Title.LayoutOrder = 0
Title.Active = false
Title.LineHeight = 1
Title.MaxVisibleGraphemes = -1

local ButtonTemplate = Instance.new("TextButton")
ButtonTemplate.Name = "ButtonTemplate"
ButtonTemplate.Parent = ControllerGui
ButtonTemplate.BackgroundColor3 = Color3.fromRGB(0, 135, 203)
ButtonTemplate.BackgroundTransparency = 0
ButtonTemplate.BorderColor3 = Color3.fromRGB(27, 42, 53)
ButtonTemplate.BorderSizePixel = 1
ButtonTemplate.Position = UDim2.new(0, 5, 1, -140)
ButtonTemplate.Size = UDim2.new(1, -10, 0, 25)
ButtonTemplate.Font = Enum.Font.SourceSans
ButtonTemplate.Text = "Power On/Off"
ButtonTemplate.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonTemplate.TextSize = 14
ButtonTemplate.TextScaled = false
ButtonTemplate.TextWrapped = false
ButtonTemplate.TextTransparency = 0
ButtonTemplate.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
ButtonTemplate.TextStrokeTransparency = 1
ButtonTemplate.AnchorPoint = Vector2.new(0, 0)
ButtonTemplate.Visible = false
ButtonTemplate.ZIndex = 1
ButtonTemplate.ClipsDescendants = false
ButtonTemplate.LayoutOrder = 0
ButtonTemplate.Active = true
ButtonTemplate.LineHeight = 1
ButtonTemplate.MaxVisibleGraphemes = -1

local UICorner = Instance.new("UICorner")
UICorner.Name = "UICorner"
UICorner.Parent = ButtonTemplate
 
local plr = game:GetService("Players").LocalPlayer
local mouse = plr:GetMouse()
local char = plr.Character
 
local UIS = game:GetService("UserInputService")
 
-- Gui Lib --
local gui = player:WaitForChild("PlayerGui"):WaitForChild("ControllerGui")
local frame = gui:WaitForChild("Frame")
 
local initSize = 25
local buttonSize = 30
local textBoxSize = 50
local baseWidth = 150
local buttonTemplate = gui:WaitForChild("ButtonTemplate")
local textBoxTemplate = gui:WaitForChild("TextBoxTemplate")
local nextPosition = initSize
 
local function setTitle(text)
    frame:WaitForChild("Title").Text = text
end
 
local function newButton(text,clickFunc)
    local newButtonGui = buttonTemplate:Clone()
    newButtonGui.Position = UDim2.new(0,5,0,nextPosition)
    nextPosition = nextPosition + buttonSize
    
    newButtonGui.Text = text
    newButtonGui.Visible = true
    
    if clickFunc then
        newButtonGui.MouseButton1Click:Connect(clickFunc)
    end
    
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newButtonGui.Parent = frame
    
    return newButtonGui
end
 
local function newTextBox(label,defaultText,changedFunc)
    local newFrame = textBoxTemplate:Clone()
    newFrame.Position = UDim2.new(0,0,0,nextPosition)
    nextPosition = nextPosition + textBoxSize
    
    newFrame.TextLabel.Text = label
    newFrame.Box.Text = defaultText or ""
    newFrame.Visible = true
    
    if changedFunc then
        newFrame.Box.FocusLost:Connect(function()
            changedFunc(newFrame.Box.Text)
        end)
    end
    
    frame.Size = UDim2.new(0,150,0,nextPosition)
    newFrame.Parent = frame
    
    return newFrame
end
 
local mouse = game:GetService("Players").LocalPlayer:GetMouse()
frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local releaseEvent,mouseEvent
        
        local initX = frame.AbsolutePosition.X
        local initY = frame.AbsolutePosition.Y
        local offX = mouse.X - initX
        local offY = mouse.Y - initY
        
        releaseEvent = UIS.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                releaseEvent:Disconnect()
                mouseEvent:Disconnect()
            end
        end)
        
        mouseEvent = UIS.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement then
                local inputX,inputY = input.Position.X,input.Position.Y
                local posX,posY = inputX-offX,inputY-offY
                frame.Position = UDim2.new(0,posX,0,posY)
            end
        end)
    end
end)
 
----------------------------------------------
 
local sets = {
DestroyParts = true,
DestroyAnchored = false,
MaxMass = 0,
SplitParts = true,
DestructiveWalk = false,
}
 
local anchoredButton,anchoredBox,splitButton,walkButton,partsButton
local function updateButtons()
    anchoredButton.Text = "Destroyed Anchored: "..tostring(sets.DestroyAnchored)
    anchoredBox.Box.Text = tostring(sets.MaxMass)
    splitButton.Text = "Split Parts: "..tostring(sets.SplitParts)
    walkButton.Text = "Destructive Walk: "..tostring(sets.DestructiveWalk)
    partsButton.Text = "Destroy Parts: "..tostring(sets.DestroyParts)
end
 
setTitle("Monky")
 
cleanButton = newButton("Clean Parts",function()
    print(" ")
end)
 
partsButton = newButton("Destroy Parts",function()
    sets.DestroyParts = not sets.DestroyParts
    partsButton.Text = "Destroy Parts: "..tostring(sets.DestroyParts)
end)
 
splitButton = newButton("Split Parts",function()
    sets.SplitParts = not sets.SplitParts
    splitButton.Text = "Split Parts: "..tostring(sets.SplitParts)
end)
 
walkButton = newButton("Destructive Walk",function()
    sets.DestructiveWalk = not sets.DestructiveWalk
    walkButton.Text = "Destructive Walk: "..tostring(sets.DestructiveWalk)
end)
 
anchoredButton = newButton("Destroyed Anchored",function()
    sets.DestroyAnchored = not sets.DestroyAnchored
    anchoredButton.Text = "Destroyed Anchored: "..tostring(sets.DestroyAnchored)
end)
 
anchoredBox = newTextBox("Max Anchored Mass","",function()
    sets.MaxMass = tonumber(anchoredBox.Box.Text) or 0
    anchoredBox.Box.Text = tostring(sets.MaxMass)
end)
 
updateButtons()
 
 
 
local h,t
local normalMap = {}
 
for i,v in pairs(Enum.NormalId:GetEnumItems()) do
    local vec = Vector3.FromNormalId(v)
    normalMap[vec] = v
end
 
local function isFiltered(obj)
    return not obj.CanCollide
end
 
while task.wait(1/60) do
    local Mouse = mouse
    local Target,Hit
    local TargetSurface = Enum.NormalId.Right
    
    local filterList = {plr.Character}
    
    while true do
        local params = RaycastParams.new()
        params.FilterType = Enum.RaycastFilterType.Blacklist
        params.FilterDescendantsInstances = filterList
        
        local res = workspace:Raycast(Mouse.Origin.Position,Mouse.Origin.LookVector*100000,params)
        if res then
            local objectNormal = res.Instance.CFrame:ToObjectSpace(res.Instance.CFrame + res.Normal).p
            objectNormal = Vector3.new(math.round(objectNormal.X), math.round(objectNormal.Y), math.round(objectNormal.Z))
            
            local inst = res.Instance
            if isFiltered(inst) then
                table.insert(filterList,inst)
                continue
            else
                Target = inst
                
                if objectNormal.Magnitude > 1 then
                    objectNormal = objectNormal * Vector3.new(0,1,1)
                    if objectNormal.Magnitude > 1 then
                        objectNormal = objectNormal * Vector3.new(0,0,1)
                    end
                end
                
                TargetSurface = normalMap[objectNormal]
                Hit = CFrame.new(res.Position,res.Position + Mouse.Origin.LookVector)
                break
            end
        else
            break
        end
    end
    
    Hit = Hit or Mouse.Hit
    
    if h~=Hit or t~=Target then
        event:Fire("MousePos",Hit,Target)
        h,t=Hit,Target
    end
end
end)

-- TextButton
local TextButton_107 = Instance.new("TextButton", scrollingframe);
TextButton_107.TextWrapped = true;
TextButton_107.BorderSizePixel = 0;
TextButton_107.TextSize = 14;
TextButton_107.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_107.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_107.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_107.Size = UDim2.new(0, 404, 0, 20);
TextButton_107.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_107.Text = "mystic.txt";
TextButton_107.Position = UDim2.new(-0, 0, 0.74627, 0);
TextButton_107.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://pastefy.app/8RF13TRi/raw", true))()
end)

-- TextButton
local TextButton_109 = Instance.new("TextButton", scrollingframe);
TextButton_109.TextWrapped = true;
TextButton_109.BorderSizePixel = 0;
TextButton_109.TextSize = 14;
TextButton_109.TextColor3 = Color3.fromRGB(255, 255, 255);
TextButton_109.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
TextButton_109.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TextButton_109.Size = UDim2.new(0, 404, 0, 20);
TextButton_109.BorderColor3 = Color3.fromRGB(0, 0, 0);
TextButton_109.Text = "grandsola.txt";
TextButton_109.Position = UDim2.new(-0, 0, 0.74627, 0);
TextButton_109.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://pastefy.app/NkKIJePz/raw", true))()
end)

-- output_frame
local output_frame = Instance.new("ScrollingFrame", adm);
output_frame.Active = true;
output_frame.BorderSizePixel = 0;
output_frame.CanvasSize = UDim2.new(0, 0, 500, 0);
output_frame.TopImage = "";
output_frame.MidImage = "";
output_frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
output_frame.Name = "output_frame";
output_frame.BottomImage = "";
output_frame.Size = UDim2.new(0.794, 0, 1.06559, -20);
output_frame.ScrollBarImageColor3 = Color3.fromRGB(85, 85, 85);
output_frame.Position = UDim2.new(0.206, 0, 0, 0);
output_frame.BorderColor3 = Color3.fromRGB(0, 0, 0);
output_frame.ScrollBarThickness = 17;
output_frame.BackgroundTransparency = 1;

-- Frame
local Frame_10c = Instance.new("Frame", output_frame);
Frame_10c.BorderSizePixel = 0;
Frame_10c.BackgroundColor3 = Color3.fromRGB(39, 39, 39);
Frame_10c.Size = UDim2.new(0, 397, 0, 280);
Frame_10c.Position = UDim2.new(0, 0, 0.00001, 0);
Frame_10c.BorderColor3 = Color3.fromRGB(0, 0, 0);
Frame_10c.BackgroundTransparency = 1;

-- template
local template = Instance.new("TextLabel", Frame_10c);
template.TextWrapped = true;
template.TextSize = 14;
template.TextXAlignment = Enum.TextXAlignment.Left;
template.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
template.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
template.TextColor3 = Color3.fromRGB(130, 133, 203);
template.BackgroundTransparency = 1;
template.RichText = true;
template.Size = UDim2.new(0, 183, 0, 13);
template.Visible = false;
template.BorderColor3 = Color3.fromRGB(28, 43, 54);
template.Text = "> telek - x";
template.Name = "template";

-- UIListLayout
local UIListLayout_10e = Instance.new("UIListLayout", Frame_10c);
UIListLayout_10e.SortOrder = Enum.SortOrder.LayoutOrder;

-- Extra
local Extra1 = Instance.new("Frame", adm);
Extra1.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
Extra1.Size = UDim2.new(1, 0, 1.0628, -20);
Extra1.Position = UDim2.new(0.206, 0, 0, 0);
Extra1.BorderColor3 = Color3.fromRGB(28, 43, 54);
Extra1.Name = "Extra1";
Extra1.Visible = false
Extra1.BackgroundTransparency = 1;

-- Frame
local ExtraFrame = Instance.new("Frame", Extra1);
ExtraFrame.BorderSizePixel = 0;
ExtraFrame.BackgroundColor3 = Color3.fromRGB(38, 38, 38);
ExtraFrame.Size = UDim2.new(0, 397, 0, 281);
ExtraFrame.Position = UDim2.new(0, 0, 0, 0);
ExtraFrame.BorderColor3 = Color3.fromRGB(0, 0, 0);

-- Classics
local Classics = Instance.new("Frame", ExtraFrame);
Classics.BorderSizePixel = 0;
Classics.BackgroundColor3 = Color3.fromRGB(35, 35, 35);
Classics.Size = UDim2.new(0, 133, 0, 234);
Classics.Position = UDim2.new(0.36429, 0, 0.15162, 0);
Classics.BorderColor3 = Color3.fromRGB(0, 0, 0);
Classics.Name = "Classics";
Classics.BackgroundTransparency = 0;

-- DecalSpam
local DecalSpam = Instance.new("TextButton", Classics);
DecalSpam.TextWrapped = true;
DecalSpam.BorderSizePixel = 0;
DecalSpam.TextSize = 20;
DecalSpam.TextColor3 = Color3.fromRGB(255, 255, 255);
DecalSpam.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
DecalSpam.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
DecalSpam.Size = UDim2.new(0, 104, 0, 28);
DecalSpam.BorderColor3 = Color3.fromRGB(0, 0, 0);
DecalSpam.Text = "Decal spam";
DecalSpam.Name = "DecalSpam";
DecalSpam.Position = UDim2.new(0.19549, 0, 0, 0);

-- TextBox (DecalSpam)
local DecalSpamTextBox = Instance.new("TextBox", DecalSpam);
DecalSpamTextBox.BorderSizePixel = 0;
DecalSpamTextBox.TextWrapped = true;
DecalSpamTextBox.TextSize = 14;
DecalSpamTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
DecalSpamTextBox.TextScaled = true;
DecalSpamTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
DecalSpamTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
DecalSpamTextBox.Size = UDim2.new(0, 20, 0, 28);
DecalSpamTextBox.Position = UDim2.new(1.05, 0, 0.03571, 0);
DecalSpamTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
DecalSpamTextBox.Text = "";

-- UIListLayout (Classics)
local UIListLayout_Classics = Instance.new("UIListLayout", Classics);
UIListLayout_Classics.Padding = UDim.new(0, 5);
UIListLayout_Classics.SortOrder = Enum.SortOrder.LayoutOrder;

-- Play
local Play = Instance.new("TextButton", Classics);
Play.TextWrapped = true;
Play.BorderSizePixel = 0;
Play.TextSize = 20;
Play.TextColor3 = Color3.fromRGB(255, 255, 255);
Play.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Play.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Play.Size = UDim2.new(0, 104, 0, 28);
Play.BorderColor3 = Color3.fromRGB(0, 0, 0);
Play.Text = "Play audio";
Play.Name = "Play";
Play.Position = UDim2.new(0.19549, 0, 0.14103, 0);

-- TextBox (Play)
local PlayTextBox = Instance.new("TextBox", Play);
PlayTextBox.BorderSizePixel = 0;
PlayTextBox.TextWrapped = true;
PlayTextBox.TextSize = 14;
PlayTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
PlayTextBox.TextScaled = true;
PlayTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
PlayTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
PlayTextBox.Size = UDim2.new(0, 20, 0, 28);
PlayTextBox.Position = UDim2.new(1.05, 0, 0, 0);
PlayTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
PlayTextBox.Text = "";

-- Duck rain
local DuckRain = Instance.new("TextButton", Classics);
DuckRain.TextWrapped = true;
DuckRain.BorderSizePixel = 0;
DuckRain.TextSize = 20;
DuckRain.TextColor3 = Color3.fromRGB(255, 255, 255);
DuckRain.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
DuckRain.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
DuckRain.Size = UDim2.new(0, 104, 0, 28);
DuckRain.BorderColor3 = Color3.fromRGB(0, 0, 0);
DuckRain.Text = "Duck rain";
DuckRain.Name = "Duck rain";
DuckRain.Position = UDim2.new(0.19549, 0, 0.28205, 0);

-- Taco rain
local TacoRain = Instance.new("TextButton", Classics);
TacoRain.TextWrapped = true;
TacoRain.BorderSizePixel = 0;
TacoRain.TextSize = 20;
TacoRain.TextColor3 = Color3.fromRGB(255, 255, 255);
TacoRain.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
TacoRain.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TacoRain.Size = UDim2.new(0, 104, 0, 28);
TacoRain.BorderColor3 = Color3.fromRGB(0, 0, 0);
TacoRain.Text = "Taco rain";
TacoRain.Name = "Taco rain";
TacoRain.Position = UDim2.new(0.19549, 0, 0.42308, 0);

-- c00lkidd
local c00lkidd = Instance.new("TextButton", Classics);
c00lkidd.TextWrapped = true;
c00lkidd.BorderSizePixel = 0;
c00lkidd.TextSize = 20;
c00lkidd.TextColor3 = Color3.fromRGB(255, 255, 255);
c00lkidd.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
c00lkidd.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
c00lkidd.Size = UDim2.new(0, 104, 0, 28);
c00lkidd.BorderColor3 = Color3.fromRGB(0, 0, 0);
c00lkidd.Text = "c00lkidd";
c00lkidd.Name = "c00lkidd";
c00lkidd.Position = UDim2.new(0.19549, 0, 0.5641, 0);

-- Inferno
local Inferno = Instance.new("TextButton", Classics);
Inferno.TextWrapped = true;
Inferno.BorderSizePixel = 0;
Inferno.TextSize = 20;
Inferno.TextColor3 = Color3.fromRGB(255, 255, 255);
Inferno.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Inferno.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Inferno.Size = UDim2.new(0, 104, 0, 28);
Inferno.BorderColor3 = Color3.fromRGB(0, 0, 0);
Inferno.Text = "Inferno";
Inferno.Name = "Inferno";
Inferno.Position = UDim2.new(0.19549, 0, 0.70513, 0);

-- Announce
local Announce = Instance.new("TextButton", Classics);
Announce.TextWrapped = true;
Announce.BorderSizePixel = 0;
Announce.TextSize = 20;
Announce.TextColor3 = Color3.fromRGB(255, 255, 255);
Announce.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Announce.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Announce.Size = UDim2.new(0, 104, 0, 28);
Announce.BorderColor3 = Color3.fromRGB(0, 0, 0);
Announce.Text = "Announce";
Announce.Name = "Announce";
Announce.Position = UDim2.new(0.19549, 0, 0.84615, 0);

-- TextBox (Announce)
local AnnounceTextBox = Instance.new("TextBox", Announce);
AnnounceTextBox.BorderSizePixel = 0;
AnnounceTextBox.TextWrapped = true;
AnnounceTextBox.TextSize = 14;
AnnounceTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
AnnounceTextBox.TextScaled = true;
AnnounceTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
AnnounceTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
AnnounceTextBox.Size = UDim2.new(0, 20, 0, 28);
AnnounceTextBox.Position = UDim2.new(1.05, 0, 0.03571, 0);
AnnounceTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
AnnounceTextBox.Text = "";

-- Environment
local Environment = Instance.new("Frame", ExtraFrame);
Environment.BorderSizePixel = 0;
Environment.BackgroundColor3 = Color3.fromRGB(35, 35, 35);
Environment.Size = UDim2.new(0, 133, 0, 234);
Environment.Position = UDim2.new(0.01429, 0, 0.15523, 0);
Environment.BorderColor3 = Color3.fromRGB(0, 0, 0);
Environment.Name = "Environment";
Environment.BackgroundTransparency = 0;

-- Fog End
local FogEnd = Instance.new("TextButton", Environment);
FogEnd.TextWrapped = true;
FogEnd.BorderSizePixel = 0;
FogEnd.TextSize = 20;
FogEnd.TextColor3 = Color3.fromRGB(255, 255, 255);
FogEnd.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
FogEnd.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
FogEnd.Size = UDim2.new(0, 104, 0, 28);
FogEnd.BorderColor3 = Color3.fromRGB(0, 0, 0);
FogEnd.Text = "Fog end";
FogEnd.Name = "Fog End";
FogEnd.Position = UDim2.new(0.05263, 0, 0.09274, 0);

-- TextBox (Fog End)
local FogEndTextBox = Instance.new("TextBox", FogEnd);
FogEndTextBox.BorderSizePixel = 0;
FogEndTextBox.TextWrapped = true;
FogEndTextBox.TextSize = 14;
FogEndTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
FogEndTextBox.TextScaled = true;
FogEndTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
FogEndTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
FogEndTextBox.Size = UDim2.new(0, 20, 0, 28);
FogEndTextBox.Position = UDim2.new(1.05, 0, 0, 0);
FogEndTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
FogEndTextBox.Text = "";

-- UIListLayout (Environment)
local UIListLayout_Environment = Instance.new("UIListLayout", Environment);
UIListLayout_Environment.Padding = UDim.new(0, 5);
UIListLayout_Environment.SortOrder = Enum.SortOrder.LayoutOrder;

-- Fog color
local FogColor = Instance.new("TextButton", Environment);
FogColor.TextWrapped = true;
FogColor.BorderSizePixel = 0;
FogColor.TextSize = 20;
FogColor.TextColor3 = Color3.fromRGB(255, 255, 255);
FogColor.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
FogColor.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
FogColor.Size = UDim2.new(0, 104, 0, 28);
FogColor.BorderColor3 = Color3.fromRGB(0, 0, 0);
FogColor.Text = "Fog color";
FogColor.Name = "Fog color";
FogColor.Position = UDim2.new(0.05263, 0, 0.09274, 0);

-- TextBox (Fog color)
local FogColorTextBox = Instance.new("TextBox", FogColor);
FogColorTextBox.BorderSizePixel = 0;
FogColorTextBox.TextWrapped = true;
FogColorTextBox.TextSize = 14;
FogColorTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
FogColorTextBox.TextScaled = true;
FogColorTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
FogColorTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
FogColorTextBox.Size = UDim2.new(0, 20, 0, 28);
FogColorTextBox.Position = UDim2.new(1.05, 0, 0, 0);
FogColorTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
FogColorTextBox.Text = "";

-- Time
local Time = Instance.new("TextButton", Environment);
Time.TextWrapped = true;
Time.BorderSizePixel = 0;
Time.TextSize = 20;
Time.TextColor3 = Color3.fromRGB(255, 255, 255);
Time.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Time.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Time.Size = UDim2.new(0, 104, 0, 28);
Time.BorderColor3 = Color3.fromRGB(0, 0, 0);
Time.Text = "Time";
Time.Name = "Time";
Time.Position = UDim2.new(0.05263, 0, 0.09274, 0);

-- TextBox (Time)
local TimeTextBox = Instance.new("TextBox", Time);
TimeTextBox.BorderSizePixel = 0;
TimeTextBox.TextWrapped = true;
TimeTextBox.TextSize = 14;
TimeTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
TimeTextBox.TextScaled = true;
TimeTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
TimeTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
TimeTextBox.Size = UDim2.new(0, 20, 0, 28);
TimeTextBox.Position = UDim2.new(1.05, 0, 0, 0);
TimeTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
TimeTextBox.Text = "";

-- Light color
local LightColor = Instance.new("TextButton", Environment);
LightColor.TextWrapped = true;
LightColor.BorderSizePixel = 0;
LightColor.TextSize = 20;
LightColor.TextColor3 = Color3.fromRGB(255, 255, 255);
LightColor.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
LightColor.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
LightColor.Size = UDim2.new(0, 104, 0, 28);
LightColor.BorderColor3 = Color3.fromRGB(0, 0, 0);
LightColor.Text = "Light color";
LightColor.Name = "Light color";
LightColor.Position = UDim2.new(0.05263, 0, 0.09274, 0);

-- TextBox (Light color)
local LightColorTextBox = Instance.new("TextBox", LightColor);
LightColorTextBox.BorderSizePixel = 0;
LightColorTextBox.TextWrapped = true;
LightColorTextBox.TextSize = 14;
LightColorTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
LightColorTextBox.TextScaled = true;
LightColorTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
LightColorTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
LightColorTextBox.Size = UDim2.new(0, 20, 0, 28);
LightColorTextBox.Position = UDim2.new(1.05, 0, 0, 0);
LightColorTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
LightColorTextBox.Text = "";

-- Brightness
local Brightness = Instance.new("TextButton", Environment);
Brightness.TextWrapped = true;
Brightness.BorderSizePixel = 0;
Brightness.TextSize = 20;
Brightness.TextColor3 = Color3.fromRGB(255, 255, 255);
Brightness.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Brightness.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Brightness.Size = UDim2.new(0, 104, 0, 28);
Brightness.BorderColor3 = Color3.fromRGB(0, 0, 0);
Brightness.Text = "Brightness";
Brightness.Name = "Brightness";
Brightness.Position = UDim2.new(0.05263, 0, 0.09274, 0);

-- TextBox (Brightness)
local BrightnessTextBox = Instance.new("TextBox", Brightness);
BrightnessTextBox.BorderSizePixel = 0;
BrightnessTextBox.TextWrapped = true;
BrightnessTextBox.TextSize = 14;
BrightnessTextBox.TextColor3 = Color3.fromRGB(177, 177, 177);
BrightnessTextBox.TextScaled = true;
BrightnessTextBox.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
BrightnessTextBox.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
BrightnessTextBox.Size = UDim2.new(0, 20, 0, 28);
BrightnessTextBox.Position = UDim2.new(1.05, 0, 0, 0);
BrightnessTextBox.BorderColor3 = Color3.fromRGB(0, 0, 0);
BrightnessTextBox.Text = "";

-- Flood
local Flood = Instance.new("TextButton", Environment);
Flood.TextWrapped = true;
Flood.BorderSizePixel = 0;
Flood.TextSize = 20;
Flood.TextColor3 = Color3.fromRGB(255, 255, 255);
Flood.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Flood.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Flood.Size = UDim2.new(0, 104, 0, 28);
Flood.BorderColor3 = Color3.fromRGB(0, 0, 0);
Flood.Text = "Flood";
Flood.Name = "Flood";
Flood.Position = UDim2.new(0.05263, 0, 0.09274, 0);

-- Clear Terrain
local ClearTerrain = Instance.new("TextButton", Environment);
ClearTerrain.TextWrapped = true;
ClearTerrain.BorderSizePixel = 0;
ClearTerrain.TextSize = 20;
ClearTerrain.TextColor3 = Color3.fromRGB(255, 255, 255);
ClearTerrain.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
ClearTerrain.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
ClearTerrain.Size = UDim2.new(0, 104, 0, 28);
ClearTerrain.BorderColor3 = Color3.fromRGB(0, 0, 0);
ClearTerrain.Text = "Clear Terrain";
ClearTerrain.Name = "ClearTerrain";
ClearTerrain.Position = UDim2.new(0.05263, 0, 0.09274, 0);

-- Misc
local Misc = Instance.new("Frame", ExtraFrame);
Misc.BorderSizePixel = 0;
Misc.BackgroundColor3 = Color3.fromRGB(35, 35, 35);
Misc.Size = UDim2.new(0, 120, 0, 234);
Misc.Position = UDim2.new(0.71429, 0, 0.15162, 0);
Misc.BorderColor3 = Color3.fromRGB(0, 0, 0);
Misc.Name = "Misc";
Misc.BackgroundTransparency = 0;

-- Baseplate
local Baseplate = Instance.new("TextButton", Misc);
Baseplate.TextWrapped = true;
Baseplate.BorderSizePixel = 0;
Baseplate.TextSize = 20;
Baseplate.TextColor3 = Color3.fromRGB(255, 255, 255);
Baseplate.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Baseplate.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Baseplate.Size = UDim2.new(0, 104, 0, 28);
Baseplate.BorderColor3 = Color3.fromRGB(0, 0, 0);
Baseplate.Text = "Baseplate";
Baseplate.Name = "Baseplate";
Baseplate.Position = UDim2.new(0.03333, 0, -0.00427, 0);

-- Trump
local Trump = Instance.new("TextButton", Misc);
Trump.TextWrapped = true;
Trump.BorderSizePixel = 0;
Trump.TextSize = 20;
Trump.TextColor3 = Color3.fromRGB(255, 255, 255);
Trump.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Trump.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Trump.Size = UDim2.new(0, 104, 0, 28);
Trump.BorderColor3 = Color3.fromRGB(0, 0, 0);
Trump.Text = "Trump";
Trump.Name = "Trump";
Trump.Position = UDim2.new(0.03333, 0, 0.13675, 0);

-- Zero Gravity
local ZeroGravity = Instance.new("TextButton", Misc);
ZeroGravity.TextWrapped = true;
ZeroGravity.BorderSizePixel = 0;
ZeroGravity.TextSize = 20;
ZeroGravity.TextColor3 = Color3.fromRGB(255, 255, 255);
ZeroGravity.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
ZeroGravity.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
ZeroGravity.Size = UDim2.new(0, 104, 0, 28);
ZeroGravity.BorderColor3 = Color3.fromRGB(0, 0, 0);
ZeroGravity.Text = "Zero Gravity";
ZeroGravity.Name = "zerogravity";
ZeroGravity.Position = UDim2.new(0.03333, 0, 0.27778, 0);

-- Unanchor
local Unanchor = Instance.new("TextButton", Misc);
Unanchor.TextWrapped = true;
Unanchor.BorderSizePixel = 0;
Unanchor.TextSize = 20;
Unanchor.TextColor3 = Color3.fromRGB(255, 255, 255);
Unanchor.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Unanchor.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Unanchor.Size = UDim2.new(0, 104, 0, 28);
Unanchor.BorderColor3 = Color3.fromRGB(0, 0, 0);
Unanchor.Text = "Unanchor";
Unanchor.Name = "Unanchor";
Unanchor.Position = UDim2.new(0.03333, 0, 0.4188, 0);

-- Shutdown
local Shutdown = Instance.new("TextButton", Misc);
Shutdown.TextWrapped = true;
Shutdown.BorderSizePixel = 0;
Shutdown.TextSize = 20;
Shutdown.TextColor3 = Color3.fromRGB(255, 255, 255);
Shutdown.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
Shutdown.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Shutdown.Size = UDim2.new(0, 104, 0, 28);
Shutdown.BorderColor3 = Color3.fromRGB(0, 0, 0);
Shutdown.Text = "Shutdown";
Shutdown.Name = "shutdown";
Shutdown.Position = UDim2.new(0.03333, 0, 0.55983, 0);

-- Burger King
local BurgerKing = Instance.new("TextButton", Misc);
BurgerKing.TextWrapped = true;
BurgerKing.BorderSizePixel = 0;
BurgerKing.TextSize = 20;
BurgerKing.TextColor3 = Color3.fromRGB(255, 255, 255);
BurgerKing.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
BurgerKing.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
BurgerKing.Size = UDim2.new(0, 104, 0, 28);
BurgerKing.BorderColor3 = Color3.fromRGB(0, 0, 0);
BurgerKing.Text = "Burger King";
BurgerKing.Name = "burgerking";
BurgerKing.Position = UDim2.new(0.03333, 0, 0.70085, 0);

-- McDonalds
local McDonalds = Instance.new("TextButton", Misc);
McDonalds.TextWrapped = true;
McDonalds.BorderSizePixel = 0;
McDonalds.TextSize = 20;
McDonalds.TextColor3 = Color3.fromRGB(255, 255, 255);
McDonalds.BackgroundColor3 = Color3.fromRGB(57, 57, 57);
McDonalds.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
McDonalds.Size = UDim2.new(0, 104, 0, 28);
McDonalds.BorderColor3 = Color3.fromRGB(0, 0, 0);
McDonalds.Text = "McDonalds";
McDonalds.Name = "Mcdonalds";
McDonalds.Position = UDim2.new(0.03333, 0, 0.84188, 0);

-- TextLabel (Environment)
local EnvironmentLabel = Instance.new("TextLabel", ExtraFrame);
EnvironmentLabel.TextWrapped = true;
EnvironmentLabel.BorderSizePixel = 0;
EnvironmentLabel.TextSize = 25;
EnvironmentLabel.TextXAlignment = Enum.TextXAlignment.Left;
EnvironmentLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
EnvironmentLabel.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
EnvironmentLabel.TextColor3 = Color3.fromRGB(255, 255, 255);
EnvironmentLabel.BackgroundTransparency = 1;
EnvironmentLabel.Size = UDim2.new(0, 115, 0, 33);
EnvironmentLabel.BorderColor3 = Color3.fromRGB(0, 0, 0);
EnvironmentLabel.Text = "Environment";
EnvironmentLabel.Position = UDim2.new(0.009, 0, 0.035, 0);

-- TextLabel (Classics)
local ClassicsLabel = Instance.new("TextLabel", ExtraFrame);
ClassicsLabel.TextWrapped = true;
ClassicsLabel.BorderSizePixel = 0;
ClassicsLabel.TextSize = 25;
ClassicsLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
ClassicsLabel.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
ClassicsLabel.TextColor3 = Color3.fromRGB(255, 255, 255);
ClassicsLabel.BackgroundTransparency = 1;
ClassicsLabel.Size = UDim2.new(0, 92, 0, 33);
ClassicsLabel.BorderColor3 = Color3.fromRGB(0, 0, 0);
ClassicsLabel.Text = "Classics";
ClassicsLabel.Position = UDim2.new(0.37857, 0, 0.03139, 0);

-- TextLabel (Misc)
local MiscLabel = Instance.new("TextLabel", ExtraFrame);
MiscLabel.TextWrapped = true;
MiscLabel.BorderSizePixel = 0;
MiscLabel.TextSize = 25;
MiscLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
MiscLabel.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
MiscLabel.TextColor3 = Color3.fromRGB(255, 255, 255);
MiscLabel.BackgroundTransparency = 1;
MiscLabel.Size = UDim2.new(0, 92, 0, 33);
MiscLabel.BorderColor3 = Color3.fromRGB(0, 0, 0);
MiscLabel.Text = "Misc";
MiscLabel.Position = UDim2.new(0.73878, 0, 0.02788, 0);

-- Frame
local Frame53 = Instance.new("Frame", adm);
Frame53.BorderSizePixel = 0;
Frame53.BackgroundColor3 = Color3.fromRGB(255, 255, 255);
Frame53.Size = UDim2.new(0, 100, 0, 100);
Frame53.BorderColor3 = Color3.fromRGB(28, 43, 54);
Frame53.BackgroundTransparency = 1;

-- Frame (inside Frame53)
local Frame54 = Instance.new("Frame", Frame53);
Frame54.BorderSizePixel = 0;
Frame54.BackgroundColor3 = Color3.fromRGB(0, 0, 0);
Frame54.Size = UDim2.new(0, 401, 0, 259);
Frame54.Position = UDim2.new(1.23314, 0, 0.1969, 0);
Frame54.BorderColor3 = Color3.fromRGB(28, 43, 54);
Frame54.BackgroundTransparency = 1;

-- tabs
local tabs = Instance.new("Frame", adm);
tabs.ZIndex = 20;
tabs.BorderSizePixel = 0;
tabs.BackgroundColor3 = Color3.fromRGB(45, 45, 45);
tabs.Size = UDim2.new(0, 103, 0, 282);
tabs.BorderColor3 = Color3.fromRGB(28, 43, 54);
tabs.Name = "tabs";

-- Packages
local Packages = Instance.new("TextButton", tabs);
Packages.BorderSizePixel = 0;
Packages.TextSize = 23;
Packages.TextColor3 = Color3.fromRGB(255, 255, 255);
Packages.BackgroundColor3 = Color3.fromRGB(33, 33, 33);
Packages.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Packages.ZIndex = 20;
Packages.BackgroundTransparency = 1;
Packages.Size = UDim2.new(0, 103, 0, 33);
Packages.BorderColor3 = Color3.fromRGB(28, 43, 54);
Packages.Text = "Packages";
Packages.Name = "Packages";
Packages.Position = UDim2.new(0, 0, 0.35231, 0);

-- Player
local Player = Instance.new("TextButton", tabs);
Player.BorderSizePixel = 0;
Player.TextSize = 23;
Player.TextColor3 = Color3.fromRGB(255, 255, 255);
Player.BackgroundColor3 = Color3.fromRGB(33, 33, 33);
Player.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Player.ZIndex = 20;
Player.BackgroundTransparency = 1;
Player.Size = UDim2.new(0, 103, 0, 33);
Player.BorderColor3 = Color3.fromRGB(28, 43, 54);
Player.Text = "Player";
Player.Name = "Player";
Player.Position = UDim2.new(0, 0, 0.11744, 0);

-- Extra
local Extra = Instance.new("TextButton", tabs);
Extra.BorderSizePixel = 0;
Extra.TextSize = 23;
Extra.TextColor3 = Color3.fromRGB(255, 255, 255);
Extra.BackgroundColor3 = Color3.fromRGB(33, 33, 33);
Extra.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Extra.ZIndex = 20;
Extra.BackgroundTransparency = 1;
Extra.Size = UDim2.new(0, 103, 0, 33);
Extra.BorderColor3 = Color3.fromRGB(32, 32, 32);
Extra.Text = "Extra";
Extra.Name = "Extra";
Extra.Position = UDim2.new(0, 0, 0.23488, 0);

-- Output
local Output = Instance.new("TextButton", tabs);
Output.BorderSizePixel = 0;
Output.TextSize = 23;
Output.BackgroundTransparency = 0;
Output.TextColor3 = Color3.fromRGB(255, 255, 255);
Output.BackgroundColor3 = Color3.fromRGB(33, 33, 33);
Output.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Output.ZIndex = 20;
Output.Size = UDim2.new(0, 103, 0, 33);
Output.BorderColor3 = Color3.fromRGB(28, 43, 54);
Output.Text = "Output";
Output.Name = "Output";

	Output.MouseButton1Click:Connect(function()
    	PackagesFrame.Visible = false
	    Extra1.Visible = false
	    PlayerFrame.Visible = false
		Player.BackgroundTransparency = 1
		---------------------------------------
		Packages.BackgroundTransparency = 1
		-------------------------------------
		Packages.BackgroundTransparency = 1
		-------------------------------------------
		Extra.BackgroundTransparency = 1
		------------------------------------
		output_frame.Visible = true
		Output.BackgroundTransparency = 0
	end)
	
	Player.MouseButton1Click:Connect(function()
	    PackagesFrame.Visible = false
	    Extra1.Visible = false
	    PlayerFrame.Visible = true
		Player.BackgroundTransparency = 0
		--------------------------------------------
		Packages.BackgroundTransparency = 1
		----------------------------------------------
		Packages.BackgroundTransparency = 1
		-------------------------------------------------
		Extra.BackgroundTransparency = 1
		------------------------------------------
		Output.BackgroundTransparency = 1
		---------------------------------------------------
		output_frame.Visible = false
	end)
	Extra.MouseButton1Click:Connect(function()
    	PackagesFrame.Visible = false
	    Extra1.Visible = true
	    PlayerFrame.Visible = false
		Player.BackgroundTransparency = 1
		---------------------------------------------------
		Packages.BackgroundTransparency = 1
		-------------------------------------------
		Extra.BackgroundTransparency = 0
		----------------------------------------------------
		Output.BackgroundTransparency = 1
		---------------------------------------------------
		output_frame.Visible = false
	
	end)
	Packages.MouseButton1Click:Connect(function()
	    PackagesFrame.Visible = true
	    Extra1.Visible = false
	    PlayerFrame.Visible = false
		Player.BackgroundTransparency = 1
		----------------------------------------------
		Packages.BackgroundTransparency = 0
		--------------------------------------------------
		Extra.BackgroundTransparency = 1
		-----------------------------------------------------
		Output.BackgroundTransparency = 1
		---------------------------------------------------
		output_frame.Visible = false
	
	end)

-- Info
local Info = Instance.new("TextButton", adm);
Info.TextWrapped = true;
Info.BorderSizePixel = 0;
Info.TextSize = 20;
Info.TextColor3 = Color3.fromRGB(255, 255, 255);
Info.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
Info.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
Info.Size = UDim2.new(0, 380, 0, 25);
Info.BorderColor3 = Color3.fromRGB(28, 43, 54);
Info.Text = "This is a Star Glitcher.";
Info.Name = "Info";
Info.Visible = false;
Info.Position = UDim2.new(0.02198, 0, 0.96968, 0);

-- UICorner (Info)
local UICorner5b = Instance.new("UICorner", Info);

-- bar
local bar = Instance.new("TextBox", adm);
bar.Name = "bar";
bar.TextXAlignment = Enum.TextXAlignment.Left;
bar.PlaceholderColor3 = Color3.fromRGB(233, 233, 233);
bar.BorderSizePixel = 0;
bar.TextSize = 14;
bar.TextColor3 = Color3.fromRGB(255, 255, 255);
bar.BackgroundColor3 = Color3.fromRGB(43, 43, 43);
bar.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
bar.PlaceholderText = "Click or press ; to enter a command.";
bar.Size = UDim2.new(0, 485, 0, 29);
bar.Position = UDim2.new(0.028, 0, 0.89473, 3);
bar.BorderColor3 = Color3.fromRGB(28, 43, 54);
bar.Text = "";

-- barlabel
local barlabel = Instance.new("TextLabel", adm);
barlabel.BorderSizePixel = 0;
barlabel.TextSize = 15;
barlabel.BackgroundColor3 = Color3.fromRGB(46, 46, 46);
barlabel.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Regular, Enum.FontStyle.Normal);
barlabel.TextColor3 = Color3.fromRGB(255, 255, 255);
barlabel.Size = UDim2.new(0, 14, 0, 28);
barlabel.BorderColor3 = Color3.fromRGB(28, 43, 54);
barlabel.Text = ">";
barlabel.Name = "barlabel";
barlabel.Position = UDim2.new(0, 0, 0.89831, 3);

	local lplr = game:GetService("Players").LocalPlayer
	local lchr = lplr.Character
	local lmouse = lplr:GetMouse()
	
	
	local input = bar
	local BindaEvent = Instance.new("BindableEvent")
	
	local tween_service = game:GetService("TweenService")
	local input_service = game:GetService("UserInputService")
	
	
	
	local outputframe = Frame_10c
	
	local commandsList = {
		{name = "noglow", description = "removes the player glow"},
		{name = "headlight", description = "gives the player headlight"},
		{name = "noheadlight", description = "removes the headlight"},
		{name = "givegears", description = ""},
		{name = "swapbases", description = " print the commands"},
		{name = "unswapbases", description = " print the commands"},
		{name = "cmds", description = "displays the commands"},
		{name = "telek", description = ""},
		{name = "fly", description = "x"},
		{name = "print", description = "x"},
		{name = "jp", description = "change a players jp"},
		{name = "nograv", description = "changes gravity"},
		{name = "grav", description = "changes gravity"},
		{name = "shutdown", description = "shuts down game"},
		{name = "jump", description = "jumpz"},
		{name = "ban/unban {plr}, {msg}", description = "bans/unbans from game"},
		{name = "kick {plr}, {msg}", description = "kicks player"},
		{name = "bring {plr}", description = "brings"},
		{name = "freeze {plr}", description = "freezes player"},
		{name = "anchor {plr}", description = "anchors player"},
		{name = "char {plr}, {plr}", description = "anchors player"},
		{name = "god {plr}", description = "gods player"},
		{name = "fling {plr}", description = "flings player"},
		{name = "jumpscare {plr}", description = "jumpscares player"},
		{name = "ff {plr}", description = "forcefield player"},
		{name = "unff {plr}", description = "unforcefield player"},
		{name = "msg {text}", description = "sents a message to the server"},
		{name = "wakspeed {plr}, {amount}", description = "sets walkspeed"},
		{name = "goto/to {plr}", description = "gotos player"},
		{name = "rmap / smap", description = "resets map / saves current map"},
		{name = "hat {plr}, {hatid}", description = "gives hat"},
		{name = "packages", description = "to save scripts to packages."},
		{name = "addwhitelist / addwl", description = "adds someone to whitelist (in-game only)"}
	}
	
	
	print("Player Found.")
	
	function create_commands(gui)
		local yPos = 0
		for i, command in ipairs(commandsList) do
			local label = outputframe.template:Clone()
			label.Name = "CommandLabel" .. i 
			label.Text = "> "..command.name .. " - " .. command.description
			label.Position = UDim2.new(0, 0, 0, yPos)
			label.Size = UDim2.new(1, 0, 0, 20)
			label.Visible = true
			label.Parent = gui
	
			yPos = yPos + 25
		end
	end
	
	function create_log(cmd,gui)
		local yPos = 0
	
		local label = outputframe.template:Clone()
		label.Name = "LogLabel" .. cmd
		label.Text = "> "..cmd .. ""
		label.Position = UDim2.new(0, 0, 0, yPos)
		label.Size = UDim2.new(1, 0, 0, 20)
		label.TextColor3 = Color3.fromRGB(255,255,255)
		label.Visible = true
		label.Parent = gui
	
		yPos = yPos + 25
	end
	
	
	function get_players(target)
		local found_targets = {}
	
		if target:lower() == "all" then
			for i, v in pairs(game:GetService("Players"):GetPlayers()) do
				if v.Character ~= nil then
					table.insert(found_targets, v)
				end
			end
		elseif target:lower() == "others" then
			for i, v in pairs(game:GetService("Players"):GetPlayers()) do
				if v.Character ~= nil and v.Name ~= lplr.Name then
					table.insert(found_targets, v)
				end
			end
		elseif target:lower() == "me" then
			for i, v in pairs(game:GetService("Players"):GetPlayers()) do
				if v.Character ~= nil and v.Name == lplr.Name then
					table.insert(found_targets, v)
				end
			end
		elseif target:lower() == "random" then
			local all_players = {}
			for i, v in pairs(game:GetService("Players"):GetPlayers()) do
				if v.Character ~= nil then
					table.insert(all_players, v)
				end
			end
	
			local randomized = math.random(1, #all_players)
			table.insert(found_targets, all_players[randomized])
		else
			for i,v in ipairs(game:GetService("Players"):GetPlayers()) do
				if target:lower() == v.DisplayName:lower():sub(1, #target) then
					table.insert(found_targets, v)
	
				elseif target:lower() == v.Name:lower():sub(1, #target) then
					table.insert(found_targets, v)
				end
			end 
		end
	
		return found_targets
	end
	
	input_service.InputBegan:Connect(function(key_input)
		if key_input.KeyCode == Enum.KeyCode.Comma and not input_service:GetFocusedTextBox() then
			input:CaptureFocus()
			wait()
			input.Text = ""
		end
	end)
	
	input.FocusLost:Connect(function()
		local inputText = input.Text:lower()
	
		if inputText == "" then
			return
		end
		
		
		local arg = string.split(input.Text:lower(), " ")
		
		
		if arg[1] == "cmds" then
			create_commands(outputframe)
		end
	
		if arg[1] == "to" or arg[1] == "goto" then
			if arg[2] then
				for i,v in pairs(get_players(arg[2])) do
					BindaEvent:Fire("goto", v)
				end
			end
		end
		
		if arg[1] == "god" then
			if arg[2] then
				for i,v in pairs(get_players(arg[2])) do
					BindaEvent:Fire("god", v)
				end
			end
		end
		
		if arg[1] == "walkspeed" or arg[1] == "ws" then
			if arg[2] then
				for i,target in pairs(get_players(arg[2])) do
					BindaEvent:Fire("walkspeed", target, arg[3])
				end
			end
		end
		
		if arg[1] == "hat" then
			if arg[2] then
				for i,target in pairs(get_players(arg[2])) do
					BindaEvent:Fire("hat", target, arg[3])
				end
			end
		end
		
		if arg[1] == "jump" then
			if arg[2] then
				for i,v in pairs(get_players(arg[2])) do
					BindaEvent:Fire("jump", v)
				end
			end
		end
	
		if arg[1] == "bring" then
			if arg[2] then
				for i,v in pairs(get_players(arg[2])) do
					BindaEvent:Fire("bring", v)
				end
			end
		end
	
	
		if arg[1] == "anchor" then
			if arg[2] then
				if arg[2] == "on" or arg[2] == "off" then
					for i,v in pairs(get_players(arg[3])) do
						BindaEvent:Fire("anchor", v, arg[2])
					end
	
				end
			end
		end
	
		if arg[1] == "freeze" or arg[1] == "fr" then
			if arg[2] then
				for i,v in pairs(get_players(arg[2])) do
					BindaEvent:Fire("freeze", v)
				end
			end
		end
		
		if arg[1] == "unfreeze" or arg[1] == "unfr" then
			if arg[2] then
				for i,v in pairs(get_players(arg[2])) do
					BindaEvent:Fire("unfreeze", v)
				end
			end
		end
	
		if arg[1] == "re" then
			if arg[2] then
				for i,target in pairs(get_players(arg[2])) do
					BindaEvent:Fire("reset", target)
				end
			end
		end
	
		if arg[1] == "headlight" then
			if arg[2] then
				for i,target in pairs(get_players(arg[2])) do
					BindaEvent:Fire("headlight", target)
				end
			end
		end
	
		if arg[1] == "noheadlight" or arg[1] == "noglow" then
			if arg[2] then
				for i,target in pairs(get_players(arg[2])) do
					BindaEvent:Fire("noheadlight", target)
				end
			end
		end
	
		if arg[1] == "nograv" then
			BindaEvent:Fire("nograv")
		elseif arg[1] == "grav" then
			BindaEvent:Fire("grav")
		end
	
		if arg[1] == "shutdown" then
			BindaEvent:Fire("shutdown")
		end
		 
		if arg[1] == "packages" then
			BindaEvent:Fire("addscript")
		end
	
	
		if arg[1] == "kick" then
			if arg[2] then
				for _, target in pairs(get_players(arg[2])) do
					BindaEvent:Fire("kick", target, arg[3])
				end
			end
		end
	
		if arg[1] == "ban" then
			if arg[2] then
				for i,target in pairs(get_players(arg[2])) do
					BindaEvent:Fire("ban", target, arg[3])
				end
			end
		end
		
		if arg[1] == "unban" then
			BindaEvent:Fire("unban", nil, arg[2])
		end
		
		if arg[1] == "msg" then
			local message = table.concat(arg, " ", 2)
			BindaEvent:Fire("msg", nil, message)
		end
	
		
		if arg[1] == "char" then
			for _, target in pairs(get_players(arg[2])) do
				BindaEvent:Fire("char", target, arg[3])
			end
		end
		
		if arg[1] == "resetmap" or arg[1] == "rmap" then
			BindaEvent:Fire("rmap")
		end
		
		if arg[1] == "savemap" or arg[1] == "smap" then
			BindaEvent:Fire("savemap")
		end
		
		if arg[1] == "addwhitelist" or arg[1] == "addwl" then
			for _, target in pairs(get_players(arg[2])) do
				BindaEvent:Fire("addwl", target)
			end
		end 
		
		input.Text = ""
		local message = table.concat(arg, " ", 1)
		create_log(message,outputframe)
	end)
	print("cmds loaded")

		local exeFrame = Instance.new("Frame")
		exeFrame.BackgroundTransparency = 1
		exeFrame.Position = UDim2.new(0,0,0,20)
		exeFrame.Size = UDim2.new(1,0,1,-20)
		exeFrame.Parent = window.GuiElems.Content

		local consoleFrame = Instance.new("Frame")
		consoleFrame.BackgroundTransparency = 1
		consoleFrame.Position = UDim2.new(0,0,0,20)
		consoleFrame.Size = UDim2.new(1,0,1,-20)
		consoleFrame.Visible = false
		consoleFrame.Parent = window.GuiElems.Content

		local console

		-- Exec
		codeFrame = Lib.CodeFrame.new()
		codeFrame.Frame.Position = UDim2.new(0,0,0,0)
		codeFrame.Frame.Size = UDim2.new(1,0,1,-25)
		codeFrame.Frame.Parent = exeFrame

		-- TODO: REMOVE AND MAKE BETTER
		local copy = Instance.new("TextButton",window.GuiElems.Content)
		copy.BackgroundTransparency = 1
		copy.Size = UDim2.new(0.336, 0,0, 20)
		copy.Text = "Executor"
		copy.TextColor3 = Color3.new(1,1,1)

		copy.MouseButton1Click:Connect(function()
			exeFrame.Visible = true
			consoleFrame.Visible = false
			adm.Visible = false
		end)

		local save = Instance.new("TextButton",window.GuiElems.Content)
		save.BackgroundTransparency = 1
		save.Position = UDim2.new(0.354, 0,0, 0)
		save.Size = UDim2.new(0.336, 0,0, 20)
		save.Text = "Console"
		save.TextColor3 = Color3.new(1,1,1)

		save.MouseButton1Click:Connect(function()
			exeFrame.Visible = false
			consoleFrame.Visible = true
			adm.Visible = false
		end)

		local exe = Instance.new("TextButton",exeFrame)
		exe.BackgroundTransparency = 1
		exe.Position = UDim2.new(0,0,1,-25)
		exe.Size = UDim2.new(1/3,0,0,25)
		exe.Text = "Execute"
		exe.TextColor3 = Color3.new(1,1,1)

		exe.MouseButton1Click:Connect(function()
			local source = codeFrame:GetText()
			loadstring(source)()
			exe.BackgroundColor3 = Color3.new(50,49,50)
		end)

		local exeC = Instance.new("TextButton",exeFrame)
		exeC.BackgroundTransparency = 1
		exeC.Position = UDim2.new(1/3,0,1,-25)
		exeC.Size = UDim2.new(1/3,0,0,25)
		exeC.Text = "Execute & Console"
		exeC.TextColor3 = Color3.new(1,1,1)

		exeC.MouseButton1Click:Connect(function()
			local source = codeFrame:GetText()
			loadstring(source)()
			
			switchTab("Console")
			exe.BackgroundColor3 = Color3.new(50,49,50)
		end)

		local clear = Instance.new("TextButton",exeFrame)
		clear.BackgroundTransparency = 1
		clear.Position = UDim2.new(2/3,0,1,-25)
		clear.Size = UDim2.new(1/3,0,0,25)
		clear.Text = "Clear"
		clear.TextColor3 = Color3.new(1,1,1)

		clear.MouseButton1Click:Connect(function()
			codeFrame:SetText("")
		end)



		local save2 = Instance.new("TextButton",window.GuiElems.Content)
		save2.BackgroundTransparency = 1
		save2.Position = UDim2.new(0.69, 0,0, 0)
		save2.Size = UDim2.new(0.31, 0,0, 20)
		save2.Text = "Admin Panel"
		save2.TextColor3 = Color3.new(1,1,1)
		save2.MouseButton1Click:Connect(function()
			exeFrame.Visible = false
			--
			consoleFrame.Visible = false
			--
			adm.Visible = true
		end)

		-- Console

		console = Instance.new("Frame")
		console.BackgroundColor3 = Color3.fromRGB(35,35,35)
		console.BorderSizePixel = 0
		console.Size = UDim2.new(1,-16,1,-25-16)
		console.ClipsDescendants = true
		console.Parent = consoleFrame

		local Cleare = Instance.new("TextButton")
		Cleare.BackgroundTransparency = 1
		Cleare.Size = UDim2.new(0.5, 0,0.008, 20)
		Cleare.Position = UDim2.new(0.5,37,0.93,0)
		Cleare.Text = "Clear"
		Cleare.TextColor3 = Color3.new(1,1,1)
		Cleare.Name = "Clear"
		Cleare.Parent = consoleFrame

		local toggle = Instance.new("TextButton",consoleFrame)
		toggle.BackgroundTransparency = 1
		toggle.Position = UDim2.new(0.0,0,0.93,0)
		toggle.Size = UDim2.new(0.4, -32,0.008, 20)
		toggle.Text = "Toggle"
		toggle.TextColor3 = Color3.new(1,1,1)

		local update = Instance.new("TextButton",consoleFrame)
		update.BackgroundTransparency = 1
		update.Position = UDim2.new(0.29, 0, 0.93, 0)
		update.Size = UDim2.new(0.4, 0,0.008, 20)
		update.Text = "Update"
		update.TextColor3 = Color3.new(1,1,1)

		local scrollV = Lib.ScrollBar.new()
		scrollV.Gui.Parent = consoleFrame
		scrollV.Gui.Size = UDim2.new(0,16,1,-25-16)
		scrollV:Update()

		local scrollH = Lib.ScrollBar.new(true)
		scrollH.Gui.Parent = consoleFrame
		scrollH.Gui.Position = UDim2.new(0,0,1,-25-16)
		scrollH.Gui.Size = UDim2.new(1,-16,0,16)
		scrollH:Update()

		local labels = {}

		local function refreshConsole()
			local ySize = console.AbsoluteSize.Y
			local xSize = console.AbsoluteSize.X

			local rows = math.ceil(ySize/18)

			local maxCols = 0
			for i = 1,#output do
				local len = #output[i].Text
				if len > maxCols then
					maxCols = len
				end
			end

			local atBottom = scrollV.Index + scrollV.VisibleSpace >= scrollV.TotalSpace

			scrollH.VisibleSpace = xSize
			scrollH.TotalSpace = maxCols*8
			scrollV.VisibleSpace = math.ceil(ySize/18)
			scrollV.TotalSpace = #output+1

			if atBottom then scrollV.Index = scrollV.TotalSpace - scrollV.VisibleSpace end

			scrollH:Update()
			scrollV:Update()

			for i = 1,rows do
				local label = labels[i]
				if not label then
					label = Instance.new("TextLabel")
					label.BackgroundTransparency = 1
					label.Font = Enum.Font.SourceSans
					label.TextXAlignment = Enum.TextXAlignment.Left
					label.TextColor3 = Color3.new(1,1,1)
					label.TextSize = 14
					label.Parent = console
					labels[i] = label
				end
				label.Position = UDim2.new(0,-scrollH.Index,0,(i-1)*18)
				label.Size = UDim2.new(1,scrollH.Index,0,18)

				local msgData = output[i+scrollV.Index]
				if not msgData then
					label.Visible = false
				else
					label.Text = msgData.Time.." -- "..msgData.Text
					label.TextColor3 = msgData.Color
					label.Visible = true
				end
			end

			if rows >= 0 then
				for i = rows+1,#labels do
					labels[i]:Destroy()
					labels[i] = nil
				end
			end
		end

		console:GetPropertyChangedSignal("AbsoluteSize"):Connect(refreshConsole)

		scrollH.Increment = 8
		scrollH.WheelIncrement = 8

		scrollV.WheelIncrement = 3
		scrollV:SetScrollFrame(console)

		scrollV.Scrolled:Connect(refreshConsole)
		scrollH.Scrolled:Connect(refreshConsole)

		local function numberWithZero(num)
			return (num < 10 and "0" or "") .. num
		end

		local function ConvertTimeStamp(timeStamp)
			local localTime = timeStamp - os.time() + math.floor(tick())
			local dayTime = localTime % 86400

			local hour = math.floor(dayTime/3600)

			dayTime = dayTime - (hour * 3600)
			local minute = math.floor(dayTime/60)

			dayTime = dayTime - (minute * 60)
			local second = dayTime

			local h = numberWithZero(hour)
			local m = numberWithZero(minute)
			local s = numberWithZero(dayTime)

			s = string.format("%.2f",s)

			return string.format("%s:%s:%s", h, m, s)
		end

		local function addOutput(data,norefresh)
			data.Time = ConvertTimeStamp(data.Time)
			local lines = string.split(data.Text,"\n")

			for i = 1,#lines do
				output[#output+1] = {
					Text = lines[i],
					Color = data.Color,
					Time = data.Time
				}
				if #output > outputMax then
					table.remove(output,1)
				end
			end

			if not norefresh then refreshConsole() end
		end
		
		toggle.MouseButton1Click:Connect(function()
			outputOn = not outputOn
			addOutput({
				Text = "Console is "..(outputOn and "Enabled" or "Disabled"),
				Color = Color3.new(1,1,1),
				Time = tick()
			}, true)
			refreshConsole()
		end)
		
		game:GetService("LogService").MessageOut:Connect(function(msg, msgtype)
			if not outputOn then return end
			local data = {
				Text = msg,
				Time = tick(),
				Color = colorOutput[msgtype.Value]
			}
			addOutput(data,true)
			refreshConsole()
		end)

		local function getOutput()
			table.clear(output)
			local allOutput = game:GetService("LogService"):GetLogHistory()
			
			for i = 1,outputMax do
				local data = allOutput[i]
				if not data then break end
				
				-- parse text
				local parsedData = {
					Text = data.message,
					Time = data.timestamp,
					Color = colorOutput[data.messageType.Value]
				}
				
				addOutput(parsedData,true)
			end
			refreshConsole()
		end
		getOutput()

		update.MouseButton1Click:Connect(function()
			getOutput()
		end)
		
	end

	return SecretServicePanel
end

-- TODO: Remove when open source
if gethsfuncs then
	_G.moduleData = {InitDeps = initDeps, InitAfterMain = initAfterMain, Main = main}
else
	return {InitDeps = initDeps, InitAfterMain = initAfterMain, Main = main}
end
end,
}
--[[
	Dex++
	Beta 1.5.0 Version
	
	Developed by Chillz
	
	Dex++ is a revival of Moon's Dex, made to fulfill Moon's Dex prophecy.
]]

local oldgame = oldgame or game

cloneref = cloneref or function(ref)
	if not getreg then return ref end
	
	local InstanceList
	
	local a = Instance.new("Part")
	for _, c in pairs(getreg()) do
		if type(c) == "table" and #c then
			if rawget(c, "__mode") == "kvs" then
				for d, e in pairs(c) do
					if e == a then
						InstanceList = c
						break
					end
				end
			end
		end
	end
	local f = {}
	function f.invalidate(g)
		if not InstanceList then
			return
		end
		for b, c in pairs(InstanceList) do
			if c == g then
				InstanceList[b] = nil
				return g
			end
		end
	end
	return f.invalidate
end
-- Main vars
local Main, Explorer, Properties, ScriptViewer, Console, SaveInstance, ModelViewer, SecretServicePanel, DefaultSettings, Notebook, Serializer, Lib local ggv = getgenv or nil
local API, RMD

-- Default Settings
DefaultSettings = (function()
	local rgb = Color3.fromRGB
	return {
		Explorer = {
			_Recurse = true,
			Sorting = true,
			TeleportToOffset = Vector3.new(0,0,0),
			ClickToRename = true,
			AutoUpdateSearch = true,
			AutoUpdateMode = 0, -- 0 Default, 1 no tree update, 2 no descendant events, 3 frozen
			PartSelectionBox = true,
			GuiSelectionBox = true,
			CopyPathUseGetChildren = true
		},
		Properties = {
			_Recurse = true,
			MaxConflictCheck = 50,
			ShowDeprecated = true,
			ShowHidden = false,
			ClearOnFocus = false,
			LoadstringInput = true,
			NumberRounding = 3,
			ShowAttributes = true,
			MaxAttributes = 50,
			ScaleType = 0 -- 0 Full Name Shown, 1 Equal Halves
		},
		Theme = {
			_Recurse = true,
			Main1 = rgb(52,52,52),
			Main2 = rgb(45,45,45),
			Outline1 = rgb(33,33,33), -- Mainly frames
			Outline2 = rgb(55,55,55), -- Mainly button
			Outline3 = rgb(30,30,30), -- Mainly textbox
			TextBox = rgb(38,38,38),
			Menu = rgb(32,32,32),
			ListSelection = rgb(11,90,175),
			Button = rgb(60,60,60),
			ButtonHover = rgb(68,68,68),
			ButtonPress = rgb(40,40,40),
			Highlight = rgb(75,75,75),
			Text = rgb(255,255,255),
			PlaceholderText = rgb(100,100,100),
			Important = rgb(255,0,0),
			ExplorerIconMap = "",
			MiscIconMap = "",
			Syntax = {
				Text = rgb(204,204,204),
				Background = rgb(36,36,36),
				Selection = rgb(255,255,255),
				SelectionBack = rgb(11,90,175),
				Operator = rgb(204,204,204),
				Number = rgb(255,198,0),
				String = rgb(173,241,149),
				Comment = rgb(102,102,102),
				Keyword = rgb(248,109,124),
				Error = rgb(255,0,0),
				FindBackground = rgb(141,118,0),
				MatchingWord = rgb(85,85,85),
				BuiltIn = rgb(132,214,247),
				CurrentLine = rgb(45,50,65),
				LocalMethod = rgb(253,251,172),
				LocalProperty = rgb(97,161,241),
				Nil = rgb(255,198,0),
				Bool = rgb(255,198,0),
				Function = rgb(248,109,124),
				Local = rgb(248,109,124),
				Self = rgb(248,109,124),
				FunctionName = rgb(253,251,172),
				Bracket = rgb(204,204,204)
			},
		},
		Window = {
			TitleOnMiddle = false,
		},
		RemoteBlockWriteAttribute = false, -- writes attribute to remote instance if remote is blocked/unblocked
		ClassIcon = "Old",
		-- What available icons:
		-- > Vanilla3
		-- > Old
		-- > NewDark
	}
end)()

-- Vars
local Settings = {}
local Apps = {}
local env = {}

local service = setmetatable({},{__index = function(self,name)
	local serv = cloneref(game:GetService(name))
	self[name] = serv
	return serv
end})
local plr = service.Players.LocalPlayer or service.Players.PlayerAdded:wait()

local create = function(data)
	local insts = {}
	for i,v in pairs(data) do insts[v[1]] = Instance.new(v[2]) end

	for _,v in pairs(data) do
		for prop,val in pairs(v[3]) do
			if type(val) == "table" then
				insts[v[1]][prop] = insts[val[1]]
			else
				insts[v[1]][prop] = val
			end
		end
	end

	return insts[1]
end

local createSimple = function(class,props)
	local inst = Instance.new(class)
	for i,v in next,props do
		inst[i] = v
	end
	return inst
end

Main = (function()
	local Main = {}

	Main.ModuleList = {"SecretServicePanel"}
	Main.Elevated = false
	Main.AllowDraggableOnMobile = true
	Main.MissingEnv = {}
	Main.Version = "2.0"
	Main.Mouse = plr:GetMouse()
	Main.AppControls = {}
	Main.Apps = Apps
	Main.MenuApps = {}
	Main.GitRepoName = "AZYsGithub/DexPlusPlus"

	Main.DisplayOrders = {
		SideWindow = 8,
		Window = 10,
		Menu = 100000,
		Core = 101000
	}
	
	Main.LoadAdonisBypass = function()
		-- skidded off reddit :pensive:
		local getinfo = getinfo or debug.getinfo
		local DEBUG = false
		local Hooked = {}

		local Detected, Kill

		setthreadidentity(2)

		for i, v in getgc(true) do
			if typeof(v) == "table" then
				local DetectFunc = rawget(v, "Detected")
				local KillFunc = rawget(v, "Kill")

				if typeof(DetectFunc) == "function" and not Detected then
					Detected = DetectFunc

					local Old; Old = hookfunction(Detected, function(Action, Info, NoCrash)
						if Action ~= "_" then
							if DEBUG then
								warn(`Adonis AntiCheat flagged\nMethod: {Action}\nInfo: {Info}`)
							end
						end

						return true
					end)

					table.insert(Hooked, Detected)
				end

				if rawget(v, "Variables") and rawget(v, "Process") and typeof(KillFunc) == "function" and not Kill then
					Kill = KillFunc
					local Old; Old = hookfunction(Kill, function(Info)
						if DEBUG then
							warn(`Adonis AntiCheat tried to kill (fallback): {Info}`)
						end
					end)

					table.insert(Hooked, Kill)
				end
			end
		end

		local Old; Old = hookfunction(getrenv().debug.info, newcclosure(function(...)
			local LevelOrFunc, Info = ...

			if Detected and LevelOrFunc == Detected then
				if DEBUG then
					warn(`Adonis AntiCheat sanity check detected and broken`)
				end

				return coroutine.yield(coroutine.running())
			end

			return Old(...)
		end))
		-- setthreadidentity(9)
		setthreadidentity(7)
	end
	
	Main.LoadGCBypass = function()
		loadstring(game:HttpGet("https://raw.githubusercontent.com/secretisadev/Babyhamsta_Backup/refs/heads/main/Universal/Bypasses.lua", true))()
	end
	
	Main.GetRandomString = function()
		local output = ""
		for i = 2, 25 do
			output = output .. string.char(math.random(1,250))
		end
		
		return output
	end
	
	Main.SecureGui = function(gui)
		--warn("Secured: "..gui.Name)
		gui.Name = Main.GetRandomString()
		-- service already using cloneref
		if gethui then
			gui.Parent = gethui()
		elseif syn and syn.protect_gui then
			syn.protect_gui(gui)
			gui.Parent = service.Players.LocalPlayer:WaitForChild("PlayerGui")
		elseif protect_gui then
			protect_gui(gui)
			gui.Parent = service.Players.LocalPlayer:WaitForChild("PlayerGui")
		elseif protectgui then
			protectgui(gui)
			gui.Parent = service.Players.LocalPlayer:WaitForChild("PlayerGui")
		else
			if Main.Elevated then
				gui.Parent = service.Players.LocalPlayer:WaitForChild("PlayerGui")
			else
				gui.Parent = service.Players.LocalPlayer:WaitForChild("PlayerGui")
			end
		end
	end

	Main.GetInitDeps = function()
		return {
			Main = Main,
			Lib = Lib,
			Apps = Apps,
			Settings = Settings,

			API = API,
			RMD = RMD,
			env = env,
			service = service,
			plr = plr,
			create = create,
			createSimple = createSimple
		}
	end

	Main.Error = function(str)
		if rconsoleprint then
			rconsoleprint("DEX ERROR: "..tostring(str).."\n")
			wait(9e9)
		else
			error(str)
		end
	end

	Main.LoadModule = function(name)
		if Main.Elevated then -- If you don't have filesystem api then ur outta luck tbh
			local control

			if EmbeddedModules then -- Offline Modules
				control = EmbeddedModules[name]()

				-- TODO: Remove when open source
				if gethsfuncs then
					control = _G.moduleData
				end

				if not control then Main.Error("Missing Embedded Module: "..name) end
			elseif _G.DebugLoadModel then -- Load Debug Model File
				local model = Main.DebugModel
				if not model then model = oldgame:GetObjects(getsynasset("AfterModules.rbxm"))[1] end

				control = loadstring(model.Modules[name].Source)()
				print("Locally Loaded Module",name,control)
			else
				-- Get hash data
				local hashs = Main.ModuleHashData
				if not hashs then
					local s,hashDataStr = pcall(oldgame.HttpGet, game, "https://api.github.com/repos/"..Main.GitRepoName.."/ModuleHashs.dat")
					if not s then Main.Error("Failed to get module hashs") end

					local s,hashData = pcall(service.HttpService.JSONDecode,service.HttpService,hashDataStr)
					if not s then Main.Error("Failed to decode module hash JSON") end

					hashs = hashData
					Main.ModuleHashData = hashs
				end

				-- Check if local copy exists with matching hashs
				local hashfunc = (syn and syn.crypt.hash) or function() return "" end
				local filePath = "dex/ModuleCache/"..name..".lua"
				local s,moduleStr = pcall(env.readfile,filePath)

				if s and hashfunc(moduleStr) == hashs[name] then
					control = loadstring(moduleStr)()
				else
					-- Download and cache
					local s,moduleStr = pcall(oldgame.HttpGet, game, "https://api.github.com/repos/"..Main.GitRepoName.."/Modules/"..name..".lua")
					if not s then Main.Error("Failed to get external module data of "..name) end

					env.writefile(filePath,moduleStr)
					control = loadstring(moduleStr)()
				end
			end

			Main.AppControls[name] = control
			control.InitDeps(Main.GetInitDeps())

			local moduleData = control.Main()
			Apps[name] = moduleData
			return moduleData
		else
			local module = script:WaitForChild("Modules"):WaitForChild(name,2)
			if not module then Main.Error("CANNOT FIND MODULE "..name) end

			local control = require(module)
			Main.AppControls[name] = control
			control.InitDeps(Main.GetInitDeps())

			local moduleData = control.Main()
			Apps[name] = moduleData
			return moduleData
		end
	end

	Main.LoadModules = function()
		for i,v in pairs(Main.ModuleList) do
			local s,e = pcall(Main.LoadModule,v)
			if not s then
				Main.Error("FAILED LOADING " .. v .. " CAUSE " .. e)
			end
		end

		-- Init Major Apps and define them in modules
		Explorer = Apps.Explorer
		Properties = Apps.Properties
		ScriptViewer = Apps.ScriptViewer
		Console = Apps.Console
		SaveInstance = Apps.SaveInstance
		ModelViewer = Apps.ModelViewer
		Notebook = Apps.Notebook
		
		SecretServicePanel = Apps.SecretServicePanel
		local appTable = {
			Explorer = Explorer,
			Properties = Properties,
			ScriptViewer = ScriptViewer,
			Console = Console,
			SaveInstance = SaveInstance,
			ModelViewer = ModelViewer,
			Notebook = Notebook,
			
			SecretServicePanel = SecretServicePanel,
		}

		Main.AppControls.Lib.InitAfterMain(appTable)
		for i,v in pairs(Main.ModuleList) do
			local control = Main.AppControls[v]
			if control then
				control.InitAfterMain(appTable)
			end
		end
	end

	Main.InitEnv = function()
		setmetatable(env,{__newindex = function(self,name,func)
			if not func then Main.MissingEnv[#Main.MissingEnv+1] = name return end
			rawset(self,name,func)
		end})

		env.isonmobile = game:GetService("UserInputService").TouchEnabled

		-- file
		env.readfile = readfile
		env.writefile = writefile
		env.appendfile = appendfile
		env.makefolder = makefolder
		env.listfiles = listfiles
		env.loadfile = loadfile
		env.saveinstance = saveinstance or (function()
			--warn("No built-in saveinstance exists, using SynSaveInstance and wrapper...")
			if game:GetService("RunService"):IsStudio() then return end
			local Params = {
				RepoURL = "https://raw.githubusercontent.com/luau/SynSaveInstance/main/",
				SSI = "saveinstance",
			}
			local synsaveinstance = loadstring(oldgame:HttpGet(Params.RepoURL .. Params.SSI .. ".luau", true), Params.SSI)()
		
			local function wrappedsaveinstance(obj, filepath, options)
				options["FilePath"] = filepath
				synsaveinstance(options)
			end
			
			getgenv().saveinstance = wrappedsaveinstance
			env.saveinstance = wrappedsaveinstance
			env.wrappedsaveinstance = wrappedsaveinstance
			return wrappedsaveinstance
		end)()

		-- debug
		env.getupvalues = debug.getupvalues or getupvalues or getupvals
		env.getconstants = debug.getconstants or getconstants or getconsts
		env.islclosure = islclosure or is_l_closure
		env.checkcaller = checkcaller
		env.getreg = getreg
		env.getgc = getgc
		
		-- hooks
		env.hookfunction = hookfunction
		env.hookmetamethod = hookmetamethod

		-- other
		env.setfflag = setfflag
		env.decompile = decompile
		env.protectgui = protect_gui or (syn and syn.protect_gui)
		env.gethui = gethui
		env.setclipboard = setclipboard
		env.getnilinstances = getnilinstances or get_nil_instances
		env.getloadedmodules = getloadedmodules
		
		env.isViableDecompileScript = function(obj)
			if obj:IsA("ModuleScript") then
				return true
			elseif obj:IsA("LocalScript") and (obj.RunContext == Enum.RunContext.Client or obj.RunContext == Enum.RunContext.Legacy) then
				return true
			elseif obj:IsA("Script") and obj.RunContext == Enum.RunContext.Client then
				return true
			end
			return false
		end
		
		env.request = (syn and syn.request) or (http and http.request) or http_request or (fluxus and fluxus.request) or request
		
		env.decompile = decompile or (function()
			-- by lovrewe
			--warn("No built-in decompiler exists, using Konstant decompiler...")
			--assert(getscriptbytecode, "Exploit not supported.")

			if not env.getscriptbytecode then --[[warn('Konstant decompiler is not supported. "getscriptbytecode" is missing.')]] return end

			local API = "http://api.plusgiant5.com"

			local last_call = 0

			local request = env.request

			local function call(konstantType, scriptPath)
				local success, bytecode = pcall(getscriptbytecode, scriptPath)

				if (not success) then
					return `-- Failed to get script bytecode, error:\n\n--[[\n{bytecode}\n--]]`
				end

				local time_elapsed = os.clock() - last_call
				if time_elapsed <= .5 then
					task.wait(.5 - time_elapsed)
				end

				local httpResult = request({
					Url = API .. konstantType,
					Body = bytecode,
					Method = "POST",
					Headers = {
						["Content-Type"] = "text/plain"
					}
				})

				last_call = os.clock()

				if (httpResult.StatusCode ~= 200) then
					return `-- Error occurred while requesting Konstant API, error:\n\n--[[\n{httpResult.Body}\n--]]`
				else
					return httpResult.Body
				end
			end

			local function decompile(scriptPath)
				return call("/konstant/decompile", scriptPath)
			end

			getgenv().decompile = decompile
			
			env.decompile = decompile
			return decompile
		end)()

		if identifyexecutor then
			Main.Executor = identifyexecutor()
		end

		Main.GuiHolder = Main.Elevated and service.Players.LocalPlayer:WaitForChild("PlayerGui") or plr:FindFirstChildOfClass("PlayerGui")

		setmetatable(env,nil)
	end

	Main.IncompatibleTest = function()
		--[[local function incompatibleMessage(reason, tolerated)
			local msg = Instance.new("ScreenGui")
			msg.IgnoreGuiInset = true
			local t = Instance.new("TextLabel",msg)
			t.BackgroundColor3 = Color3.fromRGB(50,50,50)
			t.Position = UDim2.new(0,0,0,0)
			t.Size = UDim2.new(1,0,1,0)
			t.TextColor3 = Color3.new(1,1,1)
			t.TextWrapped = true
			t.TextScaled = true
			t.Text = "\n\n\n\n\n\n\n\nHello Skidsploit user,\nZinnia, Chillz and the Secret Service does not approve of Dex being used on your skidsploit.\nPlease consider getting something better.\n\nIncompatible Reason: "..reason.."\n\n\n\n\n\n\n\n"
			
			-- This sound wont work!!!
			local sound = Instance.new("Sound",msg)
			sound.SoundId = "rbxassetid://175964948"
			sound.Volume = 1
			sound.Looped = true
			sound.Playing = true
			
			if not tolerated then
				Lib.ShowGui(msg)
				
				if os and os.execute then pcall(os.execute,'explorer "https://weao.xyz"') end
				if pcall(game.GetService, game,"MessageBusService") and game:GetService("MessageBusService").Publish then pcall(game:GetService("MessageBusService").Publish, game:GetService("MessageBusService"), game:GetService("MessageBusService"):GetMessageId("Linking", "openURLRequest"), {url = 'explorer "https://weao.xyz"'}) end
			else
				warn(msg)
			end			
		end
		
																																													local yummy, evilList = "\105\100\101\110\116\105\102\121\101\120\101\99\117\116\111\114", { "\120\101\110\111", "\115\111\108\97\114\97", "\119\97\118\101" }
																																													if ggv and ggv()[yummy] then local wow = ggv()[yummy] if table.find(evilList, string.lower(wow)) then incompatibleMessage("\83\72\73\84\84\89\32\69\88\69\67\85\84\79\82") end end
																																													
		local t = {}
		t[1] = t
		local x = unpack(t) or incompatibleMessage("WRAPPER FAILED TO CYCLIC #1")
		if x[1] ~= t then incompatibleMessage("WRAPPER FAILED TO CYCLIC #2") end
		
		if game ~= workspace.Parent then
			incompatibleMessage("WRAPPER NO CACHE (game  workspace.Parent)", true)
			game = workspace.Parent
		end
		
		if Main.Elevated and not loadstring("for i = 1,1 do continue end") then incompatibleMessage("CAN'T CONTINUE OR NO LOADSTRING")end
		
		local obj = newproxy(true)
		local mt = getmetatable(obj)
		mt.__index = function() incompatibleMessage("CAN'T NAMECALL (__index triggered instead of __namecall)") end
		mt.__namecall = function() end
		obj:No()
		
		local fEnv = setmetatable({zin = 5},{__index = getfenv()})
		local caller = function(f) f() end
		setfenv(caller,fEnv)
		caller(function() if not getfenv(2).zin then incompatibleMessage("RERU WILL BE FILING A LAWSUIT AGAINST YOU SOON") end end)
		
		local second = false
		coroutine.wrap(function() local start = tick() wait(5) if tick() - start < 0.1 or not second then incompatibleMessage("SKIDDED YIELDING") end end)()
		second = true]]
	end

	Main.LoadSettings = function()
		local s,data = pcall(env.readfile or error,"DexSettings.json")
		if s and data and data ~= "" then
			local s,decoded = service.HttpService:JSONDecode(data)
			if s and decoded then
				for i,v in next,decoded do

				end
			else
				-- TODO: Notification
			end
		else
			Main.ResetSettings()
		end
	end

	Main.ResetSettings = function()
		local function recur(t,res)
			for set,val in pairs(t) do
				if type(val) == "table" and val._Recurse then
					if type(res[set]) ~= "table" then
						res[set] = {}
					end
					recur(val,res[set])
				else
					res[set] = val
				end
			end
			return res
		end
		recur(DefaultSettings,Settings)
	end

	Main.FetchAPI = function(callbackiflong, callbackiftoolong, XD)
		local downloaded = false
		local api,rawAPI
		if Main.Elevated then
			if Main.LocalDepsUpToDate() then
				local localAPI = Lib.ReadFile("dex/rbx_api.dat")
				if localAPI then 
					rawAPI = localAPI
				else
					Main.DepsVersionData[1] = ""
				end
			end
			task.spawn(function()
				task.wait(10)
				if not downloaded and callbackiflong then callbackiflong() end

				task.wait(20) -- 30
				if not downloaded and callbackiftoolong then callbackiftoolong() end

				task.wait(30) -- 60
				if not downloaded and XD then XD() end
			end)
			-- lmfao async makes it work to load big file
			rawAPI = rawAPI or game:HttpGet("http://setup.roblox.com/"..Main.RobloxVersion.."-API-Dump.json")
		else
			if script:FindFirstChild("API") then
				rawAPI = require(script.API)
			else
				error("NO API EXISTS")
			end
		end
		downloaded = true
		
		Main.RawAPI = rawAPI
		api = service.HttpService:JSONDecode(rawAPI)

		local classes,enums = {},{}
		local categoryOrder,seenCategories = {},{}

		local function insertAbove(t,item,aboveItem)
			local findPos = table.find(t,item)
			if not findPos then return end
			table.remove(t,findPos)

			local pos = table.find(t,aboveItem)
			if not pos then return end
			table.insert(t,pos,item)
		end

		for _,class in pairs(api.Classes) do
			local newClass = {}
			newClass.Name = class.Name
			newClass.Superclass = class.Superclass
			newClass.Properties = {}
			newClass.Functions = {}
			newClass.Events = {}
			newClass.Callbacks = {}
			newClass.Tags = {}

			if class.Tags then for c,tag in pairs(class.Tags) do newClass.Tags[tag] = true end end
			for __,member in pairs(class.Members) do
				local newMember = {}
				newMember.Name = member.Name
				newMember.Class = class.Name
				newMember.Security = member.Security
				newMember.Tags ={}
				if member.Tags then for c,tag in pairs(member.Tags) do newMember.Tags[tag] = true end end

				local mType = member.MemberType
				if mType == "Property" then
					local propCategory = member.Category or "Other"
					propCategory = propCategory:match("^%s*(.-)%s*$")
					if not seenCategories[propCategory] then
						categoryOrder[#categoryOrder+1] = propCategory
						seenCategories[propCategory] = true
					end
					newMember.ValueType = member.ValueType
					newMember.Category = propCategory
					newMember.Serialization = member.Serialization
					table.insert(newClass.Properties,newMember)
				elseif mType == "Function" then
					newMember.Parameters = {}
					newMember.ReturnType = member.ReturnType.Name
					for c,param in pairs(member.Parameters) do
						table.insert(newMember.Parameters,{Name = param.Name, Type = param.Type.Name})
					end
					table.insert(newClass.Functions,newMember)
				elseif mType == "Event" then
					newMember.Parameters = {}
					for c,param in pairs(member.Parameters) do
						table.insert(newMember.Parameters,{Name = param.Name, Type = param.Type.Name})
					end
					table.insert(newClass.Events,newMember)
				end
			end

			classes[class.Name] = newClass
		end

		for _,class in pairs(classes) do
			class.Superclass = classes[class.Superclass]
		end

		for _,enum in pairs(api.Enums) do
			local newEnum = {}
			newEnum.Name = enum.Name
			newEnum.Items = {}
			newEnum.Tags = {}

			if enum.Tags then for c,tag in pairs(enum.Tags) do newEnum.Tags[tag] = true end end
			for __,item in pairs(enum.Items) do
				local newItem = {}
				newItem.Name = item.Name
				newItem.Value = item.Value
				table.insert(newEnum.Items,newItem)
			end

			enums[enum.Name] = newEnum
		end

		local function getMember(class,member)
			if not classes[class] or not classes[class][member] then return end
			local result = {}

			local currentClass = classes[class]
			while currentClass do
				for _,entry in pairs(currentClass[member]) do
					result[#result+1] = entry
				end
				currentClass = currentClass.Superclass
			end

			table.sort(result,function(a,b) return a.Name < b.Name end)
			return result
		end

		insertAbove(categoryOrder,"Behavior","Tuning")
		insertAbove(categoryOrder,"Appearance","Data")
		insertAbove(categoryOrder,"Attachments","Axes")
		insertAbove(categoryOrder,"Cylinder","Slider")
		insertAbove(categoryOrder,"Localization","Jump Settings")
		insertAbove(categoryOrder,"Surface","Motion")
		insertAbove(categoryOrder,"Surface Inputs","Surface")
		insertAbove(categoryOrder,"Part","Surface Inputs")
		insertAbove(categoryOrder,"Assembly","Surface Inputs")
		insertAbove(categoryOrder,"Character","Controls")
		categoryOrder[#categoryOrder+1] = "Unscriptable"
		categoryOrder[#categoryOrder+1] = "Attributes"

		local categoryOrderMap = {}
		for i = 1,#categoryOrder do
			categoryOrderMap[categoryOrder[i]] = i
		end

		return {
			Classes = classes,
			Enums = enums,
			CategoryOrder = categoryOrderMap,
			GetMember = getMember
		}
	end

	Main.FetchRMD = function()
		local rawXML
		if Main.Elevated then
			if Main.LocalDepsUpToDate() then
				local localRMD = Lib.ReadFile("dex/rbx_rmd.dat")
				if localRMD then 
					rawXML = localRMD
				else
					Main.DepsVersionData[1] = ""
				end
			end
			rawXML = rawXML or game:HttpGet("https://raw.githubusercontent.com/CloneTrooper1019/Roblox-Client-Tracker/roblox/ReflectionMetadata.xml")
		else
			if script:FindFirstChild("RMD") then
				rawXML = require(script.RMD)
			else
				error("NO RMD EXISTS")
			end
		end
		Main.RawRMD = rawXML
		local parsed = Lib.ParseXML(rawXML)
		local classList = parsed.children[1].children[1].children
		local enumList = parsed.children[1].children[2].children
		local propertyOrders = {}

		local classes,enums = {},{}
		for _,class in pairs(classList) do
			local className = ""
			for _,child in pairs(class.children) do
				if child.tag == "Properties" then
					local data = {Properties = {}, Functions = {}}
					local props = child.children
					for _,prop in pairs(props) do
						local name = prop.attrs.name
						name = name:sub(1,1):upper()..name:sub(2)
						data[name] = prop.children[1].text
					end
					className = data.Name
					classes[className] = data
				elseif child.attrs.class == "ReflectionMetadataProperties" then
					local members = child.children
					for _,member in pairs(members) do
						if member.attrs.class == "ReflectionMetadataMember" then
							local data = {}
							if member.children[1].tag == "Properties" then
								local props = member.children[1].children
								for _,prop in pairs(props) do
									if prop.attrs then
										local name = prop.attrs.name
										name = name:sub(1,1):upper()..name:sub(2)
										data[name] = prop.children[1].text
									end
								end
								if data.PropertyOrder then
									local orders = propertyOrders[className]
									if not orders then orders = {} propertyOrders[className] = orders end
									orders[data.Name] = tonumber(data.PropertyOrder)
								end
								classes[className].Properties[data.Name] = data
							end
						end
					end
				elseif child.attrs.class == "ReflectionMetadataFunctions" then
					local members = child.children
					for _,member in pairs(members) do
						if member.attrs.class == "ReflectionMetadataMember" then
							local data = {}
							if member.children[1].tag == "Properties" then
								local props = member.children[1].children
								for _,prop in pairs(props) do
									if prop.attrs then
										local name = prop.attrs.name
										name = name:sub(1,1):upper()..name:sub(2)
										data[name] = prop.children[1].text
									end
								end
								classes[className].Functions[data.Name] = data
							end
						end
					end
				end
			end
		end

		for _,enum in pairs(enumList) do
			local enumName = ""
			for _,child in pairs(enum.children) do
				if child.tag == "Properties" then
					local data = {Items = {}}
					local props = child.children
					for _,prop in pairs(props) do
						local name = prop.attrs.name
						name = name:sub(1,1):upper()..name:sub(2)
						data[name] = prop.children[1].text
					end
					enumName = data.Name
					enums[enumName] = data
				elseif child.attrs.class == "ReflectionMetadataEnumItem" then
					local data = {}
					if child.children[1].tag == "Properties" then
						local props = child.children[1].children
						for _,prop in pairs(props) do
							local name = prop.attrs.name
							name = name:sub(1,1):upper()..name:sub(2)
							data[name] = prop.children[1].text
						end
						enums[enumName].Items[data.Name] = data
					end
				end
			end
		end

		return {Classes = classes, Enums = enums, PropertyOrders = propertyOrders}
	end

	Main.ShowGui = Main.SecureGui

	Main.CreateIntro = function(initStatus) -- TODO: Must theme and show errors
		local gui = create({
			{1,"ScreenGui",{Name="Intro",}},
			{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="Main",Parent={1},Position=UDim2.new(0.5,-175,0.5,-100),Size=UDim2.new(0,350,0,200),}},
			{3,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Holder",Parent={2},Size=UDim2.new(1,0,1,0),}},
			{4,"UIGradient",{Parent={3},Rotation=30,Transparency=NumberSequence.new({NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),}),}},
			{5,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=4,Name="Title",Parent={3},Position=UDim2.new(0,-190,0,15),Size=UDim2.new(0,100,0,50),Text="Secret Service Panel",TextColor3=Color3.new(1,1,1),TextSize=25,TextTransparency=1,}},
			{6,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Desc",Parent={3},Position=UDim2.new(0,-230,0,60),Size=UDim2.new(0,180,0,25),Text="Be Free, Be Proud",TextColor3=Color3.new(1,1,1),TextSize=18,TextTransparency=1,}},
			{7,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="StatusText",Parent={3},Position=UDim2.new(0,20,0,110),Size=UDim2.new(0,180,0,25),Text="Fetching API",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=1,}},
			{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="ProgressBar",Parent={3},Position=UDim2.new(0,110,0,145),Size=UDim2.new(0,0,0,4),}},
			{9,"Frame",{BackgroundColor3=Color3.new(0.2392156869173,0.56078433990479,0.86274510622025),BorderSizePixel=0,Name="Bar",Parent={8},Size=UDim2.new(0,0,1,0),}},
			{10,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://2764171053",ImageColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),Parent={8},ScaleType=1,Size=UDim2.new(1,0,1,0),SliceCenter=Rect.new(2,2,254,254),}},
			{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Creator",Parent={2},Position=UDim2.new(1,-110,1,-20),Size=UDim2.new(0,105,0,20),Text="Agent Edition",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=1,}},
			{12,"UIGradient",{Parent={11},Transparency=NumberSequence.new({NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),}),}},
			{13,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Version",Parent={2},Position=UDim2.new(1,-110,1,-35),Size=UDim2.new(0,105,0,20),Text="V2.0.0",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=1,}},
			{14,"UIGradient",{Parent={13},Transparency=NumberSequence.new({NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),}),}},
			{15,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1427967925",Name="Outlines",Parent={2},Position=UDim2.new(0,-5,0,-5),ScaleType=1,Size=UDim2.new(1,10,1,10),SliceCenter=Rect.new(6,6,25,25),TileSize=UDim2.new(0,20,0,20),}},
			{16,"UIGradient",{Parent={15},Rotation=-30,Transparency=NumberSequence.new({NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),}),}},
			{17,"UIGradient",{Parent={2},Rotation=-30,Transparency=NumberSequence.new({NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),}),}},
		})
		Main.ShowGui(gui)
		local backGradient = gui.Main.UIGradient
		local outlinesGradient = gui.Main.Outlines.UIGradient
		local holderGradient = gui.Main.Holder.UIGradient
		local titleText = gui.Main.Holder.Title
		local descText = gui.Main.Holder.Desc
		local versionText = gui.Main.Version
		local versionGradient = versionText.UIGradient
		local creatorText = gui.Main.Creator
		local creatorGradient = creatorText.UIGradient
		local statusText = gui.Main.Holder.StatusText
		local progressBar = gui.Main.Holder.ProgressBar
		local tweenS = service.TweenService
		
		local renderStepped = service.RunService.RenderStepped
		local signalWait = renderStepped.wait
		local fastwait = function(s)
			if not s then return signalWait(renderStepped) end
			local start = tick()
			while tick() - start < s do signalWait(renderStepped) end
		end
		
		statusText.Text = initStatus
		
		local function tweenNumber(n,ti,func)
			local tweenVal = Instance.new("IntValue")
			tweenVal.Value = 0
			tweenVal.Changed:Connect(func)
			local tween = tweenS:Create(tweenVal,ti,{Value = n})
			tween:Play()
			tween.Completed:Connect(function()
				tweenVal:Destroy()
			end)
		end
		
		local ti = TweenInfo.new(0.4,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
		tweenNumber(100,ti,function(val)
			    val = val/200
				local start = NumberSequenceKeypoint.new(0,0)
				local a1 = NumberSequenceKeypoint.new(val,0)
				local a2 = NumberSequenceKeypoint.new(math.min(0.5,val+math.min(0.05,val)),1)
				if a1.Time == a2.Time then a2 = a1 end
				local b1 = NumberSequenceKeypoint.new(1-val,0)
				local b2 = NumberSequenceKeypoint.new(math.max(0.5,1-val-math.min(0.05,val)),1)
				if b1.Time == b2.Time then b2 = b1 end
				local goal = NumberSequenceKeypoint.new(1,0)
				backGradient.Transparency = NumberSequence.new({start,a1,a2,b2,b1,goal})
				outlinesGradient.Transparency = NumberSequence.new({start,a1,a2,b2,b1,goal})
		end)
		
		fastwait(0.4)
		
		tweenNumber(100,ti,function(val)
			val = val/166.66
			local start = NumberSequenceKeypoint.new(0,0)
			local a1 = NumberSequenceKeypoint.new(val,0)
			local a2 = NumberSequenceKeypoint.new(val+0.01,1)
			local goal = NumberSequenceKeypoint.new(1,1)
			holderGradient.Transparency = NumberSequence.new({start,a1,a2,goal})
		end)
		
		tweenS:Create(titleText,ti,{Position = UDim2.new(0,60,0,15), TextTransparency = 0}):Play()
		tweenS:Create(descText,ti,{Position = UDim2.new(0,20,0,60), TextTransparency = 0}):Play()
		
		local function rightTextTransparency(obj)
			tweenNumber(100,ti,function(val)
				val = val/100
				local a1 = NumberSequenceKeypoint.new(1-val,0)
				local a2 = NumberSequenceKeypoint.new(math.max(0,1-val-0.01),1)
				if a1.Time == a2.Time then a2 = a1 end
				local start = NumberSequenceKeypoint.new(0,a1 == a2 and 0 or 1)
				local goal = NumberSequenceKeypoint.new(1,0)
				obj.Transparency = NumberSequence.new({start,a2,a1,goal})
			end)
		end
		rightTextTransparency(versionGradient)
		rightTextTransparency(creatorGradient)
		
		fastwait(0.9)
		
		local progressTI = TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
		
		tweenS:Create(statusText,progressTI,{Position = UDim2.new(0,20,0,120), TextTransparency = 0}):Play()
		tweenS:Create(progressBar,progressTI,{Position = UDim2.new(0,60,0,145), Size = UDim2.new(0,100,0,4)}):Play()
		
		fastwait(0.25)
		
		local function setProgress(text,n)
			statusText.Text = text
			tweenS:Create(progressBar.Bar,progressTI,{Size = UDim2.new(n,0,1,0)}):Play()
		end
		
		local function close()
			tweenS:Create(titleText,progressTI,{TextTransparency = 1}):Play()
			tweenS:Create(descText,progressTI,{TextTransparency = 1}):Play()
			tweenS:Create(versionText,progressTI,{TextTransparency = 1}):Play()
			tweenS:Create(creatorText,progressTI,{TextTransparency = 1}):Play()
			tweenS:Create(statusText,progressTI,{TextTransparency = 1}):Play()
			tweenS:Create(progressBar,progressTI,{BackgroundTransparency = 1}):Play()
			tweenS:Create(progressBar.Bar,progressTI,{BackgroundTransparency = 1}):Play()
			tweenS:Create(progressBar.ImageLabel,progressTI,{ImageTransparency = 1}):Play()
			
			tweenNumber(100,TweenInfo.new(0.4,Enum.EasingStyle.Back,Enum.EasingDirection.In),function(val)
				val = val/250
				local start = NumberSequenceKeypoint.new(0,0)
				local a1 = NumberSequenceKeypoint.new(0.6+val,0)
				local a2 = NumberSequenceKeypoint.new(math.min(1,0.601+val),1)
				if a1.Time == a2.Time then a2 = a1 end
				local goal = NumberSequenceKeypoint.new(1,a1 == a2 and 0 or 1)
				holderGradient.Transparency = NumberSequence.new({start,a1,a2,goal})
			end)
			
			fastwait(0.5)
			gui.Main.BackgroundTransparency = 1
			outlinesGradient.Rotation = 30
			
			tweenNumber(100,ti,function(val)
				val = val/100
				local start = NumberSequenceKeypoint.new(0,1)
				local a1 = NumberSequenceKeypoint.new(val,1)
				local a2 = NumberSequenceKeypoint.new(math.min(1,val+math.min(0.05,val)),0)
				if a1.Time == a2.Time then a2 = a1 end
				local goal = NumberSequenceKeypoint.new(1,a1 == a2 and 1 or 0)
				outlinesGradient.Transparency = NumberSequence.new({start,a1,a2,goal})
				holderGradient.Transparency = NumberSequence.new({start,a1,a2,goal})
			end)
			
			fastwait(0.45)
			gui:Destroy()
		end
		
		return {SetProgress = setProgress, Close = close}
	end

	Main.CreateApp = function(data)
		if Main.MenuApps[data.Name] then return end -- TODO: Handle conflict
		local control = {}

		local app = Main.AppTemplate:Clone()

		local iconIndex = data.Icon
		if data.IconMap and iconIndex then
			if type(iconIndex) == "number" then
				data.IconMap:Display(app.Main.Icon,iconIndex)
			elseif type(iconIndex) == "string" then
				data.IconMap:DisplayByKey(app.Main.Icon,iconIndex)
			end
		elseif type(iconIndex) == "string" then
			app.Main.Icon.Image = iconIndex
		else
			app.Main.Icon.Image = ""
		end

		local function updateState()
			app.Main.BackgroundTransparency = data.Open and 0 or (Lib.CheckMouseInGui(app.Main) and 0 or 1)
			app.Main.Highlight.Visible = data.Open
		end

		local function enable(silent)
			if data.Open then return end
			data.Open = true
			updateState()
			if not silent then
				if data.Window then data.Window:Show() end
				if data.OnClick then data.OnClick(data.Open) end
			end
		end

		local function disable(silent)
			if not data.Open then return end
			data.Open = false
			updateState()
			if not silent then
				if data.Window then data.Window:Hide() end
				if data.OnClick then data.OnClick(data.Open) end
			end
		end

		updateState()

		local ySize = service.TextService:GetTextSize(data.Name,14,Enum.Font.SourceSans,Vector2.new(62,999999)).Y
		app.Main.Size = UDim2.new(1,0,0,math.clamp(46+ySize,60,74))
		app.Main.AppName.Text = data.Name

		app.Main.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				app.Main.BackgroundTransparency = 0
				app.Main.BackgroundColor3 = Settings.Theme.ButtonHover
			end
		end)
		

		app.Main.InputEnded:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				app.Main.BackgroundTransparency = data.Open and 0 or 1
				app.Main.BackgroundColor3 = Settings.Theme.Button
			end
		end)

		app.Main.MouseButton1Click:Connect(function()
			if data.Open then disable() else enable() end
		end)

		local window = data.Window
		if window then
			window.OnActivate:Connect(function() enable(true) end)
			window.OnDeactivate:Connect(function() disable(true) end)
		end

		app.Visible = true
		app.Parent = Main.AppsContainer
		Main.AppsFrame.CanvasSize = UDim2.new(0,0,0,Main.AppsContainerGrid.AbsoluteCellCount.Y*82 + 8)

		control.Enable = enable
		control.Disable = disable
		Main.MenuApps[data.Name] = control
		return control
	end

	Main.SetMainGuiOpen = function(val)
		Main.MainGuiOpen = val
		
		Main.MainGui.OpenButton.Text = val and "X" or "Dex"
		if val then Main.MainGui.OpenButton.MainFrame.Visible = true end
		Main.MainGui.OpenButton.MainFrame:TweenSize(val and UDim2.new(0,224,0,200) or UDim2.new(0,0,0,0),Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.2,true)
		--Main.MainGui.OpenButton.BackgroundTransparency = val and 0 or (Lib.CheckMouseInGui(Main.MainGui.OpenButton) and 0 or 0.2)
		service.TweenService:Create(Main.MainGui.OpenButton,TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency = val and 0 or (Lib.CheckMouseInGui(Main.MainGui.OpenButton) and 0 or 0.2)}):Play()
		
		if Main.MainGuiMouseEvent then Main.MainGuiMouseEvent:Disconnect() end
		
		if not val then
			local startTime = tick()
			Main.MainGuiCloseTime = startTime
			coroutine.wrap(function()
				Lib.FastWait(0.2)
				if not Main.MainGuiOpen and startTime == Main.MainGuiCloseTime then Main.MainGui.OpenButton.MainFrame.Visible = false end
			end)()
		else
			Main.MainGuiMouseEvent = service.UserInputService.InputBegan:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and not Lib.CheckMouseInGui(Main.MainGui.OpenButton) and not Lib.CheckMouseInGui(Main.MainGui.OpenButton.MainFrame) then
					
					Main.SetMainGuiOpen(false)
				end
			end)
		end
	end
	
	Main.CreateMainGui = function()
		local gui = create({
			{1,"ScreenGui",{IgnoreGuiInset=true,Name="MainMenu",}},
			{2,"TextButton",{AnchorPoint=Vector2.new(0.5,0),AutoButtonColor=false,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,Font=4,Name="OpenButton",Parent={1},Position=UDim2.new(0.5,0,0,2),Size=UDim2.new(0,32,0,32),Text="Dex",TextColor3=Color3.new(1,1,1),TextSize=16,TextTransparency=0.20000000298023,}},
			{3,"UICorner",{CornerRadius=UDim.new(0,4),Parent={2},}},
			{4,"Frame",{AnchorPoint=Vector2.new(0.5,0),BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),ClipsDescendants=true,Name="MainFrame",Parent={2},Position=UDim2.new(0.5,0,1,-4),Size=UDim2.new(0,224,0,200),}},
			{5,"UICorner",{CornerRadius=UDim.new(0,4),Parent={4},}},
			{6,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),Name="BottomFrame",Parent={4},Position=UDim2.new(0,0,1,-24),Size=UDim2.new(1,0,0,24),}},
			{7,"UICorner",{CornerRadius=UDim.new(0,4),Parent={6},}},
			{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="CoverFrame",Parent={6},Size=UDim2.new(1,0,0,4),}},
			{9,"Frame",{BackgroundColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),BorderSizePixel=0,Name="Line",Parent={8},Position=UDim2.new(0,0,0,-1),Size=UDim2.new(1,0,0,1),}},
			{10,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Settings",Parent={6},Position=UDim2.new(1,-48,0,0),Size=UDim2.new(0,24,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
			{11,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6578871732",ImageTransparency=0.20000000298023,Name="Icon",Parent={10},Position=UDim2.new(0,4,0,4),Size=UDim2.new(0,16,0,16),}},
			{12,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Information",Parent={6},Position=UDim2.new(1,-24,0,0),Size=UDim2.new(0,24,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
			{13,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6578933307",ImageTransparency=0.20000000298023,Name="Icon",Parent={12},Position=UDim2.new(0,4,0,4),Size=UDim2.new(0,16,0,16),}},
			{14,"ScrollingFrame",{Active=true,AnchorPoint=Vector2.new(0.5,0),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),BorderSizePixel=0,Name="AppsFrame",Parent={4},Position=UDim2.new(0.5,0,0,0),ScrollBarImageColor3=Color3.new(0,0,0),ScrollBarThickness=4,Size=UDim2.new(0,222,1,-25),}},
			{15,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="Container",Parent={14},Position=UDim2.new(0,7,0,8),Size=UDim2.new(1,-14,0,2),}},
			{16,"UIGridLayout",{CellSize=UDim2.new(0,66,0,74),Parent={15},SortOrder=2,}},
			{17,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="App",Parent={1},Size=UDim2.new(0,100,0,100),Visible=false,}},
			{18,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderSizePixel=0,Font=3,Name="Main",Parent={17},Size=UDim2.new(1,0,0,60),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
			{19,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6579106223",ImageRectSize=Vector2.new(32,32),Name="Icon",Parent={18},Position=UDim2.new(0.5,-16,0,4),ScaleType=4,Size=UDim2.new(0,32,0,32),}},
			{20,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="AppName",Parent={18},Position=UDim2.new(0,2,0,38),Size=UDim2.new(1,-4,1,-40),Text="Explorer",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,TextTruncate=1,TextWrapped=true,TextYAlignment=0,}},
			{21,"Frame",{BackgroundColor3=Color3.new(0,0.66666668653488,1),BorderSizePixel=0,Name="Highlight",Parent={18},Position=UDim2.new(0,0,1,-2),Size=UDim2.new(1,0,0,2),}},
		})
		Main.MainGui = gui
		Main.AppsFrame = gui.OpenButton.MainFrame.AppsFrame
		Main.AppsContainer = Main.AppsFrame.Container
		Main.AppsContainerGrid = Main.AppsContainer.UIGridLayout
		Main.AppTemplate = gui.App
		Main.MainGuiOpen = false
		
		local openButton = gui.OpenButton
		openButton.BackgroundTransparency = 0.2
		openButton.MainFrame.Size = UDim2.new(0,0,0,0)
		openButton.MainFrame.Visible = false
		openButton.MouseButton1Click:Connect(function()
			Main.SetMainGuiOpen(not Main.MainGuiOpen)
		end)
		
		openButton.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				service.TweenService:Create(Main.MainGui.OpenButton,TweenInfo.new(0,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency = 0}):Play()
			end
		end)

		openButton.InputEnded:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				service.TweenService:Create(Main.MainGui.OpenButton,TweenInfo.new(0,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency = Main.MainGuiOpen and 0 or 0.2}):Play()
			end
		end)

		-- Create Main Apps
		Main.CreateApp({Name = "Explorer", IconMap = Main.LargeIcons, Icon = "Explorer", Open = true, Window = Explorer.Window})

		Main.CreateApp({Name = "Properties", IconMap = Main.LargeIcons, Icon = "Properties", Open = true, Window = Properties.Window})

		Main.CreateApp({Name = "ScriptViewer", IconMap = Main.LargeIcons, Icon = "Script_Viewer", Window = ScriptViewer.Window})
		
		Main.CreateApp({Name = "3D Viewer", IconMap = Main.LargeIcons, Icon = 6, Window = ModelViewer.Window})
		
		Main.CreateApp({Name = "SS Panel", IconMap = Main.LargeIcons, Icon = "Output", Window = SecretServicePanel.Window})
		
		Main.CreateApp({Name = "DataStoreEditor", IconMap = Main.LargeIcons, Icon = "Data"})
		

		Lib.ShowGui(gui)
	end

	Main.SetupFilesystem = function()
		if not env.writefile or not env.makefolder then return end

		local writefile,makefolder = env.writefile,env.makefolder

		makefolder("dex")
		makefolder("dex/assets")
		makefolder("dex/saved")
		makefolder("dex/plugins")
		makefolder("dex/ModuleCache")
	end

	Main.LocalDepsUpToDate = function()
		return Main.DepsVersionData and Main.ClientVersion == Main.DepsVersionData[1]
	end

	Main.Init = function()
		Main.Elevated = pcall(function()
			local player = game:GetService("Players").LocalPlayer
			local a = player:WaitForChild("PlayerGui"):GetFullName()
		end)
		Main.InitEnv()
		Main.LoadSettings()
		Main.SetupFilesystem()

		-- Load Lib
		local intro = Main.CreateIntro("Initializing Library")
		Lib = Main.LoadModule("Lib")
		Lib.FastWait()

		-- Init other stuff
		Main.IncompatibleTest()

		-- Init icons
		Main.MiscIcons = Lib.IconMap.new("rbxassetid://6511490623",256,256,16,16)
		Main.MiscIcons:SetDict({
			Reference = 0,             Cut = 1,                         Cut_Disabled = 2,      Copy = 3,               Copy_Disabled = 4,    Paste = 5,                Paste_Disabled = 6,
			Delete = 7,                Delete_Disabled = 8,             Group = 9,             Group_Disabled = 10,    Ungroup = 11,         Ungroup_Disabled = 12,    TeleportTo = 13,
			Rename = 14,               JumpToParent = 15,               ExploreData = 16,      Save = 17,              CallFunction = 18,    CallRemote = 19,          Undo = 20,
			Undo_Disabled = 21,        Redo = 22,                       Redo_Disabled = 23,    Expand_Over = 24,       Expand = 25,          Collapse_Over = 26,       Collapse = 27,
			SelectChildren = 28,       SelectChildren_Disabled = 29,    InsertObject = 30,     ViewScript = 31,        AddStar = 32,         RemoveStar = 33,          Script_Disabled = 34,
			LocalScript_Disabled = 35, Play = 36,                       Pause = 37,            Rename_Disabled = 38
		})
		Main.LargeIcons = Lib.IconMap.new("rbxassetid://6579106223",256,256,32,32)
		Main.LargeIcons:SetDict({
			Explorer = 0, Properties = 1, Script_Viewer = 2, Watcher = 3, Output = 4, Data = 5
		})
		
		-- Loading bypasses
		intro.SetProgress("Fetching Roblox Version",0.1)
		pcall(Main.LoadAdonisBypass)
		
		intro.SetProgress("Fetching Roblox Version",0.2)
		pcall(Main.LoadGCBypass)

		-- Fetch version if needed
		intro.SetProgress("Fetching Roblox Version",0.3)
		if Main.Elevated then
			local fileVer = Lib.ReadFile("dex/deps_version.dat")
			Main.ClientVersion = Version()
			if fileVer then
				Main.DepsVersionData = string.split(fileVer,"\n")
				if Main.LocalDepsUpToDate() then
					Main.RobloxVersion = Main.DepsVersionData[2]
				end
			end
			
			Main.RobloxVersion = Main.RobloxVersion or oldgame:HttpGet("https://clientsettings.roblox.com/v2/client-version/WindowsStudio64/channel/LIVE"):match("(version%-[%w]+)")
		end

		-- Fetch external deps
		intro.SetProgress("Fetching API",0.35)

		Lib.FastWait()
		intro.SetProgress("Fetching RMD",0.5)
		RMD = Main.FetchRMD()
		Lib.FastWait()

		-- Save external deps locally if needed
		if Main.Elevated and env.writefile and not Main.LocalDepsUpToDate() then
			env.writefile("dex/deps_version.dat",Main.ClientVersion.."\n"..Main.RobloxVersion)
			env.writefile("dex/rbx_api.dat",Main.RawAPI)
			env.writefile("dex/rbx_rmd.dat",Main.RawRMD)
		end

		-- Load other modules
		intro.SetProgress("Loading Modules",0.75)
		Main.AppControls.Lib.InitDeps(Main.GetInitDeps()) -- Missing deps now available
		Main.LoadModules()
		Lib.FastWait()

		-- Init other modules
		intro.SetProgress("Initializing Modules",0.9)
		SecretServicePanel.Init()
		
		Lib.FastWait()

		-- Done
		intro.SetProgress("Complete",1)
		coroutine.wrap(function()
			Lib.FastWait(1.25)
			intro.Close()
		end)()

		-- Init window system, create main menu, show explorer and properties
		Lib.Window.Init()
		SecretServicePanel.Window:Show()
	end

	return Main
end)()

-- Start
Main.Init()

--for i,v in pairs(Main.MissingEnv) do print(i,v) end
